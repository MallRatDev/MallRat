<!DOCTYPE html>
<html class="init-no-js">
<head>
<meta charset="UTF-8" />
<title>SugarCube</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.13.0): A free (gratis and libre) story format, based on TiddlyWiki.

Copyright © 2013–2017 Thomas Michael Edwards <tmedwards@motoslave.net>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<!--

Build Info:
  * Built on Tue, 28 Feb 2017 11:38:43 -0500
  * Compiled with tweego (0.99.0; 2016-04-26)

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.className="init-loading";
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
if("document" in self){if(!("classList" in document.createElement("_"))){(function(j){"use strict";if(!("Element" in j)){return}var a="classList",f="prototype",m=j.Element[f],b=Object,k=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array[f].indexOf||function(q){var p=0,o=this.length;for(;p<o;p++){if(p in this&&this[p]===q){return p}}return -1},n=function(o,p){this.name=o;this.code=DOMException[o];this.message=p},g=function(p,o){if(o===""){throw new n("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(o)){throw new n("INVALID_CHARACTER_ERR","String contains an invalid character")}return c.call(p,o)},d=function(s){var r=k.call(s.getAttribute("class")||""),q=r?r.split(/\s+/):[],p=0,o=q.length;for(;p<o;p++){this.push(q[p])}this._updateClassName=function(){s.setAttribute("class",this.toString())}},e=d[f]=[],i=function(){return new d(this)};n[f]=Error[f];e.item=function(o){return this[o]||null};e.contains=function(o){o+="";return g(this,o)!==-1};e.add=function(){var s=arguments,r=0,p=s.length,q,o=false;do{q=s[r]+"";if(g(this,q)===-1){this.push(q);o=true}}while(++r<p);if(o){this._updateClassName()}};e.remove=function(){var t=arguments,s=0,p=t.length,r,o=false,q;do{r=t[s]+"";q=g(this,r);while(q!==-1){this.splice(q,1);o=true;q=g(this,r)}}while(++s<p);if(o){this._updateClassName()}};e.toggle=function(p,q){p+="";var o=this.contains(p),r=o?q!==true&&"remove":q!==false&&"add";if(r){this[r](p)}if(q===true||q===false){return q}else{return !o}};e.toString=function(){return this.join(" ")};if(b.defineProperty){var l={get:i,enumerable:true,configurable:true};try{b.defineProperty(m,a,l)}catch(h){if(h.number===-2146823252){l.enumerable=false;b.defineProperty(m,a,l)}}}else{if(b[f].__defineGetter__){m.__defineGetter__(a,i)}}}(self))}else{(function(){var b=document.createElement("_");b.classList.add("c1","c2");if(!b.classList.contains("c2")){var c=function(e){var d=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(h){var g,f=arguments.length;for(g=0;g<f;g++){h=arguments[g];d.call(this,h)}}};c("add");c("remove")}b.classList.toggle("c3",false);if(b.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(d,e){if(1 in arguments&&!this.contains(d)===!e){return e}else{return a.call(this,d)}}}b=null}())}};
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.9/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},j=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},E="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return j(t)}if(O(t)){return false}var r=T.call(t);return r===E||r===I};var M;var U=RegExp.prototype.exec,F=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},N="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?F(t):T.call(t)===N};var C;var k=String.prototype.valueOf,A=function tryStringObject(t){try{k.call(t);return true}catch(r){return false}},R="[object String]";C=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?A(t):T.call(t)===R};var P=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var $=function(t){var r;if(P){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var Z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var z=function Empty(){};$(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){z.prototype=r.prototype;a.prototype=new z;z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var B=d.bind(n.toString);var H=d.bind(s);var W=g.bind(s);var L=d.bind(f.slice);var X=d.bind(f.split);var q=d.bind(f.indexOf);var K=d.bind(v);var Q=d.bind(n.propertyIsEnumerable);var V=d.bind(r.sort);var _=t.isArray||function isArray(t){return B(t)==="[object Array]"};var tt=[].unshift(0)!==1;$(r,{unshift:function(){h.apply(this,arguments);return this.length}},tt);$(t,{isArray:_});var rt=e("a");var et=rt[0]!=="a"||!(0 in rt);var nt=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};$(r,{forEach:function forEach(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=-1;var i=Z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!nt(r.forEach));$(r,{map:function map(r){var e=Z.ToObject(this);var n=et&&C(this)?X(this,""):e;var i=Z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!nt(r.map));$(r,{filter:function filter(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){K(i,a)}}}return i}},!nt(r.filter));$(r,{every:function every(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!nt(r.every));$(r,{some:function some(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!nt(r.some));var it=false;if(r.reduce){it=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}$(r,{reduce:function reduce(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!it);var at=false;if(r.reduceRight){at=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}$(r,{reduceRight:function reduceRight(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!at);var ot=r.indexOf&&[0,1].indexOf(1,2)!==-1;$(r,{indexOf:function indexOf(t){var r=et&&C(this)?X(this,""):Z.ToObject(this);var e=Z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=Z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},ot);var ft=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;$(r,{lastIndexOf:function lastIndexOf(t){var r=et&&C(this)?X(this,""):Z.ToObject(this);var e=Z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,Z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},ft);var ut=function(){var t=[1,2];var r=t.splice();return t.length===2&&_(r)&&r.length===0}();$(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ut);var lt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();$(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(Z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=H(arguments);if(e.length<2){K(e,this.length-t)}else{e[1]=Z.ToInteger(r)}}return c.apply(this,e)}},!lt);var st=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var ct=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();$(r,{splice:function splice(t,r){var e=Z.ToObject(this);var n=[];var i=Z.ToUint32(e.length);var a=Z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=b(w(Z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=H(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!st||!ct);var vt=r.join;var ht;try{ht=Array.prototype.join.call("123",",")!=="1,2,3"}catch(pt){ht=true}if(ht){$(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return vt.call(C(this)?X(this,""):this,r)}},ht)}var yt=[1,2].join(undefined)!=="1,2";if(yt){$(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return vt.call(this,r)}},yt)}var dt=function push(t){var r=Z.ToObject(this);var e=Z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var gt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();$(r,{push:function push(t){if(_(this)){return v.apply(this,arguments)}return dt.apply(this,arguments)}},gt);var wt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();$(r,{push:dt},wt);$(r,{slice:function(t,r){var e=C(this)?X(this,""):this;return W(e,arguments)}},et);var bt=function(){try{[1,2].sort(null);[1,2].sort({});return true}catch(t){}return false}();var Tt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var mt=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();$(r,{sort:function sort(t){if(typeof t==="undefined"){return V(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return V(this,t)}},bt||!mt||!Tt);var Dt=!Q({toString:null},"toString");var St=Q(function(){},"prototype");var xt=!G("x","0");var Ot=function(t){var r=t.constructor;return r&&r.prototype===t};var jt={$window:true,$console:true,$parent:true,$self:true,$frame:true,$frames:true,$frameElement:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$external:true};var Et=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!jt["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){Ot(window[t])}}catch(r){return true}}return false}();var It=function(t){if(typeof window==="undefined"||!Et){return Ot(t)}try{return Ot(t)}catch(r){return false}};var Mt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ut=Mt.length;var Ft=function isArguments(t){return B(t)==="[object Arguments]"};var Nt=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!_(t)&&D(t.callee)};var Ct=Ft(arguments)?Ft:Nt;$(e,{keys:function keys(t){var r=D(t);var e=Ct(t);var n=t!==null&&typeof t==="object";var i=n&&C(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=St&&r;if(i&&xt||e){for(var u=0;u<t.length;++u){K(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){K(a,o(l))}}}if(Dt){var s=It(t);for(var c=0;c<Ut;c++){var v=Mt[c];if(!(s&&v==="constructor")&&G(t,v)){K(a,v)}}}return a}});var kt=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var At=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Rt=e.keys;$(e,{keys:function keys(t){if(Ct(t)){return Rt(H(t))}else{return Rt(t)}}},!kt||At);var Pt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var $t=new Date(-0x55d318d56a724);var Jt=new Date(14496624e5);var Yt=$t.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Zt;var zt;var Gt=$t.getTimezoneOffset();if(Gt<-720){Zt=$t.toDateString()!=="Tue Jan 02 -45875";zt=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Jt.toString())}else{Zt=$t.toDateString()!=="Mon Jan 01 -45875";zt=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Jt.toString())}var Bt=d.bind(Date.prototype.getFullYear);var Ht=d.bind(Date.prototype.getMonth);var Wt=d.bind(Date.prototype.getDate);var Lt=d.bind(Date.prototype.getUTCFullYear);var Xt=d.bind(Date.prototype.getUTCMonth);var qt=d.bind(Date.prototype.getUTCDate);var Kt=d.bind(Date.prototype.getUTCDay);var Qt=d.bind(Date.prototype.getUTCHours);var Vt=d.bind(Date.prototype.getUTCMinutes);var _t=d.bind(Date.prototype.getUTCSeconds);var tr=d.bind(Date.prototype.getUTCMilliseconds);var rr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var er=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var nr=function daysInMonth(t,r){return Wt(new Date(r,t,0))};$(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Ht(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Ht(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Ht(this);var e=Wt(this);if(t<0&&r>11){if(r===12){return e}var n=nr(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Lt(this);if(t<0&&Xt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Lt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Lt(this);var r=Xt(this);var e=qt(this);if(t<0&&r>11){if(r===12){return e}var n=nr(0,t+1);return n-e+1}return e}},Pt);$(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Kt(this);var r=qt(this);var e=Xt(this);var n=Lt(this);var i=Qt(this);var a=Vt(this);var o=_t(this);return rr[t]+", "+(r<10?"0"+r:r)+" "+er[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Pt||Yt);$(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return rr[t]+" "+er[e]+" "+(r<10?"0"+r:r)+" "+n}},Pt||Zt);if(Pt||zt){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return rr[t]+" "+er[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(P){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var ir=-621987552e5;var ar="-000001";var or=Date.prototype.toISOString&&new Date(ir).toISOString().indexOf(ar)===-1;var fr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var ur=d.bind(Date.prototype.getTime);$(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(ur(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=Lt(this);var r=Xt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,qt(this),Qt(this),Vt(this),_t(this)];t=(t<0?"-":t>9999?"+":"")+L("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=L("00"+e[n],-2)}return t+"-"+H(e,0,2).join("-")+"T"+H(e,2).join(":")+"."+L("000"+tr(this),-3)+"Z"}},or||fr);var lr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(ir).toJSON().indexOf(ar)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!lr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=Z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var sr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var cr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var vr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(vr||cr||!sr){var hr=Math.pow(2,31)-1;var pr=Y(new Date(1970,0,1,0,0,0,hr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(pr&&s>=7&&l>hr){var p=Math.floor(l/hr)*hr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){$(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(pr&&n>hr){var i=Math.floor(n/hr)*hr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}$(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;$(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};$(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var yr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128");var dr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<dr.size){n+=t*dr.data[e];dr.data[e]=n%dr.base;n=Math.floor(n/dr.base)}},divide:function divide(t){var r=dr.size;var e=0;while(--r>=0){e+=dr.data[r];dr.data[r]=Math.floor(e/t);e=e%t*dr.base}},numToString:function numToString(){var t=dr.size;var r="";while(--t>=0){if(r!==""||t===0||dr.data[t]!==0){var e=o(dr.data[t]);if(r===""){r=e}else{r+=L("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var gr=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=dr.log(e*dr.pow(2,69,1))-69;f=a<0?e*dr.pow(2,-a,1):e/dr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){dr.multiply(0,f);l=r;while(l>=7){dr.multiply(1e7,0);l-=7}dr.multiply(dr.pow(10,l,1),0);l=a-1;while(l>=23){dr.divide(1<<23);l-=23}dr.divide(1<<l);dr.multiply(1,1);dr.divide(2);i=dr.numToString()}else{dr.multiply(0,f);dr.multiply(1<<-a,0);i=dr.numToString()+L("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+L("0.0000000000000000000",0,r-s+2)+i}else{i=n+L(i,0,s-r)+"."+L(i,s-r)}}else{i=n+i}return i};$(l,{toFixed:gr},yr);var wr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var br=l.toPrecision;$(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?br.call(this):br.call(this,t)}},wr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return X(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:Z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){K(a,L(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,H(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){K(a,"")}}else{K(a,L(i,f))}return a.length>p?H(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return X(this,t,r)}}var Tr=f.replace;var mr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){K(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!mr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Tr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;K(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Tr.call(this,t,i)}}}var Dr=f.substr;var Sr="".substr&&"0b".substr(-1)!=="b";$(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return Dr.call(this,e,r)}},Sr);var xr="	\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var Or="\u200b";var jr="["+xr+"]";var Er=new RegExp("^"+jr+jr+"*");var Ir=new RegExp(jr+jr+"*$");var Mr=f.trim&&(xr.trim()||!Or.trim());$(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Er,"").replace(Ir,"")}},Mr);var Ur=d.bind(String.prototype.trim);var Fr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;$(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:Z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=q(L(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Fr);var Nr=f.lastIndexOf;$(f,{lastIndexOf:function lastIndexOf(t){return Nr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(xr+"08")!==8||parseInt(xr+"0x16")!==22){parseInt=function(t){var r=/^[\-+]?0[xX]/;return function parseInt(e,n){var i=Ur(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Ur(String(r));var n=t(e);return n===0&&L(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var Cr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=Cr}if(P){var kr=function(t,r){if(Q(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};kr(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}kr(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Ar=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Ar}});
//# sourceMappingURL=es5-shim.map
/*!
  * https://github.com/paulmillr/es6-shim
  * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
  *   and contributors,  MIT License
  * es6-shim: v0.35.3
  * see https://github.com/paulmillr/es6-shim/blob/0.35.1/LICENSE
  * Details and documentation:
  * https://github.com/paulmillr/es6-shim/
  */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(e){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(e){return false}};var u=o(i);var f=function(){return!i(function(){Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var F=Math.exp;var L=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function isArguments(e){return g(e)==="[object Arguments]"};var Q=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var ee=Y(arguments)?Y:Q;var te={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var re=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var ne=typeof $==="function"&&typeof $["for"]==="function"&&te.symbol($());var oe=te.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){oe="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ie=S.Reflect;var ae=String;var ue=typeof document==="undefined"||!document?null:document.all;var fe=ue==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==ue};var se={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!se.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(fe(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===ue},ToObject:function(e,t){return Object(se.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return se.IsCallable(e)},ToInt32:function(e){return se.ToNumber(e)>>0},ToUint32:function(e){return se.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=se.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=se.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return se.TypeIsObject(e)&&(typeof e[oe]!=="undefined"||ee(e))},GetIterator:function(e){if(ee(e)){return new q(e,"value")}var t=se.GetMethod(e,oe);if(!se.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=se.Call(t,e);if(!se.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=se.ToObject(e)[t];if(fe(r)){return void 0}if(!se.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=se.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=se.Call(r,e)}catch(e){o=e}if(t){return}if(o){throw o}if(!se.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!se.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=se.IteratorNext(e);var r=se.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ie.construct){return ie.construct(e,t,o)}var i=o.prototype;if(!se.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=se.Call(e,a,t);return se.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!se.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(fe(n)){return t}if(!se.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=se.ToString(e);var i="<"+t;if(r!==""){var a=se.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!se.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return te.regex(e)},ToString:function ToString(e){return ae(e)}};if(s&&ne){var ce=function defineWellKnownSymbol(e){if(te.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!te.symbol($.search)){var le=ce("search");var pe=String.prototype.search;h(RegExp.prototype,le,function search(e){return se.Call(pe,e,[this])});var ve=function search(e){var t=se.RequireObjectCoercible(this);if(!fe(e)){var r=se.GetMethod(e,le);if(typeof r!=="undefined"){return se.Call(r,e,[t])}}return se.Call(pe,t,[se.ToString(e)])};re(String.prototype,"search",ve)}if(!te.symbol($.replace)){var ye=ce("replace");var he=String.prototype.replace;h(RegExp.prototype,ye,function replace(e,t){return se.Call(he,e,[this,t])});var be=function replace(e,t){var r=se.RequireObjectCoercible(this);if(!fe(e)){var n=se.GetMethod(e,ye);if(typeof n!=="undefined"){return se.Call(n,e,[r,t])}}return se.Call(he,r,[se.ToString(e),t])};re(String.prototype,"replace",be)}if(!te.symbol($.split)){var ge=ce("split");var de=String.prototype.split;h(RegExp.prototype,ge,function split(e,t){return se.Call(de,e,[this,t])});var me=function split(e,t){var r=se.RequireObjectCoercible(this);if(!fe(e)){var n=se.GetMethod(e,ge);if(typeof n!=="undefined"){return se.Call(n,e,[r,t])}}return se.Call(de,r,[se.ToString(e),t])};re(String.prototype,"split",me)}var Oe=te.symbol($.match);var we=Oe&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!Oe||we){var je=ce("match");var Se=String.prototype.match;h(RegExp.prototype,je,function match(e){return se.Call(Se,e,[this])});var Te=function match(e){var t=se.RequireObjectCoercible(this);if(!fe(e)){var r=se.GetMethod(e,je);if(typeof r!=="undefined"){return se.Call(r,e,[t])}}return se.Call(Se,t,[se.ToString(e)])};re(String.prototype,"match",Te)}}var Ie=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Ee=function(){return this};var Pe=function(e){if(s&&!z(e,J)){m.getter(e,J,Ee)}};var Ce=function(e,t){var r=t||function iterator(){return this};h(e,oe,r);if(!e[oe]&&te.symbol(oe)){e[oe]=r}};var Me=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var xe=function createDataPropertyOrThrow(e,t,r){Me(e,t,r);if(!se.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ne=function(e,t,r,n){if(!se.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!se.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Ae=String.fromCodePoint;re(String,"fromCodePoint",function fromCodePoint(e){return se.Call(Ae,this,arguments)})}var Re={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!se.SameValue(r,se.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=se.ToObject(e,"bad callSite");var r=se.ToObject(t.raw,"bad raw value");var n=r.length;var o=se.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=se.ToString(a);s=se.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=se.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){re(String,"raw",Re.raw)}b(String,Re);var _e=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var ke=Infinity;var Fe={repeat:function repeat(e){var t=se.ToString(se.RequireObjectCoercible(this));var r=se.ToInteger(e);if(r<0||r>=ke){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return _e(t,r)},startsWith:function startsWith(e){var t=se.ToString(se.RequireObjectCoercible(this));if(se.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=se.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(se.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=se.ToString(se.RequireObjectCoercible(this));if(se.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=se.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:se.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(se.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=se.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=se.ToString(se.RequireObjectCoercible(this));var r=se.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){re(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var Le=i(function(){"/a/".startsWith(/a/)});var De=a(function(){return"abc".startsWith("a",Infinity)===false});if(!Le||!De){re(String.prototype,"startsWith",Fe.startsWith);re(String.prototype,"endsWith",Fe.endsWith)}}if(ne){var ze=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!ze){re(String.prototype,"startsWith",Fe.startsWith)}var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!qe){re(String.prototype,"endsWith",Fe.endsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!We){re(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var Ge=["\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var He=new RegExp("(^["+Ge+"]+)|(["+Ge+"]+$)","g");var Ve=function trim(){return se.ToString(se.RequireObjectCoercible(this)).replace(He,"")};var Be=["\x85","\u200b","\ufffe"].join("");var Ue=new RegExp("["+Be+"]","g");var $e=/^[-+]0x[0-9a-f]+$/i;var Je=Be.trim().length!==Be.length;h(String.prototype,"trim",Ve,Je);var Xe=function(e){return{value:e,done:arguments.length===0}};var Ke=function(e){se.RequireObjectCoercible(e);this._s=se.ToString(e);this._i=0};Ke.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Xe()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Xe(e.substr(t,o))};Ce(Ke.prototype);Ce(String.prototype,function(){return new Ke(this)});var Ze={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!se.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(ee(e)||se.GetMethod(e,oe))!=="undefined";var u,f,s;if(a){f=se.IsConstructor(r)?Object(new r):[];var c=se.GetIterator(e);var l,p;s=0;while(true){l=se.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(e){se.IteratorClose(c,true);throw e}s+=1}u=s}else{var v=se.ToObject(e);u=se.ToLength(v.length);f=se.IsConstructor(r)?Object(new r(u)):new Array(u);var y;for(s=0;s<u;++s){y=v[s];if(o){y=typeof i==="undefined"?n(y,s):t(n,i,y,s)}xe(f,s,y)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!se.IsCallable(t)?new Array(e):se.Construct(t,[e]);for(var o=0;o<e;++o){xe(n,o,arguments[o])}n.length=e;return n}};b(Array,Ze);Pe(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=se.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Xe(o)}}this.array=void 0;return Xe()}});Ce(q.prototype);var Ye=Array.of===Ze.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Ye){re(Array,"of",Ze.of)}var Qe={copyWithin:function copyWithin(e,t){var r=se.ToObject(this);var n=se.ToLength(r.length);var o=se.ToInteger(e);var i=se.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:se.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=se.ToObject(this);var o=se.ToLength(n.length);t=se.ToInteger(typeof t==="undefined"?0:t);r=se.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=se.ToObject(this);var n=se.ToLength(r.length);if(!se.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=se.ToObject(this);var n=se.ToLength(r.length);if(!se.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!se.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!se.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[oe]){b(Array.prototype,{values:Array.prototype[oe]});if(te.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var et=Array.prototype.values;re(Array.prototype,"values",function values(){return se.Call(et,this,arguments)});h(Array.prototype,oe,Array.prototype.values,true)}b(Array.prototype,Qe);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Ce(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Ce(Object.getPrototypeOf([].values()))}var tt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var rt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!tt||!rt){re(Array,"from",Ze.from)}var nt=function(){return a(function(){return Array.from([0],void 0)})}();if(!nt){var ot=Array.from;re(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return se.Call(ot,this,arguments)}else{return t(ot,this,e)}})}var it=-(Math.pow(2,32)-1);var at=function(e,r){var n={length:it};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!at(Array.prototype.forEach)){var ut=Array.prototype.forEach;re(Array.prototype,"forEach",function forEach(e){return se.Call(ut,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.map)){var ft=Array.prototype.map;re(Array.prototype,"map",function map(e){return se.Call(ft,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.filter)){var st=Array.prototype.filter;re(Array.prototype,"filter",function filter(e){return se.Call(st,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.some)){var ct=Array.prototype.some;re(Array.prototype,"some",function some(e){return se.Call(ct,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.every)){var lt=Array.prototype.every;re(Array.prototype,"every",function every(e){return se.Call(lt,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.reduce)){var pt=Array.prototype.reduce;re(Array.prototype,"reduce",function reduce(e){return se.Call(pt,this.length>=0?this:[],arguments)},true)}if(!at(Array.prototype.reduceRight,true)){var vt=Array.prototype.reduceRight;re(Array.prototype,"reduceRight",function reduceRight(e){return se.Call(vt,this.length>=0?this:[],arguments)},true)}var yt=Number("0o10")!==8;var ht=Number("0b10")!==2;var bt=y(Be,function(e){return Number(e+0+e)===0});if(yt||ht||bt){var gt=Number;var dt=/^0b[01]+$/i;var mt=/^0o[0-7]+$/i;var Ot=dt.test.bind(dt);var wt=mt.test.bind(mt);var jt=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(te.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(te.primitive(t)){return t}}throw new TypeError("No default value")};var St=Ue.test.bind(Ue);var Tt=$e.test.bind($e);var It=function(){var e=function Number(t){var r;if(arguments.length>0){r=te.primitive(t)?t:jt(t,"number")}else{r=0}if(typeof r==="string"){r=se.Call(Ve,r);if(Ot(r)){r=parseInt(C(r,2),2)}else if(wt(r)){r=parseInt(C(r,2),8)}else if(St(r)||Tt(r)){r=NaN}}var n=this;var o=a(function(){gt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new gt(r)}return gt(r)};return e}();Ie(gt,It,{});b(It,{NaN:gt.NaN,MAX_VALUE:gt.MAX_VALUE,MIN_VALUE:gt.MIN_VALUE,NEGATIVE_INFINITY:gt.NEGATIVE_INFINITY,POSITIVE_INFINITY:gt.POSITIVE_INFINITY});Number=It;m.redefine(S,"Number",It)}var Et=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Et,MIN_SAFE_INTEGER:-Et,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&se.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){re(Array.prototype,"find",Qe.find)}if([,1].findIndex(function(){return true})!==0){re(Array.prototype,"findIndex",Qe.findIndex)}var Pt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Ct=function ensureEnumerable(e,t){if(s&&Pt(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var Mt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var xt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var Nt=function(e,t){var r=n(Object(t));var o;if(se.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Pt(t))}return p(P(r,o||[]),xt(t),e)};var At={assign:function(e,t){var r=se.ToObject(e,"Cannot convert undefined or null to object");return p(se.Call(Mt,1,arguments),Nt,r)},is:function is(e,t){return se.SameValue(e,t)}};var Rt=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(Rt){re(Object,"assign",At.assign)}b(Object,At);if(s){var _t={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!se.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||se.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(t){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,_t)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var kt=!i(function(){Object.keys("foo")});if(!kt){var Ft=Object.keys;re(Object,"keys",function keys(e){return Ft(se.ToObject(e))});n=Object.keys}var Lt=i(function(){Object.keys(/a/g)});if(Lt){var Dt=Object.keys;re(Object,"keys",function keys(e){if(te.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return Dt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var zt=!i(function(){Object.getOwnPropertyNames("foo")});if(!zt){var qt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Wt=Object.getOwnPropertyNames;re(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=se.ToObject(e);if(g(t)==="[object Window]"){try{return Wt(t)}catch(e){return P([],qt)}}return Wt(t)})}}if(Object.getOwnPropertyDescriptor){var Gt=!i(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!Gt){var Ht=Object.getOwnPropertyDescriptor;re(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Ht(se.ToObject(e),t)})}}if(Object.seal){var Vt=!i(function(){Object.seal("foo")});if(!Vt){var Bt=Object.seal;re(Object,"seal",function seal(e){if(!se.TypeIsObject(e)){return e}return Bt(e)})}}if(Object.isSealed){var Ut=!i(function(){Object.isSealed("foo")});if(!Ut){var $t=Object.isSealed;re(Object,"isSealed",function isSealed(e){if(!se.TypeIsObject(e)){return true}return $t(e)})}}if(Object.freeze){var Jt=!i(function(){Object.freeze("foo")});if(!Jt){var Xt=Object.freeze;re(Object,"freeze",function freeze(e){if(!se.TypeIsObject(e)){return e}return Xt(e)})}}if(Object.isFrozen){var Kt=!i(function(){Object.isFrozen("foo")});if(!Kt){var Zt=Object.isFrozen;re(Object,"isFrozen",function isFrozen(e){if(!se.TypeIsObject(e)){return true}return Zt(e)})}}if(Object.preventExtensions){var Yt=!i(function(){Object.preventExtensions("foo")});if(!Yt){var Qt=Object.preventExtensions;re(Object,"preventExtensions",function preventExtensions(e){if(!se.TypeIsObject(e)){return e}return Qt(e)})}}if(Object.isExtensible){var er=!i(function(){Object.isExtensible("foo")});if(!er){var tr=Object.isExtensible;re(Object,"isExtensible",function isExtensible(e){if(!se.TypeIsObject(e)){return false}return tr(e)})}}if(Object.getPrototypeOf){var rr=!i(function(){Object.getPrototypeOf("foo")});if(!rr){var nr=Object.getPrototypeOf;re(Object,"getPrototypeOf",function getPrototypeOf(e){return nr(se.ToObject(e))})}}var or=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&se.IsCallable(e.get)}();if(s&&!or){var ir=function flags(){if(!se.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ir)}var ar=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var ur=ne&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var fr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var sr=fr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!fr||!sr){var cr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=se.RequireObjectCoercible(this);if(te.regex(e)){return t(cr,e)}var r=ae(e.source);var n=ae(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,cr)}if(s&&(!ar||ur)){var lr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var vr=function(){return this.source};var yr=se.IsCallable(pr.get)?pr.get:vr;var hr=RegExp;var br=function(){return function RegExp(e,t){var r=se.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(te.regex(e)){o=se.Call(yr,e);i=typeof t==="undefined"?se.Call(lr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new hr(e,t)}}();Ie(hr,br,{$input:true});RegExp=br;m.redefine(S,"RegExp",br)}if(s){var gr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(gr),function(e){if(e in RegExp&&!(gr[e]in RegExp)){m.getter(RegExp,gr[e],function get(){return RegExp[e]})}})}Pe(RegExp);var dr=1/Number.EPSILON;var mr=function roundTiesToEven(e){return e+dr-dr};var Or=Math.pow(2,-23);var wr=Math.pow(2,127)*(2-Or);var jr=Math.pow(2,-126);var Sr=Math.E;var Tr=Math.LOG2E;var Ir=Math.LOG10E;var Er=Number.prototype.clz;delete Number.prototype.clz;var Pr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}return L(t/Sr+D(t+1)*D(t-1)/Sr)+1},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}return t<0?-asinh(-t):L(t+D(t*t+1))},atanh:function atanh(e){var t=Number(e);if(X(t)||t<-1||t>1){return NaN}if(t===-1){return-Infinity}if(t===1){return Infinity}if(t===0){return t}return.5*L((1+t)/(1-t))},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=F(L(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=se.ToUint32(t);if(r===0){return 32}return Er?se.Call(Er,r):31-_(L(r+.5)*Tr)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}if(t<0){t=-t}if(t>21){return F(t)/2}return(F(t)+F(-t))/2},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return F(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return L(e)*Tr},log10:function log10(e){return L(e)*Ir},log1p:function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(L(1+t)/(1+t-1))},sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}if(k(t)<1){return(Math.expm1(t)-Math.expm1(-t))/2}return(F(t-1)-F(-t-1))*Sr/2},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(F(t)+F(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=se.ToUint32(e);var n=se.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<jr){return r*mr(n/jr/Or)*jr*Or}var o=(1+Or/Number.EPSILON)*n;var i=o-(o-n);if(i>wr||X(i)){return r*Infinity}return r*i}};b(Math,Pr);h(Math,"log1p",Pr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Pr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"tanh",Pr.tanh,Math.tanh(-2e-17)!==-2e-17);h(Math,"acosh",Pr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"cbrt",Pr.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8);h(Math,"sinh",Pr.sinh,Math.sinh(-2e-17)!==-2e-17);var Cr=Math.expm1(10);h(Math,"expm1",Pr.expm1,Cr>22025.465794806718||Cr<22025.465794806718);var Mr=Math.round;var xr=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Nr=dr+1;var Ar=2*dr-1;var Rr=[Nr,Ar].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;
return e-t<.5?t:r},!xr||!Rr);m.preserveToString(Math.round,Mr);var _r=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Pr.imul;m.preserveToString(Math.imul,_r)}if(Math.imul.length!==2){re(Math,"imul",function imul(e,t){return se.Call(_r,Math,arguments)})}var kr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}se.IsPromise=function(e){if(!se.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!se.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(se.IsCallable(t.resolve)&&se.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&se.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=se.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(se.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(e){n=e;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!se.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(t){return m(e,t)}if(!se.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(e){i(e)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!se.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ne(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(e){o(e)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=se.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(t){e.done=true;throw t}o[f]=void 0;var s=t.resolve(u);var c=P(f,o,r,i);i.count+=1;w(s.then,s,c,r.reject);f+=1}if(--i.count===0){var l=r.resolve;l(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=se.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(t){e.done=true;throw t}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!se.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=se.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(e){var a=e;if(i&&!i.done){try{se.IteratorClose(o,true)}catch(e){a=e}}var u=n.reject;u(a);return n.promise}},race:function race(e){var t=this;if(!se.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=se.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(e){var a=e;if(i&&!i.done){try{se.IteratorClose(o,true)}catch(e){a=e}}var u=n.reject;u(a);return n.promise}},reject:function reject(e){var t=this;if(!se.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!se.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(se.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{catch:function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!se.IsPromise(n)){throw new TypeError("not a promise")}var o=se.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=se.IsCallable(e)?e:a;var d=se.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof kr==="function"){b(S,{Promise:kr});var Fr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var Lr=!i(function(){S.Promise.reject(42).then(null,5).then(null,W)});var Dr=i(function(){S.Promise.call(3,W)});var zr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(e){return true}return t===r}(S.Promise);var qr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Wr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Wr.prototype=Promise.prototype;Wr.all=Promise.all;var Gr=a(function(){return!!Wr.all([1,2])});if(!Fr||!Lr||!Dr||zr||!qr||Gr){Promise=kr;re(S,"Promise",kr)}if(Promise.all.length!==1){var Hr=Promise.all;re(Promise,"all",function all(e){return se.Call(Hr,this,arguments)})}if(Promise.race.length!==1){var Vr=Promise.race;re(Promise,"race",function race(e){return se.Call(Vr,this,arguments)})}if(Promise.resolve.length!==1){var Br=Promise.resolve;re(Promise,"resolve",function resolve(e){return se.Call(Br,this,arguments)})}if(Promise.reject.length!==1){var Ur=Promise.reject;re(Promise,"reject",function reject(e){return se.Call(Ur,this,arguments)})}Ct(Promise,"all");Ct(Promise,"race");Ct(Promise,"resolve");Ct(Promise,"reject");Pe(Promise)}var $r=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Jr=$r(["z","a","bb"]);var Xr=$r(["z",1,"a","3",2]);if(s){var Kr=function fastkey(e,t){if(!t&&!Jr){return null}if(fe(e)){return"^"+se.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Xr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Zr=function emptyObject(){return Object.create?Object.create(null):{}};var Yr=function addIterableToMap(e,n,o){if(r(o)||te.string(o)){l(o,function(e){if(!se.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!fe(o)){a=n.set;if(!se.IsCallable(a)){throw new TypeError("bad map")}i=se.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=se.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!se.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(e){se.IteratorClose(i,true);throw e}}}}};var Qr=function addIterableToSet(e,n,o){if(r(o)||te.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!fe(o)){a=n.add;if(!se.IsCallable(a)){throw new TypeError("bad set")}i=se.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=se.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(e){se.IteratorClose(i,true);throw e}}}}};var en={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!se.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+se.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={next:function next(){var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Xe()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Xe(n)}}this.i=void 0;return Xe()}};Ce(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ne(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Zr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){Yr(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Kr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(se.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Kr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(se.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Kr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(se.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(se.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},delete:function(t){o(this,"delete");var r=this._head;var n=r;var i=Kr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(se.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Zr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Ce(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!se.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+se.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ne(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Zr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){Qr(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new en.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Kr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Kr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},delete:function(e){r(this,"delete");var t;if(this._storage&&(t=Kr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Zr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return this["[[SetData]]"].values()},entries:function entries(){r(this,"entries");u(this);return this["[[SetData]]"].entries()},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Ce(i.prototype,i.prototype.values);return i}()};if(S.Map||S.Set){var tn=a(function(){return new Map([[1,2]]).get(1)===2});if(!tn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){Yr(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var rn=new Map;var nn=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var on=rn.set(1,2)===rn;if(!nn||!on){re(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!nn){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var an=new Set;var un=function(e){e["delete"](0);e.add(-0);return!e.has(0)}(an);var fn=an.add(1)===an;if(!un||!fn){var sn=Set.prototype.add;Set.prototype.add=function add(e){t(sn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,sn)}if(!un){var cn=Set.prototype.has;Set.prototype.has=function has(e){return t(cn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,cn);var ln=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(ln,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],ln)}var pn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var vn=Object.setPrototypeOf&&!pn;var yn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||vn||!yn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){Yr(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var hn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||bn||!gn){var dn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new dn;if(arguments.length>0){Qr(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=dn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,dn)}var mn=new S.Map;var On=!a(function(){return mn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||mn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof mn.keys().next!=="function"||On||!pn){b(S,{Map:en.Map,Set:en.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Ce(Object.getPrototypeOf((new S.Map).keys()));Ce(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var wn=S.Set.prototype.has;re(S.Set.prototype,"has",function has(e){return t(wn,this,e)})}}b(S,en);Pe(S.Map);Pe(S.Set)}var jn=function throwUnlessTargetIsObject(e){if(!se.TypeIsObject(e)){throw new TypeError("target must be an object")}};var Sn={apply:function apply(){return se.Call(se.Call,null,arguments)},construct:function construct(e,t){if(!se.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!se.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return se.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){jn(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){jn(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(Sn,{ownKeys:function ownKeys(e){jn(e);var t=Object.getOwnPropertyNames(e);if(se.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Tn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(Sn,{isExtensible:function isExtensible(e){jn(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){jn(e);return Tn(function(){Object.preventExtensions(e)})}})}if(s){var In=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return In(o,t,r)}if("value"in n){return n.value}if(n.get){return se.Call(n.get,r)}return void 0};var En=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return En(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!se.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ie.defineProperty(o,r,{value:n})}else{return ie.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(Sn,{defineProperty:function defineProperty(e,t,r){jn(e);return Tn(function(){Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){jn(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){jn(e);var r=arguments.length>2?arguments[2]:e;return In(e,t,r)},set:function set(e,t,r){jn(e);var n=arguments.length>3?arguments[3]:e;return En(e,t,r,n)}})}if(Object.getPrototypeOf){var Pn=Object.getPrototypeOf;Sn.getPrototypeOf=function getPrototypeOf(e){jn(e);return Pn(e)}}if(Object.setPrototypeOf&&Sn.getPrototypeOf){var Cn=function(e,t){var r=t;while(r){if(e===r){return true}r=Sn.getPrototypeOf(r)}return false};Object.assign(Sn,{setPrototypeOf:function setPrototypeOf(e,t){jn(e);if(t!==null&&!se.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ie.getPrototypeOf(e)){return true}if(ie.isExtensible&&!ie.isExtensible(e)){return false}if(Cn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var Mn=function(e,t){if(!se.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){re(S.Reflect,e,t)}}};Object.keys(Sn).forEach(function(e){Mn(e,Sn[e])});var xn=S.Reflect.getPrototypeOf;if(c&&xn&&xn.name!=="getPrototypeOf"){re(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(xn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){re(S.Reflect,"setPrototypeOf",Sn.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){re(S.Reflect,"defineProperty",Sn.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){re(S.Reflect,"construct",Sn.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var Nn=Date.prototype.toString;var An=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return se.Call(Nn,this)};re(Date.prototype,"toString",An)}var Rn={anchor:function anchor(e){return se.CreateHTML(this,"a","name",e)},big:function big(){return se.CreateHTML(this,"big","","")},blink:function blink(){return se.CreateHTML(this,"blink","","")},bold:function bold(){return se.CreateHTML(this,"b","","")},fixed:function fixed(){return se.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return se.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return se.CreateHTML(this,"font","size",e)},italics:function italics(){return se.CreateHTML(this,"i","","")},link:function link(e){return se.CreateHTML(this,"a","href",e)},small:function small(){return se.CreateHTML(this,"small","","")},strike:function strike(){return se.CreateHTML(this,"strike","","")},sub:function sub(){return se.CreateHTML(this,"sub","","")},sup:function sub(){return se.CreateHTML(this,"sup","","")}};l(Object.keys(Rn),function(e){var r=String.prototype[e];var n=false;if(se.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){re(String.prototype,e,Rn[e])}});var _n=function(){if(!ne){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var kn=a(function(){if(!ne){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(_n||!kn){var Fn=JSON.stringify;re(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=se.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(te.symbol(n)){return xt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return Fn.apply(this,o)})}return S});
//# sourceMappingURL=es6-shim.map
/*! jQuery v3.1.1 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.1.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=r.isArray(d)))?(e?(e=!1,f=c&&r.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,C=/^.[^:#\[\.,]*$/;function D(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):C.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(D(this,a||[],!1))},not:function(a){return this.pushStack(D(this,a||[],!0))},is:function(a){return!!D(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var E,F=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,G=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||E,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:F.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),B.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};G.prototype=r.fn,E=r(d);var H=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function J(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return J(a,"nextSibling")},prev:function(a){return J(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(I[a]||r.uniqueSort(e),H.test(a)&&e.reverse()),this.pushStack(e)}});var K=/[^\x20\t\r\n\f]+/g;function L(a){var b={};return r.each(a.match(K)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?L(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function M(a){return a}function N(a){throw a}function O(a,b,c){var d;try{a&&r.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&r.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,M,e),g(f,c,N,e)):(f++,j.call(a,g(f,c,M,e),g(f,c,N,e),g(f,c,M,c.notifyWith))):(d!==M&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==N&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:M,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:M)),c[2][3].add(g(0,a,r.isFunction(d)?d:N))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(O(a,g.done(h(c)).resolve,g.reject),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)O(e[c],h(c),g.reject);return g.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&P.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var Q=r.Deferred();r.fn.ready=function(a){return Q.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||Q.resolveWith(d,[r]))}}),r.ready.then=Q.then;function R(){d.removeEventListener("DOMContentLoaded",R),
a.removeEventListener("load",R),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",R),a.addEventListener("load",R));var S=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)S(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},T=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function U(){this.expando=r.expando+U.uid++}U.uid=1,U.prototype={cache:function(a){var b=a[this.expando];return b||(b={},T(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){r.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(K)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var V=new U,W=new U,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function Z(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:X.test(a)?JSON.parse(a):a)}function $(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Y,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=Z(c)}catch(e){}W.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return W.hasData(a)||V.hasData(a)},data:function(a,b,c){return W.access(a,b,c)},removeData:function(a,b){W.remove(a,b)},_data:function(a,b,c){return V.access(a,b,c)},_removeData:function(a,b){V.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=W.get(f),1===f.nodeType&&!V.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),$(f,d,e[d])));V.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){W.set(this,a)}):S(this,function(b){var c;if(f&&void 0===b){if(c=W.get(f,a),void 0!==c)return c;if(c=$(f,a),void 0!==c)return c}else this.each(function(){W.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){W.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=V.get(a,b),c&&(!d||r.isArray(c)?d=V.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return V.get(a,c)||V.access(a,c,{empty:r.Callbacks("once memory").add(function(){V.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=V.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var _=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,aa=new RegExp("^(?:([+-])=|)("+_+")([a-z%]*)$","i"),ba=["Top","Right","Bottom","Left"],ca=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function ea(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&aa.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var fa={};function ga(a){var b,c=a.ownerDocument,d=a.nodeName,e=fa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),fa[d]=e,e)}function ha(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=V.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&ca(d)&&(e[f]=ga(d))):"none"!==c&&(e[f]="none",V.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ha(this,!0)},hide:function(){return ha(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ca(this)?r(this).show():r(this).hide()})}});var ia=/^(?:checkbox|radio)$/i,ja=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ka=/^$|\/(?:java|ecma)script/i,la={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};la.optgroup=la.option,la.tbody=la.tfoot=la.colgroup=la.caption=la.thead,la.th=la.td;function ma(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function na(a,b){for(var c=0,d=a.length;c<d;c++)V.set(a[c],"globalEval",!b||V.get(b[c],"globalEval"))}var oa=/<|&#?\w+;/;function pa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(oa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ja.exec(f)||["",""])[1].toLowerCase(),i=la[h]||la._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=ma(l.appendChild(f),"script"),j&&na(g),c){k=0;while(f=g[k++])ka.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var qa=d.documentElement,ra=/^key/,sa=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ta=/^([^.]*)(?:\.(.+)|)/;function ua(){return!0}function va(){return!1}function wa(){try{return d.activeElement}catch(a){}}function xa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)xa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=va;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(qa,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(K)||[""],j=b.length;while(j--)h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.hasData(a)&&V.get(a);if(q&&(i=q.events)){b=(b||"").match(K)||[""],j=b.length;while(j--)if(h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&V.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(V.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==wa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===wa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r.nodeName(this,"input"))return this.click(),!1},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ua:va,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:va,isPropagationStopped:va,isImmediatePropagationStopped:va,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ua,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ua,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ua,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&ra.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&sa.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return xa(this,a,b,c,d)},one:function(a,b,c,d){return xa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=va),this.each(function(){r.event.remove(this,a,c,b)})}});var ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,za=/<script|<style|<link/i,Aa=/checked\s*(?:[^=]|=\s*.checked.)/i,Ba=/^true\/(.*)/,Ca=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Da(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function Ea(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Fa(a){var b=Ba.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ga(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(V.hasData(a)&&(f=V.access(a),g=V.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}W.hasData(a)&&(h=W.access(a),i=r.extend({},h),W.set(b,i))}}function Ha(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ia.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ia(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Aa.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ia(f,b,c,d)});if(m&&(e=pa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(ma(e,"script"),Ea),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,ma(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Fa),l=0;l<i;l++)j=h[l],ka.test(j.type||"")&&!V.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Ca,""),k))}return a}function Ja(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(ma(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&na(ma(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(ya,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=ma(h),f=ma(a),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);if(b)if(c)for(f=f||ma(a),g=g||ma(h),d=0,e=f.length;d<e;d++)Ga(f[d],g[d]);else Ga(a,h);return g=ma(h,"script"),g.length>0&&na(g,!i&&ma(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(T(c)){if(b=c[V.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[V.expando]=void 0}c[W.expando]&&(c[W.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ja(this,a,!0)},remove:function(a){return Ja(this,a)},text:function(a){return S(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.appendChild(a)}})},prepend:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(ma(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return S(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!za.test(a)&&!la[(ja.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(ma(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ia(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(ma(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var Ka=/^margin/,La=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),Ma=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",qa.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,qa.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Na(a,b,c){var d,e,f,g,h=a.style;return c=c||Ma(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&La.test(g)&&Ka.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Oa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Pa=/^(none|table(?!-c[ea]).+)/,Qa={position:"absolute",visibility:"hidden",display:"block"},Ra={letterSpacing:"0",fontWeight:"400"},Sa=["Webkit","Moz","ms"],Ta=d.createElement("div").style;function Ua(a){if(a in Ta)return a;var b=a[0].toUpperCase()+a.slice(1),c=Sa.length;while(c--)if(a=Sa[c]+b,a in Ta)return a}function Va(a,b,c){var d=aa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Wa(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ba[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ba[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ba[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ba[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ba[f]+"Width",!0,e)));return g}function Xa(a,b,c){var d,e=!0,f=Ma(a),g="border-box"===r.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=Na(a,b,f),(d<0||null==d)&&(d=a.style[b]),La.test(d))return d;e=g&&(o.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+Wa(a,b,c||(g?"border":"content"),e,f)+"px"}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Na(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=a.style;return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=aa.exec(c))&&e[1]&&(c=ea(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b);return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Na(a,b,d)),"normal"===e&&b in Ra&&(e=Ra[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Pa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?Xa(a,b,d):da(a,Qa,function(){return Xa(a,b,d)})},set:function(a,c,d){var e,f=d&&Ma(a),g=d&&Wa(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=aa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Va(a,c,g)}}}),r.cssHooks.marginLeft=Oa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Na(a,"marginLeft"))||a.getBoundingClientRect().left-da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ba[d]+b]=f[d]||f[d-2]||f[0];return e}},Ka.test(a)||(r.cssHooks[a+b].set=Va)}),r.fn.extend({css:function(a,b){return S(this,function(a,b,c){var d,e,f={},g=0;if(r.isArray(b)){for(d=Ma(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function Ya(a,b,c,d,e){return new Ya.prototype.init(a,b,c,d,e)}r.Tween=Ya,Ya.prototype={constructor:Ya,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=Ya.propHooks[this.prop];return a&&a.get?a.get(this):Ya.propHooks._default.get(this)},run:function(a){var b,c=Ya.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ya.propHooks._default.set(this),this}},Ya.prototype.init.prototype=Ya.prototype,Ya.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},Ya.propHooks.scrollTop=Ya.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=Ya.prototype.init,r.fx.step={};var Za,$a,_a=/^(?:toggle|show|hide)$/,ab=/queueHooks$/;function bb(){$a&&(a.requestAnimationFrame(bb),r.fx.tick())}function cb(){return a.setTimeout(function(){Za=void 0}),Za=r.now()}function db(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ba[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function eb(a,b,c){for(var d,e=(hb.tweeners[b]||[]).concat(hb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function fb(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&ca(a),q=V.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],_a.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=V.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ha([a],!0),j=a.style.display||j,k=r.css(a,"display"),ha([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=V.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ha([a],!0),m.done(function(){p||ha([a]),V.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=eb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function gb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],r.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function hb(a,b,c){var d,e,f=0,g=hb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Za||cb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:Za||cb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(gb(k,j.opts.specialEasing);f<g;f++)if(d=hb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,eb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}r.Animation=r.extend(hb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return ea(c.elem,a,aa.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(K);for(var c,d=0,e=a.length;d<e;d++)c=a[d],hb.tweeners[c]=hb.tweeners[c]||[],hb.tweeners[c].unshift(b)},prefilters:[fb],prefilter:function(a,b){b?hb.prefilters.unshift(a):hb.prefilters.push(a)}}),r.speed=function(a,b,c){var e=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off||d.hidden?e.duration=0:"number"!=typeof e.duration&&(e.duration in r.fx.speeds?e.duration=r.fx.speeds[e.duration]:e.duration=r.fx.speeds._default),null!=e.queue&&e.queue!==!0||(e.queue="fx"),e.old=e.complete,e.complete=function(){r.isFunction(e.old)&&e.old.call(this),e.queue&&r.dequeue(this,e.queue)},e},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=hb(this,r.extend({},a),f);(e||V.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=V.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=V.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(db(b,!0),a,d,e)}}),r.each({slideDown:db("show"),slideUp:db("hide"),slideToggle:db("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(Za=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),Za=void 0},r.fx.timer=function(a){r.timers.push(a),a()?r.fx.start():r.timers.pop()},r.fx.interval=13,r.fx.start=function(){$a||($a=a.requestAnimationFrame?a.requestAnimationFrame(bb):a.setInterval(r.fx.tick,r.fx.interval))},r.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame($a):a.clearInterval($a),$a=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var ib,jb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return S(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?ib:void 0)),
void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(K);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),ib={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=jb[b]||r.find.attr;jb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=jb[g],jb[g]=e,e=null!=c(a,b,d)?g:null,jb[g]=f),e}});var kb=/^(?:input|select|textarea|button)$/i,lb=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return S(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):kb.test(a.nodeName)||lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function mb(a){var b=a.match(K)||[];return b.join(" ")}function nb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,nb(this)))});if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=mb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,nb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=mb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,nb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(K)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=nb(this),b&&V.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":V.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+mb(nb(c))+" ").indexOf(b)>-1)return!0;return!1}});var ob=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":r.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ob,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:mb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!r.nodeName(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(r.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!pb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,pb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(V.get(h,"events")||{})[b.type]&&V.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&T(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!T(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=V.access(d,b);e||d.addEventListener(a,c,!0),V.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=V.access(d,b)-1;e?V.access(d,b,e):(d.removeEventListener(a,c,!0),V.remove(d,b))}}});var qb=a.location,rb=r.now(),sb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var tb=/\[\]$/,ub=/\r?\n/g,vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;function xb(a,b,c,d){var e;if(r.isArray(b))r.each(b,function(b,e){c||tb.test(a)?d(a,e):xb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)xb(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(r.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)xb(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(a)&&(this.checked||!ia.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(ub,"\r\n")}}):{name:b.name,value:c.replace(ub,"\r\n")}}).get()}});var yb=/%20/g,zb=/#.*$/,Ab=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Cb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb={},Gb={},Hb="*/".concat("*"),Ib=d.createElement("a");Ib.href=qb.href;function Jb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(K)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Kb(a,b,c,d){var e={},f=a===Gb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Lb(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Mb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Nb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:Cb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Lb(Lb(a,r.ajaxSettings),b):Lb(r.ajaxSettings,a)},ajaxPrefilter:Jb(Fb),ajaxTransport:Jb(Gb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Bb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||qb.href)+"").replace(Eb,qb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(K)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ib.protocol+"//"+Ib.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Kb(Fb,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Db.test(o.type),f=o.url.replace(zb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(yb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(sb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Ab,"$1"),n=(sb.test(f)?"&":"?")+"_="+rb++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Hb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Kb(Gb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Mb(o,y,d)),v=Nb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ob={0:200,1223:204},Pb=r.ajaxSettings.xhr();o.cors=!!Pb&&"withCredentials"in Pb,o.ajax=Pb=!!Pb,r.ajaxTransport(function(b){var c,d;if(o.cors||Pb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ob[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Qb=[],Rb=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Qb.pop()||r.expando+"_"+rb++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Rb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Rb,"$1"+e):b.jsonp!==!1&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Qb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=B.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=pa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=mb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length};function Sb(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Sb(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||qa})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return S(this,function(a,d,e){var f=Sb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Oa(o.pixelPosition,function(a,c){if(c)return c=Na(a,b),La.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return S(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Tb=a.jQuery,Ub=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Ub),b&&a.jQuery===r&&(a.jQuery=Tb),r},b||(a.jQuery=a.$=r),r});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}(this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||[];return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),n+=s?0:1,o=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var h=t.jQuery,a=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&d[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new s(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(h=e,h.fn.imagesLoaded=function(t,e){var i=new o(this,t,e);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(e){"use strict";var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=e.URL||e.webkitURL||e,i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in i,o=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",true,false,e,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(r)},u=e.webkitRequestFileSystem,a=e.requestFileSystem||u||e.mozRequestFileSystem,f=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=0,h=[],p=function(){var e=h.length;while(e--){var t=h[e];if(typeof t==="string"){r.revokeObjectURL(t)}else{t.remove()}}h.length=0},d=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i==="function"){try{i.call(e,n||e)}catch(s){f(s)}}}},v=function(t,r){var f=this,p=t.type,v=false,m,g,y=function(){var e=n().createObjectURL(t);h.push(e);return e},b=function(){d(f,"writestart progress write writeend".split(" "))},w=function(){if(v||!m){m=y(t)}if(g){g.location.href=m}else{window.open(m,"_blank")}f.readyState=f.DONE;b()},E=function(e){return function(){if(f.readyState!==f.DONE){return e.apply(this,arguments)}}},S={create:true,exclusive:false},x;f.readyState=f.INIT;if(!r){r="download"}if(s){m=y(t);i.href=m;i.download=r;o(i);f.readyState=f.DONE;b();return}if(e.chrome&&p&&p!==l){x=t.slice||t.webkitSlice;t=x.call(t,0,t.size,l);v=true}if(u&&r!=="download"){r+=".download"}if(p===l||u){g=e}if(!a){w();return}c+=t.size;a(e.TEMPORARY,c,E(function(e){e.root.getDirectory("saved",S,E(function(e){var n=function(){e.getFile(r,S,E(function(e){e.createWriter(E(function(n){n.onwriteend=function(t){g.location.href=e.toURL();h.push(e);f.readyState=f.DONE;d(f,"writeend",t)};n.onerror=function(){var e=n.error;if(e.code!==e.ABORT_ERR){w()}};"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=f["on"+e]});n.write(t);f.abort=function(){n.abort();f.readyState=f.DONE};f.readyState=f.WRITING}),w)}),w)};e.getFile(r,{create:false},E(function(e){e.remove();n()}),E(function(e){if(e.code===e.NOT_FOUND_ERR){n()}else{w()}}))}),w)}),w)},m=v.prototype,g=function(e,t){return new v(e,t)};m.abort=function(){var e=this;e.readyState=e.DONE;d(e,"abort")};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;e.addEventListener("unload",p,false);return g}(self)
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
/* User Lib */
/* mousetrap v1.5.3 craig.is/killing/mice */
(function(C,r,g){function t(a,b,h){a.addEventListener?a.addEventListener(b,h,!1):a.attachEvent("on"+b,h)}function x(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return l[a.which]?l[a.which]:p[a.which]?p[a.which]:String.fromCharCode(a.which).toLowerCase()}function D(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function u(a){return"shift"==a||"ctrl"==a||"alt"==a||
"meta"==a}function y(a,b){var h,c,e,g=[];h=a;"+"===h?h=["+"]:(h=h.replace(/\+{2}/g,"+plus"),h=h.split("+"));for(e=0;e<h.length;++e)c=h[e],z[c]&&(c=z[c]),b&&"keypress"!=b&&A[c]&&(c=A[c],g.push("shift")),u(c)&&g.push(c);h=c;e=b;if(!e){if(!k){k={};for(var m in l)95<m&&112>m||l.hasOwnProperty(m)&&(k[l[m]]=m)}e=k[h]?"keydown":"keypress"}"keypress"==e&&g.length&&(e="keydown");return{key:c,modifiers:g,action:e}}function B(a,b){return null===a||a===r?!1:a===b?!0:B(a.parentNode,b)}function c(a){function b(a){a=
a||{};var b=!1,n;for(n in q)a[n]?b=!0:q[n]=0;b||(v=!1)}function h(a,b,n,f,c,h){var g,e,l=[],m=n.type;if(!d._callbacks[a])return[];"keyup"==m&&u(a)&&(b=[a]);for(g=0;g<d._callbacks[a].length;++g)if(e=d._callbacks[a][g],(f||!e.seq||q[e.seq]==e.level)&&m==e.action){var k;(k="keypress"==m&&!n.metaKey&&!n.ctrlKey)||(k=e.modifiers,k=b.sort().join(",")===k.sort().join(","));k&&(k=f&&e.seq==f&&e.level==h,(!f&&e.combo==c||k)&&d._callbacks[a].splice(g,1),l.push(e))}return l}function g(a,b,n,f){d.stopCallback(b,
b.target||b.srcElement,n,f)||!1!==a(b,n)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function e(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=x(a);b&&("keyup"==a.type&&w===b?w=!1:d.handleKey(b,D(a),a))}function l(a,c,n,f){function e(c){return function(){v=c;++q[a];clearTimeout(k);k=setTimeout(b,1E3)}}function h(c){g(n,c,a);"keyup"!==f&&(w=x(c));setTimeout(b,10)}for(var d=q[a]=0;d<c.length;++d){var p=d+1===c.length?h:e(f||
y(c[d+1]).action);m(c[d],p,f,a,d)}}function m(a,b,c,f,e){d._directMap[a+":"+c]=b;a=a.replace(/\s+/g," ");var g=a.split(" ");1<g.length?l(a,g,b,c):(c=y(a,c),d._callbacks[c.key]=d._callbacks[c.key]||[],h(c.key,c.modifiers,{type:c.action},f,a,e),d._callbacks[c.key][f?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:f,level:e,combo:a}))}var d=this;a=a||r;if(!(d instanceof c))return new c(a);d.target=a;d._callbacks={};d._directMap={};var q={},k,w=!1,p=!1,v=!1;d._handleKey=function(a,
c,e){var f=h(a,c,e),d;c={};var k=0,l=!1;for(d=0;d<f.length;++d)f[d].seq&&(k=Math.max(k,f[d].level));for(d=0;d<f.length;++d)f[d].seq?f[d].level==k&&(l=!0,c[f[d].seq]=1,g(f[d].callback,e,f[d].combo,f[d].seq)):l||g(f[d].callback,e,f[d].combo);f="keypress"==e.type&&p;e.type!=v||u(a)||f||b(c);p=l&&"keydown"==e.type};d._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)m(a[d],b,c)};t(a,"keypress",e);t(a,"keydown",e);t(a,"keyup",e)}var l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",
20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},p={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},z={option:"alt",command:"meta","return":"enter",
escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},k;for(g=1;20>g;++g)l[111+g]="f"+g;for(g=0;9>=g;++g)l[g+96]=g;c.prototype.bind=function(a,b,c){a=a instanceof Array?a:[a];this._bindMultiple.call(this,a,b,c);return this};c.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)};c.prototype.trigger=function(a,b){if(this._directMap[a+":"+b])this._directMap[a+":"+b]({},a);return this};c.prototype.reset=function(){this._callbacks={};this._directMap=
{};return this};c.prototype.stopCallback=function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")||B(b,this.target)?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable};c.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};c.init=function(){var a=c(r),b;for(b in a)"_"!==b.charAt(0)&&(c[b]=function(b){return function(){return a[b].apply(a,arguments)}}(b))};c.init();C.Mousetrap=c;"undefined"!==typeof module&&module.exports&&(module.exports=
c);"function"===typeof define&&define.amd&&define(function(){return c})})(window,document);

Mousetrap.bind("enter", function () {
	$("#story-caption #endWeekButton a.macro-click").trigger("click");
});
Mousetrap.bind("space", function () {
	$("#story-caption #nextButton a.macro-click").trigger("click");
});
Mousetrap.bind("c", function () {
	$("#story-caption #manageArcology a.macro-click").trigger("click");
});
Mousetrap.bind("p", function () {
	$("#story-caption #managePenthouse a.macro-click").trigger("click");
});
Mousetrap.bind("left", function () {
	$("#prevSlave a.macro-click").trigger("click");
	$("#prevRule a.macro-click").trigger("click");
});
Mousetrap.bind("q", function () {
	$("#prevSlave a.macro-click").trigger("click");
	$("#prevRule a.macro-click").trigger("click");
});
Mousetrap.bind("shift+left", function () {
	$("#firstRule a.macro-click").trigger("click");
});
Mousetrap.bind("shift+q", function () {
	$("#firstRule a.macro-click").trigger("click");
});
Mousetrap.bind("right", function () {
	$("#nextSlave a.macro-click").trigger("click");
	$("#nextRule a.macro-click").trigger("click");
});
Mousetrap.bind("shift+right", function () {
	$("#lastRule a.macro-click").trigger("click");
});
Mousetrap.bind("e", function () {
	$("#nextSlave a.macro-click").trigger("click");
	$("#nextRule a.macro-click").trigger("click");
});
Mousetrap.bind("shift+e", function () {
	$("#lastRule a.macro-click").trigger("click");
});
Mousetrap.bind("f", function () {
	$("#walkpast a.macro-click").trigger("click");
});
Mousetrap.bind("h", function () {
	$("#manageHG a.macro-click").trigger("click");
});
Mousetrap.bind("s", function () {
	$("#buySlaves a.macro-click").trigger("click");
});
Mousetrap.bind("a", function () {
	$("#managePA a.macro-click").trigger("click");
});
Mousetrap.bind("b", function () {
	$("#manageBG a.macro-click").trigger("click");
});
Mousetrap.bind("r", function () {
	$("#manageRecruiter a.macro-click").trigger("click");
});
Mousetrap.bind("o", function () {
	$("#story-caption #optionsButton a.macro-click").trigger("click");
});
Mousetrap.bind("y", function () {
	$("#story-caption #policyButton a.macro-click").trigger("click");
});
Mousetrap.bind("f", function () {
	$("#story-caption #FSButton a.macro-click").trigger("click");
});
Mousetrap.bind("l", function () {
	$("#story-caption #LanguageButton a.macro-click").trigger("click");
});
Mousetrap.bind("t", function () {
	$("#story-caption #PAOButton a.macro-click").trigger("click");
});
Mousetrap.bind("u", function () {
	$("#story-caption #URButton a.macro-click").trigger("click");
});
Mousetrap.bind("w", function () {
	$("#story-caption #WARButton a.macro-click").trigger("click");
});

/**
 * BoobGenerator namespace.
 */
if (typeof BoobGenerator == "undefined") {
	var BoobGenerator = {
		rollBreast: function (modif) {
			var volume = [0, 300, 500, 650, 800, 1000, 1200, 1400, 1600, 1800, 2050, 2300, 2600, 2900, 3250, 3600, 3950, 4300, 4700, 5100, 5500, 5900];
			var volume_dist = [90000, 470000, 720000, 840000, 908574, 947759, 970151, 982946, 990258, 994436, 996824, 998188, 998968, 999414, 999669, 999814, 999897, 999945, 999972, 999987, 999995, 1000000];
			var randomRoll = Math.floor(Math.random() * 1000000) + 1
			var actualSize = 0
			while (randomRoll > volume_dist[actualSize]) {
				actualSize = actualSize + 1
			}
			var minorSizeAdjustment = 0
			if (Math.random()<.5) {
				minorSizeAdjustment = (Math.floor(Math.random() * 2) + 1) * 50
			}
			var volResult = volume[actualSize] + minorSizeAdjustment + modif
			if (volResult < 0) {volResult = 0}
			return volResult
		}
	};
	// Raise namespace scope to Global.
	window.BoobGenerator = BoobGenerator;
};

/**
 * Slave checker namespace.
 */
if (typeof SlaveStatsChecker == "undefined") {
	var SlaveStatsChecker = {
		checkForLisp: function (slave) {
			return ((slave.lips > 70) || (slave.lipsPiercing + slave.tonguePiercing > 2))
		}
	};
	// Raise namespace scope to Global.
	window.SlaveStatsChecker = SlaveStatsChecker;
};

window.canGetPregnant = function(slave) {
	if (!slave) {
		return null;
	} else if (slave.preg != 0) {
		return false;
	} else if (slave.ovaries != 1) {
		return false;
	} else if (canDoVaginal(slave) == false) {
		return false;
	} else {
		return true;
	}
};

window.isFertile = function(slave) {
	if (!slave) {
		return null;
	} else if (slave.preg > 0) {
		return false;
	} else if (slave.preg < -1) {
		return false;
	} else if (slave.ovaries != 1) {
		return false;
	} else {
		return true;
	}
};

window.canAchieveErection = function(slave) {
	if (!slave) {
		return null;
	} else if (slave.dick < 7 && slave.dick > 0 && (slave.balls > 0 ? slave.hormones <= 0 : slave.hormones < 0)) {
		return true;
	} else {
		return false;
	}
};

window.canSee = function(slave) {
	if (!slave) {
		return null;
	} else if (slave.eyes > -2) {
		return true;
	} else {
		return false;
	}
};

window.canWalk = function(slave) {
	if (!slave) {
		return null;
	} else if (slave.amp == 1)  {
		return false;
	} else if (slave.boobs > 10000+(slave.muscles*100)) {
		return false;
	} else if (slave.heels == 0) {
		return true;
	} else if (slave.shoes == "heels") {
		return true;
	} else if (slave.shoes == "extreme heels") {
		return true;
	} else if (slave.shoes == "boots") {
		return true;
	} else {
		return false;
	}
};

window.canTalk = function(slave) {
	if (!slave) {
		return null;
	} else if (slave.accent > 2)  {
		return false;
	} else if (slave.voice == 0) {
		return false;
	} else if (slave.lips > 95) {
		return false;
	} else {
		return true;
	}
};

window.canDoAnal = function(slave) {
	if (!slave) {
		return null;
	} else if (slave.vaginalAccessory == "anal chastity") {
		return false;
	} else if (slave.dickAccessory == "anal chastity") {
		return false;
	} else if (slave.vaginalAccessory == "combined chastity") {
		return false;
	} else if (slave.dickAccessory == "combined chastity") {
		return false;
	}
	return true;
};

window.canDoVaginal = function(slave) {
	if (!slave) {
		return null;
	} else if (slave.vagina < 0) {
		return false;
	} else if (slave.vaginalAccessory == "chastity belt") {
		return false;
	} else if (slave.vaginalAccessory == "combined chastity") {
		return false;
	}
	return true;
};

window.relationTargetWord = function(slave) {
	if (!slave) {
		return null;
	} else if (slave.relation == "daughter") {
		return "mother";
	} else if (slave.relation == "mother") {
		return "daughter";
	}
	return slave.relation;
};

window.ruleApplied = function(slave, ID) {
	if (!slave) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	} else {
		for(var d=0; d < slave.currentRules.length; ++d){
			if(slave.currentRules[d] == ID){
				return true;
			}
		}return false;
	}
};

window.ruleAssignment = function(applyAssignment, assignment) {
	for(var d=0; d < applyAssignment.length; ++d){
		if(applyAssignment[d] == assignment){

			return true;
		}
	}return false;
};

window.ruleFacility = function(applyFacility, facility) {
	for(var d=0; d < applyFacility.length; ++d){
		if(applyFacility[d] == facility){
			return true;
		}
	}return false;
};

window.ruleExcludeSlaveFacility = function(rule, slave) {
	if (!slave) {
		return null;
	}else if (!rule) {
		return null;
	}else if (!rule.excludeFacility) {
		return false;
	} else {
		for(var d=0; d < rule.excludeFacility.length; ++d){
			if(rule.excludeFacility[d] == "hgsuite"){
				if(slave.assignment == "live with your Head Girl" ){
					return true;
				}
				else if(slave.assignment == "be your Head Girl"){
					return true;
				}
			}
			else if(rule.excludeFacility[d] == "arcade"){
				if (slave.assignment == "be confined in the arcade" ){
					return true;
				}
			}
			else if(rule.excludeFacility[d] == "mastersuite"){
				if(slave.assignment == "serve in the master suite" ){
					return true;
				}
				else if(slave.assignment == "be your Concubine"){
					return true;
				}
			}
			else if(rule.excludeFacility[d] == "clinic"){
				if(slave.assignment == "get treatment in the clinic" ){
					return true;
				}
				else if(slave.assignment == "be the Nurse"){
					return true;
				}
			}
			else if(rule.excludeFacility[d] == "spa"){
				if(slave.assignment == "rest in the spa" ){
					return true;
				}
				else if(slave.assignment == "be the Attendant"){
					return true;
				}
			}
			else if(rule.excludeFacility[d] == "brothel"){
				if(slave.assignment == "work in the brothel" ){
					return true;
				}
				else if(slave.assignment == "be the Madam"){
					return true;
				}
			}
			else if(rule.excludeFacility[d] == "club"){
				if(slave.assignment == "serve in the club" ){
					return true;
				}
				else if(slave.assignment == "be the DJ"){
					return true;
				}
			}
			else if(rule.excludeFacility[d] == "dairy"){
				if (slave.assignment == "work in the dairy"){
					return true;
				}
				else if(slave.assignment == "be the Milkmaid"){
					return true;
				}
			}
			else if(rule.excludeFacility[d] == "servantsquarters"){
				if(slave.assignment == "work as a servant"){
					return true;
				}
				else if(slave.assignment == "be the Stewardess"){
					return true;
				}
			}
			else if(rule.excludeFacility[d] == "schoolroom"){
				if(slave.assignment == "learn in the schoolroom" ){
					return true;
				}
				else if(slave.assignment == "be the Schoolteacher"){
					return true;
				}
			}
			else if(rule.excludeFacility[d] == "cellblock"){
				if(slave.assignment == "be confined in the cellblock" ){
					return true;
				}
				else if(slave.assignment == "be the Wardeness"){
					return true;
				}
			}
		}
	}
};

window.ruleAppliedToSlaveFacility = function(rule, slave) {
	if (!slave) {
		return null;
	}else if (!rule) {
		return null;
	}else if (!rule.facility) {
		return false;
	} else {
		for(var d=0; d < rule.facility.length; ++d){
			if(rule.facility[d] == "hgsuite"){
				if(slave.assignment == "live with your Head Girl" ){
					return true;
				}
				else if((rule.excludeSpecialSlaves != true) && (slave.assignment == "be your Head Girl")){
					return true;
				}
			}
			else if(rule.facility[d] == "arcade"){
				if(slave.assignment == "be confined in the arcade" ){
					return true;
				}
			}
			else if(rule.facility[d] == "mastersuite"){
				if(slave.assignment == "serve in the master suite" ){
					return true;
				}
				else if((rule.excludeSpecialSlaves != true) && (slave.assignment == "be your Concubine")){
					return true;
				}
			}
			else if(rule.facility[d] == "clinic"){
				if(slave.assignment == "get treatment in the clinic" ){
					return true;
				}
				else if((rule.excludeSpecialSlaves != true) && (slave.assignment == "be the Nurse")){
					return true;
				}
			}
			else if(rule.facility[d] == "spa"){
				if(slave.assignment == "rest in the spa" ){
					return true;
				}
				else if((rule.excludeSpecialSlaves != true) && (slave.assignment == "be the Attendant")){
					return true;
				}
			}
			else if(rule.facility[d] == "brothel"){
				if(slave.assignment == "work in the brothel" ){
					return true;
				}
				else if((rule.excludeSpecialSlaves != true) && (slave.assignment == "be the Madam")){
					return true;
				}
			}
			else if(rule.facility[d] == "club"){
				if(slave.assignment == "serve in the club" ){
					return true;
				}
				else if((rule.excludeSpecialSlaves != true) && (slave.assignment == "be the DJ")){
					return true;
				}
			}
			else if(rule.facility[d] == "dairy"){
				if (slave.assignment == "work in the dairy"){
					return true;
				}
				else if((rule.excludeSpecialSlaves != true) && (slave.assignment == "be the Milkmaid")){
					return true;
				}
			}
			else if(rule.facility[d] == "servantsquarters"){
				if(slave.assignment == "work as a servant" ){
					return true;
				}
				else if((rule.excludeSpecialSlaves != true) && (slave.assignment == "be the Stewardess")){
					return true;
				}
			}
			else if(rule.facility[d] == "schoolroom"){
				if(slave.assignment == "learn in the schoolroom" ){
					return true;
				}
				else if((rule.excludeSpecialSlaves != true) && (slave.assignment == "be the Schoolteacher")){
					return true;
				}
			}
			else if(rule.facility[d] == "cellblock"){
				if(slave.assignment == "be confined in the cellblock" ){
					return true;
				}
				else if((rule.excludeSpecialSlaves != true) && (slave.assignment == "be the Wardeness")){
					return true;
				}
			}
		}return false;
	}
};

window.ruleSlaveSelected = function(slave, rule) {
	if (!slave) {
		return null;
	}else if (!rule) {
		return null;
	}else if (!rule.selectedSlaves) {
		return false;
	} else {
		for(var d=0; d < rule.selectedSlaves.length; ++d){
			if(slave.ID == rule.selectedSlaves[d]){
				return true;
			}
		}return false;
	}
};

window.ruleSlaveExcluded = function(slave, rule) {
	if (!slave) {
		return null;
	}else if (!rule) {
		return null;
	}else if (!rule.excludedSlaves) {
		return false;
	} else {
		for(var d=0; d < rule.excludedSlaves.length; ++d){
			if(slave.ID == rule.excludedSlaves[d]){
				return true;
			}
		}return false;
	}
};
window.hasSurgeryRule = function(slave, rules) {
	if (!slave) {
		return false;
	}else if (!rules) {
		return false;
	}else if (!slave.currentRules) {
		return false;
	}else {
		for(var d=rules.length-1; d >= 0; --d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].autoSurgery > 0){
						return true;
					}
				}
			}
		}return false;
	}
};

window.lastPregRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return false;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].preg == -1){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.hasHColorRule = function(slave, rules) {
	if (!slave) {
		return false;
	}else if (!rules) {
		return false;
	}else if (!slave.currentRules) {
		return false;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].hColor != "no default setting"){
						return true;
					}
				}
			}
		}return false;
	}
};

window.hasHStyleRule = function(slave, rules) {
	if (!slave) {
		return false;
	}else if (!rules) {
		return false;
	}else if (!slave.currentRules) {
		return false;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].hStyle != "no default setting"){
						return true;
					}
				}
			}
		}return false;
	}
};

window.hasEyeColorRule = function(slave, rules) {
	if (!slave) {
		return false;
	}else if (!rules) {
		return false;
	}else if (!slave.currentRules) {
		return false;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].hStyle != "no default setting"){
						return true;
					}
				}
			}
		}return false;
	}
};

window.lastEyeWearRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].eyewear != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.lastEyeColorRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].eyeColor != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.lastMakeupRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].makeup != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.lastNailsRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].nails != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.lastHColorRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].hColor != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.lastHStyleRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].hStyle != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.lastHLengthRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].hLength != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.lastPubicHColorRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].pubicHColor != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.lastPubicHStyleRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].pubicHStyle != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.lastNipplesPiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].nipplesPiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastAreolaePiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].areolaePiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastClitPiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].clitPiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastClitSettingRule = function(slave, rules) {
    if (!slave) {
        return null;
    }else if (!rules) {
        return null;
    }else if (!slave.currentRules) {
        return null;
    }else {
        for(var d=rules.length-1; d >= 0;--d){
            for(var e=0; e < slave.currentRules.length;++e){
                if(slave.currentRules[e] == rules[d].ID){
                    if (rules[d].clitSetting != "no default setting"){
                        return rules[d];
                    }
                }
            }
        }return null;
    }
};
window.lastVaginaPiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].vaginaPiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastDickPiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].dickPiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastAnusPiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].anusPiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastLipsPiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].lipsPiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastTonguePiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].tonguePiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastEarPiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].earPiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastEyebrowPiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].earPiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastNosePiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].nosePiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastNavelPiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].navelPiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastCorsetPiercingRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].corsetPiercing != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastBoobsTatRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].boobsTat != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastButtTatRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].buttTat != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastVaginaTatRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].vaginaTat != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastDickTatRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].dickTat != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastAnusTatRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].anusTat != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastLipsTatRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].lipsTat != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastShouldersTatRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].shouldersTat != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastArmsTatRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].armsTat != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastLegsTatRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].legsTat != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastStampTatRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].stampTat != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.lastLactationSurgeryRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			if (!rules[d].surgery) {
				return null;
			}
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].surgery.lactation != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastLipSurgeryRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			if (!rules[d].surgery) {
				return null;
			}
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].surgery.lips != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastBoobSurgeryRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			if (!rules[d].surgery) {
				return null;
			}
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].surgery.boobs != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};
window.lastButtSurgeryRule = function(slave, rules) {
	if (!slave) {
		return null;
	}else if (!rules) {
		return null;
	}else if (!slave.currentRules) {
		return null;
	}else {
		for(var d=rules.length-1; d >= 0;--d){
			if (!rules[d].surgery) {
				return null;
			}
			for(var e=0; e < slave.currentRules.length;++e){
				if(slave.currentRules[e] == rules[d].ID){
					if (rules[d].surgery.butt != "no default setting"){
						return rules[d];
					}
				}
			}
		}return null;
	}
};

window.checkThresholds = function(number, rule) {
	if (!rule) {
		return null;
	} else {
		if ((rule.thresholdUpper != "none") && (rule.thresholdLower != "none")){
			if (!rule.eqLower && !rule.eqUpper){
				if((number < rule.thresholdUpper) && (number > rule.thresholdLower)){
					return true;
				}
			}
			else if (rule.eqLower && !rule.eqUpper){
				if((number < rule.thresholdUpper) && (number >= rule.thresholdLower)){
					return true;
				}
			}
			else if (!rule.eqLower && rule.eqUpper){
				if((number <= rule.thresholdUpper) && (number > rule.thresholdLower)){
					return true;
				}
			}
			else {
				if((number <= rule.thresholdUpper) && (number >= rule.thresholdLower)){
					return true;
				}
			}
		}
		else if (rule.thresholdUpper != "none"){
			if (!rule.eqUpper) {
				if(number < rule.thresholdUpper){
					return true;
				}
			}
			else{
				if(number <= rule.thresholdUpper){
					return true;
				}
			}
		}
		else if (rule.thresholdLower != "none"){
			if (!rule.eqLower) {
				if(number > rule.thresholdLower){
					return true;
				}
			}
			else{
				if(number >= rule.thresholdLower){
					return true;
				}
			}
		}return false;
	}
};

window.removeFromArray = function(arr, val) {
	for (var i = 0; i < arr.length; i++)
		if (val == arr[i])
			return arr.splice(i,1);
	return null;
};

window.milkAmount = function(slave) {
	var milk;
	var calcs;
	if (!slave) {
		return null;
	} else {
		calcs = slave.boobs-slave.boobsImplant
		if (calcs > 10000) {
			milk = (78+((calcs-10000)/300))
		} else if (calcs > 5000) {
			milk = (53+((calcs-5000)/200))
		} else if (calcs > 2000) {
			milk = (29+((calcs-2000)/125))
		} else if (calcs > 800) {
			milk = (16+((calcs-800)/80))
		} else {
			milk = (8+((calcs-400)/50))
		}
		if (slave.lactation == 2) {
			milk *= 1.2
		}
		milk += (milk*((slave.devotion-50)/200))
		if (slave.boobsImplant > 200) {
			milk *= 0.9
		}
		calcs = slave.hormones
		if (slave.balls != 0 && calcs > -2) {
			calcs -= 1
		} else if (slave.ovaries != 1 && calcs < 2) {
			calcs += 1
		}
		milk *= (1+(calcs*0.1))
		milk *= (1+(slave.preg/100))
		milk *= (1+(slave.health/50))
		milk *= (1+(slave.weight/500))
		milk *= (1+(slave.lactationAdaptation/500))
		milk = Math.trunc(milk)
		milk = Math.clamp(milk,1,10000)
		return milk
	}
};

window.cumAmount = function(slave) {
	var cum = 0;
	var calcs = 0;
	if (!slave) {
		return null;
	} else {
		if (slave.drugs == "testicle enhancement") {
			cum = ((slave.balls*3.5)+1)
		} else {
			cum = ((slave.balls*2.5)+1)
		}
		calcs = slave.hormones
		cum *= (1-(calcs*0.1))
		if (slave.scrotum == 0) {
			cum *= 0.8
		}
		if (slave.devotion > 50) {
			cum += (cum*(slave.devotion/100))
		} else if (slave.devotion < -50) {
			cum += (cum*(slave.devotion/100))
		}
		if (slave.health > 50) {
			cum += (cum*(slave.health/50))
		} else if (slave.health < -50) {
			cum += (cum*(slave.health/50))
		}
		cum = Math.trunc(cum)
		cum = Math.clamp(cum,1,10000)
		return cum
	}
};

}else{document.documentElement.className="init-lacking"}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:100000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html.init-lacking #init-screen,html.init-loading #init-screen,html.init-no-js #init-screen{display:block}html.init-lacking #init-lacking,html.init-no-js #init-no-js{display:block;padding:0 1em}html.init-no-js #init-no-js{color:red}html.init-loading #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html.init-loading #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html.init-loading #passages,html.init-loading #ui-bar{display:none}</style>
<style id="style-fonts" type="text/css">@font-face{font-family:tme-fa-icons;src:url(data:application/octet-stream;base64,d09GRgABAAAAACWoAA4AAAAAQhQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABRAAAAEQAAABWPihI/2NtYXAAAAGIAAAAOgAAAUrQXRm3Y3Z0IAAAAcQAAAAKAAAACgAAAABmcGdtAAAB0AAABZQAAAtwiJCQWWdhc3AAAAdkAAAACAAAAAgAAAAQZ2x5ZgAAB2wAABjCAAAq+uJ4WNtoZWFkAAAgMAAAADQAAAA2BZlJs2hoZWEAACBkAAAAIAAAACQIJwQZaG10eAAAIIQAAABuAAABOPTeAABsb2NhAAAg9AAAAJ4AAACeojKW6m1heHAAACGUAAAAIAAAACAA6gvwbmFtZQAAIbQAAAGPAAAC/eLsyKlwb3N0AAAjRAAAAfwAAAM0412SIHByZXAAACVAAAAAZQAAAHvdawOFeJxjYGRWYZzAwMrAwVTFtIeBgaEHQjM+YDBkZGJgYGJgZWbACgLSXFMYHF4wvPBhDvqfxRDFHMQwDSjMCJIDANLeC6V4nGNgYGBmgGAZBkYGEHAB8hjBfBYGDSDNBqQZGZgYGF74/P8PUvCCAURLMELVAwEjG8OIBwC4Ywb6AAAAAAAAAAAAAAAAAAB4nK1WaXMTRxCd1WHLNj6CDxI2gVnGcox2VpjLCBDG7EoW4BzylexCjl1Ldu6LT/wG/ZpekVSRb/y0vB4d2GAnVVQoSv2m9+1M9+ueXpPQksReWI+k3HwpprY2aWTnSUg3bFqO4kPZ2QspU0z+LoiCaLXUvu04JCISgap1hSWC2PfI0iTjQ48yWrYlvWpSbulJd9kaD+qt+vbT0FGO3QklNZuhQ+uRLanCqBJFMu2RkjYtw9VfSVrh5yvMfNUMJYLoJJLGm2EMj+Rn44xWGa3GdhxFkU2WG0WKRDM8iCKPslpin1wxQUD5oBlSXvk0onyEH5EVe5TTCnHJdprf9yU/6R3OvyTieouyJQf+QHZkB3unK/ki0toK46adbEehivB0fSfEI5uT6p/sUV7TaOB2RaYnzQiWyleQWPkJZfYPyWrhfMqXPBrVkoOcCFovc2Jf8g60HkdMiWsmyILujk6IoO6XnKHYY/q4+OO9XSwXIQTIOJb1jkq4EEYpYbOaJG0EOYiSskWV1HpHTJzyOi3iLWG/Tu3oS2e0Sag7MZ6th46tnKjkeDSp00ymTu2k5tGUBlFKOhM85tcBlB/RJK+2sZrEyqNpbDNjJJFQoIVzaSqIZSeWNAXRPJrRm7thmmvXokWaPFDPPXpPb26Fmzs9p+3AP2v8Z3UqpoO9MJ2eDshKfJp2uUnRun56hn8m8UPWAiqRLTbDlMVDtn4H5eVjS47CawNs957zK+h99kTIpIH4G/AeL9UpBUyFmFVQC9201rUsy9RqVotUZOq7IU0rX9ZpAk05Dn1jX8Y4/q+ZGUtMCd/vxOnZEZeeufYlyDSH3GZdj+Z1arFdgM5sz+k0y/Z9nebYfqDTPNvzOh1ha+t0lO2HOi2w/UinY2wvaEGT7jsEchGBXMAGEoGwdRAI20sIhK1CIGwXEQjbIgJhu4RA2H6MQNguIxC2l7Wsmn4qaRw7E8sARYgDoznuyGVuKldTyaUSrotGpzbkKXKrpKJ4Vv0rA/3ikTesgbVAukTW/IpJrnxUleOPrmh508S5Ao5Vf3tzXJ8TD2W/WPhT8L/amqqkV6x5ZHIVeSPQk+NE1yYVj67p8rmqR9f/i4oOa4F+A6UQC0VZlg2+mZDwUafTUA1c5RAzGzMP1/W6Zc3P4fybGCEL6H78NxQaC9yDTllJWe1gr9XXj2W5twflsCdYkmK+zOtb4YuMzEr7RWYpez7yecAVMCqVYasNXK3gzXsS85DpTfJMELcVZYOkjceZILGBYx4wb76TICRMXbWB2imcsIG8YMwp2O+EQ1RvlOVwe6F9Ho2Uf2tX7MgZFU0Q+G32Rtjrs1DyW6yBhCe/1NdAVSFNxbipgEsj5YZq8GFcrdtGMk6gr6jYDcuyig8fR9x3So5lIPlIEatHRz+tvUKd1Ln9yihu3zv9CIJBaWL+9r6Z4qCUd7WSZVZtA1O3GpVT15rDxasO3c2j7nvH2Sdy1jTddE/c9L6mVbeDg7lZEO3bHJSlTC6o68MOG6jLzaXQ6mVckt52DzAsMKDfoRUb/1f3cfg8V6oKo+NIvZ2oH6PPYgzyDzh/R/UF6OcxTLmGlOd7lxOfbtzD2TJdxV2sn+LfwKy15mbpGnBD0w2Yh6xaHbrKDXynBjo90tyO9BDwse4K8QBgE8Bi8InuWsbzKYDxfMYcH+Bz5jBoMofBFnMYbDNnDWCHOQx2mcNgjzkMvmDOOsCXzGEQModBxBwGT5gTADxlDoOvmMPga+Yw+IY59wG+ZQ6DmDkMEuYw2Nd0ayhzixd0F6htUBXowPQTFvewONRUGbK/44Vhf28Qs38wiKk/aro9pP7EC0P92SCm/mIQU3/VdGdI/Y0Xhvq7QUz9wyCmPtMvxnKZwV9GvkuFA8ouNp/z98T7B8IaQLYAAQAB//8AD3icrToNcBzVefe9/b3dvd29u909/dyd7ke6k86yLEunOyHJsrCxJWyJGmEcLMDYxBhHNsZQBzOAkjQmFDrGIq5gHEIcCILOAGZq3IQO04RkIGkgaUMKMbQznSlJW0wgJtOQHxRr1e+93TvJwq7JTD3y2/f//bzvfX/vAhAIzL3KPcYNBFIB8UR9EJYuAcuAqGNbOiwDSczkuorlaJ6WTeVSRwMIDveY8aN20GztjzMhW4P2H+kNUPM5NaVNQE0K3tWM77vv8rJqgnT33VJE4WWIfd/QbKHZjcXcZiFAqjCDgUJA/mZTWOIIwi0vAwNiUjkW9THIZs6DAbnj6ffGP/P+0y2vv+5SXGLKuXHJPJH92c+yT7x3883wnI9W/DxI4T9+bm7uOL+MUwNywAg0BJYFQgNKa2NDzFBEjqeM0SFXLHU4YKe7yjFoSmdEKWw5nemOUj5czMXCliilM7lyuFgqp3HaDf1j/fhH+s6cfm4MEpA8c0BSQBO5CUkD5fJi05kDjSUoNnETTUUSXtpPVm0aGHDdmV0nNkPiMUWeHZMVRSZPSlp0dqypCKVG8iT9IK5AEeamyZGAjecW5tm5SSBm8ojiSqBsYoXDTRtuymw13V8axjB+p2EPlsMGcRzTTRkGOLRpmk/AzSZ+A97ecx+QN8g9gUbc26F7N+GJiN5pLGMA8hUo7EQcHI455A0PwrS3I37N+bZhTE8bex1aeeIJ4+MTjTY6gcH+iIvgGWQRdh2TR9sS81kspCzytguLfBcyuBOLXuhwYnZnh8NFUs6plLPLScGpWBKwkYztwsop7Hie9r7rYK/9brWXTg9U+RiBX+GJiyc0rgIv7UNJe3vPjrFdyZOV/byNUkyW/0AuIi/h+h6U5a64SmW5ieGcya2AYimG+EUtnZN08ImgveV+KOYykiiJVMrbkI+dHUkC9+nyPUFdD94j639r1uTq7FiSNrR1hXS8uLbGapYUSbpaJvzmp5aODbU9iJNBU1gJa5LFTCqihNpDigmWWtc2GjUy7Y2m3hHk14qmPJXp2cTInZudO85dhzw2AuXAJQHl+Yt7l0RVjkO8u4q5JZARE2A5yNxStNgGWcQSj7izA1HucCgJOsRsb7xYWgn9XAwvRqaN4HAS4ENF3kXFFovJ/muW3zsYDK3jxaCQbOouOPXZPmBDNZG4krS0N2/9wakf7hHv+IcPX/jcaGWZAp9fvrFtv66UeSlXn4zYdZo5kLNwIJJRTbEu3jz62Zf37Xv5l7RAeugZfAQ7kJ5koA3PoJB1eP8MpHRVWqpygyITpiKz4DCoHMENlun+wrDA0bNZ9jmJZdZwhhx9UnewMKztg2yAlie9j6O7Lzrks7tYdRdOO4u/FJ9e5G93RyFTJ1f5G17IZDs7z25uEfuFBYwlvYpUUuTnKJO6umg5IymD88yGGxbycjN2JOkIVk6wUoEzm/0O5T/Owb92Jg8NyL/6qFrl30IZ5nSgMp3nch7DkvOMCaMeoQ1U4JZxQncenmAMmcAei/S7V9CvAccW8mczwtMCceSQ8nwhXWuKAeQPJbRCc9RnhoSyhvBL+WgxTzsk0Y567IFj+35wa4Xq7ykS5YIm7UIdq4iCfKcsiIoSvFFWONUnFovZoXHKhXE69R9hTOIEgZPcJ0VZRrx+i3j9hhtFPqQDnYjX8uaEpS2+F4twiVkOylSJAwfvBZO3XBnoTaEHtltSWAGKIEl3SJIQ1CRESIRnLFtJRc88GckEbQuOBTO5zBXziL0JIPKiyMtzggwiMc+czmbDEbDMbJaLhC3LPzPuFOKaD6zEM+tt15gNxTPLIg5dvglCfGmbmakYmqmKsEfRVOWWAXjqvEzVeamT6botq9321Vu2rIb7KOrufmZ24LWmoiI3yspJJ65e704JprBSFGH3pxXLhAQe9fBzbM1rq7YAm1dsctvZSiqu8G94rxwS/LQ7JYorRR0XXq/GmSh4dJADKAsSk70ajQ8gHdE0MhzVjOCbVDSvKINd1PhKVN+fgMTG2zYCvIaq+V2mmsNTP36IRLD6xO7ejWTDisfc7zCVD6tQW+/eMTW1Y3fSt20foe+hBZpQ3zfGfH3vyzmCZNvHFoJFVPrRjj7m6I26M3r7KHQxgD5c2H/4tQdIeJLJ+yQDvTsZOwv4jYfJQxVaxxmtKtNTTVaQnRmS6kkWvfBoNvCeIT55jt41PJZwpg3YYeJYGK+dppgK/sF+R/8ggZIOBlnyNoK/qpwokLZ6uCFRKCTKV8HeGaYksPg2Xj/3fyQZb6dhGWv2QLLQU4DW7lZwf77Hw+vb3AjzexKIVywkEXoGlB1JUqr4FW3A7BZlDzgzhZ5W0tyfI1da7mmn13JvsZOFxLuJIRsmLXJVskByA41iu/uvSds9bWOnPZQ4lSgANm+xqQ6gMPlGH2YR79rSDIXLXQBujHZSxkCpSIeynwCdNxEFJ2HVmSDaFPxQYoIN2BfCM8E6zTCu66VDSQ97KkPfIa8i7nGUITNAZagDhYFJjeg5rXh+bcBuYamT/JWmRVE8Iopeb/3ud1ZdSIs4TkQLcaogJ63Z5dGUxEfefz8qSKko+Qm2PB/ZgyEEMngmjkjovYB0GBog+n9COzD7MiQ73pfOA5S8NLseIst+QWbPC9y/J8dRv7QFliCNWcnzAYlI3fE8hdNVbBPY1WEeZxm8m5mKOdypQRG1qhiRgQBnZbr7N20qT1ipoPsLVYWEGq8hE3BoLPn2tV8PhWVe0WTB4nIN3WMD7cmIiDZEhaSSROulWMbk2+sX4LIs0Iq4NNdUfV3mDeqCbaEOligmbYSFCaU0VRVULrhTKoKlIMubNvV3ZyyOByWMilXkBpNjcIjihTjBrwzF/bmKF1iMJNsHxrobcnxElDVF0C3u69fevP5txIsEcUrVZyR96DPqiI/C+zGTp0uZGkXVP6PG1RncET7Ey/eKjnX885QeWw83krsCIVyvMp8TD9P3rEvMFUkFZxS6Rw25ytWQJ/52/tqLyQSDrc7Dpiq/H2XDgYsVBgjnK7BF95EwLKLNKLh0bg5x74VXPNwJO1fq7raB588j7pbhat78pDKjPE1td1Jl6Hhn8Q73LdISsCrrgwuijljQ28Tinnavx+Xu9ap6jYqn2QzNaly7RoVJ99MoBl/DvmtU1X0Lu3FCnO37XXKEW832Nai8BYnDKKvIF92W3F9dotK94ahCNyJPuW+5b2L1WrQ2X6fSc1TBejLg77uvsm8FX2b1ghWk6cbjuB1FUIVm9y0f6aMKfMbdhjshNGihFKgIgE7044ZvkbXz+zbh3chXN/f35Z6mOyF2b/m7H6V7HVV3XYOYtiDOig/J25bh+xPuAPMdxRPRc8V1YU8Z2mEv9OIO2O6DTg8Wtt2C3+lCcjBRmEaNVbDhi0nLnUK1ttvqdVpsexruQ93WGnf3T9s47N+te7nN5FeohRGeChUfIvZx5htAPYTNjQl/ea/tTlkW7LZ7nIK3dyNsGUwWpq0+a4k/ALvozB5nurkCqwthUdrq5mnzBD/tu5rpfPVYuC6L0VZwnMfd/YnGxgTc97jjFNjGFvRQ6iyrYPfZjyPVyQJM233YRF5YVb1xgLzjwVMX3NOwZ/K7wtJZx4W8pGRNNzf4ZOBeCKgPCxuKcUYmxQNycbjP5wGlEJGk8OZc369tR3gtaZ+X6CbmVkIONRVJcugpluk1TQL1Fqmfy1ELVi4hYy1zJhYNj4zu7RkfbuebN17fv+q2Fj4sDgtE7Hv2uk89uneIH7j9yNWjR1YMmUvJSzO6s9QcGWkbHt83PtzW0yWCMMLr4roNcMm+o88e3XdJ/0VDkWiFDxSv5YhXq8d3nVAryjjtoDXp7Ojn2gg6ijGHIUxDpQZ0Y2lQym2+5NZHN219to8XhsUw33Lb6p6dG9DVGN598/bmkXA0NoPeR2t4qO/h0U8d3bcKtmB5yeilos6PCCB29fgINjeNmEsdfaYmGhm6qB9RrPhEx7mrEbfGwCDauZXNJo09wLJ1oAhSe1NxWkUDKKJofMqeE+szt8S4K9JYmjbLXRRtylOU1vWN//mVy4/0DVGNqM9QJT7SvL287ot5MSZoGC/oyHTWO7p3vdd5s6RB439/5fKH6aIaEDh46AVkpMqWo1YdaWpe1690hzT4e79jxGuLvD+R0iUwuiJ+TLUM4+yrA8aAdsVAsX1JFgMsTkCF4ceBdtgLZ8oXaENnPpfPipLA6A57nn4+XI1hUbCoYmig1KP5pH44Kybnq4cUyatKivvTmXpeOC7y8J4il3yHncWVz+SDrc5zTqucPyYro3Af7XP30/I8ddJxsQAgXIFbz37QdsmqNhJl0K6145C0rkWzExAX8aM3sDpwYyA8oF83PNBXWu7xRPQMIT1E6syw7M4F2tFwOmyhVKQ7+uH/lz9DribLBF4jsuze94lYBc+7LzLOXMw4c+66u52EZz/QLEWxyA0XZFuA9+OVUfSTwyzWCw0o3a0Jx9BYTrKp2AZiEi9qGSs6OFhZkPboRDXesZKpbcd3UOjV8dMgNNQhr1pJh0Qy5petVIQ48Zq1KefMj7zIhluf3pQeBs5JfUuJMGcgHFRik16gP1mzHX2EmroaYhmVysETLOo54aSGU/gHzbEwdRvCMXuGhUczHj3HkZ42Rk9LYIDS07c8YRuqSBg91Pmnwo8VghFR2Y9oKTmxziSwi0HTN2I1cMvT3E7Fezk/Pae1UnYyUwqdRnqCNZPoXSJSk6hxGWmRBKqBSMqyTP97/wmaJcQCGpqbG5Iw6vhEtHpEVWihepULpFG3rqG0rOha2qTxJIC0YOSYFjrxEtP8nlSlIxvu7PLcRKmS76mk04Sq0HoTqJ04CcfcK+DDIU34mhCX/dByaAiDy58ibicVeRdNJrNyezI2G/ESlUKsZDxiOtLJk/ChXCc9Imp+1nO2xL6QZIkkWiizM7SHIF9q9K8ZpQDx8zOjgWaMzORvdrSGPJ2sEzRYZer9O2gmWD4zSTr6sSuH8Uc/IGjmyLIMOHUV0G48840967ixy2v6zIhcU+pr3bDj9u0bc1xfqUbO9sUuH3O/iqEbFPqaPbOBZuFTO57rx7mxvnDL7avRFLah/ei55LZCpKddjqz4OxhyH6YRLuzA0rcfY5yC8rQTcb08JdLYleZW8TZ0lGgSCyVfQoQtRDiPV6BqKLryzL7kqRmkuoGdE5UzlKWy39mJQlU1OChf1KrEHOYcsdMhvaO3j5JN+zZBXJZ2Kmq0WRSMDSFJGqmtC0q8eZesmfWxPxNNca3DC3KzYsg7MBBXhJ2yHmvy5sojNXVBmQvfhUdoxJ0NgiENWTzfqwd3SOjC927ceNvGjbfTUTNp13eIumhvAKEvJA/HTUW6Maj1CeJAUtBFrcOI1xugSWxubV1qqaRJ1gZvqiHLbKqwOo5TR9hELw7/iBsjL/t6WXl+SWN9VOO5RfnTtJcwreTFY35bWthGB+bMB+yOcGEDg4bztxbkUR0wh1h2kJWgV0awMR+Hjvn5mlrmu9BMCMpYsZynmQC8KR2xco4maZIg5jN5CU86ViJ/s27nzqlxgFc6167fuXP92s5XYOdDO8j4pYNYw16IjR8eH79U0ra3Y6V9uyat20l2P7AbsKpjJ81Tzs39nt9PXgqYeL9LNB+Yi9uMN1BEZ0knnvijDiZLEDg6dJ30NuA9oQEVh9U0uk/kgO8A+R94pvWy8YveWn0ZWbfmLepJXdqz5Z5B94qhu7d2k75r7l0Lx2gVtvTMr6FXgDY7p56d6qSNS+/e0ke6r//CQ1/YXiTdW++u+FK/529HfC3klvzNhK3Te4txIUFlkuQ8tIjguXrUG6WAPWgMsIcDF664d3v3DHXwhQ07YMul2I9QDvtQXz+bokoej3uUo5mt1Qi7f/m58pGoIAyavsnnFiUl8cbhKTpRmI+CKw9Y1oKc5GvZZJCT6kWJcCHNzzDS3KTQKEocr/6Fe1GoUf+1rq/QG/W/hs9goz8E649Xc5M6HxXjAnDV9OT9spBFuwOC26Prv2bzQ3RhCHfwaYpW8+LxqOzlYOZR7/Kf/RbmXMktCzAr3jWP/Kqt5KUqZDq4uTqyBbYGfL17HcuL19KcjykyePSoAP2bNgILH1qOXXFwA9l471P3bOIvOwRXL8j+k0OjB6cPjrLCfe2sXP/824QcsAMZlOmGWiMo0rwb4K1qo+mH/LkBVlXdA+cFXFFWvz0//AXvbZ6+ac3GoyzHHvXfzCqvNILfLi9qV7KBJ/03OPbql/A+XlcDa3g9C1/rnPPU/XzkR4E3q/4p6kHES6V3vVx1M7x3EG4RnpwfhuT9B8mTF4BG6w/vZp7SbtoL4oJBkCuYe2+LL3GT6CtdzGKjNas6FGaHETyqOIeljCSdy4azYTwkLxFIL08OHSKaM+7sonl9vERpGguhHaS5bUgz24xu3ETTPsVKqntkIZfpqR1MdBfQKd6hmiFHviU1QZ260MQ2FSOcbfDmVoyFeHkb9rq/db9KFWsP6uutqz6LgZW6R+JrIjp86Gp6jSXL+7RoUv38yjEracH0NiVpKdu2ISBl27QDRdTKAT9WHoc/IL/p7w4sptcdmtpFR6IcZRnNXDnaT909x7Ykjj6PwmlFdP9FMuWgQvb8nAiKpHB7iS4/r+pk678LRCWOGpq9QwfOlOGlbpDkEPwThngKL7puibAY5LvMl+ZQQ8Yx4mxF/wZjkGJ7a3NjKl5jyjiJ/hAhLzVVExN+9qMpZsAyWImhu/eF2NlfcmS6bxq6lNlO9CZvxpjon/G7R5k1SqVwuFwOv3HTTZn0TTelSQs2wtjpPkNH8D/RH++b3mkosx0KLkzSlfi92qSrzPKX2arMTe692ChjJ7T5I75t3I487EIe5jXKQ6pg6Q83qs/lEn3noSFynmb4aOrBF9sEoBuHhKFYcL11up41emofLCQGE60wVdeDClSvn5qqM41Go7t+iuWUHqzrNrOGWTsFst5TtwLXXPk0Syc9fSX2rsBFmzadY6C/Fge8d+e5uXHkfyiQRc6vwTu2Ylkhz95Fq2/8+YVv/CxSqb7xxyqhDjDBRxFBxcQnSYzeBfrYNqGJjej4TLDfWEywII42hqZ+/BB/6I2DkCn0WS9uv3PD4Z0DpG/3oemDe7u5NS/aMOWtol60t2qCusYTSi19uHn1iHiQOpz2i2v6xx/4xqE9PfyqHQ+N3Ln9RftsmoxADcYAyvMt9Y73lr7wdwTUmb8g/u53GOaw6pPizJC9MJrEj7noG9sG1CNhmWN2BcF2dpRzGBfz5XrojEWZRxuj6aCYY0tiLJOTMmK2uJJQjxj/8hjKEB1iGHCj4JTpxczQzEtehAevG+5pUO12twtCjfG4I979yJB4a7RlZbDdVGV1OMgDQPZQY+ERm1wqiVyYJwJHMrGaP+o9YKbUlE2ApL6YEiyylNT9ESff74qtvCgqNSZcBVOa+2Hr9q9E70rVikGTcxRJ4BSQa6ImzpQIEXk+OFbqhvQRQ4souDWotqAiL2Xqm+AZ/Yz0kXcCOnvfqg1779vzOXtqtvPMii9Ig5+dwj87Kf4bQ6EJfdRt4PyQZYFY0/NXERbE5vPzi+As2njhToFqfp7h6ufXYTFiZ6MCryyG/xQX5qIBFddLfr6b+SYsHc3P1ocikRD5rxCMuNslxeBKuiZjzQpUY6kFvwNgPtyioHRxkEr9fv+HE5AwHFc9q0neOXOa/kiAi9ByQX3et1fZb2+q7yCL914QN5y1GVt/DOVaR29JPCECXV9iGaI84A7sQ9W3Y4dLZe4vVR1Mxd3Hc7rq7lNVOKjqHM9xqmiceVWXNTgoiO6fswpN0R/EfnefyHtnMvcsdw1nzMOJiSzGpQ+SPmclxmVRqlVM0HG5wNFSQYAIRhjE3ZDTsobwJbifVegTxj7sx7mCRwvp5XSWh6/QYs/TwjyMahKsVCYZVaeECMTR56MplPyzCfrSPO/dL0m8RwvpQ1oS56aF7i/58Mpn0eOHaKxcTNGd84cLd4oCvXPu3B+4a8kPUA7rmSzJ7E3Zy7OzuJEm/Mt+7Eh/pyDPMx7xF7luuh/CY9hDe4WZYLqvW+YhFlJiWX1PO0aOB6L0t3AVOUK7V/XSqP8Dx/CavHCY8erwC3jhyKHZR2nu9wXvpz4vKN4dwOIA22sZ/S1RTbhyBxbvF/XeXzEQpfEUTa0hLTTE+RigN9vzQhBp0RzT5OUaKazwlhEU8u0fx8D9XmGdwVmmZmpavDGuichhJJUz1nn5pp9yj5H3GG7DgZtovmnn5YNFiiT/JyIZqw6Uvd+i0TRIFwumFw7SVEg/TYvQDM/8hE9O4uTWEVlECuyU2tLW1oKK3jIk+bItDxy6TZKw36mttdZgKDxo1fIRzrFMSbrt0J/Cl8KVh1OcozuqGUyO7RxLBk3UrA6XfmDTF97qwAErpOl655GnjnTqOidyIQsHO08G/hcLt/j/AAB4nGNgZGBgAOLaW41M8fw2Xxm4mV8ARRguss1QhNC5H/9//Z/FUsEcBORyMDCBRAFTFwxveJxjYGRgYA76n8UQxVLGwPD/FUsFA1AEBfgBAHyYBUh4nGN+wcDAvACCWfSBNIgviMBM1kA6koGBMRWVBqsDYqYmiF4wHQkxg+kUBMPVWEP0gTDYvBdoahZAzYxEY0ciuWUBFjkoZimDYLC8IKpehmsQccYvSGYgYZB7YBhFL5o8cxTQjDUI/wIArpclrwAAAAAAAAA6AIYA3AEKAUgBgAGgAfoCYgKqAwIDOgOGA9wEQAR4BLYFAgU8BZoFzAYMBlIGmga6BtgG+AcYB0QHcAecB8gIAAg2CG4IpgjyCUAJrAo0CtALOAueDAoMYA0ADVANjg3mDiQOjg7GDvgPOA+ED84QPBB2EN4RNhGgEfISchKoEsgS6BMGEz4TXhOSE8QT+BQsFGIUiBTWFX0AAAABAAAATgBuAAYAAAAAAAIAAAAQAHMAAAAiC3AAAAAAeJx1kctOGzEUhn9DoIKgLloJdcdZIRDK5CKhSqyoogJrhLJDwgyeSzpjRx4HlGfgLcoz8Dp9j+76Z2KhqFJmZM93Ph/bxx4AX/AHCqvnnG3FCgeMVryFT/gReZv+JnKHfBd5B108RN6l/xV5H2d4idzFV/zmCqqzx2iK98gK39RR5C18Vt8jb9P/jNwh30fewaGaR96lf428j4l6i9zFsfo7drOFL/MiyMn4VEaD4bk8LsRRlVZXouehcL6RS8mcDaaqXJK6OtSml+lemTrb3Jp8Xmm/rtZ5YnxTOivDZLCur401XgfztNytec5HIWSSeVfLVdxHZt5NTRqSIoTZRb+/vj/GcJhhAY8SOQoECE5oT/kdYYAhf4zgkRnCzFVWCQuNikZjzhlFO9IwvmTLGFlaw4yKnCBlX9PUdD2Oa/Zlay1n3dLmXKei9xuzNvkJ7XLvso2F9SaselP2Na1tZ+i2wqePszV4ZhUj2sBZy1P4tmrB1X/nEd7XcmxKk9In7a0F2gv0+W44/z/KQo7lAHicbZLnlpswEIW5Bgy4bLLpvfeE9N57z76DLARWEJKOEEucpw8CO/kTncOdT6PhnlHxRt4wJt7/x47nYQQfAUKMESFGggmmmGGOLezBXmxjH/bjAA7iEA7jCI7iGI7jBE7iFE7jDM7iHM7jAi7iEi7jCq7iGq7jBlLcxC3cxh3cxT3cxwM8xCM8xhM8xTM8xwu8xCu8xhu8xTu8xwd8xCd8xhd8xTd8xw/sBLUlZuIkZZW2q0hzahvDRqocUyIpE4EWTR1WXDZ1sGRCz5yklBsqWBZwmauZk01mTqxl0nIlUyLs9r/Zej35m4kFl2XKftlAKFomTlKlmfQ1l74lRdB9dbxQqqyIKbc2MPQZGqbFKsqVaYnJ4ky1Ms24iQXLrYPE8GLZ07jRfaIvcf5JX+NoMhQ5jLoqFwenBS8Gpw7WTh05py6MaOtT2ibEGNXWKW1Da0i9nPY6dNe7CEWy7pc+5EJpvfJVnvtUFUHFZBPWS2LYxKqiECztVpINypAuGS2nvQ6Gs+H0hsk0U3ZznDETguua1/MNpLvMWH/RFGEuuobCihScxqS2zPC6jH4rVaVcxn1UjQ1yJW1QK2MTJ6nrPOqp0d3Vk1WoSVOz7p0oHeWdTbpoh5i3sVWpezp23AGTWch+Mmonu0o0Vb+l6RqdabLmRnveH9ru7j54nGPw3sFwIihiIyNjX+QGxp0cDBwMyQUbGVidNjIwaEFoDhR6JwMDAycyi5nBZaMKY0dgxAaHjoiNzCkuG9VAvF0cDQyMLA4dySERICWRQLCRgUdrB+P/1g0svRuZGFwAB9MiuAAAAA==) format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}#story{z-index:10;margin:2.5em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:focus{outline:thin dotted}body{color:#eee;background-color:#111}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}span.link-disabled{color:#aaa}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{cursor:not-allowed;background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input:focus,input:hover,select:focus,select:hover,textarea:focus,textarea:hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}textarea{resize:vertical}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error{padding:.25em;background-color:#511;border-left:.5em solid #c22}.error[title]{cursor:help}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}#story a.link-external:after,.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0"}[data-icon-after]:after{content:"\00a0" attr(data-icon-after)}.error:before{content:"\00a0\e80d\00a0\00a0"}#story a.link-external:after{content:"\00a0\e80e"}.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}.passage .error{white-space:nowrap}.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-repeat-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-repeat-in,.macro-timed-in{opacity:0}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-dialog" type="text/css">html.ui-dialog-open body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:1000;position:fixed;top:0;left:0;height:100%;width:100%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:1100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:90%;height:calc(100% - 2.1em - 34px)}#ui-dialog-body.settings [id|=setting-body]{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-body.list{padding:0;min-width:140px}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;min-width:340px;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999}#ui-dialog-body.saves .datestamp{font-size:75%}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-label]{font-size:87.5%}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:.5em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.share{min-width:140px}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input],#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after,#ui-dialog-close{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-debugview" type="text/css">#ui-bar-body>#debug-view-toggle:first-child{margin-top:1em}#ui-bar-body>#debug-view-toggle:first-child+*{margin-top:1em}#debug-view-toggle{text-transform:uppercase}#debug-view-toggle:after,#debug-view-toggle:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#debug-view-toggle:before{content:"\e838\00a0"}html:not(.debug-view) #debug-view-toggle{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}html:not(.debug-view) #debug-view-toggle:hover{background-color:#333;border-color:#eee}html:not(.debug-view) #debug-view-toggle:after{content:"\00a0\00a0\e830"}html.debug-view #debug-view-toggle{background-color:#282;border-color:#4a4}html.debug-view #debug-view-toggle:hover{background-color:#4a4;border-color:#6c6}html.debug-view #debug-view-toggle:after{content:"\00a0\00a0\e831"}html.debug-view .debug{padding:.25em;background-color:#234}html.debug-view .debug[title]{cursor:help}html.debug-view .debug.block{display:inline-block;vertical-align:middle}html.debug-view .debug.invalid{text-decoration:line-through}html.debug-view .debug.hidden,html.debug-view .debug.hidden .debug{background-color:#555}html:not(.debug-view) .debug.hidden{display:none}html.debug-view .debug[data-name][data-type].nonvoid:after,html.debug-view .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html.debug-view .debug[data-name][data-type]:before{content:attr(data-name)}html.debug-view .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html.debug-view .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html.debug-view .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html.debug-view .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html.debug-view .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html.debug-view .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html.debug-view .debug[data-name][data-type|=special],html.debug-view .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript is required. Please enable it to continue.</noscript></div>
		<div id="init-lacking">Your browser lacks required capabilities. Please upgrade it or switch to another to continue.</div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<div id="store-area" data-size="219" hidden><div tiddler="Start" tags="nobr"></div><div tiddler="StoryTitle">Mall Rat</div><div tiddler="StoryIncludes">src\sMallRat.tw\nsrc\scharacters\sbree-enslave.tw\nsrc\scharacters\sbree-first-training.tw\nsrc\scharacters\sbree-stats.tw\nsrc\scharacters\sbree-talk.tw\nsrc\scharacters\scharlotte-talk-after-major.tw\nsrc\scharacters\scharlotte-talk.tw\nsrc\scharacters\seva-enslave.tw\nsrc\scharacters\seva-first-training.tw\nsrc\scharacters\seva-in-love.tw\nsrc\scharacters\seva-special-training.tw\nsrc\scharacters\seva-stats.tw\nsrc\scharacters\seva-talk.tw\nsrc\scharacters\ssu-blowjob.tw\nsrc\scharacters\ssu-enslave.tw\nsrc\scharacters\ssu-first-training.tw\nsrc\scharacters\ssu-stats.tw\nsrc\scharacters\ssu-talk.tw\nsrc\scharacters\stracy-first-training.tw\nsrc\scharacters\stracy-special-training.tw\nsrc\scharacters\stracy-stats.tw\nsrc\scharacters\stracy-talk-enslave.tw\nsrc\sconfig\ssugarCubeConfig.tw\nsrc\sevents\sarrested.tw\nsrc\sevents\sbad-end-failed-to-enslave-eve.tw\nsrc\sevents\sbad-end-major.tw\nsrc\sevents\sbad-end-out-of-time.tw\nsrc\sevents\sbad-end-virility-initiation.tw\nsrc\sevents\sbree-and-eva-introduction.tw\nsrc\sevents\scompleted-training.tw\nsrc\sevents\sdaily-training-results-new.tw\nsrc\sevents\sdaily-training-results.tw\nsrc\sevents\sday-end.tw\nsrc\sevents\sderek-teaches-ritual.tw\nsrc\sevents\sfight-the-major.tw\nsrc\sevents\sgeneric-slave-broken.tw\nsrc\sevents\sgeneric-slave-in-love.tw\nsrc\sevents\skeypad-questions.tw\nsrc\sevents\smeet-baba-yaga.tw\nsrc\sevents\spopular-people-evesdropping.tw\nsrc\sevents\srun-away-from-major.tw\nsrc\sinit\sinit.tw\nsrc\slocations\scorrupted-mall.tw\nsrc\slocations\send-of-the-road.tw\nsrc\slocations\shouse.tw\nsrc\slocations\sliving-room.tw\nsrc\slocations\small\small-east-wing.tw\nsrc\slocations\small\small-entry.tw\nsrc\slocations\small\small-food-court.tw\nsrc\slocations\small\small-foodcourt-vendors.tw\nsrc\slocations\small\small-north-wing.tw\nsrc\slocations\small\small-sears.tw\nsrc\slocations\small\small-south-wing.tw\nsrc\slocations\small\small-upstairs.tw\nsrc\slocations\small\small-west-wing.tw\nsrc\slocations\ssecurity-offices.tw\nsrc\sscript\ssettings-dialog.tw\nsrc\sscript\sstory-caption.tw\nsrc\sscript\suser-script.tw\nsrc\sstyle\suser-style.tw\nsrc\straining\sanal.tw\nsrc\straining\sblowjob.tw\nsrc\straining\sdress-her.tw\nsrc\straining\spositions.tw\nsrc\straining\sset-rules.tw\nsrc\straining\ssex-new.tw\nsrc\straining\ssex.tw\nsrc\straining\sspanking.tw\nsrc\straining\straining.tw\nsrc\straining\swidget-cum.tw\nsrc\straining\swidget-describe-hole.tw\nsrc\straining\swidget-exercise-kink.tw\nsrc\straining\swidget-impregnate.tw\nsrc\straining\swidget-lose-virginity.tw\nsrc\straining\swidget-orgasm.tw\nsrc\straining\swidget-penetrate.tw\nsrc\straining\swidget-stretch-hole.tw\nsrc\straining\swidget-swallow.tw\nsrc\straining\swidgets-diff.tw\nsrc\sutility\scss-widget.tw\nsrc\sutility\sdescribe-character.tw\nsrc\sutility\sdescribe-clothing.tw\nsrc\sutility\sdescribe-holes.tw\nsrc\sutility\senslave-widget.tw\nsrc\sutility\sinventory-passage.tw\nsrc\sutility\spassage-done.tw\nsrc\sutility\spassage-header.tw\nsrc\sutility\sshop-widget.tw\nsrc\sutility\sslave-position.tw\nsrc\sutility\sslave-stats.tw\nsrc\sutility\sslavename-widget.tw\nsrc\sutility\sstore-passage.tw\nsrc\sutility\strain-widget-unused-maybe.tw\nsrc\sutility\swidget-describe.tw\nsrc\sutility\swidget-he.tw</div><div tiddler="Introduction" tags="TimeNone">&lt;em&gt;Version: $version&lt;/em&gt;\n\n\tUpdate on this version:  Under the &quot;settings&quot; on the menu bar is the ability to change the font and appearance of the game.  I'd appreciate feedback, either on the dev blog or via email: &lt;a href=&quot;mailto:mallratdev@gmail.com&quot;&gt;mallratdev@gmail.com&lt;/a&gt;.\n\t\n\tThis is an adult game.  It tells the tale of a young man who receives some unusual gifts from his eccentric magician uncle, and the (mis-)uses he puts them to. \n\n\tIt contains magic, bondage, malls, rape, explicit sexual descriptions, and BDSM.  If those things are problems, you should stop now.\n\n\tThis is an alpha version.  It is incomplete and doubtless contains bugs.  The story is incomplete.\n\n\t[[I am 18 and want to play|Game Intro]]</div><div tiddler="Game Intro">Your 18th birthday was a week ago, and yesterday your parents left for a one month trip to Europe without you.  Since it's summer and you aren't even enrolled in school, you have nothing to do.  It'll be great!  \n\n\tWell, that's what you thought.  Yesterday was fun when the UPS guy brought a small chest from your uncle that turned out to contain a few trinkets, a note, and a bottle of whisky.  Half a bottle of whisky later you passed out, and you can't even remember if you read the note.\n\n\tNow, though, you're hung over and bored.  Drinking the other half bottle doesn't appeal by yourself.  Maybe you should get out of bed and see if you can find some people to hang out with.\n\n\t[[First, a dream|Dream]]\n\n\t&lt;&lt;if $debugging&gt;&gt;\n\t&lt;&lt;click &quot;Go right to enslaving Eva&quot;&gt;&gt;\n\t&lt;&lt;enslave &quot;Eva&quot;&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n\t[[Just get the note (testing)|The Note]]\n\t&lt;&lt;set $currentCharacter = $characters[0]&gt;&gt;[[Describe Eva (testing)|Describe Character]]\n\n\t[[Spencer's Gifts]]&lt;&lt;/if&gt;&gt;</div><div tiddler="Enslave Bree" tags="TimeNone autosave">You have a seat and pull out the collar.  You start toying with it idly, pretending to ignore Bree and her friends.  After a few minutes, she steps over.\n\t&quot;Hey, loser!  What's that?&quot;\n\t&lt;&lt;if Game.isSlave(&quot;Eva&quot;)&gt;&gt;\s\n\t\t&quot;Oh, just something Eva gave me.&quot;\n\t\t&quot;Ha!  She give that to you so you'd let her suck your cock?&quot;\n\t\t&quot;No.  She does that whenever I want anyway.&quot;\n\t\t&quot;I bet.  God, you two are gross losers.&quot;\n\t\t&quot;Whatever.  Anyway, you'd never wear anything like this.&quot;\n\t\t&quot;Duh.  You and your fat girlfriend may be into weird bondage shit, but not me.&quot;\n\t\t&quot;No, I mean because you couldn't.&quot;\n\t\t&quot;It's not like it's difficult.&quot;\n\t\t&quot;It's too small for you.  Eva's a really thin girl, this thing would never fit you.&quot;\n\t\t&quot;Bullshit!  She a cow!&quot; Her voice is up at least two octaves.  Some of her little friends look over in surprise.  Hmm... this seems to be working.\n\t\t&quot;No, she's at least two sizes smaller.&quot;\n\t&lt;&lt;else&gt;&gt;\s\n\t\t&quot;It's a collar.&quot;\n\t\t&quot;Weird.&quot;\n\t\t&quot;It looks really good on girls with thin necks.&quot;\n\t\t&quot;Whatever, I'd never wear any weird goth shit like that.&quot;\n\t\t&quot;You mean you couldn't.&quot;\n\t\t&quot;What do you mean?&quot; Her voice rises a bit, becoming shrill.\n\t\t&quot;I mean, it's not for big girls. Like I said, thin necks.&quot;\n\t\t&quot;I'm thin!&quot;\n\t\t&quot;I mean, you're not quite at plus sizes... yet.&quot;\n\t&lt;&lt;/if&gt;&gt;\s\n\t&quot;I'M A TWO, ASSHOLE!&quot; Her friends are definitely looking at the two of you now.\n\t&quot;I was talking about dress sizes.  But your ass is a nine at least.  I like 'em big.&quot;\n\t&quot;Fuck you!&quot;  She's noticed her friends and has lowered her voice to a dull hiss, but doubled the venom.\n\t&quot;You'd never be able to put this on.  It'd never buckle.&quot;\n\t&quot;Give me that!&quot;  Ah ha!\n\tShe wraps the leather around her neck and the clasp does it's self buckling thing, instantly securing itself around her neck.  She looks at you in shock and opens her mouth, but before she can say anything, you bark out, &quot;Shut up!&quot;\n\tShe stands, stunned, in front of your table.\n\t&lt;&lt;if Game.inventoryQuantity(&quot;Leash&quot;)&gt;&gt;\s\n\t&quot;Get on your hands and knees.&quot;\n\tShe doesn't have any idea of what's going on so she doesn't even try to resist.  She gets on her hands and knees right beside your table, struggling to speak but your order prevents it.  You snap the leash on the collar, stand up, and as her friends look on in shock, you say &quot;Heel&quot; in a firm voice and walk away, tugging on the leash to make her follow you.  People laugh and point.  Young men, and more than a few older ones, watch as she crawls away, her short skirt riding up and revealing her pink thong.  \n\tMall security looks askance but don't figure out what to do before you've left.  The sidewalk and parking lot aren't doing great things for her knees, and the high heels look ridiculous, but you're just amused.  You lead her up to your basement. \n\tEva's mouth opens in shock as you lead her bully into the room.  You unclip the leash, pull her skirt over her hips and pull her panties down so her cunt and asshole are visible from behind.  &quot;Go ahead and talk to Eva, slut.  I'm sure she has some things to discuss with you.  I'll be back later.&quot;\n\tBree immediately starts spewing invectives which you promptly ignore.  You slip out of the house with the sounds of Eva taunting Bree.&lt;&lt;enslave &quot;Bree&quot; 15&gt;&gt;&lt;&lt;set $flags.publicDominence += 2&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\s\n\tYou tell her to follow you, take her to your house, and tell her to get on her hands and knees.  She's too stunned from the events of the last few minutes to resist and gets on her hands and knees.  You pull her skirt over her hips and pull her panties down so her cunt and asshole are visible from behind.  &quot;Go ahead and talk to Eva, slut.  I'm sure she has some things to discuss with you.  I'll be back later.&quot;\n\tBree immediately starts spewing invectives which you promptly ignore. &lt;&lt;enslave &quot;Bree&quot;&gt;&gt;&lt;&lt;set $flags.publicDominence += 3&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t[[Mall Entrance]]</div><div tiddler="Bree First Training" tags="TimeNone">&lt;&lt;if Game.getSlaveIndex(&quot;Eva&quot;) != -1&gt;&gt;\s\n\t\tYou walk into your dungeon.  Eva looks up and smiles as you walk in.  Bree is on her hands and knees on the pool table where you left her.\n\t\t&quot;So, Master... you got some new meat.&quot;  Eva's smirking.\n\t\t&quot;You fucking asshole!  Let me go!&quot;  Bree isn't.\n\t\t&quot;So, how you ladies been keeping each other company?&quot;\n\t\t&quot;I don't know she's been enjoying it,&quot; says Eva, &quot;but we've been talking.&quot;\n\t\tDamn, Eva is ok.  &quot;Master, I have a... tiny little favor to ask.&quot;\n\t\t&quot;Oh really?&quot;  You know what she's asking.  Bree was a bitch to her for sure.  You just want to hear Eva say it.\n\t\t&quot;Yeah.  This stupid cunt sent a picture of me sucking cock... the *ONLY* cock I'd ever sucked at the time, by the way, to my dad!  Who does that? And all because I heard her throwing up after a meal. Hateful cunt!&quot;  Damn, Bree has a way with words.\n\t\tYou stay on target, though:  &quot;Ok, so Eva, what's the favor?&quot;\n\t\t&quot;Can I have her?  Just for a little while?  Please?&quot;\n\t\t&quot;Oh, sure.  Why not?&quot;  This ought to be interesting.\n\t\t&quot;Oh, thanks!&quot;  She flips her hair, and walks towards Bree with a menacing look on her face.  Yeah, it's a little disrespectful, but honestly, Bree is the worst.  And this ought to be fun.\n\t\tEva doesn't waste any time.  She grabs the bitch's hair, hauls her over to the pool table, and shoves her over.  Bree keeps up a constant stream of swearing, which Eva completely ignores while binding Bree's forearms behind her back.  She yanks the blonde down to the floor and manhandles her so she's on her back with her head almost under the table, then binds her ankles to the corner pockets, leaving the former school queen bent almost double with her legs spread wide and her face up.\n\t\t&quot;Bree,&quot; asks Eva in a very saccharine way, &quot;do you remember asking me to eat your pussy?&quot;\n\t\t&quot;No!  I never did!&quot;\n\t\t&quot;Bullshit.&quot;\n\t\tEva doesn't answer. She just moves her knee over Bree's upturned face, straddling her, and lowers her cunt down to a couple inches above Bree's face.  With no warning, she slaps Bree's bald cunt, hard, drawing a shriek, and says, &quot;You're going to learn how to eat a pussy now, bitch!&quot;\n\t\tShe slides her cunt onto Bree's face, smearing her with pussy juice, then settles down.  Then starts spanking that cunt and giving Bree instructions on how to eat pussy.  This goes on for over an hour.  As you're about to go, Eva grabs a huge black dildo, easilly ten inches long and massively thick, and presses it to Bree's asshole, not hard enough to penetrate... barely.\n\t\t&quot;Mmmf!&quot;\n\t\t&quot;Sorry, did you say something?&quot;  Eva settles down a bit, and the complaints are... more muffled.  She lifts the dildo and shoves it, hard at Bree's asshole, but it still doesn't quite go in.  \n\t\t&quot;MMM!   Mmmf!   Mmmmrgr!&quot;\n\t\tEva continues, jamming the dildo against Bree's virgin hole over and over, taking a moment here and there to slide her wet cunt on the blonde's face, forcing her to tonguefuck her hole.\n\t\tFinally, she seems to tire of the game, and says, &quot;Ok, cunt... time to stuff this hole!&quot;  She settles down completely over Bree's face, cutting off her air, grabs the dildo with both hands and raises it over her head as though it were some giant blade, and rams it straight into the bitch's ass.  Bree tries to thrash and screams into Eva's cunt, but the emo chick isn't done... she forces the entire length into that tight asshole, shoves it down, then pulls it all the way out and repeats, all the time slapping that bare cunt.\n\t\tWell, you'll have the chance to try out Bree later, and you're pretty sure whatever Eva does to her will help you out.\n\t\tBree has had her &lt;&lt;OBgood &quot;asshole stretched out&quot;&gt;&gt; and is now &lt;&lt;FEhigh &quot;terrified&quot;&gt;&gt; you'll give her to Eva.\n\t\tSometimes this job seems like it's worth it.\n\t\t&lt;&lt;nobr&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].obedience +=25&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].fear += 35&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].position = 2&gt;&gt;\n\t\t&lt;&lt;penetrate &quot;asshole&quot; &quot;slave Eva&quot;&gt;&gt;\n\t\t&lt;&lt;/nobr&gt;&gt;\n\n\t\t[[Train Character]] \n\n\t&lt;&lt;else&gt;&gt;\n\t\tBree is right where you left her, on her hands and knees in your dungeon, her skirt up and panties down.  She starts shouting and yelling curses when you walk in but you ignore her.  Instead, you walk up behind her while her head follows you, grab her hair, pull it hard and jam two fingers into her ass.  She shrieks.\n\t\t&quot;Don't like that, do you?  You'll be facing a lot worse.&quot;\n\t\t&quot;Quit it!  Ow!  You asshole!&quot;\n\t\t&quot;No, your asshole,&quot; you reply, and finger fuck her ass while she continues her abuse.  Having made your point, you stand up.\n\n\t\t[[Train Character]]\n\t&lt;&lt;/if&gt;&gt;</div><div tiddler="Bree Stats" tags="widget">&lt;&lt;if typeof $characters === 'undefined'&gt;&gt;\n\t\t&lt;&lt;set $characters = []&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;run $characters.push(\n\n\t{\n\t\tname:&quot;Bree&quot;,\n\t\tgender:&quot;female&quot;,\n\t\trelationship:-25,\n\t\tenslaved:0,\n\t\tisBroken:false,\n\t\tisInLove:false,\n\t\tisPregnant:false,\n\t\tisWorkingAt:&quot;&quot;,\n\t\tdescription:&quot;She is the queen of high school and has a platinum credit card.&quot;,\n\t\tbodySize:1,\n\t\tbodyTone:2,\n\t\tface:&quot;gorgeous&quot;,\n\t\tskin:&quot;tanned&quot;,\n\t\tfacialPeircings:&quot;&quot;,\n\t\thairColor:&quot;blonde with highlights&quot;,\n\t\thairLength:&quot;shoulder length&quot;,\n\t\thairCut:&quot;beautifully&quot;,\n\t\ttitsSize:7,\n\t\ttitsShape:&quot;perky&quot;,\n\t\tnippleSize:&quot;large&quot;,\n\t\tnippleColor:&quot;brown&quot;,\n\t\tnippleAreolae:&quot;large&quot;,\n\t\tnipplePeircings:&quot;&quot;,\n\t\tnavelPiercings:&quot;a ruby with a small chain&quot;,\n\t\tpussySize:1,\n\t\tpussyHairStyle:1,\n\t\tpussyHairColor:&quot;blonde&quot;,\n\t\tpussyLips:1,\n\t\tpussyClit:2,\n\t\tpussyClitPeircing:0,\n\t\tpussyLabiaRingsNumber:0,\n\t\tpussyLabiaHeavyRingsNumber:0,\n\t\tpussyLabiaStudsNumber:0,\n\t\tpussyLabiaZipperNumber:0,\n\t\tassholeSize:0,\n\t\tassholeStyle:0,\n\t\tassholeColor:0,\n\t\t\n\t\t\t/* eva's starting clothes */\n\t\tclothingRevealing:0,\n\t\tclothingTop:1,  \t\n\t\tclothingBottom:1,\n\t\tclothingWrists:1,\n\t\tclothingAnkles:-1,\n\t\tclothingCollar:-1,\n\t\tclothingShoes:1,\n\n\t\tplugToy:0,\n\t\tdildoToy:0,\n\t\tnippleToy:0,\n\t\twaistToy:0,\n\t\tbreastToy:0,\n\t\tcrotchToy:0,\n\t\tgagToy:0,\n\t\t\n\t\t/* slave training stats */\n\t\tobedience:-25,\n\t\tfear:0,\n\t\tsexDrive:6,\n\t\t\n\t\t/* sex training accumulation */\n\t\tpain:0,\n\t\tlust:0,\n\t\tposition:0,  /*  standing, all fours, ass up, etc. */\n\t\t\n\t\t/* sex trainings progress */\n\t\toral:0,\n\t\tcum:0,\n\t\tdeepthroat:0,\n\t\tpenetration:0,  // large objects, painful pounding\n\t\tanal:-2,\n\t\tpainal:-2,\n\t\t\n\t\tbegging:0,\n\t\thumiliation:0,\n\t\tbondage:0,\n\t\tmasochism:0,\n\t\thousework:0,\n\t\tsubmission:-1,\n\t\t\n\t\tresistOral:15,\n\t\tresistCum:30,\n\t\tresistDeepthroat:35,\n\t\tresistPenetration:50,\n\t\tresistAnal:55,  \t\t\n\t\tresistPainal:75,\n\t\tresistBegging:30,\n\t\tresistHumiliation:35,\n\t\tresistBondage:55,\n\t\tresistMasochism:55,\n\t\tresistHousework:35,\n\t\tresistSubmission:40,\n\t\t\n\t\t/*  Flags and stuff related to sex training */\n\t\tdoneInspection:0,\n\t\trefused:0,\n\t\tbrokeRule:0,\n\t\tdoneSpecialTraining:false,\n\t\t\t\t\n\t\t/* Counters for various events */\n\t\thasSucked:0,\n\t\thasPussyFucked:0,\n\t\thasAssFucked:0,\n\t\thasSwallowedCum:0,\n\t\t\n\t\t\n\t\t/* Rules */\n\t\trulesNoMasturbate:0,\n\t\trulesNoOrgasm:0,\n\t\trulesSwallowCum:0,\n\n\n\t})&gt;&gt;</div><div tiddler="Talk to Bree">&quot;Hey... um...&quot;  Shit.  That didn't come out right.\n\t&quot;Yeah?&quot;  Seriously, do they teach that eye roll in Bitch College or something?  But she's in high school.  How'd she get a PhD?\n\t&quot;Well...&quot;\n\tShe laughs.  All of her stupid friends laugh.  \n\tThat didn't work.  You step away to keep your dignity... unsuccessfully.  \n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Talk to the Mall Cop" tags="TimeNone">The poor woman that the Major was assraping and torturing with the taser, &lt;&lt;describe &quot;Charlotte&quot; &quot;Charlotte&quot;&gt;&gt; is still huddling in the corner.\n\n&lt;&lt;set $pc.isKickedOut = false&gt;&gt;\s\n&lt;&lt;if Game.inventoryQuantity(&quot;Leather Collar&quot;)&gt;&gt;[[Try to put the collar on her]]&lt;&lt;/if&gt;&gt;\n[[Talk to her|Talk to Charlotte]]</div><div tiddler="Try to put the collar on her" tags="TimeNone">You know it's a dick move, but while she's weeping in the corner, you sneak up on her and slap the collar around her neck.  It fastens itself on, and you take her home.\nIt's late, and you've had a long day.  You leave Charlotte in the dungeon and get ready to go to bed.\n\n[[Your Room][$hour=25]]</div><div tiddler="Talk to Charlotte" tags="TimeNone">&quot;Hey, are you ok?&quot;\n&quot;No... What the fuck?!  The Major just raped me!&quot;\n&quot;I know.  Look, weird stuff has been going on.&quot;\n&quot;You see it too?&quot;  She looks hopeful.\n&quot;Yep.  I've got all this weird magical shit going on, and... well, slaves and stuff...&quot;\n&lt;&lt;if $pc.beenArrested &gt; 0&gt;&gt;&quot;Oh yeah.  I remember you.  You tried to get me to wear a collar.&quot;&lt;&lt;else&gt;&gt;&quot;God.  Although the Major kept talking about being a slave.&quot;&lt;&lt;/if&gt;&gt;\n&quot;Yeah.  And there's something going on in the mall... weird shit and I might be the only one who can do something about it.&quot;\n&quot;You know, that's crazy as shit.&quot;\n&quot;I know, but...&quot;\n&quot;I believe you.  Come look at these monitors.&quot; She's seemingly forgotten about being assraped.  She takes you to the bank of monitors and shows you footage of the hot dog place... you watch as she runs the recording forward as the workers prep the food and open the door... then there's a burst of static, and the time skips to closing time, 9pm.  \n&quot;Weird. Can you do frame by frame?&quot;  You have a weird feeling about this.\n&quot;Sure.  Hang on.&quot;  She turns a dial and the film rewinds in skips and starts.  Then she turns it the other way, just a little.  The workers are again opening the store.\n&quot;Nothing weird...&quot; she says.\nThe screen skips and the time stamp jumps 11 hours.\n&quot;There!  Walk it back a little.&quot; You're sure you saw something.\n&quot;Ok, a minute...&quot;  She manipulates the controls and just as the static starts she pauses and walks forward frame by frame.\nThe next frame shows a very different scene... there's a woman bound very tightly over a stool.  Her arms are bound behind her back and her legs and torso to the stool she's bent over.  Men, seeming unaware of what they're doing, walk up and shove their cocks in her mouth, pussy, or asshole and order at the counter.  They receive their food, then pump whichever hole they're in a few times, drop some money on the counter, and leave.\nWhat.  The.  Fuck. That's weird. \nThen the screen slips again, and it's just a hot dog place.  \n&quot;So, I think you should check out the food court vendors.&quot;\n&quot;Yeah. Yeah, maybe I should, at that.&quot;\n&quot;I hope you can fix this.  As weird as it seems, I think you're the only one who can help.&quot;\n&lt;&lt;if $flags.evaIsTaggingAlong&gt;&gt;&lt;&lt;display &quot;Eva Steps Up&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&quot;I'll do my best.  At least I can take care of your trespass warning.&quot;&lt;&lt;/if&gt;&gt;\n\n[[Go home|Outside House][$hour = 25]]</div><div tiddler="Enslave Eva">Eva says, &quot;Hey, bro.  What's going on?&quot;\n\t&quot;Not much.  Hey, I like your cuffs!&quot;\n\t&quot;Oh yeah?  {she blushes} They kind of kick ass, I guess.&quot;\n\t&quot;I have a collar that looks a lot like those.  Want to see it?&quot;\n\t&quot;Sure!&quot;\n\tYou pull out the collar and show her the weird lettering.  She turns it over in her hands, obviously interested despite herself.\n\t&quot;Have you tried it on?&quot; she asks.\n\t&quot;No, it looks like it's for a smaller neck.  Would you like to try it on?&quot;\n\t&quot;Ok, I guess.&quot;\n\tShe puts on the collar, and when she goes to fasten the buckle, it threads through the loop and the bar fastens itself in a fraction of a second. \n\t&quot;What the fuck!  It fastened itself!  Hey, I can't get it off!&quot;\n\tShe looks pissed, and her voices ramps up to a shriek.  Nerous that you'll attract the wrong kind of attention, you bark out &quot;Shut up!&quot;\n\tShe instantly quiets down.  She's glaring at you furiously, and seems to be trying to work her mouth, but there's no sound.  Curious, you say &quot;Raise you arms,&quot; and she does, looking even more angry.  \n\tHuh... that's interesting.  You try something else... &quot;Lift up your shirt and show me your tits,&quot; and with a furious glare, she does until you tell her to put them away.\n\t&lt;&lt;if Game.inventoryQuantity(&quot;Leash&quot;)&gt;&gt;\s\n\tWith a wicked smirk, you take out the leash.  You knew this would come in handy!  You click it to the ring set in the collar, and start to walk back to your house.  Angry but helpless, Eva resists but when you tug her along she stumbles after.  Furiously blushing, you lead her out of the mall and along the streets, while people start in amazement.  You install her in the game room.\n\t&quot;Stay!&quot; She stands glaring at you as you unfasten the leash.  She'll keep here until tonight... and then you'll have some real fun with the goth... let's see if she's really a poser.\n\t&lt;&lt;set $flags.publicDominence += 2&gt;&gt;\s\n\t&lt;&lt;else&gt;&gt;\s\n\t&quot;Follow!&quot; you tell her, and head home.  You put her in the game room for now and tell her to stay.  You can play with her after the mall closes... Priorities!\n\t&lt;&lt;set $flags.publicDominence += 1&gt;&gt;\s\n\t&lt;&lt;/if&gt;&gt;\s\n\t&lt;&lt;run Save.autosave.save(&quot;Enslave Eva&quot;)&gt;&gt;\s</div><div tiddler="Eva First Training" tags="TimeNone">When you walk back in the room, Eva is right where you left her, looking bored and nervous.\n&quot;What the fuck, dude?  How did you make me do that, and why can't I leave?&quot;\n&quot;It's the collar, of course,&quot; you reply.\n&quot;Is this some kind of joke?  I mean, what, the collar is magical or something?&quot;\n&quot;Exactly.  Some weird shit my uncle gave me.  I guess he was a real magician, or something.&quot;\n&quot;Pfft.  So you're actually a magician's nephew?  Like from Narnia?&quot;\n&quot;I don't know about that, but you have to admit it worked.&quot;\n&quot;I guess.  So you had your fun, even looked at my tits.  Why don't you take this thing off and let me go home?&quot;\n&quot;No way!  I have a magic collar that makes you do what I say, and I'm going to have fun with it.&quot;\n&quot;No!  Wait, you can't do that.  It's like rape!&quot;\n&quot;You're looking at this wrong.  I have some sort of magic vision from another of Uncle's gifts, and I can tell things about you.&quot;\n&quot;Oh yeah?  Like what?&quot;\n&quot;I can see you're submissive and like being spanked.&quot;\n&quot;Bullshit!  That's weird perverted shit!&quot;\n&quot;Eva, I order you to tell the truth.  Do you fantasize about being spanked and stuff?&quot;\n&quot;Yes.  Wait, what!  How'd you make me say that?!?&quot;\n&quot;I just ordered you to tell the truth.  I know you're a virgin too... have you ever had sex of any kind?&quot;\n&quot;I sucked an ex-boyfriend's dick once... shit, I hate that you can make me tell you this stuff!&quot;  She's blushing pretty hard now.\n&quot;Well, look at it this way.  You've never been able to get anyone to do the kinky stuff you fantasize about.  I'm going to make you do all that stuff.  It's a chance for you to live out things you've been afraid of.&quot;\n&quot;Gross!  No way I'll let you do that stuff!&quot;\n&quot;Eva...&quot; you let your voice get deeper and stare into her eyes.  She blushes and looks away.  &quot;You think you can stop me?&quot;\n&quot;Yes... maybe... shit, I don't know.&quot;\n&quot;Are you wet?&quot;\n&quot;N... n... fuck.  I don't know.&quot;\n&quot;Take off your panties.&quot;\n&quot;Hey!  Uh oh...&quot; she stammers while reaching under her skirt.  She pulls her panties off, struggling avoid flashing her bare pussy to you, then steps out of them.\n&quot;Check if you're wet.&quot;\n&quot;You bastard!&quot; she says, but slides a hand under her skirt.  &quot;Yes, I am... damn!&quot;\n&quot;So you see, this stuff is exciting to you, right?&quot;\n&quot;Yes.  Ok, I guess it is.  But that doesn't mean I want you to make me!&quot;\n&quot;Oh really?  I think that's exactly what you want.  Come here.&quot;\nWhen she steps closesr to you, you reach behind her head and grab her hair from behind.  You pull her face close, and look in her eyes.  She moans, blushing furiously, and very obviously arroused.  You reach under her skirt and grab her pussy.  She's shaved but has a tiny strip above her pussy, but more importantly she's soaking wet.  You slide your finger up her snatch to her clit and give it a rub, drawing a moan from her, then suddenly use your handful of hair to shove her face-first over the pool table.  You kick her feet apart, the land a slap on her ass.  She makes a cute little surprised noise.  You pull up her skirt and expose her pale ass, and spank her lightly, building up until she's panting and moaning.  Then you slide a finger into her now-dripping cunt, finger fuck her a few times while she squirms, and then let her go and take a step back.  She remains bent over the pool table for a minute panting, then, realizing her situation she stands, straightens her skirt, and looks at you with a strangely timid gaze.\n&quot;So, I think everything is exactly as I said.  You do want this and if you let yourself, you'll enjoy it.  Isn't that right?&quot;\n&quot;N... damn!  Maybe, I guess.  It's still pretty fucked up.  I'm not just going to bend over and let you fuck me or whatever you want to do!&quot; \n&quot;I didn't expect you would.  That's why I'm going to train you.&quot;\n&quot;What!  What do you mean, train me?!?&quot;\n&quot;I figure if I push you a little here, spank you when you disobey, and condition you with pleasure and orgasms, the collar will do the rest and you'll do anything I want.  Want to try it?&quot;\n&quot;Fuck!  Weirdo!  Of course I do... do... damn!  Yes, I guess, but it's fucked up, man!&quot;\n&quot;Good girl.&quot;\nShe blushes, and although she's glaring, she is breathing faster and you can see her nipples poking through her shirt.  She may not be on board (yet) but her natural submissive nature ought to make her easy to train, and somehow you can just feel that the collar will help.  \n\nLet's do this.\n\n[[Train Character]]</div><div tiddler="Eva In Love" tags="TimeNone">&quot;Master?&quot;\n\t&quot;Yes, Eva?&quot;\n\t&quot;I guess you were right.&quot;\n\t&quot;About what?&quot;\n\t&quot;I do like being spanked and ordered around.&quot; &lt;&lt;set $slaves[$csi].submission = 3&gt;&gt;&lt;&lt;set $slaves[$csi].masochism = 3&gt;&gt;\n\t&quot;I'd noticed.&quot;  She turns red and glares at you for a moment, then blushes and looks down.\n\t&quot;It's weird... I guess I thought about this stuff but never really thought people would do it, or I could do it.  Being under your control gave me the excuse to do it.  Thank you, Master.&quot;\n\tWow... she seems genuinely happy.\n\t&quot;You're welcome, slave.&quot;  She blushes more furiously, and smiles.  She gets on her hands and knees and crawls up to you.\n\t&quot;Master... you don't need this collar any more.  I mean, with me.  I know you have uses for it, and I want to help you any way I can.&quot;\n\tYou can tell it's the truth.  For one thing, she's ordered to tell the truth, but for her it goes deeper.  She really loves obeying you.\n\t&quot;Thank you, Eva.  That's very thoughtful.&quot;  You remove the collar and set it aside.  &lt;&lt;run Game.inventoryAdd(&quot;Black Leather Collar&quot;)&gt;&gt;\n\t&quot;And, Master?  I know there's something weird at the mall.  I know a way in that I don't think anyone else does.  There's a weird panel behind the dumpster, you know the smoking area?  I figured out how to open it, and it lets you into a service tunnel to the service passage, and to the security offices below.  I know they patrol the mall at night, but maybe the security offices... I don't know.  I just wanted you to know.&quot;  &lt;&lt;set $flags.knowsAboutSecretEntrance = true&gt;&gt;\n\t&quot;Thank you, Eva.  You're a good girl.&quot;\n\t&quot;Oh, and Master...&quot;\n\t&quot;Yes, Eva?&quot;\n\t&quot;You know that bitch, Bree? She sent a picture of me sucking cock... the *ONLY* cock I'd ever sucked at the time, by the way, to my dad!  Who does that? And all because I heard her throwing up after a meal. So if there's anything mean, well, she deserves it.&quot; &lt;&lt;set $flags.knowBreeWeightIssues = true&gt;&gt;\n\tHah.  Man, it's like Mean Girls.  &quot;I'll keep it in mind.&quot;\n\t&quot;And... um... could I ask a favor, Master?&quot;\n\t&quot;What is it?&quot;\n\t&quot;Would you spank me hard and fuck my holes?&quot;\n\t&quot;Get over my lap.&quot;\n\t&quot;Yay!&quot;</div><div tiddler="Eva Special Training" tags="TimeNone">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\s\n\t\t&lt;&lt;set $slaves[$csi].doneSpecialTraining = true&gt;&gt;\s\n\t\t&quot;Ok, Eva.  Are you ready to start?&quot;\n\t\t&quot;I guess.&quot;\n\t\t&quot;I'm going to work on bringing your submissive tendancies to the front.  I'll make you suffer for me and do things that are humiliating to prove how much you want to serve me, and reward you by letting you please me.&quot;\n\t\t&quot;Oh... fuck!  This sounds pretty crazy!&quot;\n\t\t&quot;I know.  But you do want to serve me, don't you?&quot;\n\t\t&quot;Yeah... I guess.  It's weird but I do.&quot;\n\t\t&quot;Then call me Master.&quot;\n\t\t&quot;What, really?&quot;\n\t\t&quot;Yes, really!  For one thing,  I am.  I can make you do what I want.&quot;\n\t\t&quot;I guess that's true.&quot;\n\t\t&quot;You guess that's true, what?&quot;\n\t\t&quot;Master.&quot;\n\t\t&quot;You've earned your first punishment.&quot;\n\t\t&quot;Yes... Master.  Damn, you're pretty intense in an intimidating way, Master!&quot; She starts breathing hard and a blush has come to her face.\n\t&lt;&lt;/replace&gt;&gt;\s\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\s\n\n\n\t\t&lt;&lt;link &quot;Put her over your knee for a light spanking&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Eva Special Spank&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t\t&lt;&lt;link &quot;Take off your belt and beat her ass and tits&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Eva Special Belt&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\s\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Eva Special Spank" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&quot;Get over my knee, slave.&quot;&lt;br&gt;\n\t\tEva does as she's told, anxious to see what's going to happen to her.&lt;br&gt;\n\t\t&lt;&lt;if $slaves[$csi].clothingLower != -1&gt;&gt;\n\t\t\tYou spank her slowly, not hard at first, over her skirt. She wriggles her cute little goth ass in an appealing way and soon your cock is hard and pressed against her belly.  You put a little more force into your slaps, not striking quickly but letting your palm push her little buttocks and jogging her ass.  She starts moaning, obviously getting into it.  You keep this up for a good five minutes until she starts moaning.  You land a couple hard slaps and she gasps.&lt;br&gt;\n\t\t\t&quot;Lift up your skirt.&quot;&lt;br&gt;\n\t\t\tShe turns her head to show you a face both aroused and nervous, then reaches back to pull her skirt up over her hips, exposing her bare ass to you.&lt;br&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].lust += random(8) + 4&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\tYou run your hands across her nice little ass, down her thighs, and back up along the insides of her thighs, almost touching her pussy but not quite.  You grab one cheek hard and spread her a little, then the other, and she moans.  The next trip down and back up her thighs, you slide your hand between her lips.  She's pretty wet already.  You very slowly rub her clit and a rewarded by her wiggling her hips; you slowly slide a finger into her pussy.&lt;br&gt;\n\t\t&quot;Are you ready? This is going to hurt.&quot;&lt;br&gt;\n\t\t&quot;Fuck...&quot; She shifts her hips, trying to work your finger in her. &quot;Yes, Master... I'm ready.&quot;&lt;br&gt;\n\t\tYou grab her hair with your left hand and pull your finger out of her, bringing it to her mouth.&lt;br&gt;\n\t\t&quot;Open.&quot; She obeys, panting now, and you put your finger in her mouth.  She willingly licks and sucks it clean.  It feels good enough that you let her do it for a while.&lt;br&gt;\n\t\tYou return your hand to her ass.  She tenses a little bit as you rub her ass, worried and excited about what's to come.&lt;br&gt;\n\t\tPulling her hair hard enough to bring her head up, you spank her just hard enough to hurt.  She gasps in shock.  You slowly spank her one cheek after the other, giving enough time between slaps to let the pain fully register.  You keep it up for a couple minutes and her pale goth ass is quivering and turning a pretty shade of red.  She squirms, mostly from pleasure.  You stop for a moment and rub her ass.  You relax your pulling of her hair and give her a moment for a breather.&lt;br&gt;\n\t\t&quot;Oh God, Master, that was good!  I love you spanking me!&quot;&lt;br&gt;\n\t\t&quot;That was a warm-up, slave.  I'm about to really start spanking you.&quot; You slide a finger into her cunt, bringing a gasp.  She's literally dripping now and you can feel her cunt pulse against your finger, inviting you to slide a second and slowly fucking her with them.  She bucks her hips, moaning, and you keep it up until she feels like she's about to orgasm.  You pull your fingers out and pull on her hair; she turns her head and opens her mouth without being prompted and sucks her juices enthusiastically off of them.  Eva's a pretty good slave!&lt;br&gt;\n\t\t&quot;Good girl, Eva.&quot;&lt;br&gt;\n\t\t&quot;Oh fuck, Master... I love this.  Please spank me hard!&quot;&lt;br&gt;\n\t\t&quot;Good girl.&quot; You pull hard on her hair, bringing her head up, and slap one cheek hard, although not with full force, then quickly spank the other.  You spank her quickly and hard and she starts wiggling almost immediately, gasping and whimpering.  You gradually increase the strength all the while slapping her quickly and it starts to overwhelm her.  Her whole body writhes as she struggles to escape the blows but you don't let up.  She tries to cover her ass with her hands but you quickly bark &quot;No!&quot; and she desists.&lt;br&gt;\n\t\t&quot;Fuck!  Oh fuck!  Please Master!  Ow!&quot;&lt;br&gt;\n\t\tYour only response is to pull her hair harder as you keep up the flurry of blows.  Her ass is a dark red and getting splotches that will deepen into bruises in the coming days.  She keeps up a patter of protest, struggling and panting.  She starts to cry as it gets to be too much for her and at that moment you stop.&lt;br&gt;\n\t\t&quot;Ahh!  Oh fuck...&quot; She moans as you relax your hold on her hair and sobs softly. &quot;Oh man, Master.  I didn't know if I could handle that!&quot;&lt;br&gt;\n\t\t&quot;You're not done yet.  I'm going to spank you until you come.&quot;&lt;br&gt;\n\t\t&quot;Oh fuck! Master, I don't think...&quot; You don't let her finish, you shove two finger in her and finger her hard.  She can't continue the thought and within a few seconds she's at the edge of orgasm again.  You push her to the very edge then pull her hair hard and spank her quickly, not quite as hard this time but there's definitely pain.  She whimpers and wiggles prettily.  You stop suddenly and finger her again for a few seconds then spank her hard.  She comes explosively, screaming incoherently.  You spank her as hard as you can while she comes and her noises become animalistic.  She comes for a long time, struggling to get away from the beating the whole time.  Eventually her shrieks turn to sobs and you stop spanking her and let her collapse.  You rub her ass and stroke her hair while she comes down from the orgasm.  For long minutes she lays inert over your lap.&lt;br&gt;\n\t\t&quot;Oh... oh man.  Wow.  That- that was amazing.&quot;&lt;br&gt;\n\t\t&quot;Good girl.&quot; She whimpers and turns her head to look up at you.  Her makeup is streaked down her face and she seems to be in a daze.&lt;br&gt;\n\t\t&quot;I- You- You're going to do this, aren't you?  Turn me into a slave? Master?&quot;&lt;br&gt;\n\t\t&quot;Yes.  I am.&quot;&lt;br&gt;\n\t\t&quot;I... I think I'm glad.  Fuck! My ass hurts, Master!&quot;&lt;br&gt;\n\t\tYou chuckle, and she looks a little mad, then smiles. &quot;You're really evil, you know that Master?&quot;&lt;br&gt;\n\t\t&quot;I sure do.  Now, let's see how you work with your mouth.&quot;&lt;br&gt;\n\t\tShe smiles, and gets on her knees in front of you. &lt;&lt;if $slaves[$csi].clothingTop != -1&gt;&gt;She pulls her top aside to reveal her tits and spreads her knees wide, rubbing her clit with one hand while playing with her nipples with the other.&lt;&lt;else&gt;&gt;She spreads her knees wide, rubbing her clit with one hand while playing with her nipples with the other.&lt;&lt;/if&gt;&gt; She makes eye contact, looks up at you, and opens her mouth wide with her tongue out then takes you into her mouth.  Her attitude is excellent, she works hard and sucks very submissively.  It's obvious she doesn't have much experience but her enthusiasm is enough and it's not long before you cum in her mouth. \n\t\t&lt;&lt;cum &quot;mouth&quot;&gt;&gt;\n\t\tShe captures it all and looks up at you, opens her mouth to show you the cum, then swallows and smiles up at you.&lt;br&gt;\n\t\t&quot;Thank you, Master.&quot;&lt;br&gt;\n\t\t&quot;Good girl, Eva.&quot;&lt;br&gt;\n\t\tTraining her to accept pain has @@.kink-good;deepened her masochism@@ and made her @@.relationship-very-good;made her willing to trust you.@@\n\t\t&lt;&lt;if $slaves[$csi].masochism &lt; 3&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].masochism += 1&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].relationship &lt; 0&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship = 0&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].relationship += random(10) + 20&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].lust += random(10) + 5&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].obedience = random(10) + 5&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Back to training&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Finish Eva Special Training&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Eva Special Belt" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&quot;You've got to learn when you disobey you will be punished.  I'm going to beat your ass and tits until you're crying.&quot;&lt;br&gt;\n\t\t&quot;Oh fuck... no, Master.  Please go easy on me!&quot; She looks shocked at your threat.&lt;br&gt;\n\t\t&quot;I'll be obeyed one way or another.  Strip and stand still.&quot;  Tears form in her eyes as she struggles against the collar, but she loses.  She strips off her clothes then stands in the middle of the room while you retrieve some things off the shelves.  You tie her wrists tightly while she begs and asks you to stop, but you ignore her.  Tossing the end of the rope over a beam in the ceiling you fasten her tightly.  You then secure rope to her ankles and tie the other ends to furniture spreading her legs obscenely far and exposing her ass, tits, and cunt.  Finally you tighten the rope holding her wrists so she's on the tips of her toes.  You pick up the belt.&lt;br&gt;\n\t\t&quot;Please, Master... don't do this!  I'm sorry!  I'll obey, Master!&quot; She starts to sob in terror.&lt;br&gt;\n\t\tYou could change your mind, if you want to.\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Belt the slut&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Eva Special Belt 2&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Take pity on her&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Eva Special Take Pity&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Eva Special Belt 2" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\t&quot;You need to be taught a lesson.  You suffer if you disobey.&quot;&lt;br&gt;\n\t\tHer sobs become wretched as you walk behind her and double up the belt.  You lay on hard, leaving large angry red welts across her ass, making her scream at each blow.  You work her ass hard for several minutes until her ass is a dark purple, the work down her thighs.  Her screaming and sobbing, which had reduced, pick up until they become hoarse, but you don't let up.  You walk around to the front and lightly tap the belt on her tits.&lt;br&gt;\n\t\t&quot;So, tits next?&quot;&lt;br&gt;\n\t\tShe tries to catch her breath and stop sobbing long enough to answer, and finally manages, &quot;Please, no, Master.&quot;  Tears are running down her face and leaving streaks of makeup on her cheeks.&lt;br&gt;\n\t\tYou lower the belt and tap it on her exposed sex. &quot;Cunt, then?&quot;&lt;br&gt;\n\t\tHer eyes fly open in terror and she lets out a whimpery scream.  &quot;No!  Oh, god, no Master!  Please!&quot;&lt;br&gt;\n\t\t&quot;Choose.&quot; She looks horrified and can't take her eyes off the belt, but finally shudders and says, &quot;Tits... Master.&quot;&lt;br&gt;\n\t\tYou slap the belt off her left tit, leaving a deep red mark and bringing another scream.  You hit the right one, this time hitting the nipple straight on and making her shriek and twist in the ropes but there's not escape.  You alternate tits until the skin is deep purple and her nipples are red and angry.  She can't keep up screaming and is hanging loosly in the ropes by the time you're done. &lt;br&gt;\n\t\t&quot;I guess now it's time for the cunt.&quot; She looks up but doesn't seem to have the strength to answer.  Undeterred you take the belt to her cunt, and that wakes her up.  She struggles and screams but you keep it up until her pussy lips are enflamed and her slit is a deep red.&lt;br&gt;\n\t\t&quot;Do we have an understanding?&quot; She can't seem to move or answer.  Her eyes are glazed.&lt;br&gt;\n\t\t&quot;I guess we start over.&quot; She shakes with terror and manages to answer.&lt;br&gt;\n\t\t&quot;Ye- Yes, Master.  I'll obey.&quot;&lt;br&gt;\n\t\t&quot;You'd better.&quot;  You leave her hanging there and go to the kitchen for a soda, putting your belt back on.  Man, that was thirsty work.&lt;br&gt;\n\t\tTraining her in such a brutal way has made her @@.fear-high;terrified@@ of you and @@.relationship-very-bad;hate@@ you.  She's @@.bad;lost her masochism@@ and now hates pain.\n\t\t&lt;&lt;if $slaves[$csi].relationship &gt; 0&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship = 0&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].relationship -= random(20) + 10&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].fear += random(20) + 20&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].masochism = -1&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;All done&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Finish Eva Special Training&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Eva Special Take Pity" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&quot;You promise you'll obey?&quot;&lt;br&gt;\n\t\t&quot;Yes, Master!  I promise!  Please don't beat me!&quot;&lt;br&gt;\n\t\t&quot;Fine.  If you ever refuse to obey, you'll be back in those ropes.&quot;&lt;br&gt;\n\t\t&quot;Yes, Master!  Thank you!&quot;&lt;br&gt;\n\t\tShe's @@.relationship;horrified@@ you were about to beat her, and @@.fear-low;scared of you@@ now, but letting her go hasn't done anything for her obedience.\n\t\t&lt;&lt;set $slaves[$csi].relationship -= random(10) + 5&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].fear += random(10) + 5&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;All done&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Finish Eva Special Training&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Finish Eva Special Training" tags="nobr TimeNone">&lt;&lt;goto &quot;Train Slave&quot;&gt;&gt;</div><div tiddler="Eva Stats" tags="widget">&lt;&lt;if typeof $characters === 'undefined'&gt;&gt;\n\t\t&lt;&lt;set $characters = []&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;run $characters.push(\n\t{\n\t\tname:&quot;Eva&quot;,\n\t\tgender:&quot;female&quot;,\n\t\trelationship:0,\n\t\tenslaved:0,\n\t\tisBroken:false,\n\t\tisInLove:false,\n\t\tisPregnant:false,\n\t\tisWorkingAt:&quot;&quot;,\n\t\tdescription:&quot;She oozes teenage angst.&quot;,\n\t\tbodySize:2,\n\t\tbodyTone:1,\n\t\tface:&quot;pretty&quot;,\n\t\tskin:&quot;pale&quot;,\n\t\tfacialPeircings:&quot;a septum ring in her nose&quot;,\n\t\thairColor:&quot;midnight black&quot;,\n\t\thairLength:&quot;short&quot;,\n\t\thairCut:&quot;with bangs&quot;,\n\t\ttitsSize:5,\n\t\ttitsShape:&quot;perky&quot;,\n\t\tnippleSize:&quot;small&quot;,\n\t\tnippleColor:&quot;pink&quot;,\n\t\tnippleAreolae:&quot;small&quot;,\n\t\tnipplePeircings:&quot;&quot;,\n\t\tnavelPiercings:&quot;a small stud&quot;,\n\t\tpussySize:0,\n\t\tpussyHairStyle:2,\n\t\tpussyHairColor:&quot;black&quot;,\n\t\tpussyLips:0,\n\t\tpussyClit:1,\n\t\tpussyClitPeircing:0,\n\t\tpussyLabiaRingsNumber:0,\n\t\tpussyLabiaHeavyRingsNumber:0,\n\t\tpussyLabiaStudsNumber:0,\n\t\tpussyLabiaZipperNumber:0,\n\t\tassholeSize:0,\n\t\tassholeStyle:0,\n\t\tassholeColor:0,\n\t\t\n\t\t\t/* eva's starting clothes */\n\t\tclothingRevealing:false,\n\t\tclothingTop:0,  \t\n\t\tclothingBottom:0,\n\t\tclothingWrists:0,\n\t\tclothingAnkles:0,\n\t\tclothingCollar:-1,\n\t\tclothingShoes:0,\n\n\t\tplugToy:0,\n\t\tdildoToy:0,\n\t\tnippleToy:0,\n\t\twaistToy:0,\n\t\tbreastToy:0,\n\t\tcrotchToy:0,\n\t\tgagToy:0,\t\t\n\t\t\n\t\t/* slave training stats */\n\t\tobedience:0,\n\t\tfear:0,\n\t\tsexDrive:12,\n\t\t\n\t\t/* sex training accumulation */\n\t\tpain:0,\n\t\tlust:0,\n\t\tposition:0,  /*  standing, all fours, ass up, etc. */\n\t\t\n\t\t/* sex trainings progress */\n\t\toral:0,\n\t\tcum:0,\n\t\tdeepthroat:0,\n\t\tpenetration:0,  // large objects, painful pounding\n\t\tanal:0,\n\t\tpainal:0,\n\t\t\n\t\tbegging:0,\n\t\thumiliation:0,\n\t\tbondage:0,\n\t\tmasochism:1,\n\t\thousework:0,\n\t\tsubmission:1,\n\t\t\n\t\tresistOral:15,\n\t\tresistCum:20,\n\t\tresistDeepthroat:35,\n\t\tresistPenetration:50,\n\t\tresistAnal:55,  \t\t\n\t\tresistPainal:75,\n\t\tresistBegging:12,\n\t\tresistHumiliation:35,\n\t\tresistBondage:40,\n\t\tresistMasochism:55,\n\t\tresistHousework:25,\n\t\tresistSubmission:40,\n\t\t\n\t\t/*  Flags and stuff related to sex training */\n\t\tdoneInspection:0,\n\t\trefused:0,\n\t\tbrokeRule:0,\n\t\tdoneSpecialTraining:false,\n\t\t\n\t\t/* Counters for various events */\n\t\thasSucked:0,\n\t\thasPussyFucked:0,\n\t\thasAssFucked:0,\n\t\thasSwallowedCum:0,\n\t\t\n\t\t\n\t\t/* Rules */\n\t\trulesNoMasturbate:0,\n\t\trulesNoOrgasm:0,\n\t\trulesSwallowCum:0,\n\t})&gt;&gt;</div><div tiddler="Talk to Eva" tags="nobr">&lt;&lt;if $characters[Game.getCharIndex(&quot;Eva&quot;)].relationship &lt; 10&gt;&gt;\n\t\tEva says, &quot;Fuck off, breeder.  Unless you have smokes or makeup or something cool, I don't have anything to say to you.&quot;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;span id=&quot;smokes&quot;&gt;\n\t\t&lt;&lt;if Game.inventoryQuantity(&quot;Cigarettes&quot;)&gt;&gt;\n\t\t\t&lt;&lt;click &quot;Give her some smokes&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;run Game.inventoryRemove(&quot;Black Lipstick&quot;, 1)&gt;&gt;\n\t\t\t\t&lt;&lt;set $characters[Game.getCharIndex(&quot;Eva&quot;)].relationship += 7&gt;&gt;\n\t\t\t\t&lt;&lt;replace &quot;#smokes&quot;&gt;&gt;&quot;Gee, thanks!&quot;&lt;br&gt;&lt;br&gt;&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;/span&gt;\n\t\t\n\t\t&lt;span id=&quot;lipstick&quot;&gt;\n\t\t&lt;&lt;if Game.inventoryQuantity(&quot;Black Lipstick&quot;)&gt;&gt;\n\t\t\t&lt;&lt;click &quot;Give her the black lipstick&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;run Game.inventoryRemove(&quot;Black Lipstick&quot;, 1)&gt;&gt;\n\t\t\t\t&lt;&lt;set $characters[Game.getCharIndex(&quot;Eva&quot;)].relationship += 4&gt;&gt;\n\t\t\t\t&lt;&lt;replace &quot;#lipstick&quot;&gt;&gt;&quot;Gee, thanks!&quot;&lt;br&gt;&lt;br&gt;&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;/span&gt;\n\t\t\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;display &quot;Enslave Eva&quot;&gt;&gt;\n\t\t&lt;&lt;enslave &quot;Eva&quot;&gt;&gt;\s\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Blowjob from Su">&lt;&lt;set $su = $characters[Game.getCharIndex(&quot;Su&quot;)]&gt;&gt;\s\n\t&quot;I guess it's time for you to suck some cock.&quot;\n\tSu looks shocked, but licks her lips.  Unconciously.  Probably.\n\t&quot;Yeah, I guess it is.  Want to go to the bathroom?&quot;\n\t&lt;span id=&quot;su-blowjob&quot;&gt;\s\n\n\t\t&lt;&lt;link &quot;Let's go!&quot;&gt;&gt;\s\n\t\t\t&lt;&lt;replace &quot;#su-blowjob&quot;&gt;&gt;\n\t\t\t\tYou grab her hand and walk to the bathroom.  As soon as the door's closed, she sinks to her knees and undoes your pants.  Pulling out your cock, she turns her pretty little face up to you and starts licking, then slides you into her mouth.  It takes only a minute before you're hard, and she starts sliding her lips down your cock, always maintaining eye contact.  She struggles to get her mouth all the way down your cock.\n\t\t\t\tRemembering what you saw about her personality, you grab her hair and shove her down until she chokes. \n\t\t\t\tHolding her there, you say, &quot;You're a good cocksucker, aren't you?&quot;  You say it loud enough to be heard in the game shop.\n\t\t\t\t&quot;Mmmfmf!&quot;\n\t\t\t\t&quot;I can't hear you!  Are you a good cocksucker?&quot; Her eyes are bulging with you holding your cock down her throat.\n\t\t\t\t&quot;Mmmm hrmmmf!  Mmm Hmrmf!&quot;\n\t\t\t\t&quot;Good cocksucker.  Now open up.&quot;  You pull her head off your cock.  She takes one big breath, opens her mouth, and you shove yourself right back in.\n\t\t\t\tYou proceed to face fuck her, roughly jamming your cock down her throat.\n\t\t\t\t&quot;Glurrh! Gurph!&quot; The sound of your cock entering her throat is loud; clearly loud enough to be heard through flimsy door.  You keep it up, fucking her face and holding off your orgasm so you can draw out the experience.  Every couple of minutes you pull out and let her get a breath.  You make sure to call her a cocksucker every time.\n\t\t\t\tFinally it's more than you can handle.  You pull out, order her to open up, and come all over her face.  You aim mostly for her mouth and she obediently sticks out her tongue; she gets a nice mouthful.\n\t\t\t\t&quot;Now swallow, slut!&quot; You almost shout it.  She closes her eyes, swallows, and looks up at you smiling.\n\t\t\t\t&quot;That was amazing!  Thank you!&quot; She's beaming.\n\t\t\t\t&quot;You really are a good slut, you know that Su?&quot;\n\t\t\t\t&quot;Thanks!&quot; She giggles.  She starts to clean up her face but you stop her, grab her hand, and pull her to her feet.  You walk out of the bathroom with her in tow.  She blushes bright red under your cum when you're met by applause.  You walk her up to the table, bow to your admirers, and leave her there surrounded by her friends and covered in your cum.\n\n\t\t\t\t[[Mall Entrance]]\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t\t&lt;&lt;link &quot;Right here, right now.&quot;&gt;&gt;\s\n\t\t\t&lt;&lt;replace &quot;#su-blowjob&quot;&gt;&gt;\s\n\t\t\t\t&quot;Nope, right here, right now.&quot;\n\t\t\t\t&quot;What, at the table?!?&quot;\n\t\t\t\t&quot;Get under it.&quot;\n\t\t\t\tHer friends look on in shock.  She just sits, stunned, looking at you.  You wait, patiently, staring her down.  Finally, she looks around, moves back her chair, and crawls under the table.  You feel her undo your pants.  You slide back your chair a little bit so that the guys around the table can see her take out your cock and start licking it.\n\t\t\t\t&quot;Oh man, I can't believe she's doing it!&quot; &quot;Wow, you're crazy man!&quot; &quot;Awesome!&quot; &quot;Damn she's a slut!&quot; The guys are going crazy.\n\t\t\t\t&quot;No, she's MY slut.&quot; Su lets out a little moan at that; you reward her by putting your hand on the back of her neck and shoving her head all the way down.\n\t\t\t\tRemembering what you saw about her personality, you grab her hair and shove her down until she chokes. \n\t\t\t\tHolding her there, you say, &quot;You're a good cocksucker, aren't you?&quot; \n\t\t\t\t&quot;Mmmfmf!&quot;\n\t\t\t\t&quot;I can't hear you!  Are you a good cocksucker?&quot; Her eyes are bulging with you holding your cock down her throat.\n\t\t\t\t&quot;Mmmm hrmmmf!  Mmm Hmrmf!&quot;\n\t\t\t\t&quot;Good cocksucker.  Now open up.&quot;  You pull her head off your cock.  She takes one big breath, opens her mouth, and you shove yourself right back in.\n\t\t\t\tYou proceed to face fuck her, roughly jamming your cock down her throat.  It's surreal with people walking past the store; most of them seem clueless, but at one point you spot that young-looking chick always studying with a notebook walk past and stop, watching you stuffing a chick's mouth at a gaming table.  She seems interested and takes a moment to make a note, then walks on.\n\t\t\t\t&quot;Glurrh! Gurph!&quot; The sound of your cock entering her throat is loud; clearly loud enough to be heard throughout the store.  You keep it up, fucking her face and holding off your orgasm so you can draw out the experience.  Every couple of minutes you pull out and let her get a breath.  You make sure to call her a cocksucker every time.\n\t\t\t\tFinally it's more than you can handle.  You pull out, order her to open up, and come all over her face.  You aim mostly for her mouth and she obediently sticks out her tongue; she gets a nice mouthful.\n\t\t\t\t&quot;Now swallow, slut!&quot; She closes her eyes, swallows, and looks up at you smiling.\n\t\t\t\t&quot;That was amazing!  Thank you!&quot; She's beaming.\n\t\t\t\t&quot;You really are a good slut, you know that Su?&quot;\t\n\t\t\t\t&quot;Yes Sir!&quot;\n\t\t\t\t&quot;You see, gentlemen, that's how you do it.&quot;  You zip up and walk away from the table.\n\n\t\t\t\t&lt;&lt;set $flags.publicDominence += 3&gt;&gt;\s\n\t\t\t\t[[Mall Entrance]]\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;/span&gt;</div><div tiddler="Enslave Su">&quot;Um... hey.&quot; Su looks a bit ashamed to see you, and comes over to meet you when you walk in the store.\n\t&quot;Hey, cocksucker.&quot; She blushes but doesn't look angry.\n\t&quot;Yeah.  Uh, I guess I am.&quot;\n\t&quot;And a good one.&quot;  She glances over to the table where her little fanboys are staring and snickering to each other.\n\t&quot;Gee... thanks, I guess.&quot;\n\t&quot;It's a real skill.  One I could make a lot of use of.&quot;\n\t&quot;Really?  You want to go again?&quot;\n\t&quot;No.  I mean, I want something a little more permanent.&quot;\n\t&quot;Like be your girlfriend?&quot;\n\t&quot;No, like be my slave fucktoy.&quot;\n\t&quot;Woah, man... that's crazy.&quot;\n\t&lt;&lt;if Game.inventoryQuantity(&quot;Leather Collar&quot;)&gt;&gt;\s\n\t\t&quot;Want to try on my collar?  Just for fun?&quot;\n\t\t&quot;Well...&quot;  She glances over to the table, then decides to ignore them.\n\t\t&quot;Fine, but we're going to have to talk about anything more.&quot;\n\t\t&quot;Sure thing.  Here.&quot; You hand her the collar.\n\t\tShe slips it on her neck.  The end of the collar slides by itself into the buckle, and fastens itself.\n\t\t&quot;Hey!  What the fuck!&quot;\n\t\t&quot;Keep it down.&quot;  She quiets down immediately.\n\t\t&quot;What is this?!?&quot;\n\t\t&quot;It's a magic collar.  It makes you obey me.&quot;\n\t\t&quot;That's... that's fucking impossible!&quot;\n\t\t&quot;What, don't believe in magic?&quot;\n\t\t&quot;No... well, maybe a little.  I always wanted to.&quot;\n\t\t&quot;Now you can.  I'll give you some proof.  Take your panties off.&quot;\n\t\tHer eyes open wide as she crouches down, reaches under her skirt, and pulls her panties down her legs.  She steps out of them.\n\t\t&quot;Hand them here.&quot; She does, still looking completely shocked.\n\t\t&quot;Now do you believe in magic?&quot;\n\t\t&quot;Yeah, I guess I have to.  What are you going to do to me?&quot;\n\t\t&quot;Oh you know.  Make you crawl around naked, beg for my cock in all your holes, lick cum off the floor.  Basically anything degrading I can think of.&quot;\n\t\t&quot;Oh... fuck...&quot; Her voice makes it plain that what you said, while unexpected, is not unwelcome.\n\t\t&quot;Now open up.&quot; She opens her mouth and you shove her (still damp) panties in.\n\t\t&lt;&lt;if Game.inventoryQuantity(&quot;Leash&quot;)&gt;&gt;\s\n\t\t\tYou clip the leash to the ring on her collar.  Giving it a little tug, you lead to out of the comic store under the astounded gazes of the nerds.\n\t\t\t&quot;Cross your arms behind your back.&quot;\n\t\t\tShe complies, grasping her upper arms behind her back.  Her tits are thrust out against her t-shirt, and her panties are still visible in her mouth.  Satisfied, you lead her through the mall with the occasional tug on the leash.  \s\n\t\t\t&lt;&lt;if $characters[Game.getCharIndex(&quot;Tracy&quot;)] != -1&gt;&gt;\s\n\t\t\t\tYou notice that young girl with the notebook watching and making notes as you walk past. \s\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $flags.publicDominence += 3&gt;&gt;\s\n\t\t&lt;&lt;/if&gt;&gt;\s\n\t\tYou reach the mall entrance, go to your house, and enter the basement dungeon.  You order Su to strip, think a moment, and order her on all fours, fingering her ass and cunt while you're gone.\n\t\t&lt;&lt;if $slaves.length === 2&gt;&gt;\s\n\t\t\tYou tell her she has to beg &lt;&lt;=$slaves[0].name&gt;&gt; for permission to come.\n\t\t&lt;&lt;elseif $slaves.length &gt; 2&gt;&gt;\s\n\t\t\tYou tell her she has to get permission from all your other slaves to come, and if one of them say no, she can't.\n\t\t&lt;&lt;/if&gt;&gt;\s\n\t\t&lt;&lt;enslave &quot;su&quot;&gt;&gt;\s\n\t\t&lt;&lt;run Save.autoslave.save(&quot;Enslaved Su&quot;)&gt;&gt;\s\n\t&lt;&lt;else&gt;&gt;\s\n\t\t&quot;Come on... I know you want to see what I can make you do.&quot;\n\t\t&quot;Yeah...&quot; she bites her lip. &quot;Let me think about it, ok?&quot;\n\t\t&quot;I guess.&quot;  You don't have time for that.  You'd better come back with the collar.\n\t&lt;&lt;/if&gt;&gt;\s\n\t\n\t[[Mall Entrance]]</div><div tiddler="Su First Training" tags="TimeNone">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\s\n\t\tYou walk over to Su, still where you left her.  She's on her knees, face down and naked, with her head towards the wall and her ass pointed towards the door.  This gives you an excellent view as she works two fingers of one hand in her pussy and two fingers of the other hand in her ass.  She's grunting and moaning softly although you're sure she's exhausted.  You land a smack on her ass.\n\t\t&quot;Ow!  You're here!&quot;\n\t\t&quot;That's right.  Enjoying yourself, slut?&quot;\n\t\t&quot;Not any more... I'm sore.  Can I please stop?&quot;\n\t\t&quot;Yes.  Kneel.&quot; She seems relieved and kneels in front of you, eyes immediately going to your crotch.  Damn, this little asian slut sure loves sucking!  You're not one to disappoint, so you open your trousers under her rapt attention and pull out your cock.  She sways slightly forward almost as if drawn to it magnetically.\n\t\t&lt;&lt;if $pc.cockLength &gt; 7&gt;&gt;&quot;Wow... it's beautiful!  I guess I didn't get a chance to really look at it before!&quot;  It's true, it was a little cramped the last time.&lt;&lt;/if&gt;&gt;\s\n\t\t&quot;Can... can I touch it?&quot;\n\t\t&quot;Only with your tongue.&quot; She doesn't seem bothered by that, at all, and licks up and down the shaft, around the head, and soon is looking up at you while licking your balls.  You watch her work for a bit.  \n\t\t&quot;Turn around and get face down, ass up.&quot;\n\t\tShe does it, but turns her head to look at you. &quot;I'm still really sore.&quot;\n\t\tYou smack her ass and tell her, &quot;Call me Master.&quot;\n\t\t&quot;Ow!  Yes, Master!&quot;\n\t\t&quot;Spread your ass.&quot; She reaches back with both hands and spreads her cheeks apart.  She's blushing and a hand print is appearing on her ass.  You walk over to the other side of your dungeon and retrieve a moderately-sized buttplug.  It's about 4.5&quot; long and reasonably thick; it's about as big as an anal virgin, even one who's been fingering her ass for a few hours, can handle.  You walk back to her and kneeling behind her gently apply the lubed tip to her asshole.\n\t\t&quot;Oh, fuck, Master... I don't think I can handle that.&quot; You smack her ass twice, not too hard but hard enough to hurt.\n\t\t&quot;You let me worry about that.  Now let's have a little talk.&quot; You push lightly until the very beginning of the tapered tip penetrates her.  She moans.\n\t\t&quot;I hear you're a big fan of anime and hentai stuff... is that true?&quot; You continue the gentle pressure, and her hole gradually accomdates the plug, allowing almost an inch in.\n\t\t&quot;Oh fuck, Master.  I can't believe you're making me answer you like this!&quot;  She's visibly dripping her pussy is so wet.\n\t\t&quot;Oh, I am though.  Answer me!&quot; Another smack, just for emphasis.  You give a brief push on the plug and she whimpers a bit.\n\t\t&quot;Yes, I like that stuff.&quot;\n\t\t&quot;What stuff?  You mean monsters raping girls?&quot; You increase the pressure on the plug and it sinks in until it's more than half in, with the large rounded base just pushing against her hole.\n\t\t&quot;Ah!  Um.  Yeah, I mean... ohhh... like, tentacles and stuff.  Master.&quot;  You apply just a little more presure so the plug starts to stretch her hole a little.\n\t\t&quot;You mean, tentacles shoving into every hole?&quot;  She whimpers and makes no response, but you can feel her asshole loosening up.\n\t\t&quot;Pumping cum into raped little girls cunts, assholes, and mouths?&quot;  She groans as you push the plug in stretching her.  It's going slowly but it's going.\n\t\t&quot;Ohhh fuuuck... yes, Master... all their holes...&quot; She wiggles her hips.\n\t\t&quot;Tentacles ramming up slave assholes?  Is that what you like?&quot; You push the plug so the widest part is stretching her asshole, then give a final push and her asshole swallows it, pulling the plug deep into her ass.\n\t\t&quot;Fuck!  Yes!  Oh my god, ow!  That thing is huge!&quot; You rub her pussy a little... she twists in pleasure although you can tell the plug is causing her some pain.  She's @@.obedience-good;more obedient@@ after being @@.lust-good;humiliated@@ with the plug and position. \n\t\t&lt;&lt;set $slaves[$csi].obedience += random(5) + 5&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].lust += random(15) + 5&gt;&gt;\n\t\t&quot;Turn around.&quot;  She turns around and painfully kneels, the plug a constant pressure in her ass.\n\t\t&quot;Back to work on my cock.&quot;  She eagerly resumes licking your cock.\n\t&lt;&lt;/replace&gt;&gt;\s\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\s\n\t\t&lt;&lt;if $pc.path=&quot;Virility&quot;&gt;&gt;\s\n\t\t\t&lt;&lt;link &quot;Use Virility Powers!&quot;&gt;&gt;\s\n\t\t\t\t&lt;&lt;display &quot;Su First Training Virility&quot;&gt;&gt;\s\n\t\t\t&lt;&lt;/link&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\s\n\t\t&lt;&lt;link &quot;Face fuck her&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Su First Training Facefuck&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Su First Training Virility" tags="TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\tShe turns her cute little face up to you attentively.  \n\t\t&quot;I may not be able to do anything about tentacles... yet.  But you remember how you told me you believe in magic?&quot;\n\t\t&quot;I kind of have to, I mean you've made me your sex slave with a magic collar.&quot;\n\t\t&quot;Right, but that's not all I can do.  Watch.&quot; You grab your cock and call on @@.virility;the power of the Mother of Virility.@@  Power courses into your cock and balls.  You cock gets insanely hard, turning purple and pulsing, then actually starts growing!  Holy shit, it just keeps going, until it's at least 14&quot; and bigger around than a soda can.  Your balls grow as well, until they're baseball sized.\n\t\t&quot;Holy... holy shit!  You can do that?!&quot;\n\t\t&quot;Now, that may not be a tentacle, but I bet you that rammed into all your holes would do the job.&quot;\n\t\tShe looks a bit terrified but completely hypnotized by your giant rod. &quot;Oh... yes, I guess it would.  Oh god.  You're not really going to put that in me, are you?&quot;\n\t\t&quot;Are you a filthy cock slut?&quot;\n\t\tShe snaps her eyes to your face.  &quot;What?  I mean, what Master?&quot;\n\t\t&quot;You heard me.&quot;\n\t\t&quot;Um... Well... yes, I guess I am.&quot;  She blushes.\n\t\t&quot;How many cocks have you sucked?&quot;\n\t\t&quot;God, I don't know.  Fifty?  Maybe more?&quot;\n\t\t&quot;So you are a filthy cock slut then.&quot;\n\t\tShe visibly shakes herself. &quot;Yes, Master.&quot;\n\t\t&quot;Then yes.  I'm going to fuck every hole you have with this.&quot;\n\t\t&quot;Oh God, Master, I don't know if I can do that!&quot;  She looks about ready to cry... but you notice she's fingering her cunt.\n\t\t&quot;Don't worry.  I'll grow it gradually.&quot;  You relax your power a little and your cock shrinks, but not your balls.  It's still huge, but when you pull her head up to you she's able to get her lips around the head.  You slowly push in and hit the back of her throat, then release a little power.  You pull out then push in, this time gagging her a bit, and working over the course of a few minutes manage to get the head into her throat.  You pull her all the way down your shaft until her face is pushed against your abdomen, then let her pull away.  She gets a breath of air and you repeat the performance.  Soon you're deepthroating her hard.  \n\t\t&quot;See, slut?  I can fit this in any hole.&quot;  She whimpers around your cock but you don't let her talk.  &quot;I can fuck every hole over and over, can't I?&quot; She makes a couple noises you take as assent.  You fuck her face well and keep verbally abusing her.  She's getting off on it (and the fingers in her slit).  By the time you're ready to come, she's moaning in the beginnings of orgasm.  You pull out.\n\t\t&quot;Open up, whore!&quot; She opens her mouth wide and you shoot cum over and over across her face, filling her mouth.  &lt;&lt;cum &quot;mouth&gt;&gt; Your giant balls supply ounces of cum.  It's enough to have her struggling to swallow before you even finish coming.  Finally it's over, and she takes her third or fourth gulp of cum.  You grab her hair and start pushing the cum on her face into her mouth and she licks and swallows each time.  You take a good five minutes feeding your cum to her without saying a word, then you point to the ground where several large puddles of cum have dripped off her face.  \n\t\t&quot;Lick it all up.&quot;  Your voice is hard, and she doesn't hesitate.  She gets an all fours, plugged ass up, and licks the cum off the floor, swallowing it.  \n\t\t&quot;Good girl.  And I'll get to work on the tentacles.&quot;\n\t\tShe shudders, humiliated but incredible aroused.  You didn't let her come before, so you order her not to. &lt;&lt;set $slaves[$csi].rulesNoOrgasm = 1&gt;&gt;\n\t\t&quot;Don't worry, slut.  Magic lives.&quot;  You've really @@.relationship-good;shown her what you can do@@ and she's @@.lust-good;on the verge of an orgasm.@@ \n\t\t&lt;&lt;set $slaves[$csi].relationship += random(10) + 5&gt;&gt;\s\n\t\t&lt;&lt;set $slaves[$csi].lust = random(10) + 60&gt;&gt;\s\n\t&lt;&lt;/append&gt;&gt;\s\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\s\n\t\t&lt;&lt;link &quot;Start Training&quot;&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Train Slave&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Su First Training Facefuck" tags="TimeNone">You slowly push into her mouth and hit the back of her throat.  You pull out then push in, this time gagging her a bit, and working over the course of a few minutes manage to get the head into her throat.  You pull her all the way down your shaft until her face is pushed against your abdomen, then let her pull away.  She gets a breath of air and you repeat the performance.  Soon you're deepthroating her hard.  \n\t\t&quot;See, slut?  I can fit this in any hole.&quot;  She whimpers around your cock but you don't let her talk.  &quot;I can fuck every hole over and over, can't I?&quot; She makes a couple noises you take as assent.  You fuck her face well and keep verbally abusing her.  She's getting off on it (and the fingers in her slit).  By the time you're ready to come, she's moaning in the beginnings of orgasm.  You pull out.\n\t\t&quot;Open up, whore!&quot; She opens her mouth wide and you shoot cum over and over across her face, much of it in her mouth.  &lt;&lt;cum &quot;mouth&gt;&gt; When you finish she swallows, struggling to get all the cum down.  You grab her hair and start pushing the cum on her face into her mouth and she licks and swallows each time.  You point to the ground where a couple small puddles of cum have dripped off her face.  \n\t\t&quot;Lick it all up.&quot;  Your voice is hard, and she doesn't hesitate.  She gets an all fours, plugged ass up, and licks the cum off the floor, swallowing it.  \n\t\t&quot;Good girl.  You're a really filthy cumslut.&quot;\n\t\tShe shudders, humiliated but incredible aroused.  You didn't let her come before, so you order her not to. &lt;&lt;set $slaves[$csi].rulesNoOrgasm = 1&gt;&gt;\n\t\tYou've really @@.relationship-good;put her in her place@@ and she's @@.lust-good;really turned on.@@ \n\t\t&lt;&lt;set $slaves[$csi].relationship += random(5) + 2&gt;&gt;\s\n\t\t&lt;&lt;set $slaves[$csi].lust = random(10) + 20&gt;&gt;\s\n\t&lt;&lt;/append&gt;&gt;\s\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\s\n\t\t&lt;&lt;link &quot;Start Training&quot;&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Train Slave&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Su Stats" tags="widget">&lt;&lt;if typeof $characters === 'undefined'&gt;&gt;\n\t\t&lt;&lt;set $characters = []&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;run $characters.push({\n\t\n\t\tname:&quot;Su&quot;,\n\t\tgender:&quot;female&quot;,\n\t\trelationship:0,\n\t\tenslaved:0,\n\t\tisBroken:false,\n\t\tisInLove:false,\n\t\tisPregnant:false,\n\t\tisWorkingAt:&quot;&quot;,\n\t\tdescription:&quot;A petite and nerdy-looking asian girl, she's very thin but completely filled out.&quot;,\n\t\tbodySize:1,\n\t\tbodyTone:1,\n\t\tface:&quot;exotic and attractive&quot;,\n\t\tskin:&quot;light brown&quot;,\n\t\tfacialPeircings:&quot;a lip ring&quot;,\n\t\thairColor:&quot;black&quot;,\n\t\thairLength:&quot;short&quot;,\n\t\thairCut:&quot;with bangs&quot;,\n\t\ttitsSize:3,\n\t\ttitsShape:&quot;perky&quot;,\n\t\tnippleSize:&quot;small&quot;,\n\t\tnippleColor:&quot;brown&quot;,\n\t\tnippleAreolae:&quot;small&quot;,\n\t\tnipplePeircings:&quot;bars&quot;,\n\t\tnavelPiercings:&quot;&quot;,\n\t\tpussySize:1,\n\t\tpussyHairStyle:0,\n\t\tpussyHairColor:&quot;black&quot;,\n\t\tpussyLips:1,\n\t\tpussyClit:3,\n\t\tpussyClitPeircing:0,\n\t\tpussyLabiaRingsNumber:0,\n\t\tpussyLabiaHeavyRingsNumber:0,\n\t\tpussyLabiaStudsNumber:0,\n\t\tpussyLabiaZipperNumber:0,\n\t\tassholeSize:0,\n\t\tassholeStyle:0,\n\t\tassholeColor:0,\n\t\t\n\t\t\n\t\tclothingRevealing:false,\n\t\tclothingTop:3,  \t\n\t\tclothingBottom:3,\n\t\tclothingWrists:3,\n\t\tclothingAnkles:-1,\n\t\tclothingCollar:-1,\n\t\tclothingShoes:2,\n\n\t\tplugToy:0,\n\t\tdildoToy:0,\n\t\tnippleToy:0,\n\t\twaistToy:0,\n\t\tbreastToy:0,\n\t\tcrotchToy:0,\n\t\tgagToy:0,\n\t\t\n\t\tdayLastSpokenTo: -1,\n\t\t\n\t\tobedience:0,\n\t\tfear:0,\n\t\tsexDrive:8,\n\t\t\n\t\t\n\t\tpain:0,\n\t\tlust:0,\n\t\tposition:0, \n\t\t\n\t\n\t\toral:1,\n\t\tcum:0,\n\t\tdeepthroat:0,\n\t\tpenetration:0,  \n\t\tanal:0,\n\t\tpainal:0,\n\t\t\n\t\tbegging:0,\n\t\thumiliation:1,\n\t\tbondage:1,\n\t\tmasochism:0,\n\t\thousework:1,\n\t\tsubmission:1,\n\t\t\n\t\tresistOral:5,\n\t\tresistCum:10,\n\t\tresistDeepthroat:15,\n\t\tresistPenetration:30,\n\t\tresistAnal:55,  \t\t\n\t\tresistPainal:75,\n\t\tresistBegging:5,\n\t\tresistHumiliation:15,\n\t\tresistBondage:25,\n\t\tresistMasochism:55,\n\t\tresistHousework:10,\n\t\tresistSubmission:20,\n\t\t\n\t\t\n\t\tdoneInspection:0,\n\t\trefused:0,\n\t\tbrokeRule:0,\n\t\tdoneSpecialTraining:false,\t\t\n\t\t\n\t\thasSucked:0,\n\t\thasPussyFucked:0,\n\t\thasAssFucked:0,\n\t\thasSwallowedCum:0,\n\t\t\n\t\t\n\t\t\n\t\trulesNoMasturbate:0,\n\t\trulesNoOrgasm:0,\n\t\trulesSwallowCum:0,\n\t})&gt;&gt;</div><div tiddler="Talk to Su">&lt;&lt;set $su = $characters[Game.getCharIndex(&quot;Su&quot;)]&gt;&gt;\s\n\t&lt;&lt;set $su.dayLastSpokenTo = $day&gt;&gt;\s\n\t&lt;&lt;if $su.relationship === 0&gt;&gt;\s\n\t\t&quot;Hey! What are you guys up to?&quot; You're just looking at Su, though.\n\t\t&quot;Playing Dragon Knights.&quot; She seems pretty nice, really.\n\t\t&lt;&lt;if $pc.mageSight&gt;&gt;\s\n\t\t\tYou take a look at her with your mage sight.  She's a really kinky girl!  Into humilliation and with a serious oral fetish.  What's more, somehow you can see she's sucked off most of the boys at this table.  With a glance at them, though, you can see none of them understand her... or any girls at all, really.\n\t\t&lt;&lt;else&gt;&gt;\s\n\t\t\tUsing the weird coin sight, you take a look at her.  She's into some kinky stuff... sucking cock and being humiliated, apparently.  Maybe that'll be useful.\n\t\t&lt;&lt;/if&gt;&gt;\s\n\t\t&quot;Mind if I play?&quot; You have no idea what Dragon Knights is, but your dick isn't going to suck itself.\n\t\t&quot;Well, we're in the middle of something, but if you don't mind playing a pregenerated character.&quot;\n\t\t&quot;Sure.&quot;\n\t\tYou spend about an hour lost in weird rules and rolling dice when people tell you to.  You keep stealing glances at Su... she is really attractive in her element.  The game wraps up and you take your character sheet with you.\n\t\t&quot;What did you think of the game?&quot; Su's smiling and looking a little shy as you walk out of the store together.\n\t\t&quot;Super fun!  I'd like to play again.&quot;\n\t\t&quot;Any time!&quot; She blushes and hurries away.\n\t\t&lt;&lt;set $su.relationship += 10&gt;&gt;\n\t\t[[South Wing]]\n\t&lt;&lt;elseif $su.relationship === 10&gt;&gt;\s\n\t\tYou join back with the group, knighting dragons, or slaying knights, or whatever.  You don't really remember.\n\t\t&quot;Oh shit!&quot;\n\t\tYou start paying attention as Su looks upset.\n\t\t&quot;A fucking Dragon Lord?!? How are we supposed to survive this?&quot; She's almost yelling at the GM, or whatever he's called.\n\t\t&quot;Well... I mean, it's in the adventure.&quot; His voice cracks as he's questioned by the Asian girl.\n\t\t&quot;Oh man, we're all going to die.&quot;\n\t\t&quot;What can we do?&quot; You're interested despite yourself.\n\t\t&quot;Nothing.  It's just too powerful.  Man, I'd blow someone for a little divine intervention right about now.&quot;\n\t\t&quot;Really?  I'll give it a shot.&quot; She was joking, but you stare right at her and raise an eyebrow.\n\t\t&quot;Oh! Uh... hey, I mean, I uh...&quot; She blushing furiously but you can also tell turned on.\n\t\t&quot;Let's make a deal.  If I can handle the dragon thingy, you blow me.&quot;\n\t\tShe flushes more, but in a (fake) belligerent voice, says, &quot;No way you can do that! Deal!&quot;\n\t\tScore!  Now, what the fuck is a Dragon Lord?  And how does one deal with one?\n\t\t&lt;span id='dragon-game'&gt;\n\n\t\t\t&lt;&lt;link &quot;Pull out your musket and shoot!&quot;&gt;&gt;\s\n\t\t\t\t&lt;&lt;replace &quot;#dragon-game&quot;&gt;&gt;\s\n\t\t\t\t\tYou try rolling all the dice, but you're eaten by Lord Dragon or whatever it is.  On the plus side, the rest of the party escapes.\n\t\t\t\t\t&quot;Tough break, guess you don't win.&quot; Su seems disappointed and embarrassed.\n\t\t\t\t\t&quot;We'll see.&quot;\n\t\t\t\t\t&lt;&lt;set $su.relationship = 20&gt;&gt;\s\n\n\t\t\t\t\t[[Cosmic Comics]]\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\s\n\t\t\t&lt;&lt;/link&gt;&gt;\n\t\t\t&lt;&lt;if $pc.path === &quot;Virility&quot;&gt;&gt;\s\n\t\t\t\t@@.virility;&lt;&lt;link &quot;Use the power of Virility to win this thing!&quot;&gt;&gt;@@\s\n\t\t\t\t\t&lt;&lt;replace &quot;#dragon-game&quot;&gt;&gt;\s\n\t\t\t\t\t\tYou call on the Mother of Virility.  You're not sure she's ever been asked to fudge die rolls before, but given that it's so you can come in a girl's mouth, you don't think she'll mind.  She comes through, and you're rolling crits, maxing damage, and all the other geeky stuff you wish you didn't know about.  Finally the Dragon Lord dies.  The table falls quiet.  You look at Su, but she won't make eye contact.\n\t\t\t\t\t\t&quot;Well, a bet's a bet.  Pay up.&quot;\n\t\t\t\t\t\t&quot;Well... um... I didn't think you'd do it.&quot;\n\t\t\t\t\t\t&quot;I know.  That's why you bet.&quot;\n\t\t\t\t\t\t&quot;Well...&quot;\n\t\t\t\t\t\t&quot;Look, I won.  You suck.  That's the deal.&quot; The group is just staring in shock, astounded to hear you talk to her like that.\n\n\t\t\t\t\t\t&lt;&lt;set $su.relationsip = 30&gt;&gt;\s\n\t\t\t\t\t\t[[&quot;Ok, I guess...&quot;|Blowjob from Su]]\n\t\t\t\t\t&lt;&lt;/replace&gt;&gt;\s\n\t\t\t\t&lt;&lt;/link&gt;&gt;\s\n\t\t\t&lt;&lt;/if&gt;&gt;\s\n\t\t&lt;/span&gt;\n\t&lt;&lt;elseif $su.relationship === 20&gt;&gt;\n\t\tYou settle into your seat at the table and roll up another character.  Su keeps stealing glances then looking away; she blushes every time you catch her.  You spend a couple hours playing. When you pack up to walk out, Su walks up to you.\n\t\t&quot;That was really brave, last week.&quot;\n\t\t&quot;There was a blowjob on the line.&quot; She blushes but smiles.\n\t\t&quot;Yeah, about that.  You still want it?&quot;\n\t\t&quot;Of course!&quot;\n\n\t\t&lt;&lt;set $su.relationship = 30&gt;&gt;\n\t\t[[Blowjob from Su]]\n\t&lt;&lt;elseif $su.relationship === 30&gt;&gt;\n\t\t&lt;&lt;goto &quot;Enslave Su&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;</div><div tiddler="Tracy First Training" tags="TimeNone">&quot;You're back!&quot;  Tracy's voice is deep and husky, and she's still yanking and tugging at her nipples.  A wet stain covers the crotch of her jeans.\n&quot;Did you mean, you're back, Master?&quot;\n&quot;Oh!  Ah, yes, Master.  I'm sorry.&quot;\n&quot;You know you have to be punished, right?&quot;\n&quot;Ah... yes, that's my understanding, Master.&quot;\n&quot;Take off your shirt.&quot;\n&lt;&lt;set $slaves[$csi].clothingTop = -1&gt;&gt;\s\nShe does so, revealing huge and still firm tits with large nipples, now standing at attention.  You can only imagine how sore they must be with her long pinching session.  You walk into your room while she watches, search around your closet a little, and find one of those clothes hangers with the clips to hold slacks on it.  When you walk into the room with it, her eyes widen.\n&quot;Is that for me, Master?&quot;\n&quot;Yes.  Here's your punishment.&quot;  You step up to her, order her to put her hands behind her head, and clamp one nipple then the other to the clothes hanger, pull the clips close together so they tug her breasts together by the nipples, and pull the hanger up and loop it through the ring in her collar, ignoring her whimpers as her abused nipples suffer.\n&quot;Oh... ow, Master!  This hurts!  Are you going to punish and hurt me until I obey you, or are you going to try to make me want to obey you?  I ask out of scientific curiosity, you understand.&quot;\n&lt;span id=&quot;tracy-question&quot;&gt;\s\nGood question.  What should you tell her?\n\n&lt;&lt;click &quot;What do you think I should do?&quot;&gt;&gt;\n\t&lt;&lt;replace &quot;#tracy-question&quot;&gt;&gt;\n\t\t&quot;What do you think I should do?&quot;\n\t\t&quot;Well, that's up to you, Master.  On the one hand, it would certainly be easier on me if you tried to make me trust and want you.  As a researcher, I think it would be interesting to have you try to break my will or brainwash me or something.&quot;\n\t\t&quot;I see.  I guess you'll just have to find out.&quot;\n\t\t&quot;Yes, Master.  Just one thing... could I continue to make notes?  It's going to be hard to remember what happens, I'm sure, and if I could write it down while it's happening, that would help.&quot;\n\t\t&quot;Sure.  In fact, go ahead and write some notes now.  Bend over the pool table and write.&quot;\n\t\t&quot;Ah... yes... Master.&quot;  She retrieves her notebook, every step making her tortured tits bounce and tug on her nipples, and bends over, which relieves a little of the pressure on her nipples but exposes her ass nicely.  You fondle and pinch her ass as she writes.\n\t\t&quot;Ow... ah... all done, Master.&quot;\n\t\t&quot;Stand up.&quot;\n\t\t&quot;Yes, Master.&quot;\n\t\t&quot;Do jumping jacks.&quot;\n\t\t&quot;Wha!... ow!&quot;  She starts jumping, her tits straining against the clamps, and after just a couple jumps her nipples pop free of the clamps.  She shrieks but helplessly continues to jump until you tell her to stop.\n\t\t&quot;Ah... ow!  Ouch!  That fucking hurt!&quot;\n\t\t&quot;Did you forget to call me master?&quot;\n\t\t&quot;Yes!  Oh, Master.  I'm sorry.  You're my Master.  Please don't punish me again!  Oh wow.  That's really interesting, Master!&quot;  She glances at her notebook, ready to record another data point. \n\t\t&quot;We'll see.&quot;  You remove the hanger and toss it in your room.  Time to see what kind of research subject Tracy makes.\n\t\t&lt;&lt;set $slaves[$csi].pain += 5&gt;&gt;\s\n\t\t&lt;&lt;set $slaves[$csi].lust += 10&gt;&gt;\s\n\t\t&lt;&lt;set $slaves[$csi].refused = true&gt;&gt;\s\n\t\t\n\t\t[[Train Tracy|Train Character]]\n\t&lt;&lt;/replace&gt;&gt;\s\n&lt;&lt;/click&gt;&gt;\n&lt;&lt;click &quot;I think I'll torture you until I break your will.&quot;&gt;&gt;\n\t&lt;&lt;replace &quot;#tracy-question&quot;&gt;&gt;\n\t\t&quot;I think I'll torture you until I break your will.&quot;\n\t\t&quot;Oh... oh my... fuuck!  Wow, Master.  You're a... terrifying research opportunity.&quot;\n\t\t&quot;That's the plan.&quot;\n\t\t&quot;Master?  Could I continue to make notes?  When you're not torturing me, I mean?  I doubt it'll be easy to remember what happened.&quot;\n\t\t&quot;Fine, but you're going to have to pay for the privilege.  Strip and bend over the table.&quot;\n\t\t&quot;Ohmygod... yes, Master.&quot;  She has a hard time taking off her clothes without hurting her nipples more.  Finally she's done and assumes an appealing position bent over.  You shove her notebook in front of her and say, &quot;Take notes.&quot;\n\t\t&lt;&lt;set $slaves[$csi].clothingBottom = -1&gt;&gt;\s\n\t\t&lt;&lt;set $slaves[$csi].clothingShoes = -1&gt;&gt;\s\n\t\tYou grab the hanger near her neck, and run your fingers up her slit.  She's fucking soaked, the result of hours of nipple tugging and anticipation.  You shove three fingers in her cunt, and find it none too tight... she's obviously been fucked hard and often.  She lets out a little whimper, trying to write, and you tug on the hanger.  She stifles a shriek and continues to write.  \n\t\t&quot;Now the ass.&quot;  She doesn't seem too disturbed, and when you shove two fingers, covered with her cunt juice, into her asshole, it's obvious why.  He asshole has also seen plenty of use.  She scibbles furiously, and you put another finger in, which starts to stretch her.  She moans, and her handwriting becomes uneven.  You shove a fourth in, and it's obviously a little much for her.  You jam most of your hand up her ass and tug on the hanger, stretching her nipples.  She struggles to write.  \n\t\tYou pull your fingers out of her ass, and start delivering punishing smacks to her ass, slowly but with enough force to leave deep red marks.  She manages to scribble through it but you don't know if she'll be able to read it.\n\t\t&quot;That's enough.  Stand up and get ready.&quot;\n\t\t&quot;How do I get ready, Master?&quot;  She stands up, wincing as her tits tug her nipples.\n\t\t&quot;Like this.&quot;\n\t\tWith no warning, you unhook the hanger and pull it slowly off her nipples.  She screams and tries to pull back but you bark and order and she stops.  You grab her nipples and pull them, hard, and she looks at you with real fear.  Well begun, half done.\n\t\t&lt;&lt;set $slaves[$csi].obedience += 20&gt;&gt;\s\n\t\t&lt;&lt;set $slaves[$csi].fear += 30&gt;&gt;\s\n\t\t&lt;&lt;set $slaves[$csi].relationship -= 5&gt;&gt;\s\n\t\t\n\t\t[[Train Character]] \n\t&lt;&lt;/replace&gt;&gt;\n&lt;&lt;/click&gt;&gt;\n&lt;&lt;click &quot;I'm going to reward and punish you to make you want to serve me.&quot;&gt;&gt;\n\t&lt;&lt;replace &quot;#tracy-question&quot;&gt;&gt;\n\t\t&quot;I'm going to reward and punish you to make you want to serve me.&quot;\n\t\t&quot;Oh... interesting.  Reward and punishment!  Classical conditioning.  Master.&quot;\n\t\t&quot;Strip and get face down, ass up.&quot;\n\t\tIn her excited state, she doesn't even consider disobeying.  She pulls off her jeans and shoes, and at your instruction, kneels facing away from you, puts her knees wide apart, bends over and pushes her tits to the floor.  This makes her back arch and her holes thrust out.  She moans a little from the clamps on her nipples being pushed by the floor.  You kneel behind her, and start rubbing her dripping clit slowly.\n\t\t&quot;I'm going to rub your clit until you come, but you have to ask for a receive permission before you do.  Do you understand?&quot;\n\t\t&quot;Yes, Master!&quot;  This seems to be what she was waiting for.  As you rub her clit, she struggles to hold her pose.\n\t\t&quot;Spread your ass with both hands.&quot;\n\t\tShe does, reaching back and pulling her cheeks far apart, revealing surprisingly well-used holes for such a young girl.  You take two fingers of your free hand and suddenly thrust them into her cunt, finger-fucking her hard.  She whimpers, then moans, as you pound her hole.  Before she's quite at the point of asking, you pull them out.\n\t\t&quot;Who's hole is that?&quot;\n\t\t&quot;Um... yours?  Master?&quot;\n\t\t&quot;Good girl.&quot;  You thrust the fingers in again, fuck her four times hard, pull them out, then ask, &quot;What hole is that?&quot;\n\t\t&quot;My... cunt?  Master?&quot;\n\t\t&quot;Good girl.&quot;  You thrust them in again, fuck her a few times, then pull them out and wait.\n\t\tShe seems puzzled for a bit, her clit still being slowly rubbed, then ventures, &quot;Master?  Will you please finger my... um... your cunt-hole?&quot;\n\t\t&quot;Good girl.&quot;  You oblige, and finger-fuck her hard, until her hips are bucking, then pull them out.\n\t\t&quot;Please!  Oh!  Please Master!  Please fuck your slave's cunt!&quot;  She's panting and needs it bad, now.\n\t\t&quot;No.  That isn't the only hole I own on you, is it?&quot;\n\t\tShe's no dummy, and immediately knows what to say.  &quot;Please, Master, fuck your slave's asshole!&quot;\n\t\t&quot;Good girl.&quot;  You do, shoving two fingers all the way up her asshole.  This isn't a problem for her, at all, and she responds just as well as when it was her cunt.  You pound that asshole until she bucks again, and pull out.  Before she can ask, you say, &quot;Which hole will bring you closer to orgasm, slut?&quot;\n\t\t&quot;Cunt, Master!  Fuck my cunt!&quot;\n\t\t&quot;Good girl.&quot;  You pound her cunt with your fingers a few times, then pull out and wait.  You don't have long to wait.\n\t\t&quot;Butt, Master!  Finger my butthole!&quot; \n\t\t&quot;Good girl.&quot;  You keep it up, pulling out and waiting for her answer, always stopping just short of an orgasm but getting her closer.\n\t\t&quot;Asshole, Master!  Cunt, Master!  Oh! My! Asshole! Hard, please, Master, please!&quot;  You give her a good girl each time.\n\t\t&quot;How am I going to finish you, slave?&quot;\n\t\t&quot;Uh!  Oh!  Uh... asshole, Master!  Please, finger my asshole!&quot;\n\t\t&quot;Good girl.&quot;  You oblige, letting three fingers do the work where two did before, pounding her asshole until she bucks, moans, and finally screams out.\n\t\t&quot;Master!  Master, can I... uh... please... ah... come!  Please!&quot;\n\t\t&quot;Not yet.&quot;  And you step up your work on her clit, pounding her asshole at the same time, watching while she squirms and whimpers.  She can't even form the words to ask anymore when you say, &quot;Come!  Come from me using your asshole!&quot;\n\t\t&quot;Ah!!  Ohhhhh!  Ohhh Fuuuck!!&quot; You don't let up on her asshole or clit even as she has a mind-blowing orgasm.  Finally it subsides, and you stop with her clit although leave three fingers deeply lodged in her rectum.\n\t\t&quot;Th-- Thank... thank you, Master!&quot;  \n\t\t&quot;Good girl.&quot;  You slowly withdraw your fingers from her ass, enjoying her shudders.\n\t\t&quot;Oh... Master....&quot;  She's having a hard time gathering her breath.  &quot;That was... very good... data.&quot;\n\t\t&quot;Was it?&quot;\n\t\t&quot;Yes... You're going to succeed at this, Master, I just know it, and I'll love it.  Please, can I write this down?&quot;\n\t\t&quot;Just a minute.&quot;  You grab her hair, remove the clamps to the sound of a couple shrieks, and pull her up.\n\t\tShe seems like she'll be pretty easy to train.\n\t\t&lt;&lt;set $slaves[$csi].obedience += 25&gt;&gt;\s\n\t\t&lt;&lt;set $slaves[$csi].relationsip += 25&gt;&gt;\s\n\t\t\n\t\t[[Train Character]] \n\t&lt;&lt;/replace&gt;&gt;\n&lt;&lt;/click&gt;&gt;\n&lt;/span&gt;&gt;</div><div tiddler="Tracy Special Training" tags="TimeNone">&lt;&lt;if !Game.inventoryQuantity(&quot;Set of Dildos&quot;)&gt;&gt;\s\n\t\t&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\s\n\t\t\tTracy's pretty damn experienced, and you're going to need some supplies to do her special training.  A set of dildos is required.\n\t\t&lt;&lt;/replace&gt;&gt;\s\n\t\t&lt;&lt;replace #links-text&gt;&gt;\s\n\t\t\t&lt;br&gt;&lt;br&gt;\s\n\t\t\t&lt;&lt;link &quot;Damn, time to go shopping&quot;&gt;&gt;\s\n\t\t\t\t&lt;&lt;goto &quot;Train Slave&quot;&gt;&gt;\s\n\t\t\t&lt;&lt;/link&gt;&gt;\s\n\t\t&lt;&lt;/replace&gt;&gt;\s\n\t&lt;&lt;else&gt;&gt;\s\n\t\t&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\s\n\t\t\t&lt;&lt;set $slaves[$csi].doneSpecialTraining = true&gt;&gt;\s\n\t\t\tYou walk up to Tracy and study her.  She studies you right back... you have an odd feeling you're on a glass slide under a scope.  The mutual examination continues for a few long moments until you have a feeling for her aura, or sexual energy, or whatever the fuck the coin lets you do.  She's an odd one, that's for sure: kinks of being humiliated and penetrated, especially in the ass.  You're a bit surprised to see she's got a deep submissive streak; she's so aggressive with her research and methods.  You can work with this though.\n\t\t\t&quot;Hello, Tracy.&quot;\n\t\t\t&quot;Hello, Master.  That's right, isn't it?  I call you Master?&quot;\n\t\t\t&quot;That's right.  You know about the Repetition Principle?&quot;\n\t\t\t&quot;Oh wow... yeah, I do.  It's used by advertisors a lot.  Master.&quot;\n\t\t\t&quot;And by me.  Always calling me Master will make you see me that way, even if only subtily.&quot;\n\t\t\tShe gives you another stark appraisal.  &quot;You know, this was a good choice, even if it's going to change me... you're a fascinating research opportunity, Master.&quot;\n\t\t\t&quot;And you're going to make a fascinating experimental subject, slave.&quot;\n\t\t\tShe blushes bright red and you can almost see her getting wet. &quot;Experimental subject?!  Fuck, Master, that's hot.&quot;\n\t\t&lt;&lt;/replace&gt;&gt;\s\n\t\t&lt;&lt;replace #links-text&gt;&gt;\s\n\t\t\tThe only question is what kind of experimental subject?\n\t\t\t&lt;br&gt;&lt;br&gt;\s\n\t\t\t&lt;&lt;link &quot;Test her holes&quot;&gt;&gt;\s\n\t\t\t\t&lt;&lt;goto &quot;Tracy Special Holes&quot;&gt;&gt;\s\n\t\t\t&lt;&lt;/link&gt;&gt;\n\t\t\t/* in future link to Test Limits goes here.  */\t\t\n\t\t&lt;&lt;/replace&gt;&gt;\s\t\n\t&lt;&lt;/if&gt;&gt;</div><div tiddler="Tracy Special Holes" tags="TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\s\n\t\t&lt;br&gt;\s\n\t\t&quot;I'm going to see how far I can push you.  I've been observing you and I think that you're interested in submission as more than a purely clinical exercise.  Is that right?&quot;\n\t\t&quot;Uh... yes.  I suppose you're right, Master.  You're awfully observant.&quot;\n\t\t&quot;Strip.&quot;\n\t\tHer eyes widen a little, but she does as ordered, removing her clothes and folding them neatly on a table until she's nude.\n\t\t&quot;Legs wide apart.  Put your hands behind your head.  Push out your tits.&quot;  As you give her orders she complies.  You step up to her, look her in the eyes, and feel her breasts.  They're large and her nipples quite hard.  You pinch her nipples between thumb and finger and pull, slowly, until she starts to wince.\n\t\t&quot;Ask me to train you.&quot;\n\t\t&quot;Please train me, Master.&quot;  She's breathing heavilly.\n\t\t&quot;Louder!&quot;\n\t\t&quot;Please train me!  Master!&quot;\n\t\t&quot;Ask me to hurt you.&quot;\n\t\t&quot;Um... Oh god.  Please hurt me Master.&quot;  You oblige, pulling her nipples harder until she makes a little noise deep in her throat, then start to twist them. You do this for a moment, bringing her moan and shift a little, then release them.  You slide one hand behind her neck to grab her hair and the other down her belly, finding her pussy wet.  You pull her hair while rubbing her clitoris.  Keeping eye contact the whole time, you slowly work her clit until she's squirming.\n\t\t&quot;Get on your hands and knees on the table.&quot;  She climbs on top of a low table on her hands and knees.\n\t\t&quot;Spread your knees wider.  Open your mouth.  No, wide.&quot;  She looks fantastic, pussy and asshole clearly visible with her knees apart and her mouth a perfect &quot;O&quot;.\n\t\tYou go to your supplies and pull out three silicone dildos, and stand them up in front of her.  Her eyes get wide and she lets out a little gasp; the toys are large, one about 8&quot; long, one 10&quot; long, and the last a real monster both longer and thicker than any normal cock.  You take up the smaller of the three and hold it in front of her face.\n\t\t&quot;Beg me to put this in one of your holes.&quot;  She looks a little shocked.\n\t\t&quot;Um... please Master.  Put the dildo in a hole.&quot;  You shake your head, mock-sadly, and walk around to her ass.  She starts to turn her head to follow you, but you snap &quot;Eyes front!&quot;  You spank her hard, once on each cheek.  &quot;Now, when I say beg, I mean beg!  And tell me which hole you want it in!  Now!&quot;  You spank her again and she gasps, hand prints already appearing on her ass.\n\t\t&quot;Master, please fuck my cunt with your toy!  Please Master, fill my slave cunt!&quot;\n\t\t&quot;Good girl.&quot;  You walk back in front of her and lube the toy up in front of her, making sure she can see how large it is, then walk back behind her.  She follows instructions and remains facing forward, although her buttocks twitch a little as you place the toy against her slit.\n\t\t&quot;Oh, yeah.  I almost forgot.&quot;  You set the toy down behind her and walk over to a shelf, grab an old voice recorder from a box containing random electronics, and check it... good news, the batteries are ok.  Placing it under her head, you activate it and hit record.\n\t\t&quot;Text subject Tracy.  Young caucasian female.  Testing subject's willingness to be probed and beg.  Results positive so far.&quot;  She gasps a little and looks at you... she's drooling a little with her mouth held open and quite obviously aroused... you've hit a good note with her, you can tell.  &quot;Subject, report any observations while you're being probed.&quot;\n\t\t&quot;Oh... yes, Master.  I'll try to be accurate.&quot;\n\t\tYou return to the dildo and again press it up against her pussy.  Slowly turning it to rub some of the lube on her entry, you gradually apply pressure until the head makes its way into her hole.\n\t\t&quot;Subject is experiencing... Oh... mild stretching and moderate arousal.&quot; You continue the pressure and an inch, then two. &quot;Subject feeling quite full, no pain but feeling pretty... ah... pretty turned on.&quot;\n\t\t&quot;Now, subject, push back until you're completely full.&quot;  She pushes back on the toy, sinking it almost all the way down.\n\t\t&quot;Oh!  Subject is definitely full.  Pressure on cervix, and Oh! substantial arousal.&quot; Wow... referring to herself in third person.  She's really into this.\n\t\t&quot;Bad subject.  You could do better than that.&quot;  You push the toy the remaining inch in and shove hard, her cunt almost swallowing the toy.  &quot;Applying negative stimulus.&quot;  You spank her, one hard spank.\n\t\t&quot;Ow! Oh! Subject is stuffed- Ah!&quot;  You spank her again, this time on her upper thigh. &quot;Ow! -stuffed very full!&quot;  Another spank. &quot;Ah! Some pain from deep penetra-&quot; Spank! &quot;-tration!  Punishment is-&quot; Spank! &quot;Ow! Very painful and also surpr-&quot; Spank! &quot;Ah! -prisingly arousing. Subject is find-&quot; Spank! &quot;-finding it difficult to-&quot; Spank! &quot;Ow! think!&quot;  You stop spanking her and walk around to her front but leaving the toy lodged in her pussy, gesturing for her to continue.\n\t\t&quot;Subject... ah... subject is feeling... almost displaced.  Like it's not in control.  The experience... mmm.... is disorienting.  But very exciting.  Subject is in some pain... the correction was quite firm.&quot; She looks up at you and raises her eyebrows, opening her mouth like she was told.\n\t\tYou add your observations: &quot;Test subject is performing well with initial probing.  Subject accepts discipline well, and seems to be an ideal candidate so far for conversion to three hole slut. Subject returned mouth to open posisiton of it's own accord.&quot;  Tracy gasps and you can see her nipples harden further. &quot;Subject, beg for the next tool and hole.&quot;\n\t\tShe looks at you in shock, then at the next toy in horror.  It's absolutely massive, as big around as a tin can and as long as a big porn cock.\n\t\t&quot;Oh- uh, Master, I don't know-&quot; You narrow her eyes, and she shudders. &quot;Master, please fill my mouth-&quot; She seems to do a little mental calculation, and realizes if you put that toy in her mouth, the other will probably end up in her ass.  &quot;I mean, please, Master, probe my ass!&quot;  She's gone a little pale but keeps begging. &quot;Please stretch my asshole with that huge dildo!  Please, Master!&quot;\n\t\t&quot;Good girl. Stimulate your clit and record your observations.&quot;  She reaches between her legs and starts to rub frantically.  You pull a little on her nipples.\n\t\t&quot;Ah.  Subject... is very aroused but frightened.  Feeling very submissive... oh... and anxious to please.&quot;  You pinch a little harder and her rubbing picks up pace. &quot;Oh... subject is fearful of pain from large toy... ah... but strangly wanting to see- ohmygod- to see if it will- ah! ah! if it will fit!  Oh god, subject is about to orgasm!&quot;  She's shaking and trembling.\n\t\t&quot;Stop.  Return to position.&quot;  She whimpers a bit in frustration, but returns her hand to the table and opens her mouth, panting.  You lift up the next toy and slowly rub lube over it too, coating it all the way to the base.  She looks on in axious anticipation, and when you walk behind her she's trembling.  You set down the toy for a moment and rub lube onto her asshole, rubbing her slit up and down slowly, circling the clit just slightly then down to where the toy fills her cunt.  She starts recording her observations without being prompted.\n\t\t&quot;Oh my... subject is highly aroused.  Anal stimulation during application of lubricant- ah- is very pleasant.  Vaginal stimulation is- oh- insufficient for orgasm- ah- but feels- oh- enjoyable.&quot;\n\t\tYou increase pressure on her asshole with your fingers, then slowly drizzle lube onto her hole while you slide a finger in.  She's not very tight, no doubt from having many of her own experimental subjects up her ass, but with the other toy still lodged in her, it still requires some pressure.  You start to pump your finger in her asshole while applying the lube.\n\t\t&quot;Ohmygod.  Subject is finding application very- ahhhh-stimulating!  Subject is feeling gratitude for concern- oh fuck- for her hole.&quot;  You move to two fingers, fucking her moderately hard, and resume working on her pussy very slowly.\n\t\t&quot;Ah!  God!  Subject is being fingered in her ass!  Subject is- god- being stretched- ahhh- is feeling like that- fuck!- that toy is going to fit- ahhhh- after all!&quot;  You slide a third finger in and start working her hole, trying to stretch it as much as possible.  &quot;Subject is- fuck- subject is feeling very full- ah- and extremely aroused!&quot;  That ought to do it.  You pull your fingers out of her ass and grab the toy.  She whimpers but arches her back hard, exposing her hole.  You put the tip of the massive toy on her anus and start to apply pressure.  Even stretched, it take a lot before the head of the toy starts to open up her sphincter.  \n\t\t&quot;Jesus!  Fuck!  Subject is- ah- being painfully- ah- stretched-&quot; You return your fingers to her clit, rubbing her purposefully. &quot;Subject- my god- ah, stimulation of clitoris and anal stretching- AH! FUCK!&quot; Just the right amount of pressure causes the head to pop into her ass, her hole stretching to accomodate it.  &quot;AH!  Subject is- Ow! Ah- in some pain- GOD- but very full- fuck- and about to-&quot; You rub harder on her clit and start to sink the toy into her ass.  Slowly, inch by inch, it makes its way into her.\n\t\t&quot;FUCK!  Subject- ah! subject is- FUCK! about to-&quot; You pick up the pace on her clit as the toy gets more than eight inches into her ass, and she starts bucking.  Her observations become nonsense, with only occasional words.  &quot;Ah! FUCK!  Come! AH! I'm-&quot; You push the toy relentlessly into her ass until the full ten inches are there and her asshole and cunt start clenching around them, and she bucks and screams.  Her orgasm rips through her, and when it starts to subside you slowly pull three inches of the toy out of her ass then push it firmly back it.  It sets her off more, and when finally she stops coming, she collapses in a heap, still double-stuffed with silicone.\n\t\t&quot;Good girl.  Test subject is satisfactory.  Future training will focus on making her a helpless, three hole fuck slut.&quot;\n\t\tShe whimpers and moans, almost out of her mind. &quot;Subject approves suggested course of action.&quot;  Her fingers go to her clit and she starts softly rubbing.\n\t\tYou leave off her training there, stuffed full and with the final monster toy as an ominous reminder you're not done.  Being trained like this has @@.good;increased her submission and love of having her holes stuffed@@ and made her @@.relationship-good;respect and admire@@ your ability to manipulate her mind and body.\n\t\t&lt;&lt;set $slaves[$csi].submission += 1&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].penetration += 1&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].obedience &lt; 20&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].obedience = 20&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].obedience += random(12)+4&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].relationship &lt; 20&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship = 20&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].relationship += random(12)+4&gt;&gt;\n\n\t&lt;&lt;/append&gt;&gt;\s\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\s\n\t\t&lt;br&gt;&lt;br&gt;\s\n\t\t&lt;&lt;link &quot;All done&quot;&gt;&gt;\s\n\t\t\t&lt;&lt;goto &quot;Train Slave&quot;&gt;&gt;\s\n\t\t&lt;&lt;/link&gt;&gt;\s\n\t&lt;&lt;/replace&gt;&gt;\s</div><div tiddler="Tracy Special Limits" tags="TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\s\n\n\t&lt;&lt;/append&gt;&gt;\s\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\s\n\t\t&lt;br&gt;&lt;br&gt;\s\n\t\t&lt;&lt;link &quot;All done&quot;&gt;&gt;\s\n\t\t\t&lt;&lt;goto &quot;Train Slave&quot;&gt;&gt;\s\n\t\t&lt;&lt;/link&gt;&gt;\s\n\t&lt;&lt;/replace&gt;&gt;\s</div><div tiddler="Tracy Stats" tags="widget">&lt;&lt;if typeof $characters === 'undefined'&gt;&gt;\n\t\t&lt;&lt;set $characters = []&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;run $characters.push({\n\t\tname:&quot;Tracy&quot;,\n\t\tgender:&quot;female&quot;,\n\t\trelationship:0,\n\t\tenslaved:0,\n\t\tisBroken:false,\n\t\tisInLove:false,\n\t\tisPregnant:false,\n\t\tisWorkingAt:&quot;&quot;,\n\t\tdescription:&quot;She simultaneously appears studious and wanton; while 18, she looks much younger although well developed.  She wears librarian glasses.&quot;,\n\t\tbodySize:2,\n\t\tbodyTone:1,\n\t\tface:&quot;cute and young-looking&quot;,\n\t\tskin:&quot;pale&quot;,\n\t\tfacialPeircings:&quot;a nose stud&quot;,\n\t\thairColor:&quot;red&quot;,\n\t\thairLength:&quot;long&quot;,\n\t\thairCut:&quot;casual but attractive&quot;,\n\t\ttitsSize:7,\n\t\ttitsShape:&quot;full&quot;,\n\t\tnippleSize:&quot;large and protruding&quot;,\n\t\tnippleColor:&quot;brown&quot;,\n\t\tnippleAreolae:&quot;large&quot;,\n\t\tnipplePeircings:&quot;&quot;,\n\t\tnavelPiercings:&quot;a small stud&quot;,\n\t\tpussySize:3,\n\t\tpussyHairStyle:1,\n\t\tpussyHairColor:&quot;red&quot;,\n\t\tpussyLips:2,\n\t\tpussyClit:3,\n\t\tpussyClitPeircing:0,\n\t\tpussyLabiaRingsNumber:0,\n\t\tpussyLabiaHeavyRingsNumber:0,\n\t\tpussyLabiaStudsNumber:0,\n\t\tpussyLabiaZipperNumber:0,\n\t\tassholeSize:3,\n\t\tassholeStyle:0,\n\t\tassholeColor:0,\n\t\t\n\t\t\n\t\tclothingRevealing:false,\n\t\tclothingTop:2,  \t\n\t\tclothingBottom:2,\n\t\tclothingWrists:2,\n\t\tclothingAnkles:-1,\n\t\tclothingCollar:-1,\n\t\tclothingShoes:2,\n\n\t\tplugToy:0,\n\t\tdildoToy:0,\n\t\tnippleToy:0,\n\t\twaistToy:0,\n\t\tbreastToy:0,\n\t\tcrotchToy:0,\n\t\tgagToy:0,\n\t\t\n\t\t\n\t\tobedience:0,\n\t\tfear:0,\n\t\tsexDrive:18,\n\t\t\n\t\t\n\t\tpain:0,\n\t\tlust:0,\n\t\tposition:0, \n\t\t\n\t\n\t\toral:0,\n\t\tcum:0,\n\t\tdeepthroat:0,\n\t\tpenetration:1,  \n\t\tanal:1,\n\t\tpainal:0,\n\t\t\n\t\tbegging:1,\n\t\thumiliation:1,\n\t\tbondage:0,\n\t\tmasochism:0,\n\t\thousework:0,\n\t\tsubmission:1,\n\t\t\n\t\tresistOral:15,\n\t\tresistCum:20,\n\t\tresistDeepthroat:35,\n\t\tresistPenetration:50,\n\t\tresistAnal:55,  \t\t\n\t\tresistPainal:75,\n\t\tresistBegging:12,\n\t\tresistHumiliation:35,\n\t\tresistBondage:40,\n\t\tresistMasochism:55,\n\t\tresistHousework:25,\n\t\tresistSubmission:40,\n\t\t\n\t\t\n\t\tdoneInspection:0,\n\t\trefused:0,\n\t\tbrokeRule:0,\n\t\tdoneSpecialTraining:false,\t\t\n\t\t\n\t\thasSucked:0,\n\t\thasPussyFucked:0,\n\t\thasAssFucked:0,\n\t\thasSwallowedCum:0,\n\t\t\n\t\t\n\t\t\n\t\trulesNoMasturbate:0,\n\t\trulesNoOrgasm:0,\n\t\trulesSwallowCum:0,\n\t})&gt;&gt;</div><div tiddler="Talk to Tracy" tags="TimeNone">&lt;&lt;if $flags.publicDominence === 0&gt;&gt;\s\nYou sit down at her table and try to make conversation.\n&quot;Hi!  Whatcha doing?&quot;  Ok, maybe not the best pick up line.\n&quot;Research,&quot; she says, in a bored tone, not even looking up from her notebook.\n&quot;What kind of research?&quot;\n&quot;Human sexuality and mating.&quot;\n&quot;I could help!&quot;  The words burst out of you mouth before you can stop them.\nThat attracts her attention.  She looks at you through her cute librarian glasses and looks at you in a clinical way, suddenly looking much older.  &quot;Hmm... how old are you?&quot;\n&quot;18.&quot;\n&quot;Oh.&quot;  She looks back at her notebook, bored again.  &quot;I already fucked an 18 year old.  Not great, he only wanted head and pussy and didn't even cum in my mouth, and anyway, I have the data I need for that demographic.&quot;\n&quot;Data?&quot;\n&quot;Yeah, I'm collecting data on every age from 18 to 65.  But like I said I already have 18.&quot;\n&quot;But...&quot;\n&quot;Look, you're interfering with my work, here.  Do you mind?&quot;\n&quot;Sorry.&quot;  You get up and leave.  What a weird chick.\n\n[[South Food Court]] \n&lt;&lt;elseif $flags.publicDominence &lt; 4&gt;&gt;\s\nYou sit down at her table.\n&quot;Hi!  Whatcha doing?&quot;\n&quot;Research.&quot;  She's looking at you with a measured gaze, seemingly trying to look into your soul.  &quot;Hey, didn't I see you doing some weird humiliating stuff to some chick?&quot;\n&quot;Um... yeah, I guess,&quot; you say.  Damn, your reputation might get to be a problem.\n&quot;Interesting.  Was that a BDSM thing?  I haven't had a chance to research that.&quot;\n&quot;Really?  Interesting?  Yeah, I mean I guess it's a BDSM thing.  That's with slaves and spanking, right?&quot;\nShe rolls her eyes and starts to look bored again.  &quot;Yeah.&quot;\n&quot;Well, yeah, I made a girl or two my slave.&quot;\nShe looks at you skeptically, and says, &quot;I'm not really talking about kinky stuff you do with your girlfriend.  I'm more looking for real slavery stuff.  If I was even researching it now, which I'm not.  I've still got a lot of data to collect.&quot;\n&quot;Well, do you want to try it?  I've got a collar that makes girls my slave with magic.&quot;\n&quot;Magic?  Pft.  I'm a scientist, not an idiot.  Get lost, ok?&quot;\n&quot;But...&quot;\n&quot;I'm kind of busy here.&quot;  She turns back to her notebook.  You wait a moment but she's ignoring you.  You get up and leave.\n\n[[South Food Court]] \n&lt;&lt;else&gt;&gt;\s\nYou sit down at her table.\n&quot;Hey!  I heard you've got a couple girls to walk through this place in really humiliating ways!  Is that you?&quot;\n&quot;Yeah...&quot;  You're not sure you like where this is going.\n&quot;So, they're like your slaves?&quot;\n&quot;Um... yes.&quot;\n&quot;Really?  Like sex slaves?&quot;\n&quot;Uh... I mean...&quot;\n&quot;Come on, man!  I'm trying to get some data here.  Try to be direct.&quot;\n&quot;Ok, then yes, sex slaves.&quot;\n&quot;So you make them crawl, do humiliating stuff?&quot;\n&quot;Well, yes.&quot;\n&quot;And they have to obey you?  Do you punish them if they don't?&quot;  She's scribbling in her notebook now, looking intensly interested... She's also looking rather aroused, and her nipples are poking through her bra.\n&quot;Yes.&quot;\n&quot;Oh... that's good information!&quot;  She's definitely interested.  &quot;So, do you make them do things they wouldn't like?&quot;\n&quot;Well, yeah.  I mean, if I want to, like fuck their ass and they're not into that, I make them.&quot;\n&quot;Wow!  So, is that what you get out of it?  I mean is that your motivation?&quot;  She's breathing heavily, and she keeps glancing at you with interest and excitement as she writes.\n&quot;No.  I mean, I like that stuff, but the punishments and the like are to train them.&quot;\n&quot;Oh... ok, yeah.  Train them?  To be good at sex, or what?&quot;\n&quot;Well, of course, but I train them to be obedient.  So I can use them any way I need to in the future.&quot;\n&quot;Oh wow.  That's really interesting.  So you want to have them as followers?&quot;\n&quot;Yeah, I guess that's one way to put it.&quot;\n&quot;Huh... maybe I should put aside my current studies.  Do you think you could train me?&quot;\n&quot;What do you mean?  You want me to punish you and make you my slave?&quot;\n&quot;It's not about what I want.  I'd like to gather data about what it's like to be trained like that.  What it's like to have that kind of sexual and psychological pressure applied.&quot;  Although she looks like she kind of wants it... you can't mistake her dialated pupils, quick breathing, and blush as anything else.\n&lt;&lt;if Game.inventoryQuantity(&quot;Leather Collar&quot;) != -1&gt;&gt;\s\n&quot;You're sure about this?&quot;\n&quot;Completely sure.  I'm very curious about the mental conditioning aspect, and frankly, the idea is interesting and exciting.&quot;\n&quot;Ok, then you've heard about how this works.&quot;  You produce the collar and set it on the table.  &quot;Put this on.&quot;\n&quot;Ok... should I call you Sir or Master or something?&quot;  She hasn't made a move towards the collar yet, but her eyes haven't left it since you set it on the table.\n&quot;Yes.  Call me Master.  Put on the collar.&quot;\n&quot;In just a moment... Master.  Are you going to make me go back to your place in a humiliating way?&quot;  Her tone is surprisingly neutral.\n&quot;Yes.&quot;\n&quot;Oh... ah...&quot;  she's squirming.  &quot;Yes, Master.&quot;  And just like that she puts on the collar, seeming more interested than surprised when the buckle closes itself.  &quot;Wow... that's... strange.&quot;\n&quot;Take off your bra,&quot; you order, and enjoy her surprised look as she reaches behind her under her shirt and does that thing girls do where she takes her bra off under her shirt.\n&quot;Wow.  I had to do that.  I mean, I didn't have any choice.  This is going to be interesting, Master.&quot;  She hands you the bra when you stick out your hand.\n&lt;&lt;if Game.inventoryQuantity(&quot;Leash&quot;) != -1&gt;&gt;\s\nYou clip the leash on the collar and gesture her to stand up.  She does so, her huge tits bouncing freely under her thin shirt and her nipples poking through.  It's totally obvious she's not wearing a bra, even if you weren't dangling the bra from your free hand.  \n&quot;Put your hands behind your head.&quot;\nShe does so, and what it does to her tits is amazing.  You tug on the leash, and start the walk back to the house.  Her tits sway and bounce, and gawkers look on in amazement as you lead her through the mall, one hand on the leash and the other holding her bra.\nYou get back to the house, and put her in your dungeon.  She looks around in appreciation.\n&quot;Wow.  So this is where you're going to train me?&quot;\n&quot;Yes.&quot;\n&quot;Ok.  Come back soon, ok?  I can't wait to start gathering data!&quot;\n&quot;I will.  Start playing with and tugging on your nipples.  Make sure you tug and pinch them hard enough to hurt a little.&quot;\nShe looks like she's trying to resist, but her hands go to her large nipples anyway and start tugging.\n&quot;Uh... Oh... wow!  You can really make me do stuff, huh, Master?&quot;\n&quot;Yes.  This is just a start.  Enjoy your wait, slut.&quot;\n&quot;Oh... Ouch... ah.... yes, Master.  I will find this very interesting.&quot;\nYou head back to the mall.  Tracy ought to be interesting.\n&lt;&lt;enslave &quot;Tracy&quot; 20&gt;&gt;\s\n&lt;&lt;run Save.autosave.save(&quot;Enslaved Tracy&quot;)&gt;&gt;\s\n\n[[South Food Court]] \n&lt;&lt;else&gt;&gt;\s\n&quot;Grab your tits and come with me.&quot;\n&quot;Yes, Master,&quot; and with that she walks back to your house, holding her tits while they bounce in her hands.  You lead her into her dungeon.\n&quot;You're going to train me here, Master?&quot;\n&quot;Yes.  Start tugging and pinching your nipples, and keep it up until I return.  Make sure you do it hard enough to hurt.&quot;\n&quot;Uh... oh.... yes, Master.&quot;\nYou return to the mall.  Tracy seems like she should be fun.\n&lt;&lt;enslave &quot;Tracy&quot;&gt;&gt;\n[[South Food Court]] \n&lt;&lt;/if&gt;&gt;\s\n&lt;&lt;else&gt;&gt;\s\n&quot;Damn, my collar is in use right now.&quot;\n&quot;Oh.  Do you need that?&quot;\n&quot;I'm afraid so... it's... symbolic.&quot;\n&quot;Interesting.&quot;  She makes a note in her book.  &quot;Well, as soon as you can, bring it back here, ok?  I'm very interested in doing this research.&quot;\nFrom the way she's squirming, you can tell she is.  &quot;Ok, I'll be back soon.&quot;\n&quot;Good... Sir.&quot;  She blushes prettily, but it's not embarrasment... you can only imagine there'll be a puddle when she stands up.\n\n[[South Food Court]] \n&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;</div><div tiddler="SugarCube configuration" tags="script">/* Main SugarCube configuration file. */\n\n/* Change the starting passage from the default 'start' to 'Alpha disclaimer'. */\nConfig.passages.start = &quot;Introduction&quot;;\n\n/* Disable forward/back buttons in panel. */\nConfig.history.controls = false;\n\n/* Set Autosaves. */\nconfig.saves.autosave = &quot;autosave&quot;;\n\n/* Save only one game state. */\nConfig.history.maxStates = 1;\n\n/* Set to 'true' to enable SugarCube's debug mode.\nNote: This is an 'engine level' debug mode, completely separate from the game's debug mode. */\nConfig.debug = false;</div><div tiddler="Arrested at the Mall" tags="TimeNone">You set foot in the mall, and like clockwork, two security guards grab you, manhandle you into a service passageway, and lead you to an elevator.  They shove you in, step in, and push the button labeled &quot;P3&quot;.  \n\nWhen the doors open, you're lead down a concrete hallway.  Stark white flourescent lights punctuate your walk down a hallway.   At one point an open doorway reveals a hulking man in a blue uniform sitting in front of a bank of security monitors and pressing controls on a panel in front of him.\n\nFinally, you reach a small cell.  Your captors push you in and one of them enters.  The door is shut.  The guard, a young-looking woman, sits on the bench facing you.  Her name tag reads &quot;Charlotte.&quot;\n\n&quot;Look, I don't know why you're here, and the boss has been acting weird.  But we're calling the police, and you're about to be arrested.  Seriously, you can't come back to the mall.  I doubt the police will want to charge you.&quot;\n\n&quot;Ok.  I know you're following orders.&quot;\n\n&lt;&lt;if Game.inventoryQuantity(&quot;Leather Collar&quot;) != -1&gt;&gt;\s\nYou have an idea.  &quot;Hey, have you ever tried wearing one of these?&quot;  You pull out the collar and show it to her.\n\n&quot;What the fuck, you perverted little shit?  Try that on one of the God damned mall rats.  Jesus.  I don't even know why I try.&quot;\n&lt;&lt;/if&gt;&gt;\n&lt;&lt;nobr&gt;&gt;\n\n&lt;&lt;if $pc.beenArrested &lt; 2&gt;&gt;\nShe steps out, and you wait for a couple hours, then some cops show up, make you sign a trespassing notice, and take you to jail.  You end up having to stay all night and talk in front of a camera to a judge who lets you go.  Ugh.  At least you don't drop the soap.\n&lt;&lt;set $day +=1&gt;&gt;\n&lt;&lt;set $hour = 10&gt;&gt;\n&lt;&lt;set $minute = 0&gt;&gt;\n&lt;&lt;set $pc.beenArrested += 1&gt;&gt;\n&lt;&lt;set $pc.isKickedOut = 1&gt;&gt;\n&lt;br&gt;&lt;br&gt;\n[[Your Room]] \n\n&lt;&lt;else&gt;&gt;\nThe judge isn't having it.  You really ought to have avoided seeing him &lt;&lt;=$pc.beenArrested&gt;&gt; in &lt;&lt;=$day&gt;&gt; days.  He sets your bond at $500, which may as well be a million for all the good it does you.  #wizardlivesmatter.  \n&lt;br&gt;&lt;br&gt;\n[[Out of Time]]\n&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Failed to Enslave Eva" tags="BadEnd">Uh oh, you're screwed.  You can't get into the mall anymore, and there's no one to help you.  Without being able to get in, there's no way you'll be able to deal with whatever is happening in there.\n\nNow that you think about it, Eva always seems to be hanging out at night around the mall... maybe she would have known of a way in. \n\n[[Too late now|Out of Time]]</div><div tiddler="Major Bad End" tags="TimeNone">Uh. Oh.\n\n\tThe Major grabs you, and you're tossed in the holding cell.  You wait for hours, enough time that you're thirsty and even nap a little.  When you wake up, it's because the door is opening to the dank little cell.  An emaciated crone enters, thrumming with power.  \n\n\t&quot;This is it?&quot; she asks, looking behind her.\n\t&quot;Yes, Mistress.&quot;\n\t&quot;That's all?  That's what you've been worrying about?&quot;\n\t&quot;I... Yes.&quot;\n\t&quot;I'll deal with you later.  You!&quot;  she's looking at you, and you stand. &quot;Come with me.&quot;  You follow, helplessly, as she takes you to the food court and straps you into a diabolical machine.  This isn't great.  You're strapped into a strange contraption in the food court along with all the other mall rats, teenagers who go to the local school, parents, cops, and everyone else.  Strange creatures stroll the hallways and blink through glowing portals, occasionally taking a moment to shop in one of the bizarre &quot;stores&quot; or to penetrate an oriface for a little refreshment at the &quot;food&quot; court.  Often one of your orifaces.\n\n\tYour adventure ends here.\n\n\t&lt;&lt;click &quot;Try again?&quot;&gt;&gt;&lt;&lt;run UI.restart()&gt;&gt;&lt;&lt;/click&gt;&gt;</div><div tiddler="Out of Time" tags="BadEnd">You aren't able to do anything about the situation at the mall.  By the time your parents get back, it's too late... some crazy ass witch has taken over the mall, and then the town, and now the news is bizarre from all over the world as strange political and natural disasters strike foreign and domestic cities.\n\nYou don't have a lot of time to watch the news though.  You're strapped into a strange contraption in the food court along with all the other mall rats, teenagers who go to the local school, parents, cops, and everyone else.  Strange creatures stroll the hallways and blink through glowing portals, occasionally taking a moment to shop in one of the bizarre &quot;stores&quot; or to penetrate an oriface for a little refreshment at the &quot;food&quot; court.  Often one of your orifaces.\n\nYour adventure ends here.\n\n&lt;&lt;click &quot;Try Again&quot;&gt;&gt;&lt;&lt;run UI.restart()&gt;&gt;&lt;&lt;/click&gt;&gt;</div><div tiddler="Virility Bad End" tags="BadEnd">&quot;You... little shit.&quot;\n&quot;Wait, I can explain!&quot;\n&quot;No, you're not the tool I need.  Fuck.  Oh well, at least I have some use for you.&quot;\nAnd with that, your cock starts to grow.  At first a little, then a lot.  A whole lot.  It's longer and thicker than your leg... then you notice everything else is shrinking.  Except your mouth, and asshole.  Yikes!  It continues, and pretty soon you're just a cock and some orifaces, and you merge with the Mother of Virility, fitting your now-gigantic cock into one of her holes then another, and your orifaces (oh, you seem to have grown more of those... some you can't even identify) are being fucked by other parts of the Mother.\n\nNo way to tell how this story will end, but you've become part of the Mother of Virility, one of the many cocks and holes that are her essence.\n\n&lt;&lt;click &quot;Try Again?&quot;&gt;&gt;&lt;&lt;run UI.restart&gt;&gt;&lt;&lt;/click&gt;&gt;</div><div tiddler="Bree and Eva">You walk up to the mall and see a stunning young woman, tall with beautiful blonde hair styled just so, wearing a flattering (and obviously expensive) outfit walking out.  You know her name... Bree, one of the rich girls at school and definitely one of the most popular.  She's tailed, as usual, by one of her sidekicks, a brunette with an air-headed look to her.\n\nBree is anything but air-headed though.  One of the emo girls that hangs out here is just entering the mall.  She keeps her eyes straight ahead to continue past the perfectly-coifed pair.\n\n&quot;Hey!  Tramp!  Yeah, you!&quot;\n&quot;What?&quot; the emo girl replies in a (obviously false) bored tone... she actually looks terrified.\n&quot;You name is Eva, right?&quot;\n&quot;So?&quot;\n&quot;You're the one that sucked all those cocks at that party Saturday, right?&quot;\n&quot;What?!?  No!&quot;\n&quot;Really?  'Cause that geeky kid you hang out with, Evan or Ian or whatever, said you did.&quot;\n&quot;No way!  Anyway, he's just one...&quot; Eva stops in horror, realizing she's what she's just admitted.  Bree's little friend titters.\n&quot;Oh really?  That's not what he said.  And he even gave a little picture of the back of your head and his junk with your mouth all around it to one of his buddies, who gave it to me.&quot;\n&quot;No!&quot;  but it's not a denial... Eva looks mortified.\n&quot;Oh yeah... here, see?&quot; she holds her phone out.  Too bad you can't see it, but it obviously scares the emo girl.\n&quot;Look, you've got to delete it!  If Dad saw that...&quot;\n&quot;Oh really, bitch?  I bet I can find your dad on facebook.&quot;\n&quot;You can't do that!  Please, don't!&quot;\n&quot;What will you do for it?&quot;\n&quot;Anything!  Just delete the picture?&quot;\n&quot;Anything?&quot; and Bree lifts her skirt, just an inch, suggestively, and glances down.\n&quot;What?!?  Gross, no!&quot;\nNOW Bree laughs, deep throated laughter, and after a moment her moronic friend joins in.  &quot;You stupid slut.  I don't need any gross emo lesbian on my snatch.  But just for the idea...&quot; and she pushes something on her phone.  A faint swoosh sound comes from the device.  She holds it to Eva's face, and says, &quot;I guess I did find your dad already.  And half the students.  Suck suck, slut!&quot;\nEva looks like she's about to take a swing, but Bree just walks away laughing.  \nEva takes a deep breath, sighs, looks defeated, and walks to the dumpster shaking, whether from anger, fear, or embarrassment it's hard to say.\nMan, that Bree girl is a bitch.  Eva's kind of hot though.\n\n&lt;&lt;set $flags.shownBreeAndEva = true&gt;&gt;[[Mall Entrance]]</div><div tiddler="Completed Training" tags="nobr TimeNone">&lt;&lt;=$slaves[$csi].name&gt;&gt; is now fully trained.  The collar is no longer neccesary, and you tell her so.  You have her kneel in front of you.\n\n&quot;Do you know why you're here?&quot;\n&quot;No, Sir.&quot;\n&quot;Do you want to obey me?&quot;\n&quot;Yes, Sir!&quot;\n&quot;That's why.  Because you want to be here.&quot;\n&quot;...?&quot;\n&quot;Let me put it this way.  Do you want to serve me?&quot;\n&quot;Yes.&quot;\n&quot;Then you will.  I'm going to take the collar off, and let you serve me because you want to.&quot;\n&lt;&lt;=$slaves[$csi].name&gt;&gt; says, &quot;Really?  I can serve you because I want to?&quot;\n&quot;Yes.  From now on, you're mine because you want to be.&quot;\n&quot;Thank you, ... Sir?&quot;\n&quot;Call me Master.&quot;\n&quot;Thank you, Master!&quot;\n&quot;Good girl.&quot;\n&lt;&lt;if $slaves[$csi].name == &quot;Eva&quot;&gt;&gt;\s\n&quot;Hey, you got kicked out of the mall, right?&quot;\n&quot;Well, yeah.&quot;\n&quot;I know how to get in there at night.&quot;\n&quot;Really?&quot;\n&quot;Yep.  Just head to the dumpsters, and hang a right.&quot;\n&quot;You're going to need to go with me.&quot;\n&quot;Yes, Master!&quot;\n&lt;&lt;/if&gt;&gt;\n\n[[Game Room]]</div><div tiddler="Daily Training New" tags="nobr TimeNone">/* should only be called with at least one slave. */\n\t/* $csi is set to the current slave, or $csi=0 on first call */\n\n\t&lt;&lt;=$slaves[$csi].name&gt;&gt; is recovering from her training.  &lt;br&gt;&lt;br&gt;\n\t\t/* check if slave is in love or broken */\n\n\n\t&lt;&lt;if $slaves[$csi].relationship &gt; 100 &amp;&amp; $slaves[$csi].obedience &gt; 100 &amp;&amp; !$slaves[$csi].isBroken &amp;&amp; !$slaves[$csi].isInLove&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].isInLove = true&gt;&gt;\n\t\t&lt;&lt;set $enslavedPassageString = $slaves[$csi].name + &quot; In Love&quot;&gt;&gt;\n\t\t&lt;&lt;if tale.has($enslavedPassageString)&gt;&gt;\n\t\t\t&lt;&lt;display $enslavedPassageString&gt;&gt;\n\t\t\t\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $csi = Game.getSlaveIndex($slaves[$csi].name)&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Generic Slave In Love&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;elseif $slaves[$csi].fear &gt; 100 &amp;&amp; $slaves[$csi].obedience &gt; 100 &amp;&amp;  !$slaves[$csi].isBroken &amp;&amp; !$slaves[$csi].isInLove&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].isBroken = true&gt;&gt;\n\t\t&lt;&lt;set $enslavedPassageString = $slaves[$csi].name + &quot; Is Broken&quot;&gt;&gt;\n\t\t&lt;&lt;if tale.has($enslavedPassageString)&gt;&gt;\n\t\t\t&lt;&lt;display $enslavedPassageString)&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $csi = Game.getSlaveIndex($slaves[$csi].name)&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Generic Slave Is Broken&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/* pregnancy */\n\t&lt;&lt;if $slaves[$csi].isPregnant&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].relationship &gt; 0&gt;&gt;\n\t\t\tBeing pregnant makes her @@.obedience-good;more resigned@@ to life as your slave and a little @@.relationship-good;happier to be with you.@@\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random (4) + 4&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].obedience += random (3) + 3&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tBeing pregnant makes her @@.fear-low;afraid@@ she'll never escape from being your slave and more @@.obedience-good;resigned to her fate.@@\n\t\t\t&lt;&lt;set $slaves[$csi].fear += random (4) + 4&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].obedience += random (3) + 3&gt;&gt;\t\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/* sex drive */\n\t&lt;&lt;set $slaves[$csi].lust += random($slaves[$csi].sexDrive) + $slaves[$csi].sexDrive&gt;&gt;\n\n\t/* masturbation */\n\t&lt;&lt;if $slaves[$csi].lust &gt; 60&gt;&gt;\n\t\t&lt;&lt;switch $slaves[$csi].rulesNoMasturbate&gt;&gt;\n\t\t\t&lt;&lt;case 0&gt;&gt;\n\t\t\t\tShe's incredibly horny, and masturbates furiously.  \n\t\t\t\t&lt;&lt;switch $slaves[$csi].rulesNoOrgasm&gt;&gt;\n\t\t\t\t\t&lt;&lt;case 0&gt;&gt;\n\t\t\t\t\t\tShe comes hard, fingering her pussy and rubbing her clit.  She's a little @@.fear-low;more relaxed@@ and @@.relationship-good;happy.@@\n\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].fear -= random (4) + 4&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random (3) + 3&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].lust -= random (10) + 10&gt;&gt;\t\n\t\t\t\t\t&lt;&lt;case 1&gt;&gt;\n\t\t\t\t\t\tShe's not allowed to orgasm.  She struggles with self control, trying to slow down her fingers.\n\t\t\t\t\t\t&lt;&lt;if random(200 - $slaves[$csi.lust]) &lt; $slaves[$csi].obedience + ($slaves[$csi].fear &gt; $slaves[$csi].relationship ? $slaves[$csi].fear : $slaves[$csi].relationship)&gt;&gt;\n\t\t\t\t\t\t\tShe controls herself, whimpering in @@.relationship-bad;frustration@@ and @@.lust-good;lust@@ but @@.obedience-good;more submissive.@@\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].lust += random (6) + 6&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship -= random (3) + 3&gt;&gt;\t\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random (3) + 3&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\tShe can't stand it and comes, screaming, and even though she's @@.fear-low;afraid of punishment@@, she's glad she @@.obedience-bad;broke the rules.@@\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random (6) + 6&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].brokeRule = true&gt;&gt;\t\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience -= random (3) + 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].lust -= random (10) + 10&gt;&gt;\t\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;case 2&gt;&gt;\n\t\t\t\t\t\tShe has to ask permission to come, so the takes a long time but finally becomes frantic.\n\t\t\t\t\t\t&lt;&lt;if random(150 - $slaves[$csi.lust]) &lt; $slaves[$csi].obedience + ($slaves[$csi].fear &gt; $slaves[$csi].relationship ? $slaves[$csi].fear : $slaves[$csi].relationship)&gt;&gt;\n\t\t\t\t\t\t\tShe can't handle it anymore, and comes, crawling to you, begging to be allowed to come.  You make her play with herself, whimper and beg, but finally give her release.  She comes screaming, and despite herself, is @@.relationship-good;thankful@@ and @@.obedience-good;more obedient.@@\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].lust -= random (8) + 8&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random (3) + 3&gt;&gt;\t\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random (3) + 3&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t\t\tShe isn't willing to lower herself to ask you, and comes quietly, hoping she can @@.obedience-bad;get away with@@ breaking the rules and @@.relationship-bad;angry@@ you're trying to control her.\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].lust -= random (6) + 6&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].brokeRule = true&gt;&gt;\t\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience -= random (3) + 1&gt;&gt;\n\t\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship -= random (3) + 3&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\t\n\t\t\t\t&lt;&lt;/switch&gt;&gt;\n\t\t\t&lt;&lt;case 1&gt;&gt;\n\t\t\t\t&lt;&lt;if random(200 - $slaves[$csi.lust]) &lt; $slaves[$csi].obedience + ($slaves[$csi].fear &gt; $slaves[$csi].relationship ? $slaves[$csi].fear : $slaves[$csi].relationship)&gt;&gt;\n\t\t\t\t\tYou've ordered her not to come at all, ever.  She's @@.fear-low;too afraid@@ to disobey, but she's @@.relationship-bad;furious@@ and @@.lust-good;incredibly horny.@@\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random (4) + 4&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship -= random (4) + 4&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].lust += random (10) + 10&gt;&gt;\t\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tShe tries to come silently, hoping you @@.obedience-bad;won't notice@@ and @@.fear-low;afraid you'll punish her.@@\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random (4) + 4&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience -= random (3) + 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].lust -= random (10) + 10&gt;&gt;\t\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].brokeRule = true&gt;&gt;\t\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/switch&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/* fetishwear */\n\t&lt;&lt;if $slaves[$csi].plugToy &gt; 0&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].anal &lt; 0&gt;&gt;\n\t\t\t&lt;&lt;if $slaves[$csi].humiliation &gt; 0&gt;&gt; /* hates anal but likes humiliation */\n\t\t\t\t&lt;&lt;switch $slaves[$csi].plugToy&gt;&gt;\n\t\t\t\t\t&lt;&lt;case 1&gt;&gt; /* small plug */\n\t\t\t\t\t\tShe's plugged all night with a small buttplug.  She @@.relationship-bad;hates@@ her ass being penetrated and it's uncomfortable, but the humiliation makes her @@.obedience-good;more submissive@@ and @@.fear-low;frightened.@@\n\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random (4) + 2&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random (3) + 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship -= random (3) + 1&gt;&gt;\t\t\t\t\t\t\t\t\n\t\t\t\t\t&lt;&lt;case 2&gt;&gt; /* large plug */\n\t\t\t\t\t&lt;&lt;case 3&gt;&gt; /* cock plug */\n\t\t\t\t&lt;&lt;/switch&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt; \n\t\t\t\t&lt;&lt;switch $slaves[$csi].plugToy&gt;&gt;\n\t\t\t\t\t&lt;&lt;case 1&gt;&gt; /* small plug */\n\t\t\t\t\t\tShe's plugged all night, and hates things up her ass.  The pain and discomfort make her @@.relationship-bad;angry@@ and @@.fear-low;afraid@@ you're going to keep abusing her.\n\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random (4) + 2&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship -= random (3) + 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;case 2&gt;&gt; /* large plug */\n\t\t\t\t\t&lt;&lt;case 3&gt;&gt; /* cock plug */\n\t\t\t\t&lt;&lt;/switch&gt;&gt;\t\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\t\t&lt;&lt;elseif $slaves[$csi].anal === 0&gt;&gt;\n\t\t\t&lt;&lt;switch $slaves[$csi].plugToy&gt;&gt;\n\t\t\t\t&lt;&lt;case 1&gt;&gt; /* small plug */\n\t\t\t\t\tYou keep her ass plugged all night with a small buttplug.  It's a constant reminder @@.obedience-good;she's yours@@ and you can @@.fear-low;do what you want@@ with her.\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random (3) + 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random (3) + 1&gt;&gt;\t\t\t\t\t\t\n\t\t\t\t&lt;&lt;case 2&gt;&gt; /* large plug */\n\t\t\t\t&lt;&lt;case 3&gt;&gt; /* cock plug */\n\t\t\t&lt;&lt;/switch&gt;&gt;\t\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;switch $slaves[$csi].plugToy&gt;&gt;\n\t\t\t\t&lt;&lt;case 1&gt;&gt; /* small plug */\n\t\t\t\t\tYou keep her ass plugged all night with a small buttplug.  She @@.relationship-good;loves@@ her ass full because it makes her @@.obedience-good;feel submissive and dirty.@@\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random (3) + 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random (3) + 1&gt;&gt;\t\t\t\t\t\t\n\t\t\t\t&lt;&lt;case 2&gt;&gt; /* large plug */\n\t\t\t\t&lt;&lt;case 3&gt;&gt; /* cock plug */\n\t\t\t&lt;&lt;/switch&gt;&gt;\t\n\t\t&lt;&lt;/if&gt;&gt;\t\t\n\t&lt;&lt;/if&gt;&gt;\n\n\t/* lose hatreds */\n\t&lt;&lt;if $slaves[$csi].anal &lt; 0 &amp;&amp; random(-50 * $slaves[$csi].anal) &lt; $slaves[$csi].hasAssFucked&gt;&gt;\n\t\tShe hates being fucked in the ass, but you've pounded her poor little slave asshole so many times that she's now @@.good;resigned that her asshole if another hole to fuck.@@\n\t\t&lt;&lt;set $slaves[$csi].anal = 0&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $slaves[$csi].cum &lt; 0 &amp;&amp; random(-50 * $slaves[$csi].cum) &lt; $slaves[$csi].hasSwallowedCum&gt;&gt;\n\t\tShe hates the taste and humiliation of swallowing cum but you've fucked so many loads down her throat @@.good;she's lost her hatred of swallowing cum.@@\n\t\t&lt;&lt;set $slaves[$csi].cum = 0&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\t\t\n\n\t/* etc, etc */\n\n\t/* work */\n\t&lt;&lt;if $slaves[$csi].isWorkingAt&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;display &quot;Working At Corrupted &quot; + isWorkingAt&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;br&gt;&lt;br&gt;\n\t/* set up next slave link */\n\t&lt;&lt;if $csi &lt; $slaves.length - 1&gt;&gt;\n\t\t&lt;&lt;='[[Next Slave|Daily Training New][$csi += 1]]&quot;'&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\n\t\t[[Day End Report]]\n\t&lt;&lt;/if&gt;&gt;</div><div tiddler="Day End Report" tags="nobr TimeNone">/* for right now, just go to the room. */\n\t&lt;&lt;goto &quot;Your Room&quot;&gt;&gt;</div><div tiddler="Daily Training Results" tags="nobr TimeNone">&lt;&lt;for _i = 0; _i &lt; $slaves.length; _i++&gt;&gt;\n\n\t&lt;br&gt;\n\tAt the end of the day, $slaves[_i].name is recovering from her training.  \n\n\t/* First daily effects she's still in training.  */\n\n\n\n\t/* check if slave is in love or broken */\n\n\n\t&lt;&lt;if $slaves[_i].relationship &gt; 100 &amp;&amp; $slaves[_i].obedience &gt; 100 &amp;&amp; !$slaves[_i].isBroken &amp;&amp; !$slaves[_i].isInLove&gt;&gt;\n\t\t&lt;&lt;set $slaves[_i].isInLove = true&gt;&gt;\n\t\t&lt;&lt;set $enslavedPassageString = $slaves[_i].name + &quot; In Love&quot;&gt;&gt;\n\t\t&lt;&lt;if tale.has($enslavedPassageString)&gt;&gt;\n\t\t\t&lt;&lt;display $enslavedPassageString&gt;&gt;\n\t\t\t\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $csi = Game.getSlaveIndex($slaves[_i].name)&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Generic Slave In Love&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;elseif $slaves[_i].fear &gt; 100 &amp;&amp; $slaves[_i].obedience &gt; 100 &amp;&amp;  !$slaves[_i].isBroken &amp;&amp; !$slaves[_i].isInLove&gt;&gt;\n\t\t&lt;&lt;set $slaves[_i].isBroken = true&gt;&gt;\n\t\t&lt;&lt;set $enslavedPassageString = $slaves[_i].name + &quot; Is Broken&quot;&gt;&gt;\n\t\t&lt;&lt;if tale.has($enslavedPassageString)&gt;&gt;\n\t\t\t&lt;&lt;display $enslavedPassageString)&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;set $csi = Game.getSlaveIndex($slaves[_i].name)&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Generic Slave Is Broken&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\n\n\t\t\n\t&lt;&lt;/for&gt;&gt;</div><div tiddler="Dream" tags="nobr TimeNone autosave">&lt;&lt;set $day += 1&gt;&gt;\n\t&lt;&lt;set $hour = 10&gt;&gt;\n\t&lt;&lt;set $minute = 0&gt;&gt;\n\n\t&lt;&lt;if Game.getSlaveIndex(&quot;Eva&quot;) === -1&gt;&gt;\n\t\t&lt;&lt;=either($dreams)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $day === 1&gt;&gt;\n\t\t&lt;&lt;run Dialog.setup(&quot;Act I&quot;)&gt;&gt;\n\t\t&lt;&lt;run Dialog.wiki(&quot;In which our intepid hero discovers...&lt;br&gt;&lt;strong&gt;The Mall!&lt;/strong&gt;&quot;)&gt;&gt;\n\t\t&lt;&lt;run Dialog.open()&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $flags.defeatedMajor &amp;&amp; !$flags.shownAct2&gt;&gt;\n\t\t&lt;&lt;set $flags.shownAct2 = true&gt;&gt;\n\t\t&lt;&lt;run Dialog.setup(&quot;Act II&quot;)&gt;&gt;\n\t\t&lt;&lt;run Dialog.wiki(&quot;In which the machinations of a certain witch prove a challenge.&lt;br&gt;&lt;br&gt;&lt;em&gt;You have completed the finished portion of the game.  The remainder is in active production and unfinished.  Continue at your own risk.&quot;)&gt;&gt;\n\t\t&lt;&lt;run Dialog.open()&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\t\t\n\t\n\t/* Events and endings */\n\t&lt;&lt;if $pc.isKickedOut &amp;&amp; Game.getSlaveIndex(&quot;Eva&quot;) === -1&gt;&gt;\n\t&lt;&lt;goto &quot;Failed to Enslave Eva&quot;&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $flags.evaIsTaggingAlong&gt;&gt;\n\t\t&lt;&lt;set $flags.evaIsTaggingAlong = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/* Daily Effects */\n\n\n\t/* Slave Daily Training Results */\n\t&lt;&lt;set _useNewTrainingResults = true&gt;&gt;\n\t&lt;&lt;if _useNewTrainingResults&gt;&gt;\n\t\t&lt;&lt;if $slaves.length &gt; 0&gt;&gt;\n\t\t\t&lt;&lt;set $csi = 0&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Daily Training New&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;display &quot;Daily Training Results&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t[[Wake up|Your Room]]\n\t&lt;&lt;/if&gt;&gt;</div><div tiddler="Talk to Derek">You step over to the dumpster.  Well, one question answered... the smell is coming from both of them.\n\t&quot;Hey kid... you look really familiar.&quot;\n\t&quot;I don't think I've ever met you.&quot;\n\t&quot;No, that's not what I mean.  You look like someone I used to know.&quot;\n\t&quot;Ok...&quot;\n\t&quot;Older than you.  Father or something?  Name's Bob.&quot;\n\t&quot;Wait, Uncle Bob?  You knew him?&quot;\n\t&quot;Yeah.  Magician.  That the guy?&quot;\n\t&quot;Yes!  Wow, it's so weird.  I just got a package from him.&quot;\n\t&quot;Shhh!&quot;  He waves a hand, and everything goes dark.  Well, not everything;  you and he are surrounded with light but a pace away everything's dark, like you're standing under a street light on a dark night.\n\t&quot;Damn, kid!  You know he ran away, right?&quot;\n\t&quot;Not really, no.  How'd you do that?&quot;  Now that you think about it, it doesn't stink anymore, and the tall man seems... radiant.  Or maybe sharper, like too sharp.\n\t&quot;I was sort of collegues with your uncle.  Name's Derek.  Look, someone is looking for him.  He had to run.  I don't really know the details, but I know he ran into some dark shit.  If they find out you've got some of his mojo, you'll be toast.  There's no way you can survive without help.&quot;\n\t&quot;Help?  Actually, Uncle did say something about help.&quot;\n\t&quot;Yeah.  You need to recruit some... very loyal help.  I'd imagine he included some sort of tool to do that.&quot;\n\t&quot;A collar... he said not to put it on.&quot;\n\t&quot;Ha ha!  Bob always was a pervert.  Probably only works on women too.  That'll work though.  Go ahead and get started recruiting.  If you only have a collar, you'll need to train whoever you recruit as quickly as possible... don't know why the lecher didn't just make a wand.&quot;\n\t&quot;Ok, so I find women and get them to put on the collar?  And train them to be what, like slaves?&quot;\n\t&quot;Heh.  The kid takes after his uncle.  But a few teenage skanks aren't going to get you through this.  You'll need to develop your magical skills, too, and find out what's going on in this town.  That magical coin enhances your ability to sense hidden things.  You need to clear your vision too, though.&quot;\n\t&quot;How do I do that?&quot;\n\t&quot;You've got to perform one of the Rituals of Opening, then pledge youself to whatever that ritual brings.&quot;\n\t&quot;Uhhh... that doesn't sound awesome.&quot;\n\t&quot;Them's the breaks, kid.  You want power, you need a source.&quot;\n\t&quot;You mean like the devil?&quot;\n\t&quot;Shit, kid!  You want to go that way, I guess I can't stop you, but that's some dark shit... I'd suggest you hit up one of the Mother Spirits.  Nature entities... more neutral than anything.  Calling 'em spirits is a bit of a misnomer though.  More like small gods.&quot;\n\t&quot;Ok. Yeah, that sounds better, for sure.  But how do I do these rituals?&quot;\n\t&quot;I'll teach you one now.  Make sure you do it just like I tell you, all right?  And no skimping on ingredients!&quot;\n\t&quot;Wow, thanks!  I'll do it perfect!&quot;\n\t&quot;Do you want to learn:&quot;\n\n\t&lt;span id=&quot;rituals&quot;&gt;\s\n\t&lt;&lt;click &quot;The Ritual of the Great Mother of Enhanced Virility&quot;&gt;&gt;\n\t\t&lt;&lt;replace &quot;#rituals&quot;&gt;&gt;\s\n\t\t&quot;Yeah, somehow that seemed down your alley.&quot;\n\t\tHe spends some time explaining diagrams, symbols, and ingredients.  You listen, but damn, is it boring... is the mall open?  Anyway, you get the gist of it.  \n\t\t&quot;One last thing, kid... you need to open your eye.&quot;\n\t\t&quot;Don't you mean eyes?&quot;\n\t\t&quot;Nope.&quot;\n\t\tHe sticks his finger in your fucking brain.  Yep, brain, from a point midway between your eyes and up about an inch.  You black out.  When you wake up, you're standing in the parking lot of Zeke's. Somehow your eyes seem... wait, did you always have three?  Fucking weird, dude.\n\t\t&lt;&lt;set $pc.ritual = &quot;Virility&quot;&gt;&gt;\s\n\t\t&lt;&lt;set $pc.mageSight = 1&gt;&gt;\s\n\t\t&lt;br&gt;\n\t\t&lt;&lt;return &quot;Go back to the parking lot&quot;&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\s\n\t&lt;&lt;/click&gt;&gt;\s\n\t/*\n\t&lt;&lt;click &quot;The Ritual of the Soul&quot;&gt;&gt;\n\t\t&lt;&lt;replace &quot;#rituals&quot;&gt;&gt;\s\n\t\t&quot;Huh... really into your feelings, are you?  Sounds good to me, kid, and makes me feel better about granting you this kind of power.  Listen close now...&quot;\n\t\tHe spends some time explaining diagrams, symbols, and ingredients.  You listen, but damn, is it boring... is the mall open?  Anyway, you get the gist of it.  \n\t\t&quot;One last thing, kid... you need to open your eye.&quot;\n\t\t&quot;Don't you mean eyes?&quot;\n\t\t&quot;Nope.&quot;\n\t\tHe sticks his finger in your fucking brain.  Yep, brain, from a point midway between your eyes and up about an inch.  You black out.  When you wake up, you're standing in the parking lot of Zeke's. Somehow your eyes seem... wait, did you always have three?  Fucking weird, dude.\n\t\t&lt;&lt;set $pc.ritual = &quot;Soul&quot;&gt;&gt;\s\n\t\t&lt;&lt;set $pc.mageSight = 1&gt;&gt;\s\n\n\t\t&lt;&lt;return &quot;Go back to the parking lot&quot;&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\s\n\t&lt;&lt;/click&gt;&gt;\s\n\n\t&lt;&lt;click &quot;The Ritual of Reshaper, She Who Molds&quot;&gt;&gt;\n\t\t&lt;&lt;replace &quot;#rituals&quot;&gt;&gt;\s\n\t\t&quot;Wow... really like control, huh, kid?  Well, who am I to judge, I've made the occasional slut into my dream girl.&quot;\n\t\tHe spends some time explaining diagrams, symbols, and ingredients.  You listen, but damn, is it boring... is the mall open?  Anyway, you get the gist of it.  \n\t\t&quot;One last thing, kid... you need to open your eye.&quot;\n\t\t&quot;Don't you mean eyes?&quot;\n\t\t&quot;Nope.&quot;\n\t\tHe sticks his finger in your fucking brain.  Yep, brain, from a point midway between your eyes and up about an inch.  You black out.  When you wake up, you're standing in the parking lot of Zeke's. Somehow your eyes seem... wait, did you always have three?  Fucking weird, dude.\n\t\t&lt;&lt;set $pc.ritual = &quot;Change&quot;&gt;&gt;\s\n\t\t&lt;&lt;set $pc.mageSight = 1&gt;&gt;\s\n\t\t&lt;br&gt;\n\t\t&lt;&lt;return &quot;Go back to the parking lot&quot;&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\s\n\t&lt;&lt;/click&gt;&gt;\s\n\t*/\n\t&lt;/span&gt;</div><div tiddler="The Major" tags="TimeNone">You enter the last answer on the keypad and the door clicks and slowly opens.  Holy. Shit.  There's a giant of a man, easily 7 feet tall and as wide as a house standing in front of a bank of a dozen security monitors.  The monitors are showing everything that happens at the mall... everything.  There are monitors showing dressing rooms and bathrooms, monitors looking up from steps and escalators, and other, weirder scenes.\n\nYou only have a moment to take that in.  The huge man turns at the click of the door opening, his huge cock sliding out of the asshole of the girl in the security uniform bent over the desk.  She's been crying and pulls away, hiding in the corner in abject terror.  The man drops a taser... holy shit, he was assraping her, and threatening her with a taser!  That's pretty fucked up.\n\n&quot;You!  Baba... Barbara said you'd try to interfere!&quot;\n&quot;Who?&quot;\n&quot;Fuck You.&quot;  He zips up his pants.  &quot;I guess I'll have to clean out the garbage disposal after all.&quot;  He squares up and clenches his fists.\n&lt;&lt;if $pc.mageSight&gt;&gt;Now you see it... in his eyes.  There's a glow of... something.  Shit.  It's the same thing you see with your slaves.  He's been enslaved.  But where your energy is... well, perverted, his is dark.  Super dark.&lt;&lt;/if&gt;&gt;\nShit.  It looks like you're going to have to fight this guy... and he's huge.  There's no way you're going to win this.  &lt;&lt;if $pc.power &gt; 50&gt;&gt;The power of the Mother surges through you... oh yeah.  Wizard.  Duh.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $majorHPs = $day * 10&gt;&gt;\n&lt;&lt;set $majorAttack = &quot;charge&quot;&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;\n[[Fight the Major]]</div><div tiddler="Fight the Major" tags="TimeNone">&lt;&lt;set _attack = [&quot;charge&quot;, &quot;stand&quot;, &quot;powerblow&quot;]&gt;&gt;&lt;&lt;set $majorAttack = _attack[random(0,2)]&gt;&gt;\s\nYou're fighting the Major of Security.\n\n&lt;&lt;if $majorResults&gt;&gt;&lt;&lt;=$majorResults&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\nThe Major is \s\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $majorHPs &gt; 50&gt;&gt;\n\tglowing and crackling with power and strength.\n&lt;&lt;elseif $majorHPs &gt; 35&gt;&gt;\n\tglowing with power.\n&lt;&lt;elseif $majorHPs &gt; 20&gt;&gt;\n\tsurrounded by a fading glow of power.\n&lt;&lt;elseif $majorHPs &gt; 10&gt;&gt;\n\tfaintly glowing and looking hurt.\n&lt;&lt;else&gt;&gt;\n\tbattered and defeated looking.\n&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;\nYou currently have &lt;&lt;=$pc.power&gt;&gt; power.\n\nCurrently, the Major is \s\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $majorAttack === &quot;charge&quot;&gt;&gt;\n\thunkering down and preparing to charge into you!\n&lt;&lt;elseif $majorAttack === &quot;stand&quot;&gt;&gt;\n\tsquaring up with you and prepared to go toe-to-toe!\n&lt;&lt;elseif $majorAttack === &quot;powerblow&quot;&gt;&gt;\n\tpulling back and preparing to deliver a heavy blow!\n&lt;&lt;else&gt;&gt;\n\tERROR:  couldn't find Major action.\n&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;\n\nWhat would you like to do?\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $pc.path === &quot;Virility&quot;&gt;&gt;\n\t&lt;&lt;click &quot;Invoke the Spirit of the Ram&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.power -= 2&gt;&gt;\n\t\t&lt;&lt;switch $majorAttack&gt;&gt;\n\t\t\t&lt;&lt;case &quot;charge&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorHPs -=12&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorResults = &quot;You call upon the Mother for the power of the Ram.  He charges towards you, but you set your head and a wave of power forms around you.  When he reaches you he butted away, shaking and looking stunned.&quot;&gt;&gt;\n\t\t\t&lt;&lt;case &quot;stand&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorHPs -= 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorResults = &quot;You call upon the Ram as he squares up.  His longer reach allows his glowing fists to batter you over and over while you attempt to butt in vain.&quot;&gt;&gt;\n\t\t\t&lt;&lt;case &quot;powerblow&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorHPs -= 3&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorResults = &quot;He swings back mightily and you rear back to butt him with the power of the Ram.  Both of you unleash and both are hurt... you more than him.&quot;&gt;&gt;\n\t\t&lt;&lt;/switch&gt;&gt;\n\t\t\n\t\t&lt;&lt;if $pc.power &lt; 1&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Major Bad End&quot;&gt;&gt;\n\t\t&lt;&lt;elseif $majorHPs &lt; 1&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;The Major is Vanquished&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Fight the Major&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;br&gt;\n\t&lt;&lt;click &quot;Invoke the Spirit of the Bull&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.power -= 4&gt;&gt;\n\t\t&lt;&lt;switch $majorAttack&gt;&gt;\n\t\t\t&lt;&lt;case &quot;charge&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorHPs -= 6&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorResults = &quot;You ask the mother for the strength of the Bull.  As the Major charges, you do too, and the resulting crash stuns both of you.&quot;&gt;&gt;\n\t\t\t&lt;&lt;case &quot;stand&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorHPs -= 4&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorResults = &quot;Invoking the Mother for the Bull Spirit, you charge only to be caught by his ready fists.  He fends you off for the most part.&quot;&gt;&gt;\n\t\t\t&lt;&lt;case &quot;powerblow&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorHPs -= 13&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorResults = &quot;He swings back mightily and you hasitly manifest the Bull Spirit.  Before he can deliver his blow, your charge catches him saquare, sending him flying.&quot;&gt;&gt;\n\t\t&lt;&lt;/switch&gt;&gt;\n\t\t\n\t\t&lt;&lt;if $pc.power &lt; 1&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Major Bad End&quot;&gt;&gt;\n\t\t&lt;&lt;elseif $majorHPs &lt; 1&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;The Major is Vanquished&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Fight the Major&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;br&gt;\n\t&lt;&lt;click &quot;Invoke the Spirit of the Elephant&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.power -= 6&gt;&gt;\n\t\t&lt;&lt;switch $majorAttack&gt;&gt;\n\t\t\t&lt;&lt;case &quot;charge&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorHPs -= 4&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorResults = &quot;You manifest the Mighty Elephant, most virile of beasts.  Unfortunately, it makes you a bigger target and his charge slams into you.&quot;&gt;&gt;\n\t\t\t&lt;&lt;case &quot;stand&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorHPs -= 18&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorResults = &quot;You ask the Mother for vast power, and she delivers.  You are infused with the power of the Elephant, and his fists stand no chance against your awesome power.  He is badly damaged by the time he can disengage.&quot;&gt;&gt;\n\t\t\t&lt;&lt;case &quot;powerblow&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorHPs -= 9&gt;&gt;\n\t\t\t\t&lt;&lt;set $majorResults = &quot;You call upon the Vast Elephant and meet his mighty blow with tusks of your Mother's power.  Both land, and both suffer.&quot;&gt;&gt;\n\t\t&lt;&lt;/switch&gt;&gt;\n\t\t\n\t\t&lt;&lt;if $pc.power &lt; 1&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Major Bad End&quot;&gt;&gt;\n\t\t&lt;&lt;elseif $majorHPs &lt; 1&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;The Major is Vanquished&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Fight the Major&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;br&gt;\n\n\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="The Major is Vanquished" tags="nobr TimeNone">&lt;&lt;set $flags.defeatedMajor = true&gt;&gt;The last blow lays low your opponent.  Wow, that Major dude was a real beast.  And who the fuck was controlling him?  It has to have been Barbara Yargarian, the local access game show host... but how does that make sense?  He said something about her being &quot;Baba&quot;.  Weird.&lt;br&gt;\n\t&lt;br&gt;\n\t&lt;&lt;set $pc.magicLevel = 2&gt;&gt;\n\t&lt;&lt;run $corruptedBabaYaga.push('Hot &quot;Dogs&quot;')&gt;&gt;\n\t&lt;&lt;if $pc.path === &quot;Vitality&quot;&gt;&gt;\n\t\tYour vanquished oponent is nothing if not vital... you're sure Mother can use that.  You chant a few words and she appears.  &lt;br&gt;\n\t\t&quot;Well done, little pervert.  You actually spoke the Words correctly, and you bring a proper gift.  You show promise.&quot;  Just like that, she's gone.  Jesus, watch a movie, gods... there are special effects for that.  At least you don't have to kill anyone or try to dispose of a body.  You feel power flow through you... you've acheived a stronger connection with the @@.virility;Mother of Virility!@@\n\t&lt;&lt;/if&gt;&gt; /* path */\n\t&lt;br&gt;\n\t[[Talk to the Mall Cop]]</div><div tiddler="Generic Slave Is Broken" tags="TimeNone">You've beaten, tortured, and humiliated &lt;&lt;=$slaves[$csi].name&gt;&gt; for hours and hours.  She suffered and cried, and you've been merciless.  Now it's paid off.  You remove the collar and show it to her.  You test her with humiliation, make her buttfuck herself while riding on your cock, and determine you're done... she'll do whatever you want, collar or no.  You set it aside, put her face down ass up, and celebrate by beating her ass red then fucking it hard.</div><div tiddler="Generic Slave In Love" tags="TimeNone">&lt;&lt;=$slaves[$csi].name&gt;&gt; kneels in front of you in just the position she's been trained to as you lay down to go to sleep. \n&quot;Master?&quot;\n&quot;Yes, &lt;&lt;=$slaves[$csi].name&gt;&gt;?&quot;\n&quot;I... um...&quot;\n&quot;Yes?&quot;\n&quot;Will you always be my Master?&quot;\n&quot;Well, I mean, are you asking me to let you go?&quot;\n&quot;No!  No, please don't let me go!&quot;\n&quot;Wait, what?&quot;\n&quot;Please tell me you'll always be my Master.&quot;\n&quot;You want to always be my slave?&quot;\n&quot;Yes!  Please, I'll do anything.  I guess you already know that.&quot;  She blushes rather adorably.\n&quot;Um... ok...&quot;\n&quot;Thank you! Thank you, Master!&quot;  She sticks out her tongue, crawls to your lap, looks up at you, and starts to lick your balls.  &quot;I always want to serve you like this.&quot;\n&quot;Oh... good girl.&quot;\nShe giggles, and starts licking and sucking in earnest, pausing only occasionally to mumble some words around your cock.\n&quot;Master... I know... mfmmf... have uses... mmm... for this collar.  You... don't... gug... need it anymore... slurp... on me... I'm yours... forever...&quot;  It's partially the words, and partially the expert cocksucking, but it's too much for you.  You grab her head, shove it down on your cock, and cum in her mouth.&lt;&lt;cum&gt;&gt;  She stay still sucking the cum out of you and when you release her head, she looks up at you, opens her mouth to show you the cum, and speaks around it.\n&quot;I'll always be yours.  Please let me help you any way I can.&quot;\nShe swallows.\nYou take off the collar.  &lt;&lt;=$slaves[$csi].name&gt;&gt; really is a good girl.</div><div tiddler="Try the security pad" tags="TimeNone">This door is different.  It's solid steel, and has a full keyboard fastened to the wall beside it.  The keypad is asking a... curious question.  Weird.\n\n\t&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;set $flags.keypadAttempts = 0&gt;&gt;\n\t&lt;&lt;set $keypadCurrentQuestions = []&gt;&gt;\n\t&lt;&lt;set $keypadCurrentAnswers = []&gt;&gt;\n\n\t&lt;&lt;set _r = random(0,$keypadQuestions.length)&gt;&gt;\n\t\t&lt;&lt;run $keypadCurrentQuestions.push($keypadQuestions[_r])&gt;&gt;\n\t\t&lt;&lt;run $keypadCurrentAnswers.push($keypadAnswers[_r])&gt;&gt;\n\n\t\t&lt;&lt;set _r = random(0,$keypadQuestions.length)&gt;&gt;\n\t\t&lt;&lt;run $keypadCurrentQuestions.push($keypadQuestions[_r])&gt;&gt;\n\t\t&lt;&lt;run $keypadCurrentAnswers.push($keypadAnswers[_r])&gt;&gt;\n\n\t\t&lt;&lt;set _r = random(0,$keypadQuestions.length)&gt;&gt;\n\t\t&lt;&lt;run $keypadCurrentQuestions.push($keypadQuestions[_r])&gt;&gt;\n\t\t&lt;&lt;run $keypadCurrentAnswers.push($keypadAnswers[_r])&gt;&gt;\n\n\t&lt;&lt;/nobr&gt;&gt;\n\tTry to answer?\n\t[[The Keypad]]\n\n\tOr, just walk away.\n\t[[Central Security Hallway]]</div><div tiddler="The Keypad" tags="TimeNone nobr">/* success check */\n\n\t&lt;&lt;if $flags.keypadAttempts === 0&gt;&gt;\n\t/* automatic pass */\n\t&lt;&lt;elseif $flags.keypadAttempts === 3&gt;&gt;\n\t\t&lt;&lt;goto &quot;The Major&quot;&gt;&gt;\n\t&lt;&lt;elseif $keypadResponse.toLowerCase() === $keypadCurrentAnswers[$flags.keypadAttempts - 1]&gt;&gt;\n\t/* pass */\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;goto &quot;The Major&quot;&gt;&gt; //* TODO: this has been set so the player always succeeds due to faulty questions. */\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $debugging&gt;&gt;&lt;&lt;click &quot;Get 100 power&quot;&gt;&gt;&lt;&lt;set $pc.power += 100&gt;&gt;&lt;&lt;/click&gt;&gt;&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $debugging&gt;&gt;keypadAttempts:  &lt;&lt;=$flags.keypadAttempts&gt;&gt;&lt;br&gt;Question: &lt;&lt;=$keypadCurrentQuestions[$flags.keypadAttempts]&gt;&gt;&lt;br&gt;Answer: &lt;&lt;=$keypadCurrentAnswers[$flags.keypadAttempts]&gt;&gt;&lt;br&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\n\tThe keypad currently reads:  &lt;&lt;=$keypadCurrentQuestions[$flags.keypadAttempts]&gt;&gt;&lt;br&gt;\n\tKey Answer And Press Enter: &lt;&lt;textbox &quot;$keypadResponse&quot; &quot;&quot; &quot;The Keypad&quot; autofocus&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\t[[Step Away|Central Security Hallway]]\n\n\t&lt;&lt;set $flags.keypadAttempts += 1&gt;&gt;</div><div tiddler="Meet Baba Yaga">&lt;&lt;set $isKickedOut = true&gt;&gt;\s\nYou step up to the food court.   Weird, there's a stage set up over the fountain.  Fountain?  Has that always been there?\n\nAnyway, you see local celebrity Barbara Yagarisky &lt;&lt;if $pc.mageSight&gt;&gt; (is that her real name?) &lt;&lt;/if&gt;&gt; step onto the stage and introduce her wildly popular show, So You Want to be The Weakest Link?  It's some kind of stupid dating show, where women who might want to be stupid sluts instead get to date guys get to... date guys?  Shit.  It makes no sense.  That's local access TV for you.  You are about to walk away, when you and Barbara make eye contact, and for a second &lt;&lt;if $pc.mageSight&gt;&gt;you see her as a shining emaciated figure&lt;&lt;else&gt;&gt;she gazes malevolently at you&lt;&lt;/if&gt;&gt;, then gestures, and a couple security guards grab you and take you away.  \n\nShit.  That's not cool.\n\n[[Arrested at the Mall]]</div><div tiddler="Sit Near the Popular People" tags="nobr mall TimeLong">&lt;&lt;if $flags.knowBreeWeightIssues&gt;&gt;\n\t&lt;&lt;if Game.inventoryQuantity(&quot;Leather Collar&quot;)&gt;&gt;\n\t\t&lt;&lt;goto &quot;Enslave Bree&quot;&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\tYou know, sitting at a table listening to Bree and her little followers, you have an idea... if you could pretend that she was chubby, maybe by comparing her to Eva, might be able to trick her into trying on the collar...  Worth a thought.  When you can get the collar back, of course.  &lt;br&gt;&lt;br&gt;[[West Food Court]]\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;else&gt;&gt;\n\tYou take a seat and eavesdrop on the popular kids.  Bree is running on and on about her new diet while her sycophants praise her, telling her how thin and hot she is.  It goes on for almost half an hour.  Damn, the girl has some serious weight issues.&lt;br&gt;&lt;br&gt;[[Enough of this.  Get up.|West Food Court]]\n&lt;&lt;/if&gt;&gt;</div><div tiddler="Run Away!" tags="nobr TimeNone">&lt;&lt;if $debugging&gt;&gt;keypadAttempts:  &lt;&lt;=$flags.keypadAttempts&gt;&gt;&lt;br&gt;Question: &lt;&lt;=$keypadQuestions[$flags.keypadAttempts]&gt;&gt;&lt;br&gt;Answer: &lt;&lt;=$keypadAnswers[$flags.keypadAttempts]&gt;&gt;&lt;br&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\nDamn.  Now the alarms are sounding and you've got to get out of here.  You run towards the mechanical room at top speed.  Heavy footsteps pursue you.  You look back, and there's a veritable giant behind you.  He's seven feet tall and built like Mr. Clean.  Same haircut too.  But his eyes glow like a fire built of anger, and his muscles pulse.&lt;br&gt;\n&lt;br&gt;\nOh.  Shit.  How do you get out of this?&lt;br&gt;\n&lt;br&gt;\n&lt;span id=&quot;escape&quot;&gt;\n\t&lt;&lt;click &quot;Run like hell!&quot;&gt;&gt;\n\t\t&lt;&lt;replace &quot;#escape&quot;&gt;&gt;\n\t\t\t&lt;&lt;if random(1,3) === 1&gt;&gt;\n\t\t\t\tYou feel a hand grab you and pull you back.  \n\t\t\t\tThe Major pulls you back and you end up in the clutches of Baba Yaga.  &lt;br&gt;&lt;br&gt;  [[Major Bad End]]\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou make it to the door and slam it shut just before he gets there.  Jesus.  Finally, you make the street and head home.  You don't stop until you reach your room.  &lt;br&gt;&lt;br&gt;[[Your Room]]\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;&lt;if $pc.path === &quot;Virility&quot; &amp;&amp; $pc.power &gt; 15&gt;&gt;\n\t\t&lt;&lt;click &quot;Call on the Mother of Virility&quot;&gt;&gt;\n\t\t\t&lt;&lt;replace &quot;#escape&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $pc.power -= 10&gt;&gt;\n\t\t\t\t\tYou call on the Mother and her power surges into you.  You feel ALIVE, your muscles surging and your cock hard.  Your flight seems like a casual stroll as you grab the door, batter it away, and almost flow through the passageway.  You've forgotten the brute behind you by the time you make it to your room. &lt;br&gt;&lt;br&gt;[[Your Room]]\n\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;/span&gt;</div><div tiddler="StoryInit">&lt;&lt;set $version = &quot;0.2.2&quot;&gt;&gt;\n\n\n&lt;&lt;set $day = 0&gt;&gt;\n&lt;&lt;set $hour = 0&gt;&gt;\n&lt;&lt;set $minute = 0&gt;&gt;\n\n\n\n&lt;&lt;set $flags = {\n\tdefeatedMajor:false,\n\tshownBreeAndEva:false,\n\tvisitedDungeon:false,\n\tknowsAboutSecretEntrance:false,\n\tevaIsTaggingAlong:false,\n\tpublicDominence:0,\n\thiredGasStation:false,\n\t\n}&gt;&gt;\n\n&lt;&lt;set $corruptedPc = []&gt;&gt;\n&lt;&lt;set $corruptedBabaYaga = []&gt;&gt;\n\n&lt;&lt;set $pc = \n{\n\treadNote:0,\n\tmageSight:0,\n\tritual:&quot;&quot;,\n\tpath:&quot;Normal&quot;,\n\tmagicLevel:0,\n\tpower:0,\n\tisKickedOut:false,\n\tbeenArrested:0,\n\t\n\tname:&quot;Anonymous&quot;,\n\tcockLength:6,\n\t\n\t\n\t\n\t\n\tclothingTopOwned:[],\n\tclothingBottomOwned:[],\n\tclothingWristsOwned:[],\n\tclothingAnklesOwned:[],\n\tclothingShoesOwned:[],\n\n\t\n}&gt;&gt;\n\n&lt;&lt;if $debugging&gt;&gt;\n\t&lt;&lt;set $money = 2000&gt;&gt;\n\t&lt;&lt;set $pc.power = 100&gt;&gt;\n\t&lt;&lt;set $flags.visitedDungeon = true&gt;&gt;\n\t&lt;&lt;set $pc.path = &quot;Virility&quot;&gt;&gt;\n\t&lt;&lt;set $pc.mageSight = true&gt;&gt;\n&lt;&lt;else&gt;&gt;\n\t&lt;&lt;set $money = 0&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n &lt;&lt;set $slaves = []&gt;&gt; \n\n\n\n&lt;&lt;set $csi = 0&gt;&gt;  /* current slave index */\n&lt;&lt;set $cci = 0&gt;&gt;  /* current character index */\n&lt;&lt;set $o = {}&gt;&gt; /* for changes in stats */\n\n\n\n\n\n&lt;&lt;set $numeralsWithA = [&quot;no&quot;, &quot;a&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;, &quot;six&quot;]&gt;&gt;\n\n&lt;&lt;set $clothingTop = [&quot;black blouse, low-cut and reavealing some cleavage&quot;, &quot;silk flowing, revealing but tasteful, expensive blouse&quot;, &quot;tight t-shirt with a Venn diagram of sexual preferences&quot;, &quot;cute anime character t-shirt&quot;]&gt;&gt;\n\n&lt;&lt;set $clothingBottom = [&quot;short, black and gray plaid skirt fastened with a heavy leather belt dotted with metal studs and with a chain running between the hips&quot;, &quot;just longer than slutty navy skirt slit up the side to show a just shorter than scandalous amount of thigh&quot;, &quot;tight form-fitting jeans&quot;, &quot;plaid skirt&quot;]&gt;&gt;\n\n&lt;&lt;set $clothingWrists = [&quot;black leather cuffs set with studs and a heavy metal ring&quot;, &quot;a diamond and gold bracelet&quot;]&gt;&gt;\n\n&lt;&lt;set $clothingAnkles = [&quot;black leather cuffs set with studs and a heavy metal ring&quot;]&gt;&gt;\n\n&lt;&lt;set $clothingCollar = [&quot;magical leather collar given to you by your uncle with a heavy buckle and solid metal ring in front&quot;]&gt;&gt;\n\n&lt;&lt;set $clothingShoes = [&quot;black combat boots&quot;, &quot;expensive-looking heels&quot;, &quot;tennis shoes&quot;]&gt;&gt;\n\n&lt;&lt;set $dreams = [\n\t&quot;You dream about a willowy goth girl, naked, crawling in front of you at your orders.  You order her to paint her fingernails.  Black, of course.&quot;,\n\t&quot;You have a dream of a goth girl painting her fingernails black and smoking.&quot;,\n\t&quot;Just before you wake up you have a fleeting vision of a black-haired young woman blowing smoke in your face.&quot;,\n]&gt;&gt;\n\n&lt;&lt;set $positions = [&quot;standing&quot;, &quot;kneeling, with her knees spread wide and tits thrust out&quot;, &quot;on all fours, her knees spread wide&quot;, &quot;face down and ass up, with her face and tits pressed to the floor and her knees spread wide&quot;, &quot;bent over your knees&quot;, &quot;standing with her legs spread wide and her hands behind her kneck thrusing out her tits&quot;, &quot;bent over with her hands flat on the floor and her feet far apart, her cunt and asshole available and at a convenient height&quot;]&gt;&gt;\n\n&lt;&lt;set $rulesNoMasturbateText = [&quot;allowed to masturbate&quot;,&quot;not allowed to masturbate&quot;]&gt;&gt;\n&lt;&lt;set $rulesNoOrgasmText = [&quot;allow to orgasm&quot;,&quot;not allowed to orgasm at all&quot;,&quot;allowed to orgasm only with permission&quot;]&gt;&gt;\n&lt;&lt;set $rulesSwallowCumText = [&quot;only if you cum in her mouth&quot;,&quot;always swallow your cum&quot;]&gt;&gt;\n\n&lt;&lt;set $keypadQuestions = [&quot;Is Eva's navel pierced?&quot;, &quot;What's Bree's bra size?&quot;, &quot;Bree: Do the carpets match the drapes?&quot;, &quot;How many guys has Tara slept with to date?&quot;, &quot;What's Su's favorite porn?&quot;, &quot;Who is Morgan's crush?&quot;, &quot;What does Angie give up for weed?&quot;, &quot;What kind of pills are Bree taking?&quot;]&gt;&gt;\n\n&lt;&lt;set $keypadAnswers = [&quot;yes&quot;, &quot;36dd&quot;, &quot;yes&quot;, &quot;19&quot;, &quot;tentacle&quot;, &quot;bree&quot;, &quot;anal&quot;, &quot;diet&quot;]&gt;&gt;\n\n&lt;&lt;set $keypad = []&gt;&gt;</div><div tiddler="Baba Yaga Corrupted Hot &quot;Dogs&quot;" tags="mall vendor">Oh wow.  This place has changed.  As you walk up to it, it looks just like it did but... shimmery?  Like there's an air bubble or something covering the entrance.  People seem to be walking into it and walking up to the counter normally, getting their hot dogs, and sitting at one of the small tables to eat then leaving a few minutes later.\n\tWhen you walk through the entrancce, though, everything changes.  The murals on the walls, which previously were phallic looking hot dogs entering buns, are now three dimensional actual phalluses extending from the walls and waving around.  Secured in the middle of the room by four of the cock tentacles wrapped around each limb and one wrapped around her hair is the cute red-headed teenager who used to work here.  Well, you suppose she still is.  She's held suspended by cocks face down and waist high, bent double so all of her holes are available and completely nude other than her geeky oversize glasses.  The male customers (you notice they're all male, now that you're paying attention) walk into the store and instantly change, their faces becoming monstrous with lust and their cocks bursting from their pants.  Unless there's a porn star convention at the mall, they've been... enhanced, too.  There's not a cock under 8&quot; and some are much larger.  They deposit money on a post at the front of store and get in line.\n\tAs you watch, one of the customers finishes in the redhead's mouth, cum dripping out of her onto the floor beneath where a growing white puddle is collecting under her.  One of those yellow triangular &quot;slippery when wet&quot; signs and a mop bucket are beside it.  As the customer walks away and leaves the store, suddenly returned to normalicy, one of the tentacle cocks thrusts abruptly into the redhead's mouth.  You can see it making it into her throat and it fucks her throat hard.  Another customer walks up and the cock pulls out, allowing him to take his place fucking her mouth.  Meanwhile the customer fucking her ass finishes, adding to the pool of cum as it drips out of her hole.  He steps away and a tentacle jams into her ass, bringing a loud &quot;Mrrff!&quot; from the poor slave, and starts fucking her asshole in counterpart to the one in her cunt.  Again as the next customer steps up, the tentacles withdraw from her lower two holes and allow him to take his pick; it's her cunt, this time, and you think she might be getting a break for her poor asshole, but as soon as the customer is fucking her cunt a tentacle again plunges into her ass, again bringing a gagged protest from the poor thing.\n\tYou notice power being drawn away from each of the customers as they come, and from the slave's helpless orgasms as well.  Wow, she must be stuck in here being fucked in all three holes constantly.  Oh well, at least the mall's only open from 10am to 9pm; that's not even twelve hours!  You do wonder who has to use the mop.\n\t&lt;&lt;if $pc.magicLevel === 2&gt;&gt;You stand watching, studying the magic in use.  You see how weird... swirls of energy attach to the customers and to each of the redhead's holes, kind of like the way water drains in a sink but upside down.  The sheet of energy over the door seems to draw on that power, and cloak and change.  Interesting.  You know what?  You think you could do this, by calling on your patron and mimicing the enerygy patterns.  Of course, you'd need to devote a slave to the place during the day, but they'd bring in a lot of money and power.  Something to think about.&lt;br&gt;&lt;&lt;set $pc.magicLevel = 3&gt;&gt;&lt;&lt;/if&gt;&gt;\n\n\t[[South Food Court]]</div><div tiddler="Baba Yaga Corrupted Milkshakes to the Yard" tags="mall vendor">Oh man, this place has been corrupted too.  Walking through the soap-bubble-like field, you're confronted with the same perky young blonde that always worked here, also rapidly serving... she is missing the t-shirt and shorts though.  Instead she's seated, naked, on some kind of saddle in a octagonal case.  Customers crowd around it, the ones on the outside jerking off while the inside ones shove their cocks into holes at waist height in each of the faces of the octogon.  Each time one seems about to blow, the saddle swings around and the blonde girl's mouth is brought into line with his cock.  Her terrified eyes gaze up as she fastens her lips on the cock and vigorously blows.  She barely has time to swallow the cum before another of the eight customers is ready to finish in her mouth.  \n\tHer hands are bound tightly behind her back and as you watch you notice the saddle has... huge magical dildos?  Something anyway that suddenly push into her ass as soon as cum hits her tongue, first into her pussy, then her ass as soon as the one in her pussy pulls out for another thrust.  They fuck her until she's swallowed, then withdraw.  Given as many guys are here, she's being fucked pretty much constantly.  As a crowning touch there's a tongue on the saddle crackling with energy licking her clit every time she seems to lag- it's electrified! And it's the exact same art-deco tongue that's on the company logo!  Crazy.  The apparatus works pretty well though... every time she's penetrated by one in her cunt, she gargles out a cry of shock and outrage, and when the one enters her ass it's pain and horror.  When the tongue touches her she screams, and she swallows and suck desperately to avoid it's touch.\n\tMan, your opponent is pretty damn twisted.  At least she sure won't need a lunch break.\n\n\t[[East Food Court]]</div><div tiddler="PC Virility Corrupted Milkshakes to the Yard" tags="mall vendor">You've claimed this place in the service of the @@.virility;Mother of Virility.@@\n\tWalking through the soap-bubble-like field, you're confronted with the same perky young blonde that always worked here, also rapidly serving... she is missing the t-shirt and shorts though.  Instead she's seated, naked, on some kind of saddle in a octagonal case.  Customers crowd around it, the ones on the outside jerking off while the inside ones shove their cocks into holes at waist height in each of the faces of the octogon.  Each time one seems about to blow, the saddle swings around and the blonde girl's mouth is brought into line with his cock.  Her dazed eyes gaze up as she fastens her lips on the cock and vigorously blows.  She barely has time to swallow the cum before another of the eight customers is ready to finish in her mouth.  \n\tHer hands are constantly at her nipples, tugging and pulling, and as you watch you notice the saddle has... flexible cocks?  Animated dildos?  Something anyway that suddenly push into her ass as soon as cum hits her tongue, first into her pussy, then her ass as soon as the one in her pussy pulls out for another thrust.  They fuck her until she's swallowed, then withdraw.  Given as many guys are here, she's being fucked pretty much constantly.  As a crowning touch there's a tongue on the saddle constantly working her clit... and it's the exact same art-deco tongue that's on the company logo!  Crazy.  The apparatus works pretty well though... every time she's penetrated by the things, you can hear her garggling out moans in orgasm through the cum constantly going down her throat.\n\tAt least she looks happy.  And she sure won't need a lunch break.\n\tShe's providing a flow of power and money to you with every orgasm, hers and her customers'.\n\n\t[[East Food Court]]</div><div tiddler="Working At Corrupted Milkshakes to the Yard" tags="nobr">&lt;&lt;set _customers = random(40) + 40&gt;&gt;\n\t&lt;&lt;set _orgasms = Math.floor(_customers / (10 - $slaves[$csi].cum - $slaves[$csi].oral / 2 - $slaves[$csi].submission))&gt;&gt;\n\t&lt;&lt;set _power = (customers + _orgasms * 2) / 4&gt;&gt;\n\t&lt;&lt;=$slaves[$csi].name&gt;&gt; spent the day working at Milkshakes to the Yard.  She's seated on a saddle in an octagonal case, swallowing cum from all the customers; every time a customer comes in her mouth, reciprocating dildos fuck her pussy and ass.  During the day she swallows _customers loads of cum from the customers gathered around the case and orgasms _orgasms times.  Part of the power generated goes to powering the magic corrupting the vendor, but you still generate _power over the course of the day.</div><div tiddler="Baba Yaga Corrupted Terrible &quot;Greek&quot;" tags="mall vendor">This place has been corrupted too.  When you walk in you see that the pretty olive-skinned girl is still here.  She's fastened down onto a pedestal in the center of the space, her forearms, wrists, knees, and ankles in leather shackles.  A padded bar presses down on her back, forcing her ass out.  She's wearing a metal belt with a metal strip running from the belt at the small of her back, through her legs, and back to the belt at her belly, compeltely blocking access to her pussy.  Her ass isn't so lucky; there's a large metal hoop giving access to that.  A strap passes around her neck, too, pushing it down onto what has to be a dildo or magic cock or something.  This place was never as popular as a lot of the other food court vendors, so the flow of customers isn't high, but one enters and undergoes a transformation, losing his clothes and becoming a huge, hulking caracature of a man, covered with hair and muscles.  His brain seem to revert to cave man as well, but his cock becomes huge, one over a foot long and obscenely thick.  As soon as he spots the girl he charges at her while she whimpers with terror.  He grabs her hips and thrusts, at first futilly, against the belt, but then finds the metal ring and the asshole behind it and thrusts in to the muffled shrieks of the poor penetrated girl.  He pounds her mercilessly, grabbing her hips and the belt to give him leverage to thrust his huge cock deep into her ass.  For long minutes her ass is ravaged until he thrusts a few more times in, plants his cock deep in her, and roars, filling her ass with cum.  Done, he just walks away, leaving her ass dripping cum and gaping wide open while she whimpers into the cock.\n\tAs he exits, the same miraculous transformation occurs in reverse, turning him back into an ordinary mall customer.  Inside, the girl undergoes a somewhat more sinister transformation as the belt glows with magical energy... the ring over her anus gradually constricts, and as it does, her gaping anus does too, until the ring turns into a small dime-sized disk then slowly returns to normal size.  Her asshole doesn't though:  it's now near-virginally tight.  The belt pulses a final time and something slick, olive oil maybe?, is sprayed onto her rejuvinated hole as another customer approaches the entry and she starts to whimper again.\n\tMan, this is pretty fucked up.  I mean, it seemed like the girl really liked her meat, but you don't think she liked it this way.\n\n\t[[East Food Court]]</div><div tiddler="PC Virility Corrupted Terrible &quot;Greek&quot;" tags="mall vendor">You've claimed this place in the service of the @@.virility;Mother of Virility.@@\n\tThe slave that works here waits in the center of a plush pit lined with pillows and small padded pedestals on her hands and knees.  She's fingering herself and her upraised ass shows a dripping pussy and a plugged ass.  As you watch a trio of new customers walk up to the entry and the girl whimpers in anticipation.  Your transformation takes them as they pass the threshold.  Their clothes slough off and they gain mass and height, becoming Adonis-like figures of male perfection with ropes of muscle across their thighs, back, and abdomens.  Their faces light up as they see the naked creature in the center of the pit and as one their cocks rise.  They're all absolutely huge, extending more than a foot in front of them.  They walk confidently up to the slave and each takes a place: the first to arrive grabs her hair and thrusts his cock into her waiting mouth, immediately pushing his cock into her throat, while the other two each take a hip.  One spanks her while the other fingers her dripping cunt.  They take turns teasing, fingering, and spanking her, punishing her when she fails to serve their compatriot to their satisfaction, playing with her pussy when they find it amusing, and tugging and pulling on the plug, bringing moaning and lustful sounds out of their little piece of fuck-meat.  Soon they switch, another taking her mouth while the displaced man plays with and teases and tortures her tits; before long the last man, still behind her hips, tires of spanking and teasing and slowly removes the plug.  It pops out with a surprised and pleasant whimpering from the girl and he thrusts his cock into her ass, vigorously sodomizing her.\n\tThe proceed to ravish her, tossing her in every position, fucking her mouth, cunt, and ass, sometimes all three simultaneously while she works to fulfil all the demands they make of her.  She licks balls, nipples, sucks cocks; they drag her onto one of them to give her a rough double penetration, pistoning into her cunt and ass.  The only constant is that her asshole is continually fucked, each of them taking turns taking her ass hard.  Finally they're ready to finish and order her face down ass up.  One after another they fuck her ass until they're ready, then pull her up and come on her ass, tits, or face.  They stand in a circle around her and she thanks them for the cum; they order her to lick the cum up, off the floor, from their cocks, use her fingers to scoop it off her skin into her mouth.  Satisfied, they stride out and revert to normal shlubs while she collapses in exhaustion.  The room starts to glow, then the girl, and she visibly re-energizes, her skin glowing and clean and her eyes lustful.  She checks out her well-worked asshole to find it again tight and pristine.  Grinning, she grabs the plug and slowly plugs herself, playing with her pussy.  She crawls to the center of the room and stops, on all fours, playing with herself, plug in her ass, and turns to the entrance.  \n\tA group of tourists start walking to the entrance; there must be a half-dozen of them.  She moans and her pussy starts to drip.  \n\tYep, this place is sure to generate plenty of energy, and the guys seem to be generous tippers too.  That's the advantage of good service!\n\n\t[[East Food Court]]</div><div tiddler="Baba Yaga Corrupted America's CLEANEST Fish Tacos!" tags="mall vendor">Oh man... as if the regular version of this place wasn't weird enough, it's been corrupted into something from a surrealist porno.  \n\tThe counter remains, the model of a luxury hotel front desk, but the floor is transformed.  It's now a plush padded pink mat.  The girl who worked here is now dressed in a latex parody of a French maid's outfit: tight latex covers her shoulders, back, and belly, constrained by a viciously tight rubber corset.  Her breasts are cruelly thrust together and up by the rubber but bare.  The latex skirt is slit in the front to above her pussy and in back to above her butt crack, leaving pussy and ass compeletely exposed, but the remainder of the skirt goes to just above the knee and rejoining there, keeping her hobbled.  She's not walking, anyway.  She's on her hands and elbows, holding soft, buzzing, toothbrush things in each hand.  Her knees have kneepads on them.  \n\tThe line of customers, all women, split into two groups coming in.  Most walk in and transform into lush, beautiful, naked women and promptly take a spot in front of the transformed girl.  They lie face up, legs spread, or hands and knees in front of her in a line, sinking into the weird floor until they're level with it, only faces, tits, and spread legs and asses visible at the surface of the floor.\n\tThe second set of customers become thin, beautiful, harsh, even cruel.  Their clothing transforms into strict leather harnesses and buckles, and each sports a huge strap-on, bigger than any human male.  Each of them is equipped with some kind of instrument of punishment.  You see cat-o'-nine-tails, floggers, riding crops, cruel whips.  Even a cattle prod.  The each take up position around the maid slave girl.\n\tAs you watch, you see the &quot;cleaning&quot; this maid is charged with... she's frantically searching out pussies, nipples, and assholes on the floor in front of her, licking and sucking and using her tongue at a frenzied pace, seeking to make the floor-women orgasm, while each of her hands applies the strange &quot;toothbrushes&quot; to &quot;clean&quot; two other nearby clits, cunts, holes, or nipples, moving from one to the other and applying her tongue when that bit of &quot;floor&quot; starts to come, then moving forward to service the next set of floor-women.  As she does, you see the knee pads have dildos protruding from them! She moves forward and sinks each of her knee-cocks into two of the holes of the floor-women and twitches and squirms to fuck the holes while she works with her hands and tongues on the ones ahead of her.\n\tHer frenzy is readilly explained.  The dominatrix women are using their torture implements on the poor girl, beating her back, exposed cunt, and squeezed tits.  She's slapped, flogged, shocked, and whipped constantly while the &quot;supervisors&quot; berate her, ordering her in every detail.  She just can't seem to keep up with their demands and is constantly punished.  Meanwhile one of the women is brutally sodomizing her with the a strapon, pounding her asshole while her compatriots punish her.\n\tYou can see the lines of energy pulling energy out, but not of the floor-women orgasming; all the enery is coming from the humiliation, suffering, and pain of the maid girl.  Dark, man.\n\n\t[[North Food Court]]</div><div tiddler="PC Virility Corrupted America's CLEANEST Fish Tacos" tags="mall vendor">You've claimed this place in the service of the @@.virility;Mother of Virility.@@\n\tThis place is warped into a cross between a seedy hooker hotel and a luxury hotel.  The light a a sultry red, the floor a plush padded mat, although the counter remains the epitome of a classy hotel's front desk.  The walls are decorated with cheap prints of lurid Renaissance-esque orgy scenes of voluptuous women servicing each other.  Your slave is here, dressed in French maid lingerie, with the skirt hiked up to show her ass and pussy and her tits protruding from the top.  She's on her hands and knees.\n\tThe line of customers splits in two, with some of the customers walking onto the floor ahead of the slave and lying down, spreading their legs and sinking into the floor until only cocks, pussies, and tits are visible.  The second group's clothing transforms into leather bondage straps, the women sporting huge strapons.  \n\tYour slave is eating a pussy of one of the women sunk into the floor, licking her clit and sticking her tongue into her, while her hands frantically jerk off two cocks sticking up from a couple floor-men.  Behind her, the leather-clad patrons spank, tease, slap and cajole her to greater effort.  One is always entering her from behind, adding a stacatto rhythm of cunt- or buttfucking to her efforts eating all that pussy.  As soon as one of the floor-men start to come, she moves her mouth over his cock and takes his cum, then goes back to the pussy, eating it and letting the cum mingle with pussy juice.  Every time a floor person finished, they rise, pay, and leave and one of the waiting customer lies down to sink into the ground.\n\tThe leather-strapped clients endlessly call her names, shove her from one pussy or cock or another, and always make her beg to come before one of her frequent orgasms.  They never fail to note she comes most often from a strap-on or cock up her ass.  You draw energy from her humiliation, servitude, and of course all those orgasms.\n\tNow, *this* is how you build a brand.  Suck it, business majors!\n\n\t[[North Food Court]]</div><div tiddler="End of the Road" tags="TimeSlow">This is the seedy end of town.  There's a gas station with a couple hobos lounging outside, a tattoo parlor, and an adult &quot;book and movie&quot; store.\n\n\t[[Zeke's Fuel and Snacks]]\n\t[[No Ragerts Tattoos]]\n\t[[Zeke's Literate Retreat]]\n\n\n\t[[Go back towards your house|Outside House]]</div><div tiddler="Zeke's Fuel and Snacks">You walk into the parking lot of an extra-seedy looking gas station.  An old man with a dirty beard is lying against the wall covered in what look like torn army blankets, while a tall man dressed in dirty clothes leans against the dumpster wall.  You're not sure if the miasmic odors come from the dumpster or the tall man... maybe that's his strategy. \n\n\t&lt;&lt;if !$pc.mageSight &amp;&amp; ($day &gt; 1)&gt;&gt;\s\n\t[[&quot;Psst... kid!  Over here!&quot;|Talk to Derek]]\n\t&lt;&lt;/if&gt;&gt;\s\n\t[[Enter the store|Inside Gas Station]]\n\t[[Return to the road|End of the Road]]</div><div tiddler="No Ragerts Tattoos">This is a pretty dirty looking tattoo parlor... it's currently closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Zeke's Literate Retreat">Despite the name, this looks like it's an adult bookstore and theater.  Rows of DVDs showing busty porn stars taking cocks and eating pussy fill the left side of the store.  The walls are covered with racks of sex toys of every description.  The right side of the store is a little niche with a bookshelf.\n\n\t&lt;&lt;set $itemsForSale = [&quot;Set of Dildos&quot;, &quot;Set of Anal Toys&quot;, &quot;Riding Crop&quot;, &quot;Wand Vibrator&quot;, &quot;Nipple Clamps&quot;, &quot;Saddle Mounted Floor Vibrator&quot;, &quot;Fifty Shades of Darkness Book&quot;, &quot;Bondage 101 Book&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [29, 39, 14, 89, 14, 1399, 129, 24]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Inside Gas Station">This is a dingy place, with rows of old groceries and potato chips in the middle and cases of beer and soda along the walls.  A counter at the front has the register and shelves of cigarettes.  A &quot;Help Wanted&quot; sign is on the wall behind the counter.\n\n\t&lt;&lt;set $itemsForSale = [&quot;Cigarettes&quot;, &quot;Glass Pipe&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [7, 25]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;\n\n\t[[Return to the road|End of the Road]]\n\t&lt;&lt;if !$flags.hiredGasStation&gt;&gt;[[Ask about a job|Gas Station Job]]&lt;&lt;elseif $hour &lt; 20&gt;&gt;[[Work at the gas station]]&lt;&lt;/if&gt;&gt;</div><div tiddler="Gas Station Job" tags="TimeNone">&quot;Hey, are you still hiring?&quot; The guy behind the counter is pretty old, as old as your grandfather probably.\n\t&quot;Well, it ain't a real serious job.  Just need some help doin' inventory and stocking and such.&quot; His voice is a harsh gravelly drone.\n\t&quot;That sounds fine for me.&quot;\n\t&quot;Can ya count?&quot;\n\t&quot;Sure.  Got all my algebra, I've always been good at math.  How much does it pay?&quot;\n\t&quot;Ten dollars an hour.  Just stop by during the day if you want to work.&quot;\n\t&quot;Great, thanks!&quot;\n\tFrom now on, you can come to the gas station during the day to work until the store closes at nine. &lt;&lt;set $flags.hiredGasStation = true&gt;&gt;\n\n\t[[Back to the store|Inside Gas Station]]\n\t&lt;&lt;if $hour &lt; 20&gt;&gt;[[Work at the gas station]]&lt;&lt;/if&gt;&gt;</div><div tiddler="Work at the gas station" tags="nobr TimeNone">&lt;&lt;set _hours = 21 - $hour + (60 - $minute) / 60&gt;&gt;\n\t&lt;&lt;set _pay = (Math.floor(_hours * 100) / 100) * 10&gt;&gt;\n\tYou work for a little over &lt;&lt;=Math.floor(_hours)&gt;&gt; hours and earn $&lt;&lt;=Math.floor(_pay)&gt;&gt;.\n\t&lt;&lt;set $money += Math.floor(_pay)&gt;&gt;\n\t&lt;&lt;set $hour = 21&gt;&gt;\n\t&lt;&lt;set $minute = 0&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\t[[Leave the store|End of the Road]]</div><div tiddler="Your Room">You're in the basement bedroom of your parent's house. The walls have been finished and there's a carpet.  It's not so bad, really.  The only way to tell it's a basement is the windows are high up on the walls.\n\n\tThere are a few posters of sci-fi shows and half naked women on the walls.  Your rumpled bed lies in the corner, a dresser against the wall, and dirty clothes are strewn across the floor.\n\n\tA narrow door leads to your bathroom and a hallway leads to the game room.\n\n\t[[Game Room]]\n\t&lt;&lt;if $hour &gt; 14&gt;&gt;\s\n\t[[Go to sleep|Your Room][$hour=25]]\n\t&lt;&lt;/if&gt;&gt;\s\n\t&lt;&lt;if $debugging&gt;&gt;\s\n\t&lt;&lt;click &quot;Enslave Bree&quot;&gt;&gt;&lt;&lt;enslave &quot;Bree&quot;&gt;&gt;&lt;&lt;/click&gt;&gt;\s\n\t&lt;&lt;click &quot;Go to Major fight&quot;&gt;&gt;\s\n\t\t&lt;&lt;set $flags.knowsAboutSecretEntrance = true&gt;&gt;\s\n\t\t&lt;&lt;goto &quot;Smoking Area&quot;&gt;&gt;\s\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;&lt;click &quot;Add corrupted store&quot;&gt;&gt;&lt;&lt;run $corruptedBabaYaga.push('Hot &quot;Dogs&quot;')&gt;&gt;&lt;&lt;/click&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;</div><div tiddler="Game Room" tags="TimeNone">&lt;&lt;if $slaves.length &gt; 0 &amp;&amp; $flags.visitedDungeon&gt;&gt;\s\n\t\t&lt;&lt;goto &quot;Dungeon&quot;&gt;&gt;\s\n\t&lt;&lt;elseif $slaves.length &gt; 0&gt;&gt;\s\n\t\t&lt;&lt;set $flags.visitedDungeon = true&gt;&gt;\s\n\t\t&lt;&lt;goto &quot;Dungeon Introduction&quot;&gt;&gt;\s\n\t&lt;&lt;else&gt;&gt;\s\n\tYou're in the game room of your parent's house.  It's a large room, makeing up most of the basement.  It used to be a basement workshop and still mostly looks like it.  A row of tables sits against the long wall, and hooks, pulleys, and nails to hold tools are placed seemingly at random on every wall.  \n\n\tA pool table is in one half of the room while a foosball table and card table are at the other end.  A bookshelf against one wall holds several board games, poker chips, and choose-your-own-adventure books. \n\n\tA door leads to your room, while a short hallway leads to a staircase to the main house.  A door leads outside.\n\t&lt;&lt;/if&gt;&gt;\n\t[[Your Room]] \n\t[[Head upstairs|Kitchen]] \n\t[[Go outside|Outside House]]</div><div tiddler="Kitchen" tags="hidden">You're in a small kitchen with a dining area adjacent.  Cupboards and cabinets line the room, a small pantry is next to the back door of the house.  The dining area has a table with four chairs.\n\n\t&lt;&lt;if !$pc.readNote&gt;&gt;\s\n\tA small chest, about two feet by one foot by one foot, is on the table.  It's made of a light wood and bound by what looks like tarnished steel.  It's dinged up but sturdy.  It's open and contains a note, a piece of leather with a buckle, and a gold chain with what looks like a coin on it.\n\n\tA half empty bottle of whisky is on the table next to an envelope of cash your parents left you.\n\n\t[[Read the note|The Note]]\n\t&lt;&lt;else&gt;&gt;\s\n\tAn empty small chest is on the table.\n\n\t&lt;&lt;/if&gt;&gt;\s\n\t[[Go outside|Outside House]]\n\t[[Head downstairs|Game Room]]\n\t[[Go to the living room|Living Room]]</div><div tiddler="Dungeon" tags="TimeNone nobr">Since the game room is so well suited for the purpose, this is where you'll train your slaves.  Here are the slaves you've collected:\n\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;if $debugging&gt;&gt;Number of slaves: &lt;&lt;=$slaves.length&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;for $i = 0; $i &lt; $slaves.length; $i++&gt;&gt;\n\t\t&lt;&lt;if $debugging&gt;&gt;&lt;&lt;=$i&gt;&gt;&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;= '\n\t\t[[$slaves[' + $i + '].name|Describe Character][$currentCharacter = $slaves[' + $i + ']]]\n\t\t\n\t\t'&gt;&gt;\n\t\t\n\t\tis &lt;&lt;=$positions[$slaves[$i].position]&gt;&gt; here. \n\t\t\n\t\t&lt;&lt;= '\n\t\t&lt;&lt;click &quot;Train ' + $slaves[$i].name + '&quot;&gt;&gt;\n\t\t\t&lt;&lt;run Game.setCsi(&quot;' + $slaves[$i].name + '&quot;)&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Train Character&quot;&gt;&gt;\n\t\t&lt;&lt;/click&gt;&gt;\n\t\t'&gt;&gt;\n\n\t\t&lt;br&gt;\n\t&lt;&lt;/for&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\tCurrently, your dungeon has no customizations.\n\t&lt;br&gt;&lt;br&gt;\n\t[[Your Room]] &lt;br&gt;\n\t[[Head upstairs|Kitchen]] &lt;br&gt;\n\t[[Go outside|Outside House]] &lt;br&gt;</div><div tiddler="The Note">You pick up the note and read it.  It's from your uncle Bob (&quot;The Great Majesto!&quot;).\n\n\t&lt;blockquote&gt;Dear Nephew, I hope this package finds you well.  I've always considered you my closest relation, and as I have no children of my own, I've decided you should be my beneficiary.  Don't worry, I'm alive and well, but I'm headed on a journey and don't know when or if I'll be back.  In any case, I'll have no use of these items and I feel you might have the gift to use them.  Keep the coin on you and it'll help guide you.  Whatever you do, don't put on the collar!  Reserve that for people you choose to assist you.  Be aware that once removed anyone you've put it on will be free again, so spend some time making sure they remain loyal.  As a teenage boy, I suppose you don't need much guidance there, and in any case I'm almost out of time.  Perhaps I'll see you again, your loving uncle, Bob.&lt;/blockquote&gt;\n\t\s\n\t&lt;span id=&quot;update&quot;&gt;&lt;/span&gt;\n\t&lt;&lt;nobr&gt;&gt;\n\t&lt;span id=&quot;link&quot;&gt;&lt;&lt;click &quot;Whatever.  Grab the coin and collar.&quot;&gt;&gt;&lt;/span&gt;\n\t\t&lt;&lt;set $pc.readNote = 1&gt;&gt;\n\t\t&lt;&lt;run Game.inventoryAdd(&quot;Magical Coin&quot;)&gt;&gt;\n\t\t&lt;&lt;run Game.inventoryAdd(&quot;Leather Collar&quot;)&gt;&gt;\n\t\t&lt;&lt;run Game.inventoryAdd(&quot;Half a Bottle of Whisky&quot;)&gt;&gt;\n\t\t&lt;&lt;set $money += 120&gt;&gt;\n\t\t&lt;&lt;replace &quot;#update&quot;&gt;&gt;&lt;&lt;=&quot;You grab the collar, put the coin around your neck, and scoop up the money your parents left you.  What the hell, you tuck the remaining whisky in a pocket.&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;\n\t\t &lt;&lt;replace &quot;#link&quot;&gt;&gt;&lt;br&gt;&lt;br&gt;[[The Kitchen|Kitchen]]&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n\n\t&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Outside House" tags="TimeSlow">&lt;&lt;if $pc.readNote == 0&gt;&gt;\s\n\tYou feel like there's something you should look into before leaving... whisky?  Blugh... no, not whisky. Still, something.\n\n\t&lt;&lt;return &quot;Oh Yeah!&quot;&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\s\n\tThis is the road in front of your house.  You're not too far from the mall.  Just head west.  If you go East, there's a few sketchy shops.\n\n\t[[Mall Entrance]]\n\t[[End of the Road]]\n\n\tOr, enter your house.\n\t[[Front door|Living Room]]\n\t[[Back door, baby!|Game Room]]\n\t&lt;&lt;/if&gt;&gt;</div><div tiddler="Living Room" tags="hidden nobr">&lt;&lt;if $pc.magicLevel &lt; 1&gt;&gt;\n\t\t&lt;&lt;display &quot;Normal Living Room&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set $livingroom = $pc.path + &quot; Living Room&quot;&gt;&gt;\n\t\t&lt;&lt;display $livingroom&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t/*  TODO:  items for rituals and fill out the rituals.  This is just a placeholder */\n\t&lt;&lt;if $pc.ritual == &quot;Darkness&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.magicLevel = 1&gt;&gt;\n\t\t&lt;&lt;set $pc.ritual = &quot;&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.path = &quot;Darkness&quot;&gt;&gt;\n\t\tYou summon up a slut, stick a couple fingers in her ass, and draw out some patterns. \n\t&lt;&lt;elseif $pc.ritual == &quot;Soul&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.magicLevel = 1&gt;&gt;\n\t\t&lt;&lt;set $pc.ritual = &quot;&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.path = &quot;Soul&quot;&gt;&gt;\n\t\tYou light the proper candles, draw the diagrams on the floor, and chant the correct words.  \n\t&lt;&lt;elseif $pc.ritual == &quot;Virility&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.magicLevel = 1&gt;&gt;\n\t\t&lt;&lt;set $pc.path=&quot;Virility&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.ritual = &quot;&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.cockLength=9&gt;&gt;\n\t\t&lt;&lt;goto &quot;Virility Ritual&quot;&gt;&gt;\n\t&lt;&lt;elseif $pc.ritual == &quot;Change&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.magicLevel = 1&gt;&gt;\n\t\t&lt;&lt;set $pc.ritual = &quot;&quot;&gt;&gt;\n\t\t&lt;&lt;set $pc.path = &quot;Change&quot;&gt;&gt;\n\t\tYou light the proper candles, draw the diagrams on the floor, and chant the correct words.  Your cock grows, then grows some more... damn.  You were pretty average, but now, well, is 9&quot; average? \n\t&lt;&lt;/if&gt;&gt;\n\n\n\t\t\n\n\t&lt;br&gt;&lt;br&gt;\n\t[[Kitchen]]\n\t&lt;br&gt;\n\t[[Outside|Outside House]]</div><div tiddler="Dungeon Introduction" tags="TimeNone">You return to your game room.  Now that you have a slave of your very own, you need a place to keep and train her, and this place is perfect!  It's got unfinished walls with hooks and rings, likewise with the ceiling.  The tables and benches are good sized and sturdy.  And there's a ton of room.  \n\n\tCome to think of it, with some basic instructions and some raw materials you ought to make this place into a real dungeon.  Maybe it's time to do some more focused shopping.\n\n\tOf course you'll have to figure something else out when your parents return from Europe, but you've got some time. \n\n\t[[Time to try out this dungeon!|Game Room]]</div><div tiddler="Soul Living Room" tags="TimeNone nobr">Sensuous pictures cover the walls.  A soft tiger skin covers the floor, and the furniture is all ottomans and plush couches, some the height of a kneeling person and some a standing woman could bend over.  A warm, happy glow fills the room.  For some reason, you get hard just standing here.  Your patron is close, and she will have your back.  Hail She Who Pleases!</div><div tiddler="Virility Living Room" tags="nobr TimeNone">Rather than couches or end tables, the room is taken over with thrusting grabbing things.  Every surface is covered in cocks or tentacles, every seat has one, two, or three giant throbbing phalluses.  Your Lady thrums the need to fuck through you.  You get hard.</div><div tiddler="Change Living Room" tags="nobr TimeNone">The couches and end tables are still here... but they look... plush.  And does that couch have nipples?  Everything seems to have a feeling of... difference.  The couch cushions don't exactly separate, they... gape.  Your patron is at work here, you know it.  You feel ready to stretch, and expand.</div><div tiddler="Normal Living Room" tags="nobr TimeNone">There's a couch, a love seat, an old TV.  A throw rug.  Basically every living room ever.</div><div tiddler="Darkness Living Room" tags="nobr TimeNone">The furniture in this room is all heavilly-pierced and tattooed tits, cunts, assholes, and cocks ramming into each other.  You can't even understand how they fit together, it's some kind of demonic origami.  And they're real... real souls, here in your living room, waiting for someone to sit on them.  Weird, man.  Man, you really don't want to end up as a couch.</div><div tiddler="Virility Ritual">You take your ingredients: seven candles, ram's horn (well, the knife handle anyway... hopefully that'll work), and your own cock, still damp with a girls cum.  Wow, this is going to be awesome!\n\nChanting the syllables you learned, you draw the circle then trace it with your cock.  For some reason tracing the lines makes you hard, harder than you've ever been.  Cock still standing at attention, you strip naked, light the candles, toss the knife in the circle, and speak the Words.\n\nA glow builds in the center of the circle.  You can't tell the color... is passion a color?  But it's milky white too... cum?  How can a color fuck?  But that's what it looks like.  Fucking weird, man.\n\nA form takes shape.  When it resolves, it's painful to look at.  She(?) would be beautiful, if beautiful made any sense.  She is to beautiful as fire is to the color red.  Not the same thing at all.\n\nThe Mother of Virility stands in front of you.  Although even standing is an oversimplification.  She standing, and bent over, and face down exposing her holes.  Not just exposing... she's being fucked.  Fucked hard, pussy and mouth and ass.  And not just one of each.  It's hard to tell, but she has many.  It's like she's all the holes being fucked by everything, more than one per hole.  And everything is cumming.  She is, her holes are, the cocks are.  Over and over.\n\nThe she speaks, and her voice is the voice of a woman talking around cocks in her mouth, trembling from having her cunt(s) and ass(es) fucked, and yet strong and steady.\n\n&quot;Why have you summoned me?&quot;\n\n&lt;span id=&quot;virility-choice&quot;&gt;\s\n&lt;&lt;click &quot;I want to fuck you!&quot;&gt;&gt;&lt;&lt;goto &quot;Virility Bad End&quot;&gt;&gt;&lt;&lt;/click&gt;&gt;\n&lt;&lt;click &quot;I want to pledge myself to your service.&quot;&gt;&gt;\s\n&lt;&lt;replace &quot;#virility-choice&quot;&gt;&gt;\s\n&quot;You're sloppy, mortal, and messed up the summoning.  I'm free.&quot;\nShe steps out of the circle to you.  You're paralyzed and can't move.  You feel holes thrusting down your cock, as though pussy after pussy and asshole after asshole and mouth after mouth and even some holes you can't describe are sliding down your cock every second, and the same with each of your fingers and toes, and hands and feet, and arms and legs, and even nipples.  At the same time it's like you're being fucked... up your ass, your mouth, ears, everywhere.  \n\nOh.  Fuck.\n\n&quot;But the formalities have been forgotten these days.  Why, just the other day on twitter some bitch... #hashtaggetfuckedslut... but I forget myself.  I have a use for you.&quot;\nThe feeling of massive fucking recedes but doesn't disappear. \n&quot;An enemy that would siphon away the energy I gain from the teenage orgy you call a mall has arrived.  Defeat her and give her to me, and you may become my disciple.  Fail, and she can have you, or I'll turn you into somthing you can't imagine.  Deal?&quot;\n&quot;Do I have a choice?&quot;\n&quot;No.&quot;\n&quot;Well then.  To serve me, you must use the power of your life force... cum, and cocks, and pussies.  I hate virginity, every hole must be used.  The male and female orgasm, often-fucked holes, cunts stretched out by lots of fucking, and the adoration of cum by your slaves will earn rewards in the form of power.&quot;\n&quot;That... sounds pretty ok to me.&quot;\n&quot;Hah!&quot; she barks, and the fucking sensation comes back for a second, of fucking and being fucked, but it feels...  humorous.\nOh man.  Save you from the laughter of a god.\n&quot;I'm sure it does.  Use that power though.  You have a job, child.  Fuck and use the sluts for me, but defeat that chicken-legged-hut-living bitch, or you'll serve as my personal battery.  hashtag #seriousgoddesswillmakeyouafucktoy&quot;\n&quot;Yes... I mean, I hear and obey!&quot;\n&quot;Good pet.&quot;  \nAnnnnd.... she's gone.  No warning, nothing.  Just like a crappy special effect.  She's gone.  \nThen something disturbing happens.  An ache starts in your balls and cock.  The balls start to hurt... bad.  Fucking bad.  You fall to the floor.  You start to scream, then cum.  Wait, what?\nYou look down, and your cock and balls are... different.  Your cock is super hard, but it's bigger too.  Lots bigger.  Like, nine inches.  And your balls... WTF?  They're giant!  Softball sized!  The squirts of your cum are like legitimate ropes!  You moan and twitch, and cum keeps squirting.  Every squirt reduces the size of your balls a tiny bit, but it keeps happening.  Eventually your vision clears and you stop cumming, and you're relieved to see that your balls are... better.  Not normal, exactly.  They're big.  Really big.  But you can walk with them and put them in underwear.\nStanding up, you realize you're in a pool of cum.  Not a puddle.  A fucking pool.  There must be two gallons of cum here.  You wave your hand, try to do some kind of magic, but nothing.\nShit.\nYou sigh, walk into the kitchen and get the mop. \nNo one tells you about this side of the magic game.  Chocolate frogs?  Please.  You're mopping up the fucking Gulf of Cum.  And you just started.\n\n[[Well, at least I'm a magician now, right?|Living Room]]\n&lt;&lt;/replace&gt;&gt;\n&lt;&lt;/click&gt;&gt;\n&lt;/span&gt;</div><div tiddler="Soul Ritual">You</div><div tiddler="JC Penny's" tags="mall">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Spencer's Gifts" tags="mall">This is a &quot;funny&quot;, &quot;kinky&quot;, store for &quot;alternative&quot; youths.\n\n\t&lt;&lt;set $itemsForSale = [&quot;Black Lipstick&quot;, &quot;Topless Poster&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [12, 35]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Engraving Now!" tags="mall">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Radio Shat" tags="mall">Closed for construction?  Really?  WTF?\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Mall Entrance">This is the main entrance of the mall.  It makes an attempt a grandeur, and manages tacky.  A set of glass doors lead into the mall proper.  A dingy corner has a doorway to the service entrance behind the food court which is shielded by a stinking dumpster.\n\n\t&lt;&lt;if !$flags.shownBreeAndEva&gt;&gt;&lt;&lt;goto &quot;Bree and Eva&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\s\n\t[[The Mall!|East Wing]]\n\t[[Stinking dumpster?  What's not to like?|Smoking Area]]\n\t[[Back towards your house|Outside House]]</div><div tiddler="East Wing" tags="mall">You're in the east wing of the mall.  Random people wander about, usually in your way.  JC Penny's anchors this wing, and there's a Spencer's Gifts, Engraving Now!, and Radio Shat along with some other stupid stores.  A stairway leads up to the second level.  Boooooring.\n\n\tGo to a different area of the mall?\n\t[[East Food Court]]\n\t[[Upstairs East Wing]]\n\n\tVisit a store?\n\t[[JC Penny's]]\n\t[[Spencer's Gifts]]\n\t[[Engraving Now!]]\n\t[[Radio Shat]]\n\n\tLeave the mall?\n\t[[Mall Entrance]]</div><div tiddler="Smoking Area">Behind a stinking dumpster, the young people (and occasional decrepit old person) smoke in miserable circumstances.  A set of clear plastic strips hang from the top of a doorway into a narrow hallway behind the food court &quot;restaurants&quot;, and an old bowl overflowing with butts serves as an ashtray.  The reek from the dumpster permeates the area.  A few bits of desultary grafitti mar the walls, amongst them &quot;Eva's a poser&quot; and &quot;I did the bar whore.&quot;\n\n\t&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if Game.getCharIndex(&quot;Eva&quot;) != -1&gt;&gt;\n\t\t&lt;&lt;if 0 == 0&gt;&gt;\n\t\t\t&lt;&lt;describe &quot;Eva&quot; &quot;Eva&quot;&gt;&gt; is here.  She's smoking a cigarette behind the dumpster, and gazes at you cooly.  [[Talk to Eva]]\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/nobr&gt;&gt;\n\n\t[[Go to the main entrance|Mall Entrance]]\n\t[[Head down the service passage|Service Passageway]]\n\t&lt;&lt;if $flags.knowsAboutSecretEntrance&gt;&gt;[[Secret Passageway]]&lt;&lt;/if&gt;&gt;</div><div tiddler="Service Passageway" tags="mall hidden">This stinking corridor runs behind some of the food court merchants to the dumpster.  It lets out by some bathrooms into the food court.\n\n\t[[Smoking Area]] \n\t[[East Food Court]]</div><div tiddler="East Food Court" tags="mall hidden foodcourt">This is the east end of the food court, mostly inhabited by breeders.  Fucking oldies.\n\n\tGo elsewhere in the food court?\n\t[[North Food Court]]\n\t[[West Food Court]]\n\t[[South Food Court]]\n\n\tGo to a different area of the mall?\n\t[[East Wing]] \n\t[[Service Passageway]] \n\n\tVisit a food court vendor?\n\t[[Terrible &quot;Greek&quot;]]</div><div tiddler="North Food Court" tags="mall hidden foodcourt">This is the north end of the food court.  All stoners, hippies, and people too cool for you, dude.\n\n\tGo to a different part of the food court?\n\t[[East Food Court]] \n\t[[West Food Court]] \n\t[[South Food Court]] \n\n\tGo to a different area of the mall?\n\t[[North Wing]]\n\n\tVisit a food court vendor?\n\t[[Milkshakes to the Yard]]</div><div tiddler="West Food Court" tags="mall hidden foodcourt">This is the preppy side of the food court.  Popped collars, pastel colors, and yoga pants abound.  Mmmm... yoga pants.  You get a few dirty glares in response to your dirty gazes.\n\n\t&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if Game.getCharIndex(&quot;Bree&quot;) != -1&gt;&gt;\n\t\t&lt;&lt;if 0 == 0&gt;&gt;\n\t\t\t&lt;&lt;describe &quot;Bree&quot; &quot;Bree&quot;&gt;&gt; is here.  She's hanging out with her friends, her little followers tittering at her every comment.  Seriously, that chick... those tits... yum...  [[Talk to Bree]]\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\tHave a seat?\n\t[[Sit Near the Popular People]]\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/nobr&gt;&gt;\n\n\tGo to a different part of the food court?\n\t[[North Food Court]]\n\t[[East Food Court]]\n\t[[South Food Court]]\n\n\tGo to a different area of the mall?\n\t[[West Wing]]</div><div tiddler="South Food Court" tags="mall hidden foodcourt">The south section of the food court.  This is where the burnouts, losers, and druggies hang out.  Hell to the motherfucking yes!  Although they don't seem to recognize your coolness.  They will though, yes, they will.\n\n\t&lt;&lt;nobr&gt;&gt;\n\t&lt;&lt;if Game.getCharIndex(&quot;Tracy&quot;) != -1&gt;&gt;\n\t&lt;&lt;describe &quot;Tracy&quot; &quot;Tracy&quot;&gt;&gt; is here sitting at a table.  She seems to be watching people, especially couples, and making notes.  [[Talk to Tracy]]\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/nobr&gt;&gt;\n\n\tGo to a different part of the food court?\n\t[[East Food Court]]\n\t[[North Food Court]] \n\t[[West Food Court]] \n\n\tGo to another area of the mall?\n\t[[South Wing]]\n\n\tVisit a shop?\n\t[[Hot &quot;Dogs&quot;]]</div><div tiddler="Terrible &quot;Greek&quot;" tags="mall vendor">This is one of those Gyro places.  It's worse than most of them through.  The walls are covered in some sort of weird Medditeranean textures that you can only describe as &quot;puckered.&quot;  There's a very attractive young olive-skinned girl with green eyes slicing strips of something... lamb? off of a vertical rotating hunk of meat that starts out very narrow but then flares wide before gradually tapering to a rounded point at the top.  For some reason as she cuts strips off she maintains this odd shape.  She's wearing a sarong or something, very modest, but when she turns around you see the back is pretty sheer, giving you more than a hint of shapely, wide-hipped buttocks and a near-certainty that she's not wearing anything underneath it.\n\tWell, you know what they say about Greeks, right?\n\n\t[[East Food Court]]</div><div tiddler="Terrible &quot;Cinnamon&quot; Buns" tags="mall vendor">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Milkshakes to the Yard" tags="mall vendor">Walking in here you feel a chill.  Because it's cold, duh.  The walls are garishly decorated with art-deco tongues lovingly caressing ice cream cones, cream swirling down the tongues into gaping throats.  A perky blonde teenager is bustling around flirting with customers and simultaneously servicing no fewer than eight milkshake stand-up mixers.  She's cute, bubbly and full of smiles, large-breasted and despite the cold she's dressed in short-shorts that reveal the bottom curve of her ass when she turns to the mixers and a tight t-shirt that reads &quot;I swallow&quot; on the front and &quot;All the milkshakes&quot; on the back, adorned with the company logo: a tongue wrapped around a cone.  Jesus, marketers, have some class.\n\n\t[[East Food Court]]</div><div tiddler="Martha's &quot;Vegan&quot; Food" tags="mall vendor">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="&quot;Organic&quot; &quot;Treats&quot;" tags="mall vendor">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Ethical &quot;Food&quot;" tags="mall vendor">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="&quot;Cajun&quot; Cafe" tags="mall vendor">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="&quot;Orange&quot; Julio" tags="mall vendor">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Too Many Bucks &quot;Coffee&quot;" tags="mall vendor">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Hot &quot;Dogs&quot;" tags="mall vendor">This is a hot dog place that sells pretty bad hot dogs for the &quot;low&quot; price of $11, like every other &quot;cheap&quot; food option in the mall.  It's decorated oddly, with cartoonish pink phallic hot dogs the size of human bodies sliding into buns on every wall.  The poor employee, a cute little redhead with huge glasses containing face-distorting lenses and a lip ring, is wearing a fake hot dog costume and seems miserable.  You'd never eat here.\n\n\t[[South Food Court]]</div><div tiddler="America's CLEANEST Fish Tacos!" tags="mall vendor">Ok, this is seriously the strangest mall food you've ever seen.  Fish tacos, fine, but why adopt a luxury hotel theme?  And &quot;America's CLEANEST?&quot;  Why the fuck cleanest?  The floor is this weird polished pink marble with weird fold-like striations, polished to perfection, while the food counter is a replica of a hotel front desk.  The girl behind the counter is dressed in a faux maid outfit constructed of that polyester fabric they make fast food restaurant uniforms out of.  She actually looks like she might be French, with pretty dark hair and brown eyes and skin just one shade darker than pale, and she's thin but with fairly wide hips and large breasts.  She applies sauces to the tacos using a fake rubber feather duster.  Jesus, I know restaurants need to &quot;build a brand,&quot; but this is just strange.\n\n\t[[West Food Court]]</div><div tiddler="North Wing" tags="mall">This is the north wing of the mall.  Old people linger on the benches and the one small fountain has a few unhealthy looking carp.  There's a Duller Image, Sky Mall, and Brain Reliant store here.  Or, you know, the stairs, or the anchor... Sears.  Why does anyone go to Sears, anyway?\n\n\tGo to another area of the mall?\n\t[[East Food Court]] \n\t[[West Food Court]] \n\t[[South Food Court]] \n\n\tOr visit a shop?\n\t[[Duller Image]]\n\t[[&quot;Tobacco&quot; Smoke Shop]]\n\t[[Brain Reliant]]\n\t[[Sears... but why would you?|Sears]]</div><div tiddler="Duller Image" tags="mall">This is a &quot;high end&quot; personal gadget store.  There seems to be one in every mall... some of the items are more &quot;interesting&quot; although labelled things like &quot;personal massager&quot; to be discrete.  You don't feel any need to be discrete though.  \n\n\t&lt;&lt;set $itemsForSale = [&quot;Wand Vibrator&quot;, &quot;T.E.N.S. Unit&quot;, &quot;Blindfold&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [79, 119, 24]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;\n\n\t[[North Wing]]</div><div tiddler="&quot;Tobacco&quot; Smoke Shop" tags="mall">Completely &quot;legal&quot; &quot;tobacco&quot; smoking devices are sold here, along with actual tobacco.  \n\n\t&lt;&lt;set $itemsForSale = [&quot;Cigarettes&quot;, &quot;Glass Pipe&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [8, 22]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;\n\n\t[[North Wing]]</div><div tiddler="Brain Reliant" tags="mall hidden">Wait, wasn't this supposed to be Lane Bryant?  Weird.  This place is full of weird looking helmets, small vials, and other mad scientist looking stuff.  You definitely don't remember these products!  But damn, the prices!  Also, is pricing everything five bucks less really going to make you think they're cheap?\n\n\t&lt;&lt;set $itemsForSale = [&quot;Cumslut Potion&quot;, &quot;Painslut Potion&quot;, &quot;Submissiveness Elixer&quot;, &quot;Buttslut Suppository (Baseball Sized)&quot;, &quot;Cocksucker's Salve (With Applicator)&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [395, 395, 895, 495, 595]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;\n\n\t[[North Wing]]</div><div tiddler="Sears" tags="mall">Ah, Sears.  That staple of shopping malls across America.  For the most part the mall rats don't have much use for the place.  Still, you could look around.  Who knows?  Maybe you'll find something useful.\n\n\tVisit a department?\n\t[[Hardware]]\n\t[[Men's Wear]]\n\t[[Women's Wear]]\n\t[[Juniors]]\n\t[[Kitchen Wares]]\n\n\tLeave the store?\n\t[[North Wing]]</div><div tiddler="Hardware" tags="mall">The hardware section has everything you could need for home improvement, and even offers bulk supply delivery to your house for free!  Sweet!\n\n\t&lt;&lt;set $itemsForSale = [&quot;Rope&quot;, &quot;Lumber&quot;, &quot;Sawhorse&quot;, &quot;Corner Moulding&quot;, &quot;Pipe&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [15, 95, 125, 65, 140]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;\n\n\t[[Sears]]</div><div tiddler="Men's Wear" tags="mall">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Women's Wear" tags="mall">Women's clothing surrounds you, with several outfits displayed on mannekins.  \n\n\t&lt;&lt;set $itemsForSale = [&quot;Sturdy Bra&quot;, &quot;Sun Dress&quot;, &quot;Lingerie&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [22, 35, 42]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;\n\n\t[[Sears]]</div><div tiddler="Juniors" tags="mall">This is the kid's clothing section... but there are a couple items...\n\n\t&lt;&lt;set $itemsForSale = [&quot;Plaid Schoolgirl Skirt&quot;, &quot;Schoolgirl Blouse&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [26, 28]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;\n\n\t[[Sears]]</div><div tiddler="Kitchen Wares" tags="mall">Somehow the items in here look more interesting than before.\n\n\t&lt;&lt;set $itemsForSale = [&quot;Spatula&quot;, &quot;Clothespin&quot;, &quot;Candle&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [7, 1, 4]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;</div><div tiddler="South Wing" tags="mall">This is the &quot;bad area&quot; of the mall.  There's a shoe store here, and a... shoe store.  Oh, and some kind of crappy comic book store.  Great.\n\n\tGo to a different area of the mall?\n\t[[South Food Court]] \n\n\tVisit a shop?\n\t[[&quot;Obligatory&quot; Shoe Store]]\n\t[[Cosmic Comics]]</div><div tiddler="&quot;Obligatory&quot; Shoe Store" tags="mall">There's always a shoe store.  Or more.  In fact, when malls are having trouble, more and more shoe stores move in until the mall is alternating closed store fronts and shoe stores.  They're like cancer in that way.\n\n\t&lt;&lt;set $itemsForSale = [&quot;High Heels&quot;, &quot;Thigh High Latex Boots&quot;, &quot;Stripper Heels&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [18, 69, 59]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;</div><div tiddler="Cosmic Comics" tags="mall">Wow, you'e seen better comic book stores on your bookshelf.  This is a sad set of folding tables covered with long cardboard boxes of comics.  A few empty tables are set up in the back room with roleplayers huddled around one of them.  Racks of games and dice and shit are set up near the door, desultarily stocked with a few items in hopes of selling something to the nerds who play here, and they probably make most of their money selling Cokes and energy drinks to the people who play games.\n\n\tSuper lame.\n\n\tStill, even though you're much, much, much cooler than the kind of losers that would patronize this kind of shop, you spend some time flipping through the boxes.  Wow!  They have some old Image comics here!  Those weren't dorky at all.\n\n\tTaking a trip into the back room, you check out the nerds.  Lol.  Sitting around a table and talking to each other?   Nerds!  It's a group of geeky-looking guys and one pretty cute Asian girl.  The guys are all obviously infatuated with her.\n\n\t&lt;&lt;nobr&gt;&gt;\n\t\t&lt;&lt;if Game.getCharIndex(&quot;Su&quot;) != -1 &amp;&amp; $characters[Game.getCharIndex(&quot;Su&quot;)].dayLastSpokenTo &lt; $day&gt;&gt;\n\t\t\t&lt;&lt;if 0 == 0&gt;&gt;\n\t\t\t\t&lt;&lt;describe &quot;Su&quot; &quot;Su&quot;&gt;&gt; is seated at the table gaming with the nerds. [[Talk to Su]]\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/nobr&gt;&gt;\n\n\t[[South Wing]]</div><div tiddler="Upstairs East Wing" tags="mall">Yellow tape blocks off the escalator.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="West Wing" tags="mall">Ah, the swanky area.  The wealthy folks slide by like ripples in melted butter.  They're also kind fat, yo.  The stores are nice, and some of the chicks are hot.  \n\n\tThe anchor store here is Dillard's.  Of course, why wouldn't it be?\n\n\tGo to a different area of the mall?\n\t[[West Food Court]] \n\n\tVisit a store?\n\t[[&quot;Pet&quot; Store]]\n\t[[Ambercrombie and Bitch]]\n\t[[Forever &quot;18&quot;]]\n\t[[Dillard's]]</div><div tiddler="&quot;Pet&quot; Store" tags="mall">A pet store.  What a wonderful place!  Also smells like poop.\n\n\t&lt;&lt;set $itemsForSale = [&quot;Leash&quot;, &quot;Cow Bell&quot;, &quot;Large Cage&quot;]&gt;&gt;\s\n\t&lt;&lt;set $itemsForSaleCosts = [12, 60, 185]&gt;&gt;\s\n\t&lt;&lt;display &quot;Store&quot;&gt;&gt;\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Ambercrombie and Bitch" tags="mall">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Forever &quot;18&quot;" tags="mall">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Dillard's" tags="mall">That weird chain link thing is covering the front of this shop. Guess they're closed.\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Secret Passageway">This passage runs through a hatch next to the dumpster down, through a couple turns and twists to a short stairway up to the mall proper or a door marked &quot;Mechanical Room.&quot;  &lt;&lt;if $pc.isKickedOut&gt;&gt;You're sure they're patrolling the mall itself, but they probably won't just be hanging out in the offices. &lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $pc.isKickedOut &amp;&amp; $slaves[Game.getSlaveIndex(&quot;Eva&quot;)].isInLove &amp;&amp; !$flags.evaIsTaggingAlong&gt;&gt;&quot;Hey, Master?&quot;&lt;br&gt;&quot;Yeah?&quot;&lt;br&gt;&quot;Can I come?  Please?  I want to help.&quot;&lt;br&gt;&quot;Ok, I guess.&quot;&lt;br&gt;Eva tags along.  She's pretty smart, anyway, and it can't hurt.&lt;&lt;set $flags.evaIsTaggingAlong = true&gt;&gt;&lt;&lt;/if&gt;&gt;\s\n\n\tHead towards the security offices?\n\t[[Mechnical Room]]\n\n\tGo to the mall?\n\t[[Service Passageway]]</div><div tiddler="Mechnical Room" tags="TimeNone">A set of controls for the elevator, what looks like a generator, and a large trash compactor leave little space free in this moderately large room.  The walls are bare concrete stained by leaks, and the ceiling has one fluorescent lighting fixture.  It flickers on and off.  Creepy.  \n\n\tThere's a door out to the secret passageway, and a door on the other wall is marked &quot;Security Offices&quot;.\n\n\tInto the lair of the beast?\n\t[[West Security Hallway]]\n\n\tGo to the service passageway?\n\t[[Service Passageway]]</div><div tiddler="West Security Hallway" tags="TimeNone">The security offices are surprisingly modern and clean.  Stark whitewashed concrete and metal doorframes, clean institutional floors, and stark white fluorescent lights make the place look and smell somewhere between a morgue and a hospital.\n\n\t&lt;&lt;if $pc.mageSight&gt;&gt;This place reeks of some kind of weird magical corruption.  Something is... wrong here.&lt;&lt;else&gt;&gt;You're not sure if you should be wandering around here.  What if you get in trouble?&lt;&lt;/if&gt;&gt;\n\n\tA door at the end of the hall is marked &quot;East Wing&quot;, presumably leading into the mall proper.  &lt;&lt;if $pc.isKickedOut&gt;&gt;It's probably a bad idea to go out there, since they patrol the place.&lt;&lt;/if&gt;&gt;  A side door reads &quot;Mechanical Room&quot;, and across it is an open door into a room with a table, a few chairs, a fridge and microwave on a counter with a sink.\n\n\tGo down the hallway?\n\t[[Central Security Hallway]]\n\n\tGo through a door?\n\t[[Mechnical Room]] \n\t[[Break Room]]\n\t[[East Wing]]</div><div tiddler="Break Room" tags="TimeNone">This is a typical, depressing break room for the poor wage slaves.  Suckers!  It's a cheap table surrounded by folding chairs, a fridge in the corner, linoleum floors, a microwave on a counter running the length of one of the short walls, and a trash bin in the corner.  A TV is on a stand in the other corner hooked up to a VCR.\n\n\tLeave the room?\n\t[[West Security Hallway]] \n\n\tCheck out the room?\n\t[[Rummage through the trash]]\n\t[[Watch TV]]</div><div tiddler="Rummage through the trash" tags="TimeNone">You dig through some old bannana peels and yogurt containers, yuck.  Wait, what's this?  A fax of a copy of one of Bree's receipts.  Shit, it's for a prescription... diet pills.  Why would they be getting faxes from pharmacies with prescriptions?  This is weird.  &lt;&lt;set $flags.knowBreeWeightIssues = true&gt;&gt;\n\n\t[[Break Room]]</div><div tiddler="Watch TV" tags="nobr TimeNone">You turn on the TV, but none of the channels seem to have anything.  You turn it to channel 3 and turn on the VCR though, and it's security cam footage.&lt;br&gt;\n\t&lt;br&gt;\n\t&lt;span id=&quot;security-footage&quot;&gt;\n\t[[Booooring.|Break Room]] &lt;br&gt;\n\t&lt;&lt;click &quot;Press play&quot;&gt;&gt;\n\t\t&lt;&lt;replace &quot;#security-footage&quot;&gt;&gt;\n\tThe TV shows one of the out-of-the-way hallways outside, behind some of the partitions that shield the dark underside of the mall from the shoppers.  There doesn't seem to be any audio, but it shows that stoner chick... what's her name again?  Angie or something?  anyway, walking back behind the partition followed by a skinny, scruffy looking dude in a flannel and tattered sneakers.  She turns around, and reaches out, like she's expecting him to give her something.&lt;br&gt;\n\tThe camera zooms in... someone must have been watching this in real time.  He shakes his head, they exchange a few words.  He seems exasperated, but pulls a baggy out of his pocket and shows it to her.  She reaches but he puts it back in his pocket, and moves his hand in a circle, as though it indicate she should turn around.  She shakes her head, looking angry, but he repeats the gesture, and she sighs, turns around, and puts her hand against the wall leaning over so she's almost bent double.  &lt;br&gt;\n\tThe camera zooms in again.  Who the fuck is at the controls?&lt;br&gt;\n\tThe guy pulls up her denim skirt, yanks down her panties, pulls out his cock.  The zoom is good enough to tell he's lining up his cock with her asshole... wow.  She looks back over her shoulder with an angry look and he grabs her hair with one hand and her hip with the other, then shoves his cock into her.  He pumps his cock into her for a few minutes then quickens, shoving into her, then seems to finish. &lt;br&gt;\n\tShe turns around, still seemingly angry, and yanks her skirt down.  She holds out his hand and waits impatiently while he zips up and pulls the baggy out of his pocket.  She snatches it away and walks away. &lt;br&gt;\n\tThe camera quickly switches to another angle, letting you see her face as she walks around the partition.  It's zoomed in enough for you to read her lips.  She mouths &quot;Why always my ass?&quot;&lt;br&gt;\n\tThis is fucking weird.  What, the guards sit around watching the &quot;best of&quot; tapes of mall rats fucking?  This is fucking sick, not to mention a violation of privacy.  You start to press Rewind, then remember you have work to do.&lt;br&gt;\n\t&lt;br&gt;\n\t[[Quit watching|Break Room]]&lt;br&gt;\n\t&lt;&lt;click &quot;Keep watching&quot;&gt;&gt;&lt;br&gt;\n\t&lt;&lt;replace &quot;#security-footage&quot;&gt;&gt;\s\n\tThe next footage is from one of the women's bathroom stalls... wait, what?  Jesus, how many fucking cameras are there?  &lt;br&gt;\n\tIt shows that cheerleader, Morgan, sitting in a stall, her panties around her ankles with one hand on her clit and the other holding her phone.  She's furiously masturbating, watching a short clip of repeat of the big-breasted high school queen, Bree, aparently kissing one of her cute little followers in a crowd at what looks like a house party.  Man... Bree isn't even in college yet and already playing the lesbian thing to attract men.  It's obviously an act, you can tell Bree isn't into it, but it seems to do the trick for Morgan, who has what looks like an intense orgasm.  She's not faking it, for sure.&lt;br&gt;\n\tThat seems to be the end of the tape.&lt;br&gt;\n\t&lt;br&gt;\n\t[[Back to the break room|Break Room]]\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;/span&gt;</div><div tiddler="Central Security Hallway" tags="TimeNone">A stark, clean hallway.  There's a doorway on one side labeled &quot;Storage,&quot; but more impressively, a high-tech security pad and solid-looking door on the other.  &lt;&lt;if $flags.defeatedMajor&gt;&gt;The keypad is inactive and the door is open.&lt;&lt;/if&gt;&gt;\n\n\tHead down the hallway?\n\t[[West Security Hallway]]\n\t[[East Security Hallway]]\n\n\tTry a door?\n\t &lt;&lt;if $flags.defeatedMajor&gt;&gt;[[Surveillance Room]]&lt;&lt;else&gt;&gt;[[Try the security pad]]&lt;&lt;/if&gt;&gt;\n\t[[Storage Room]]</div><div tiddler="Surveillance Room" tags="nobr">You walk into the room.  It's surrounded by monitors, dozens of them.  This is where that pretty security guard, Charlotte, showed you the video after she was raped before the fight with the Mjor.  The room's clean now, and about half the monitors are dark.  You notice none of the ones on show dressing rooms, bathrooms, or the like.&lt;br&gt;\n\t&lt;br&gt;\n\t&lt;&lt;if Game.getCharIndex(&quot;Charlotte&quot;) != -1&gt;&gt;\n\t\t&quot;Oh, hey!  It's you.  I hope you're making some progress.  I can't swear it but I feel like more of the food court vendors are getting weird.&quot;  Charlotte's here.  &lt;br&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;br&gt;\n\t[[Central Security Hallway]]</div><div tiddler="Storage Room" tags="TimeNone">There's a few metal racks here.  They're loaded with boxes.  &quot;Files,&quot; &quot;First Aid,&quot; &quot;Bree,&quot; &quot;Records,&quot; &quot;Su's Videos.&quot;\n\n\tWhy do Bree and Su have boxes here?  They're not security guards... they're mall rats!\n\n\tGo back to the hall?\n\t[[Central Security Hallway]]\n\n\tCheck out a box?  Hah!  You said box!\n\t[[Open the Boxes]]</div><div tiddler="East Security Hallway" tags="TimeNone">The hallway ends here.  There's a holding cell at the end.  Two doors are on the other walls.  One has a placard reading &quot;Security Office&quot; and the other is standing open revealing a row of lockers and short benches.\n\n\tOr go back down the hall?\n\t[[Central Security Hallway]] \n\n\tCheck out a room?\n\t[[Holding Cell]]\n\t[[Locker Room]]\n\t[[Security Office]]</div><div tiddler="Holding Cell" tags="nobr TimeNone">&lt;&lt;if $pc.beenArrested&gt;&gt;Oh, yeah... you've been here.  &lt;&lt;/if&gt;&gt;The mall holding cell.  A bench against a wall, a toilet, a door with reinforced window, graffiti on the walls.  The door doesn't *seem* like it shuts on it's own.&lt;br&gt;&lt;br&gt;\n\t&lt;span id=&quot;writing&quot;&gt;\n\t&lt;&lt;click &quot;Read what's written on the walls&quot;&gt;&gt;&lt;&lt;replace &quot;#writing&quot;&gt;&gt;&lt;br&gt;&lt;br&gt;\n\t&quot;Bree's carpet matches her drapes!&quot;&lt;br&gt;\n\t&quot;Su loves the tentacle rape, lol&quot;&lt;br&gt;\n\t&quot;Eva is a poser!&quot;&lt;br&gt;\n\tIt's all crap... you don't know why you read this stuff... lol, Eva isn't a poser, now, at least! &lt;br&gt;\n\t&lt;br&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;/click&gt;&gt;\n\t&lt;/span&gt;&lt;br&gt;\n\t[[Back to the hallway|East Security Hallway]]</div><div tiddler="Locker Room" tags="TimeNone">You stroll into the locker room.  A dozen lockers, a low bench.\n\n\tCheck out the lockers?\n\t[[Try the lockers]]\n\n\tGo back to the hallway?\n\t[[East Security Hallway]]</div><div tiddler="Security Office" tags="TimeNone">There's a dingy little desk here, cluttered with paper.  A wooden chair is the only other furnishing.\n\n\t[[Search the Desk]]\n\t[[East Security Hallway]]</div><div tiddler="Open the Boxes" tags="TimeNone">You open Bree's box (that just never stops being funny, BTW) and check out the contents.  There's a plastic bag labeled &quot;Evidence:  Do Not Open&quot;, which you open, and contains a bra of impressive size with a tag that says &quot;36DD.  Dry Clean Only.&quot; and a pink thong that still has a little bit of feminine musk clinging to it.  Perverts!  \n\tSu's box (Ha!) seems to have whatever she ordered from the comic book store and never picked up:  &quot;Tentacle Rape,&quot; &quot;Tentacle Rape 2:  The Re-Rapening,&quot; and &quot;A Tentacle Raped Me:  A Love Story.&quot;  Weird.\n\n\t[[Storage Room]]</div><div tiddler="Try the lockers" tags="TimeNone">You try the lockers, one after another, finding each locked until you come to one labeled &quot;Charlotte&quot; that isn't quite latched.  You open it and find some surprisingly sexy thongs and a journal.  \n\n\tYou open the journal, and the most recent entry reads:\n\t&lt;blockquote&gt;What the hell is happening?  The cameras have tons of glitches, the Major (and since when is he a major, anyway?) has been grabbing my ass and ordering us to gather information on the mall rats.  It's almost like he's trying to figure out their weaknesses.  And something just feels... off.  I don't know.  As soon as I get paid, I'm getting out of here and working as a clerk at a convenience store.  The pay's worse, but I'd rather be robbed and poor than deal with this place.  &lt;&lt;if $pc.beenArrested&gt;&gt;Some kid tried to get me to wear a BDSM collar or something the other day!  Jesus, take me out for dinner first, dude!&lt;&lt;/if&gt;&gt; - &lt;em&gt;Charlotte&lt;em&gt; &lt;blockquote&gt;\n\n\t[[Locker Room]]</div><div tiddler="Search the Desk" tags="TimeNone">You look through the clutter on the desk.  You find a couple weird items... for one, you find a memo:\n\t&lt;blockquote&gt;To: Security Staff&lt;br&gt;Report any unusual activity on the part of our teenage regular customers.  Of particular interest are any actions that might be embarrassing or illegal.  Priority:  Highest.&lt;br&gt;The Major&lt;/blockquote&gt;&lt;be&gt;\n\tAnd, in the Lost And Found box, there's a notebook with &quot;Tracy Research Notes&quot; and yesterday's date written on the front cover.  It's contents are cryptic:&lt;br&gt;\n\t&lt;blockquote&gt;Subjects: 18 (vaginal), 20 (vaginal, oral finish), 21 (anal), 22 (anal), 23 (anal), 24 (vaginal, anal finish), 26 (oral only, refused anal), 27 (oral, anal, oral finish... that order), 28 29 and 30 (all oral only, in mouth), previous from college:  31, 33, 34, 35, 37, 39, 40, 41 (all oral, vaginal, anal with oral finish... pattern here?).  Total to date:  19.  Need more data on less represented interests.  Exhibition?  BDSM community?&lt;/blockquote&gt;&lt;br&gt;\n\tIt's strange... it's like they're seeking out the vulnerabilities of the mall rats.  You've seen that Tracy girl at the book store or the food court, always doing homework or something.&lt;br&gt;\n\t&lt;br&gt;\n\t[[East Security Hallway]]</div><div tiddler="SettingsDialog" tags="script">/* Settings dialog */\nSetting.addHeader(&quot;Appearance&quot;);\n\n\nvar settingThemeNames = [&quot;(none)&quot;, &quot;Amaranth&quot;, &quot;Architects Daughter&quot;, &quot;Acme&quot;, &quot;Bree Serif&quot;, &quot;Kalam&quot;, &quot;Merriweather Sans&quot;];\nvar settingThemeHandler = function () {\n    // cache the jQuery-wrapped &lt;html&gt; element\n    var $html = $(&quot;html&quot;);\n\n    // remove any existing theme class\n    $html.removeClass(&quot;theme-amaranth theme-architects-daughter theme-acme theme-bree-serif theme-kalam theme-merriweather-sans&quot;);\n\n    // switch on the theme name to add the requested theme class\n    switch (settings.theme) {\n    case &quot;Amaranth&quot;:\n        $html.addClass(&quot;theme-amaranth&quot;);\n        break;\n    case &quot;Architects Daughter&quot;:\n        $html.addClass(&quot;theme-architects-daughter&quot;);\n        break;\n    case &quot;Acme&quot;:\n        $html.addClass(&quot;theme-acme&quot;);\n        break;\n    case &quot;Bree Serif&quot;:\n        $html.addClass(&quot;theme-bree-serif&quot;);\n        break;\n    case &quot;Kalam&quot;:\n        $html.addClass(&quot;theme-kalam&quot;);\n        break;\n    case &quot;Merriweather Sans&quot;:\n        $html.addClass(&quot;theme-merriweather-sans&quot;);\n        break;\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t}\n};\n\nSetting.addList(&quot;theme&quot;, {\n    label    : &quot;Choose a theme.&quot;,\n    list     : settingThemeNames,\n    onInit   : settingThemeHandler,\n    onChange : settingThemeHandler\n}); // default value not defined, so the first array member &quot;(none)&quot; is used\n\t\nSetting.addHeader(&quot;Gameplay&quot;);\n\nvar settingCheatModeHandler = function() {\n\tif (settings.cheat) {\n\t\tstate.variables.debugging = true;\n\t}\n\telse {\n\t\tstate.variables.debugging = false;\n\t}\n};\n\nSetting.addToggle(&quot;cheat&quot;, {\n\t\tlabel\t\t: &quot;Cheat Mode?&quot;,\n\n\t\tonInit: settingCheatModeHandler,\n\t\tonChange: settingCheatModeHandler\n\t\n});\n\n\nif (!settings.cheat)\n{\tConfig.history.controls = false; }</div><div tiddler="StoryCaption">&lt;&lt;if $day &amp;&amp; (!tags().contains(&quot;Training&quot;))&gt;&gt;It's day $day, at &lt;&lt;=Game.displayTime()&gt;&gt;&lt;&lt;/if&gt;&gt;\n\n[[View Your Inventory|Inventory]]\n\nYou have $&lt;&lt;=$money&gt;&gt;.\n&lt;&lt;if $pc.power &gt; 0&gt;&gt;@@color:green;You have $pc.power power stored.@@&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $debugging&gt;&gt;\s\n&lt;&lt;click &quot;+1 hours&quot;&gt;&gt;&lt;&lt;run Game.passTime(60)&gt;&gt;&lt;&lt;/click&gt;&gt; | &lt;&lt;click &quot;+4 hours&quot;&gt;&gt;&lt;&lt;run Game.passTime(240)&gt;&gt;&lt;&lt;/click&gt;&gt; | &lt;&lt;click &quot;+8 hours&quot;&gt;&gt;&lt;&lt;run Game.passTime(480)&gt;&gt;&lt;&lt;/click&gt;&gt; | &lt;&lt;click &quot;+12 hours&quot;&gt;&gt;&lt;&lt;run Game.passTime(720)&gt;&gt;&lt;&lt;/click&gt;&gt; | &lt;&lt;click &quot;+1 day&quot;&gt;&gt;&lt;&lt;set $day += 1&gt;&gt;&lt;&lt;/click&gt;&gt;\s\n&lt;&lt;/if&gt;&gt;\s</div><div tiddler="UserScript" tags="script">window.Game = {\n\tinventory:[],\n\n\tinventoryAdd:function(item)\n\t\t{\n\t\t\tif (this.inventoryQuantity(item) === 0)\n\t\t\t{\n\t\t\t\tif (arguments.length === 2)\n\t\t\t\t{\n\t\t\t\t\tthis.inventory.push({name:item, quantity:arguments[1]});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.inventory.push({name:item, quantity:1});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (var i = 0; i &lt; this.inventory.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (this.inventory[i].name === item)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.inventory[i].quantity += (arguments.length &gt; 1 ? arguments[1] : 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\tinventoryRemove:function(item)\n\t\t{\n\t\t\tvar qty;\n\t\t\t\n\t\t\tif (arguments.length == 2)\n\t\t\t{\n\t\t\t\tqty = arguments[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tqty = -1;  \n\t\t\t}\n\n\t\t\tfor (var i = 0; i &lt; this.inventory.length; i++)\n\t\t\t{\n\t\t\t\tif (this.inventory[i].name == item)\n\t\t\t\t{\n\t\t\t\t\tthis.inventory[i].quantity -= qty;\n\t\t\t\t\tif (this.inventory[i].quantity &lt; 1 || qty === -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.inventory.splice(i, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\tinventoryQuantity:function(item)\n\t\t{\n\t\t\tfor (var i = 0; i &lt; this.inventory.length; i++)\n\t\t\t{\n\t\t\t\tif (this.inventory[i].name == item)\n\t\t\t\t{\n\t\t\t\t\treturn this.inventory[i].quantity;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\n\tinventoryEmpty:function()\n\t\t{\n\t\t\tthis.inventory = [];\n\t\t},\n\n\tinventoryAll:function()\n\t\t{\n\t\t\treturn this.inventory;\n\t\t},\n\n\n\tgetCharIndex:function(name)\n\t{\n\t\t\n\t\tfor (var index = 0; index &lt; state.variables.characters.length; index++)\n\t\t{\n\t\t\tif (state.variables.characters[index].name == name)\n\t\t\t{\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn -1;  /* not found */\n\t},\n\n\tgetSlaveIndex:function(name)\n\t{\n\t\tvar charArray = state.variables.slaves;\n\t\t\n\t\tfor (var index = 0; index &lt; charArray.length; index++)\n\t\t{\n\t\t\tif (charArray[index].name == name)\n\t\t\t{\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn -1;  /* not found */\n\t},\n\n\tgetSlaveWorkingLocation:function(passageTitle)\n\t{\n\t\tvar result;\n\t\tif (result = state.variables.slaves.find(function(slave, passageTitle){\n\t\t\t\treturn slave.isWorkingAt === passageTitle;\n\t\t\t}))\n\t\t{\n\t\t\treturn result.name;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\tisCorrupted:function(passageTitle)\n\t{\n\t\tvar sv = state.variables;\n\n\n\t\tif (sv.corruptedPc.indexOf(passageTitle) != -1)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (sv.corruptedBabaYaga.indexOf(passageTitle) != -1)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\n\t\treturn false;\t\n\t},\n\t\n\tisSlave:function(name)\n\t{\n\t\tif (this.getSlaveIndex != -1)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t},\n\t\n\tsetCsi:function(name)\n\t{\n\t\tstate.variables.csi = this.getSlaveIndex(name);\n\t},\n\t\n\tsetClothing:function(index, clothing, clothingType)\n\t{\n\t\tvar sv = state.variables;\n\t\t\n\t\tsv.slaves[index][&quot;clothing&quot; + clothingType] = clothing;\n\t\tif (sv.slaves[index].clothingTop === -1 || sv.slaves[index].clothingBottom === -1)\n\t\t{\n\t\t\tsv.slaves[index].clothingRevealing = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsv.slaves[index].clothingRevealing = false;\n\t\t}\n\t\t\n\t},\n\t\n\t\n\n\tdisplayTime:function()\n\t{\n\t\t\n\t\tvar hourString = &quot;&quot;;\n\t\tif  (state.variables.hour &gt; 12)\n\t\t{\n\t\t\thourString = &quot;&quot; + (state.variables.hour % 12);\n\t\t} else {\n\t\t\thourString = &quot;&quot; + (state.variables.hour);\n\t\t}\n\t\t\n\t\tvar minuteString = &quot;00&quot; + (state.variables.minute);\n\t\tvar amPMString = ((state.variables.hour &gt;= 12) ? &quot;PM&quot; : &quot;AM&quot;);\n\t\tminuteString = minuteString.substr(minuteString.length-2);\n\t\treturn (hourString + &quot;:&quot; + minuteString + &quot; &quot; + amPMString);\n\t},\n\n\tpassTime:function(numMinutes)\n\t{\n\t\tstate.variables.minute += numMinutes;\n\t\tif (state.variables.minute &gt;= 60)\n\t\t{\n\t\t\twhile (state.variables.minute &gt;= 60)\n\t\t\t{\n\t\t\t\tstate.variables.minute -= 60;\n\t\t\t\tstate.variables.hour += 1;\n\t\t\t}\n\t\t}\n\t},\n\n\n\trollDice:function(min, max)\n\t{\n\t    min = Math.ceil(min);\n\t    max = Math.floor(max);\n\t    return Math.floor(Math.random() * (max - min + 1)) + min;\n\t},\n\n\ttoTitleCase:function(str)\n\t{\n\t    return str.replace(/\sw\sS*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\n\t},\n\n\tresolveSexAct:function(id, kinks, holes)\n\t{\n\t    /* returns how much the roll was *under* the required score.  0 or higher means success, with higher\n\t       numbers being greater success.  Negative means failure with greater absval meaning worse failure. */\n\n\t    var odds = Game.calculateSexOdds(id, kinks, holes);\n\t    var odds = Math.floor(odds * 10);\n\t    var roll = Game.rollDice(1, 6) + Game.rollDice(1, 6) + Game.rollDice(1, 6);\n\t\t\tconsole.log(&quot;resolveSexAct got odds=&quot; + odds +&quot; and roll 3d6=&quot; + roll + &quot; so it's returning &quot; + (-1 * (roll - odds)));\n\t    return (-1 * (roll - odds));\n\t},\n\n\tcalculateSexOdds:function(id, kinks, holes)\n\t{\n\t    /* -----------------------\n\t     *    resolve training related sex act resistance.\n\t     *     higher numbers mean more success.  Return is ratio of difficulty\n\t     *\n\t     *    parameters:\n\t     *        id - $slaves[] index\n\t     *        kinks - array of involved kinks\n\t     *        holes - array of holes that will be penetrated enough to break virginity\n\n\t     -------------------------- */\n\n\t    /*  Save reference to slave */\n\t    var slave = state.variables.slaves[id];\n\n\n\n\t    /*  first calculate numerator */\n\t    var numerator = slave.obedience + (2 * slave.lust / 3) + (slave.fear / 2);\n\n\t    /* next calculate denominator */\n\t    /* first, hatred (negative relationship) */\n\t    var denominator = slave.relationship * -1;\n\n\n\n\t    /* next, base resistance to the act passed in by the kinks array and modified by the kink or hatred of the act */\n\t    for (var i = 0; i &lt; kinks.length; i++)\n\t    {\n\t        var kink = kinks[i];\n\t        var resistName = &quot;resist&quot; + Game.toTitleCase(kink);\n\t    \n\n\t        if (slave[kink] &gt; 0)\n\t        {\n\t            denominator += slave[resistName] / (slave[kink] + .5);  \n\t        }\n\t        else if (slave[kink] &lt; 0)  // hates the kink\n\t        {\n\t            denominator += slave[resistName] + (10 * slave[kink]);\n\t        }\n\t    }\n\n\n\n\n\n\t        /* now add a fixed (high) penalty for fucking a virgin hole */\n\t    for (var i = 0; i &lt; holes.length; i++)\n\t    {\n\t        if (holes[i] == &quot;pussy&quot; &amp;&amp; slave.pussySize == 0)\n\t        {\n\t            denominator += 25;\n\t        }\n\t        if (holes[i] == &quot;asshole&quot; &amp;&amp; slave.assholeSize == 0)\n\t        {\n\t            denominator += 25;\n\t        }        \n\t    }\n\n\t    if (denominator &gt; 0)\n\t    {\n\t        return (numerator / denominator);\n\t    }\n\t    else\n\t    {\n\t        return 3;  // very high value;  she'd probably do it anyway.\n\t    }\n\n\t},\n\n\tcloneSlave:function(obj) {\n\t    if (null == obj || &quot;object&quot; != typeof obj) return obj;\n\t    var copy = obj.constructor();\n\t    for (var attr in obj) {\n\t        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\n\t    }\n\t    return copy;\n\t},\n}\n\n\n/* self-invoking function to create the $characters and $slaves story variables, so they'll be ready when characters are .push()ed onto them */\n\n/*\n(function(){\n \tvar sv = state.variables; \n \tsv.slaves = [];\n \tsv.characters = [];\n\n})();\n\n*/</div><div tiddler="UserStylesheet" tags="stylesheet">@import url('https://fonts.googleapis.com/css?family=Amaranth|Architects+Daughter|Acme|Bree+Serif|Kalam|Merriweather+Sans');\n\n#ui-dialog-body  {\n  background-color: gainsboro !important;\n}\n\n\nhtml {\n\t\n}\n\n#menu li a {\n  background-color: gainsboro !important;\n  color: black !important;\n}\n\n#menu li a:hover {\n\tbackground-color: #444 !important;\n\tborder-color: #eee !important;\n}\n\n\n.theme-amaranth {\n  font-family: 'Amaranth', Arial, sans-serif;\n}\n\n.theme-architects-daughter {\n  font-family: 'Architects Daughter', Arial, sans-serif;\n}\n\n.theme-acme {\n  font-family: 'Acme', Arial, sans-serif;\n}\n\n.theme-bree-serif {\n  font-family: 'Bree Serif', Arial, sans-serif;\n}\n\n.theme-kalam {\n  font-family: 'Kalam', Arial, sans-serif;\n}\n\n.theme-merriweather-sans {\n  font-family: 'Merriweather Sans', Arial, sans-serif;\n}\n\n.virility a {\n\tcolor: green;\n}\n\n.virility a:active {\n\tcolor:darkgreen;\n}\n\n.virility {\n\tcolor: green;\n}\n\n.uninterested \n{\n\tcolor: MediumVioletRed;\n}\n\n.interested\n{\n\tcolor: PaleVioletRed;\n}\n\n.excited\n{\n\tcolor:orchid;\n}\n\n\n.bad\n{\n\tcolor:  Crimson;\n}\n\n.good\n{\n\tcolor: Green;\n}\n\n.obedience-bad, .obedience-very-bad\n{\n\tcolor: BlueViolet;\n}\n\n.obedience-good, .obedience-very-good, .obedience-excellent, .obedience-perfect\n{\n\tcolor:  Magenta;\n}\n\n.pain-very-low, .pain-low\n{\n\tcolor:  #ff531a;\n}\n\n.pain-moderate\n{\n\tcolor: #e63900;\n}\n\n.pain-high, .pain-very-high\n{\n\tcolor:  #ffbf00;\n}\n\n.fear-very-low, .fear-low\n{\n\tcolor: #bfbf40;\n}\n\n.fear-moderate\n{\n\tcolor: #dfdf20;\n}\n\n.fear-high, .fear-very-high\n{\n\tcolor: #ffff00;\n}\n\n.relationship-good, .relationship-very-good\n{\n\tcolor: orchid;\n}\n\n.relationship-moderate\n{\n\tcolor: PaleVioletRed;\n}\n\n.relationship-bad, .relationship-very-bad\n{\n\tcolor: MediumVioletRed;\n}\n\n.kink-bad, .kink-good\n{\n\tcolor: #6666ff;\n}\n\n.lust-low, .lust-very-low\n{\n\tcolor: \t#ff80ff;\n}\n\n.lust-moderate\n{\n\tcolor: #ff4dff;\n}\n\n.lust-high, .lust-very-high, .lust-good\n{\n\tcolor: \t#ff00ff;\n}\n\n\n\nbody {\n  \n\tbackground-image: url(data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wgARCADsAOwDASIAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAgEAAwQG/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAH7fPZvKqyjqetQdShHUnHpGpySca8HLBOoR1JUkc8scOma7Kpz2SmyRenPpSL5oufQBcy6yJrMG2BiBpSd0KWzBtoqacVLLCqZlGyNmRxSoTXAtoLccoyQLHRlk1xdoZFHBBy2SiQozeFne+anonGnXcadLwQ8CPAi59KNhFvGL33DHa8kkYRstKaKdPJ6fNZOgpmELGmURIoEuLbOiHVHIdCpy0Zm2VDoTWBlMq83bgVRWZhm2pEUS7EzoWaRChKEusRdNSQ6JtsCPnKOfXkVHpZHEbWhWpJaS5AuyyxJzikp2prEFjpZZoEoSzl0BehVmWpFaBFGiJrIK6gcRzi0vOqnNW0OvDqmmq8w5E59+VNSpbEazEsRNoaTS9MaRc2FFF1gVtXDtzaSTS42D59BY7qFllCwEUSKnKsrNTBfJjRZtdZJYcXw6ms0Yrmrk1ddkhUpaaRBF0xQiYdBKOnNDYYjahlK+ToO9hqpLaHn35EuhbqTXAUpdKY3ECkoZQny6DxVGKJw6c+pkaObG5deIioVFFLINsPamlhCooWUDoEKhWUUqevHqkQYtKTj6POLSFRosKBGnTGloZDYs0oenPpERtl2xy68GdLwZ0vLHbzrkdDiddzZkMSjobCifNmMEtoQnx6moxTof//EACIQAAEEAgIDAQEBAAAAAAAAAAEAEBEgAjIhMTBBQiISM//aAAgBAQABBQID8woUKFHEBR+kQoUKFCIUKFChQoUcgfmFChQgHGpqF9WPgx1vjrQMNj1XLwYa3x69V+mihuO8dXhgw1t9WNC/vDW41oG92PVgsdLjWgRXux8GGtwD/KhuVy2RIz/oqSpK5XKkokqSuVyjKktCx1aVK/pSpWOtA2f+niPQfHX2bY6uXz/0cOaFBBsdUbY61lZbhvbnwY9I2x1sdhY+DHpG2Grl/pw5uENb4auXO9j4B1fDVy0r6Fi0qVKlSw6qWx1t9WPgx1vjq5f6sfBj1KNsdXL/AFY1D4nhexXHpy/04cuWxfHq+OqLF/pGp8A6uD+bfTChv7HV8dWFBtY+DHq+I/MLhcTCgKAo/Vi3Dhx1xSHx1t9MKFG46qWw1FvbCh6qWxcVw1t9MHKNi2PVAi2Otjsw8RbHq+Gtj3bKksUEOqB8NbHYdIUNiw6tKx1lf0pUqVK9oodOaCmPSFv/xAAUEQEAAAAAAAAAAAAAAAAAAABw/9oACAEDAQE/AWH/xAAUEQEAAAAAAAAAAAAAAAAAAABw/9oACAECAQE/AWH/xAAdEAACAgMBAQEAAAAAAAAAAAABIEBxADAxgRAh/9oACAEBAAY/Ag5cb+YHLiAHLiAHLiAHLiAHL+6BoDlxegaB+/O53O53O4dPc7nfndQp/HEAVuFwBW4XAFbvYApy4uAK3C4Ard7ADlxcAbhcAbhcAOXFwA5f2AK3CAHLi4A3CAHL+wA5f2AHLiAKnCcHLi9A0By4gf/EACYQAAIBBAAHAQEAAwAAAAAAAAABERAhMUEgUWFxkaGxgfHB4fD/2gAIAQEAAT8h1awh8qRlgjyF0CXQTNIaYeWix0EK7CGlrIgtIackWbFlHaR5LwQkaciD0NEJNEW1kJOSIPSIRhGWDsFuQoXN+HrqjZFFih+lEUSvRQ0QjDuVJuNZgb0IZCRgIQ7UaFojlRfGuDZhT4KCNmqTcw7kPBsWGOyliubkTMBNNGxoWKP4+BsXWi+A+Ax5Me5DotjgwRmhgELhJPXVGRRYpHoohjRuxc+yItwriGCm7iQhip6qHYdhCVjCn+KiQ7IgRswdg0RRkXGoMpqIINDVES/NVVWgvlRD4PkozQ6MV+HIZunYZaIfP0S/gSf8EfwEv4EP+BOJrC0K/jwXcrwXc+jv9CfP6OqvBa3WVo6q8E/wP+IGT/QTN+hJvPoKLV/ROF/Q+42+fonzJy7+iXP0T5+ju9HoqNcK9uwSyaoneBYvR/SGhp1EIIvBapFGBiRyonjCzSDERc+CJLwZRnA3kR8lYvNTIgxG6FVU9cYpIxWHYZOyoW5FLkLM0Vj4Bk0YrCyTX24OdL+yN0Y8jpl7KhjEJU17BmjQkQRFLFqehUbIPRCoy0eBnwQsCFUj4KaPlGMyElBoeTZajuQeiEYyaoZkaH7IQsURNxHycH2qHtGMZFxqSedG0vDQn0fgnv4JU78DTzG8WY7sPwPOzwtGWxPozWH4E+jE+jJ6MfGcNE9/A+7wdj8HY/ArcPwLofgT6PwY7PwN2w/BPR+CbYfg8+Cej8DdGT3X4eihczkSNl7l2fJCR2NWFSDHscGjVEYOFIap6iNEkZZgSRs2/BK5tUSL9CT5OB1RhHYNBki9L0eOwhDd6JdiGrEX9kfkDEIYj5B0Y3YeciZJYDg5jqp3EM9NUeTYwjQvUjY85ES3X5KQINGDJ5CGsJpoRFh4LM9ZCOYVKQhehCNBXpYg17BVdGqYuDlweKE2O5I6TY37KjMsiwLNF9kLhdC2iMswlz4XyLQhuhmzofAIaTFWTlclFSSVo5jMNNoWKoa6CvwEhDaGtBHaFyjpDWduRC5EKSEJELkR0I+SEkdhC5DSgRQOFotyEURaQKBJEIhJCghcj1EJMii6idH8jYi5j2RTJdlH5RoY8CVPqSXFi4qvyQdxsVHmj+VHwddTB2G1yoiB0bMENG60N05fSFVXGJjfrEPdLpgN7IdojhwEYBs2TTAwFg9cKiuXGQZPw0aqQ8Dwu6NqjwIV6NmIZs0TYWKfp6qEx5bgTJF5pn/DRijF6o1l3Q+YtkxRNZ7RszRrA1yb09RCHIlaio8/hQkuNsm5hF92YDdsGrGRQdh8cER+3NkjyOGxo7KJEpJSN0SJCcvfQWFQ4eBbo9+5DySLBkcx5Juh7aNAnR2JsNKcH//aAAwDAQACAAMAAAAQleMDhcb6jbDTPgjUf8j1Inn3HXvjZrC7CplfDyi3TjXZF+LGBV7bSnBfDM8ZJiSlHnPnLM9z0q5Zxf8Ak3//AP8AxNd+y8RJi6Hb2DbfEVqbO9dWePny+FphBTucFgH8XiiTxaa+H+gpKalqia/9ACvqRZ53Oo66+TPtyP2fib3eyyyGTbNSLGM5fjK2aCyjb3Qy29UKq6yOquuX/ccqVxWL3+jfPL7pS2OO6//EABoRAQEAAgMAAAAAAAAAAAAAAAEwIEAQEVD/2gAIAQMBAT8Q3jX68hu3bt2LIxZGLvPP/8QAGBEBAQEBAQAAAAAAAAAAAAAAATAgYBH/2gAIAQIBAT8Qw8UXLmvYlzl//8QAJhABAAICAQIHAAMBAAAAAAAAAQARITFBUWFxgZGhscHw0eHxEP/aAAgBAQABPxAfYLsQsFjwlEY66RAMLvggtqLvpNiK8IRwG8SjUOrzRyqinDjULxOxCdDyiC3oQZ9EFtL7QN52u8QcPQgdHBGZYUdiFxSvCIqp6RwKAHdSopM9IWo3x3YrIHlLh8EAdehEGpz0h9Oi6IWvDsVAVeYRlV+iAS3ZEypzDDEAuunENorJzA4uZB+MwAZ3MLNysShtAriETUaKqV/FuN4tmHcwLQyygHeeYA5Jm1i2+NQQW88SlddflmBPaEODmUGUKqVK1OtuNiKDECzOfiIhdHOsQxRzBlUK6w+ph7zK3p9oL7iHdpAy5m8JdNGIYLnE/TPUIi2HXWFGXwxBlDwmpuhPGKNDnvLkDWKnV9flmzWJte0eoiFTBMhVTCvrEziE19J51ExUz2iDa9I0N3DRlwrxQSNB6n2msDNFxwXOIWYd3NsdZgBzPyuscQM8pKKKaYRhHOpTZHtFtjeexLB8iO/P+WZWGJ3ylwXcKV3zmUOG4nPtLxtp+iOAbwkrxMtQOXgmUaTm4bPT7S5RC9yhlLtrHMASsFxBp5sxLaIX8uYiKKlIKSzm8RtDHEVVW9TLTMD63ywG+kAEeTMDbnMo0mOMygYzFl3uBWqgqq/6iPC3csLIrHE0De5hSIWXK9P7RLxrylmsVABeTcCgpVwUzeBAOGn7JgWaZmEuBtqo+P4RNnvDS2MZYRo238sMOTMbPMQZq6xKvHQxhrDcOA34StbqMU0m7ylYL5iVuC0zEZky1Ays5fT7Qtb5mL7TbBGnMKz1mbMzTqyesXHeXGCvDETqiuYN3xUPNvMDQOUueaL+WZbzMX3hRrbFnJM3+ZrCXUZ5K8BBzPtTLAdLEsuFy6emKnd2RwLNnxTLXff7cHWjl/3NipjUXS6wgaPf9YhtMXf+4o4n6ZjZWINxaZHjF5sKhMoQ1jhznAjsu51SZClZ9zLcC/CDaRGTGXhE7LYgsGBZbl4ILiRVePoIVitTBjcus0+cXF4rU2oqJp+IMA6nvGEK09oNUOM1UzZeu00GoUfdWI6tIRAGvml7ivOUqxE4xAtl7TOsLCGoLkYCgdflhbD3gzgMStl8/MywkwYBvSyq7pUR3V9BCgC9TinccM+cGxszUWBHxqXTLRFbz3jzg0ayP5g5HdcR1K08SgAN1MIzZrEyCUKH4ZXPNcyxOsB2GDGHHJBa1NpK2V5ylHj8soNOMzmQ3EtrMLsBagXMVNoRUOc/ATbENpcySALvbzMjLKfM5Dn+aL3KjrI3qEAslkYesLVWpamLZmfhmNqOFTgxcSrRcLbpcuW4hkWzMefzHtHbFpzKU6d4ClOF5lAjtdR62kHZfRK26kTaVAX33cK5Gp9opnPEum6/miDdLEaN8kVBzcYlcuJsqUqEFHb8kBWWNYROxuOZogkb3cphMr3mj7/LLXeobKCb9Ubi/SpdUstylXNmr84v0cEwD2YF6uC9hnjziLZDnULq292YtEQScaveXKV6xKrWO8JzM/4iXUGYcfhmJsanllOrily1iJF6blmr2zDDU1PV/LKKvc4biaISrb5nBMgtzPLELV/hFeOkBFrJHPRm5VbTQFxgZbO0WlPHaXwLP5Jm+9Q6JxUUNuLnGmU0Zmk/B3iAt2rAIG+LiZHUGc3ZE758YddZUPj8sGOsw4viCskLCUA1UQVpLswLD9ZFnBAFeEgDxrGBjuygWsy7MxU9CZlg1DvOH2IgTXficxl7Qc23MV1XoRFL6epifRDrH+QmRghQ5PUhjEHMAUuh4tLRu2ANWw7757meSYTlibUyQucHrQSaIqS0rtNddiL4H/ImC0vEuqbeWNMXWcypLItMAY2Fp5EdCVX2QM1RNVhAUnoYbw77cwuslVwx8EF/gzONxLJVbiXa45HFfMqiC0eJ2HPyxOWO8pKEu8yu3vKbslhdd9QpM5ZV/dgg2LZbzu86lXYc3KUByN3BXd4nkVKs7xSv1hFHmVouBTAoyXF6qQtU6X4YdZeFXPMfCLNOpi6qUhbqFwvMYX538sC1HaKgN3qBbOoAGMxaMkFOsczF6lL/AFRFR5SikuxyEssxwQFVfP8AwGDV9jxha5q1NMFV/EsV1CosW7mgWk0Mw9X+k0i43EZuE2OP+Bgc56Q1rh4jU3W8ebOlKUJ04ZYNLIuDHpHIg7QVsKizoh5Cvqh24Ki80djmpgA3H03LvKDyPshaM5gwvwS92YFcQWOiJ0q+0VsNVmPT8XDPWmJTG5RKjMwxYu8kcsCJGWF4/LBBlmfOFVqCub4my83Miu+YgFpeoLX9UTK3pMSl7IFVSva5YMXqpcVjM0eswGr/ALIcpVeExtTv0mYNHNyihuGRSPnKUW+8FdfsZ/4rPnzEuDJiyFhnfSFhvLDLprrGnn/MHV6YNYqBgCqvVQEMszMvNOgiC5uEU/gIWVEb6KiKKfePVsurdhqPHsg30f5JSDTmqgULdZm88WZZ6MROCYNvWcdpUo11u8VUUR6vWXXjEzmYzVJ0mXj2i0AKue9nuzCq0buAlmqh3PJ7zlMKam1M+ccuOk3m4zeGNekVYHAZiUlMByZJ3hcHIrmGRyBmRBo+0Wck8QlDY+MwjQzVdNyneNfwZhrNk/tqXTxURQuIZLFXA0vcvY16xYeM/LAKG1mShsl1Y1Kbvzm+MwNZuWOU4isfHl6S0YpJcrq6sUDD1hwleMoOMo4wlNANPOcwLuYFGO0LVQPNh6o1dy75RJ4moWUMZvWWTGJVgLHiy3+00YX4wep6yg4d25STg83CuZ3q+sNTqbbgWqHtC5q/NgF413mVZVF7ZQMbOsv4Hiy7Sd7yjC/aFr7MdFTAolbuoC0WHciWTOx4+DEyyOalg8HiK1cDKfwggLyROx2zM7eQb8ZjrRBxhHlMJkq+0HT7QAVxL2PLUoTFFzEAdfmGC2UhYoNu5TaNajyxy8czBB2QUgb7y4Adap47E0sFbg1SsXFW93CyrbzE4U0Q7XL96vtAwneV1maG6qqYF+NTQ3LtcQ6tx1PGWuTI4+4BeNEyzqIaqCrrjrFgmaUwuPv8sznSAjq+kenbqKBvfEeMYmbMWlq4ChDfxEBTR6RWlr+4IIo3cNL5gDTzLFOkbtVT0YKb64ZcYwfGbUQbs/5EZa+6ZMH9R20VBa7MW2N1WMxDS4LR0TWOL+WBXSWmXWCNPeXZS5i0mpvRMdLuEKE2Z8IUIlqLz6S9sY8IUdEyONwQNGNEIZePtBrTeYl9jBn3it5L+oxBMkV4dIUvp5vOOKku8x8rlqOai4OkGX8wAaL8YOAagzPf5Zv35glh5hYO4w0bz0lxYiXjvDBsRLi/yilFZSKwdDKgwg9ZsZamRhhvjUTrB/tBGz0g8nEMZHRKoVnrGmCrbnhjtBDvP3TFBx1izaJKXYQClIOIDY4Y0ez2iLGyVU5W/llWBLYUrqwg1WIBbBWXMOAGTctcjUVVa+ogsgtmqvEYBeDJG8GEixxXBL31lT0n0Ysr8SI0gZ1HTeec4g7OKiha8twQGYEK9BmVMbXLtlmuWLRMR0BpejBOiWNOJYIFsS2aLv1Y7vvLN55lcELWqwAqZIrCapgqvdHp1n4iUNFUxrGKYIThYxiokEZJuifBnVaxHRZUTLE0vKTTAMxyV3jUd6PDWooUNBcdWoiwaJdtpulqrioPVPdjgiKh6sS6659osSipZyilYn//2Q==);\n\tbackground-color: gainsboro;\n\tbackground-repeat: repeat;\n\tbackground-attachment: fixed;\n\n  \tcolor: black;\n}\n\n#ui-bar {\n  \t\n  \tcolor: black;\n  \n\tbackground-color: gainsboro;\n}\n\n#menu li {\n  background-color: black;\n}\n\na, a:link, a:visited {\n  color: mediumblue;\n}</div><div tiddler="Fuck Her Ass" tags="nobr">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\tYou prepare to fuck her slave ass.  You line up your cock to her &lt;&lt;describehole &quot;asshole&quot;&gt;&gt; and push your $pc.cockLength inch cock against it, then thrust it deep into her. \n\t&lt;&lt;if $slaves[$csi].hasAssFucked === 0&gt;&gt;\n\t\tThis is the first time you've taken her ass.  She can't help but feel that you own her, like it or not.  &lt;&lt;set $slaves[$csi].obedience += random(3,6)&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].relationship &gt; 0&gt;&gt;\n\t\t\tShe feels @@.relationship-good;thankful@@ that you held off taking her ass until later in the training, and @@.trust-good;trusts@@ you more. \n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random (4,12)&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].fear -= random(2,8)&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tTaking her ass so early in training makes her @@.fear-low;fear her future@@ as your slave.\n\t\t\t&lt;&lt;set $slaves[$csi].fear += random(3,9)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;penetrate &quot;asshole&quot; &quot;cock&quot;&gt;&gt;\n\t&lt;br&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;if $slaves[$csi].pain - $o.pain &gt; $slaves[$csi].lust - $o.lust&gt;&gt;\n\t\t\t&lt;&lt;link &quot;If she thinks that hurt...&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Painal&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;elseif $slaves[$csi].lust &gt; 0&gt;&gt;\n\t\t\t&lt;&lt;link &quot;Let her enjoy it&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Enjoyable Buttsex&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;link &quot;Pound her&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Hard Buttfucking&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\n\t\t\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Painal" tags="nobr">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\tTaking her squeeling as encouragement, you pull all the way out and thrust back in, ramming your cock deep into her ass.  She releases a deep, pained grunt ending in a little shriek as you bottom out.  You pound her &lt;&lt;describehole &quot;asshole&quot;&gt;&gt; roughly, angling each thrust to make her hurt. Judging from her grunting and shrieking, it's working.  She struggles to escape your cock, but each time you thrust fully in. \n\t&lt;&lt;set $slaves[$csi].pain += random($pc.cockLength + 3)&gt;&gt;\n\t&lt;&lt;set $slaves[$csi].fear += random($slaves[$csi].pain - $o.pain) + random($pc.cockLength)&gt;&gt;\n\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;if $slaves[$csi].lust - $o.lust + $slaves[$csi].lust/10 &gt; 5&gt;&gt;\n\t\t\t&lt;&lt;link &quot;Pound her until she comes&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Anal Orgasm&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\t\t&lt;&lt;link &quot;Cum in her ass&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Anal Cum Inside&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Pull out and cum in her mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Anal Cum Mouth&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Anal Cum Inside" tags="nobr">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\tYou reach the point of no return, and with a few long thrusts into her asshole you shoot your cum deep into her ass.\n\t\t&lt;&lt;if $slaves[$csi].rulesSwallowCum&gt;&gt;\n\t\t\t&lt;&lt;if random(25) + random (25) &lt; $slaves[$csi].obedience + $slaves[$csi].relationship + ($slaves[$csi].oral + $slaves[$csi].humiliation + $slaves[$csi].cum) * 15&gt;&gt;\n\t\t\t\tExhausted you pull out.  She minds the rule you've set for her and uses her fingers to pull the cum out of her ass and lick it off her fingers.  It takes her a few minutes but finally she's done.\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience + random (4)&gt;&gt;\n\t\t\t\t&lt;&lt;exercisekink &quot;humiliation&quot; 4&gt;&gt;\n\t\t\t\t&lt;&lt;cum &quot;mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYou pull out, leaving cum dripping from her asshole.  She remains numb, not moving, and you remind her of the rule she has to eat all your cum.  She refuses, shuddering at the idea of eating cum out of her own ass.\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience -= random(6)+2&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].brokeRule = true&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou reach a climax and thrust deep into her ass, pumping it full of cum.\n\t\t\t&lt;&lt;cum &quot;asshole&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Back to Training&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Finish Anal&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\n\t\t\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Hard Buttfucking" tags="nobr">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\tAfter fully seating your cock in her &lt;&lt;describehole &quot;asshole&quot;&gt;&gt; you pull almost completely out then thrust deep.  Setting a rapid pace, you pound her hole over and over, eliciting grunts and moans. Despite some resistance your continued pounding begins to result in more moaning.\n\t\t&lt;&lt;if $slaves[$csi].lust - $o.lust &gt; 5&gt;&gt;\n\t\t\tSoon her moaning gets louder, then becomes an extended wailing as your cock pounds her ass.  You feel her asshole begin to pulse around your cock with each deep thrust.\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].pain - $o.pain &gt; 8&gt;&gt;\n\t\t\tShe's @@.fear-low;afraid@@ you're going to keep shoving your cock up her ass.\n\t\t\t&lt;&lt;set $slaves[$csi].fear += random(6) + 2&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;if $slaves[$csi].lust - $o.lust + $slaves[$csi].lust/10 &gt; 5&gt;&gt;\n\t\t\t&lt;&lt;link &quot;Pound her until she comes&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Anal Orgasm&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\t\t&lt;&lt;link &quot;Cum in her ass&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Anal Cum Inside&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Pull out and cum in her mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Anal Cum Mouth&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Anal Orgasm" tags="nobr">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\tYou fuck her ass until she can't take it anymore.  \n\t\t&lt;&lt;if $slaves[$csi].lust &lt; 60&gt;&gt;\n\t\t\tIt takes quite some time.  She's struggling with pain and taking a cock in her ass but you don't give up.  You tell her that you're fucking her until she comes and she whimpers, then resumes grunting and moaning as you redouble your pace.  It takes her &lt;&lt;= 60 - $slaves[$csi].lust&gt;&gt; minutes of having your cock shoved up her ass until she finally reaches the edge of climax.\n\t\t\t&lt;&lt;set $slaves[$csi].lust = random(30) + 30&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tShe responds enthusiastically and starts screaming and whimpering as your cock penetrates her slave asshole over and over. Soon her hole is pulsing around your cock and she's yelling encouragement while you thrust into her.\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].rulesNoOrgasm === 1&gt;&gt;\n\t\t\t&lt;&lt;if random(50) + 50 &lt; $slaves[$csi].lust&gt;&gt;\n\t\t\t\tShe can't take it.  She knows she's not supposed to come but the buttfucking you're delivering is just too much for her.  She gives in and shrieks in a mind-blowing orgasm. \n\t\t\t\t&lt;&lt;set $slaves[$csi].brokeRule = true&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience -= random(2,6)&gt;&gt;\n\t\t\t\t&lt;&lt;orgasm &quot;asshole&quot;&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tShe knows she's not supposed to come. It's almost too much for her, but she manages to hold out even as your cock pounds her.  She's @@.relationship-bad;frustrated@@ but @@.obedience-good;obedient@@ and doesn't come.\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship -= random(2, 10)&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random(1,6)&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].lust += random(10)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;elseif $slaves[$csi].rulesNoOrgasm === 2&gt;&gt;\n\t\t\tShe shrieks out, &quot;Master! Can I come?&quot;.&lt;br&gt;\n\t\t\tYou hold off answering, and she repeats, &quot;Master, please can I come?&quot;&lt;br&gt;\n\t\t\tYou say, &quot;Come from what?&quot;&lt;br&gt;\n\t\t\t&quot;Please, Master, can I come from you fucking my ass?&quot;&lt;br&gt;\n\t\t\t&quot;Yes.  Come for me, slut!&quot;&lt;br&gt;\n\t\t\tShe starts coming, and you pound her hard while she does.  \n\t\t\t&lt;&lt;orgasm &quot;asshole&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tHer asshole clenches around your cock while she comes, screaming.  You pound away while she does and it takes her a long time to finish.\n\t\t\t&lt;&lt;orgasm &quot;asshole&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Cum in her ass&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Anal Cum Inside&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Pull out and cum in her mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Anal Cum Mouth&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Finish Anal" tags="nobr">/* placeholder */\n\t&lt;&lt;goto &quot;Train Slave&quot;&gt;&gt;</div><div tiddler="Anal Cum Mouth" tags="nobr">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\tFinally you're ready to come.  You pull out of her ass and grab her hair, pulling her mouth onto your cock, and thrust deep into her throat and pump her mouth full of cum.  While she helplessly struggles to swallow your load, you fuck the cum into her throat.  Who says you aren't a helpful master?\n\t\t&lt;&lt;cum &quot;mouth&quot;&gt;&gt;\n\t\t\t\n\n\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Finish&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Finish Anal&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t\t\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Enjoyable Buttsex" tags="nobr">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\tWhen she moans as your cock plunged into her ass, you decide to give her a good buttfucking.  You slowly withdraw almost completely, then smoothly sink back in until she just starts to show signs of pain, then do it again, constantly letting her ride the edge between pain and pleasure.  You pick up the pace and soon your fucking her in the ass hard, going almost balls deep.  A few minutes of that she she's moaning and whimpering, clearly on the edge of orgasm.  You start thrusting all the way in, bringing little grunts and whimpers as you do.\n\t\t&lt;&lt;set $slaves[$csi].lust += random(8) + 4&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].relationship += random(4)&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;if $slaves[$csi].lust - $o.lust + $slaves[$csi].lust/10 &gt; 5&gt;&gt;\n\t\t\t&lt;&lt;link &quot;Pound her until she comes&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Anal Orgasm&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t\n\t\t&lt;&lt;link &quot;Cum in her ass&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Anal Cum Inside&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Pull out and cum in her mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Anal Cum Mouth&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Blowjob Training" tags="nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\n\t/* Setup - define the act */\n\t&lt;&lt;set _kinks = [&quot;oral&quot;, &quot;submission&quot;,&quot;cum&quot;]&gt;&gt;\n\t&lt;&lt;set _holes = [&quot;mouth&quot;]&gt;&gt;\n\n\t/*  Conditions - things that must be true to do this at all */\n\t&lt;&lt;if !$slaves[$csi].position == 1 &gt;&gt;\n\t \tIn order to train her blowjob skills, she must be kneeling.\n\t&lt;&lt;else&gt;&gt;\n\n\t\t/*  Check if she'll do it */\n\t\t&lt;&lt;set _result = Game.resolveSexAct($csi, _kinks, _holes)&gt;&gt;\n\t\t&lt;&lt;if true&gt;&gt;\n\n\t\t/*  If so, describe what's done to her */\n\n\t\t\t/* base text */\n\t\t\t\tEvery sex slave should be an expert cocksucker, and you'll be damned if $slaves[$csi].name is going to be the exception.  You order her to place her hands behind her back and open her mouth wide with tongue out.\n\t\t\t\t&lt;br&gt;&lt;br&gt;\n\t\t\t\tYou stand in front of her and pull out your cock.  You grab her hair and pull her forward and make her lick your balls and make eye contact, then pull her back and order her to open again.  By now she knows that means wide open with her tongue out.  You move her cock to her wet mouth, and order her to lick up and down your shaft, &lt;&lt;OBgood &quot;instructing her&quot;&gt;&gt; in how to use her tongue for your best pleasure.  Finally you slide your cock in her mouth and slowly but relentlessly slide it in until &lt;&lt;if $slaves[$csi].oral || $slaves[$csi].deepThroat&gt;&gt;you feel it start to slide down her throat&lt;&lt;else&gt;&gt;she starts to gag&lt;&lt;/if&gt;&gt; then pull back.  You order her to make eye contact and repeat the process a few times, then pull out, order her to open again and slap her face with your cock.  Then you go in for more training, pushing against the back of her throat and speeding up your thrusting.  You keep at it with patience, pumping in and out of her mouth and occasionally slapping her face, until the pressure in your balls reaches a critical point.\n\t\t\t\t&lt;br&gt;&lt;br&gt;\n\t\t\t\t&lt;&lt;if $slaves[$csi].rulesSwallowCum&gt;&gt;You pull out, order her to open, then cum straight in her mouth and on her tongue, until she has a big mouthful.  You order her to show you, then swallow.\n\t\t\t\t&lt;&lt;else&gt;&gt;When you pull out you order her to open, and cum all over her face, making sure plenty lands in her mouth and on her tongue. \n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;cum &quot;mouth&quot;&gt;&gt;\n\t\t\t\t\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += 3&gt;&gt;\n\t\t\t\t&lt;&lt;if $slaves[$csi].relationship &gt; 0&gt;&gt;&lt;&lt;set $slaves[$csi].relationship += 4&gt;&gt;&lt;br&gt;&lt;br&gt;She's &lt;&lt;REgood &quot;happy&quot;&gt;&gt; she was able to serve you.&lt;&lt;elseif $slaves[$csi].relationship &lt; -15&gt;&gt;&lt;br&gt;&lt;br&gt;She doesn't like you, so she glares at you, the taste of your cum still in her mouth, &lt;&lt;REbad &quot;angry&quot;&gt;&gt; that you are training her mouth for your use.&lt;&lt;/if&gt;&gt;\n\t\t\t\t\n\t\t\t\t/* effects of barely succeeding */\n\t\t\t\t\n\t\t\t\t/* effects of a big win */\n\t\t\t\n\t\t\t/* effects from kinks */\n\t\t\t&lt;&lt;if $slaves[$csi].submission &gt; 0&gt;&gt;Because she's a submissive, being on her knees and serving you with her mouth makes her &lt;&lt;OBgood &quot;more willing&quot;&gt;&gt; and she's a little surprised that the foul taste in her mouth makes her &lt;&lt;REgood &quot;happy.&quot;&gt;&gt;&lt;&lt;set $slaves[$csi].relationship += $slaves[$csi].submission * 3&gt;&gt;&lt;&lt;set $slaves[$csi].obedience += $slaves[$csi].submission * 3&gt;&gt;&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;if $slaves[$csi].lust &gt; random(60) + 60&gt;&gt;\n\t\t\t\t&lt;br&gt;&lt;br&gt;\n\t\t\t\tShe's so turned on she has an orgasm just from having your cock down her throat.\n\t\t\t\t&lt;&lt;orgasm &quot;mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\n\t\t/*  If not, describe penalties */\n\t\t&lt;&lt;else&gt;&gt; /* result */\n\t\t\t/* base text */\n\t\t\tShe isn't willing to suck your cock.  When you grab her hair to pull her mouth to your erection she shoves at your thighs and shuts her mouth.  She'll need some more training before you can fuck that sweet mouth.\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\n\n\t\t/* Spend time */\n\n\n\t/* End of Conditions block */\n\t&lt;&lt;/if&gt;&gt;\n\n\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;return&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Dress Her" tags="TimeNone nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t\tShe is wearing on her top: &lt;span id=&quot;clothing-top&quot; style=&quot;strong&quot;&gt;&lt;&lt;if $slaves[$csi].clothingTop === -1&gt;&gt;Nothing&lt;&lt;else&gt;&gt;&lt;&lt;=$clothingTop[$slaves[$csi].clothingTop]&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t\t&lt;br&gt;Make her wear: \n\t\t&lt;&lt;click &quot;Nothing&quot;&gt;&gt;&lt;&lt;run Game.setClothing($csi, -1, &quot;Top&quot;)&gt;&gt;&lt;&lt;replace &quot;#clothing-top&quot;&gt;&gt;Nothing&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt; | \n\t\t&lt;&lt;for _i = 0; _i &lt; $pc.clothingTopOwned.length; _i++&gt;&gt;\n\t\t&lt;&lt;='\n\t\t\t&lt;&lt;click &quot;' + $clothingTop[_i] + '&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;run Game.setClothing(' + $csi + ', ' + _i + ', ' + '&quot;Top&quot;' + ')&gt;&gt;\n\t\t\t\t&lt;&lt;replace &quot;#clothing-top&quot;&gt;&gt;\n\t\t\t\t' + $clothingTop[_i] + '\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t'&gt;&gt; | \n\t\t&lt;&lt;/for&gt;&gt;\n\n\t\t&lt;br&gt;&lt;br&gt;\n\t\tShe is wearing on her bottom: &lt;span id=&quot;clothing-bottom&quot; style=&quot;strong&quot;&gt;&lt;&lt;if $slaves[$csi].clothingBottom === -1&gt;&gt;Nothing&lt;&lt;else&gt;&gt;&lt;&lt;=$clothingBottom[$slaves[$csi].clothingBottom]&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t\t&lt;br&gt;Make her wear: \n\t\t&lt;&lt;click &quot;Nothing&quot;&gt;&gt;&lt;&lt;run Game.setClothing($csi, -1, &quot;Bottom&quot;)&gt;&gt;&lt;&lt;replace &quot;#clothing-bottom&quot;&gt;&gt;Nothing&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt; | \n\t\t&lt;&lt;for _i = 0; _i &lt; $pc.clothingBottomOwned.length; _i++&gt;&gt;\n\t\t&lt;&lt;='\n\t\t\t&lt;&lt;click &quot;' + $clothingBottom[_i] + '&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;run Game.setClothing(' + $csi + ', ' + _i + ', ' + '&quot;Bottom&quot;' + ')&gt;&gt;\n\t\t\t\t&lt;&lt;replace &quot;#clothing-bottom&quot;&gt;&gt;\n\t\t\t\t' + $clothingBottom[_i] + '\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t'&gt;&gt; | \n\t\t&lt;&lt;/for&gt;&gt;\n\n\t\t&lt;br&gt;&lt;br&gt;\n\t\tShe is wearing on her wrists: &lt;span id=&quot;clothing-wrists&quot; style=&quot;strong&quot;&gt;&lt;&lt;if $slaves[$csi].clothingWrists === -1&gt;&gt;Nothing&lt;&lt;else&gt;&gt;&lt;&lt;=$clothingWrists[$slaves[$csi].clothingWrists]&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t\t&lt;br&gt;Make her wear: \n\t\t&lt;&lt;click &quot;Nothing&quot;&gt;&gt;&lt;&lt;run Game.setClothing($csi, -1, &quot;Wrists&quot;)&gt;&gt;&lt;&lt;replace &quot;#clothing-wrists&quot;&gt;&gt;Nothing&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt; | \n\t\t&lt;&lt;for _i = 0; _i &lt; $pc.clothingWristsOwned.length; _i++&gt;&gt;\n\t\t&lt;&lt;='\n\t\t\t&lt;&lt;click &quot;' + $clothingWrists[_i] + '&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;run Game.setClothing(' + $csi + ', ' + _i + ', ' + '&quot;Wrists&quot;' + ')&gt;&gt;\n\t\t\t\t&lt;&lt;replace &quot;#clothing-wrists&quot;&gt;&gt;\n\t\t\t\t' + $clothingWrists[_i] + '\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t'&gt;&gt; | \n\t\t&lt;&lt;/for&gt;&gt;\n\n\t\t&lt;br&gt;&lt;br&gt;\n\t\tShe is wearing on her ankles: &lt;span id=&quot;clothing-ankles&quot; style=&quot;strong&quot;&gt;&lt;&lt;if $slaves[$csi].clothingAnkles === -1&gt;&gt;Nothing&lt;&lt;else&gt;&gt;&lt;&lt;=$clothingAnkles[$slaves[$csi].clothingAnkles]&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t\t&lt;br&gt;Make her wear: \n\t\t&lt;&lt;click &quot;Nothing&quot;&gt;&gt;&lt;&lt;run Game.setClothing($csi, -1, &quot;Ankles&quot;)&gt;&gt;&lt;&lt;replace &quot;#clothing-ankles&quot;&gt;&gt;Nothing&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt; | \n\t\t&lt;&lt;for _i = 0; _i &lt; $pc.clothingAnklesOwned.length; _i++&gt;&gt;\n\t\t&lt;&lt;='\n\t\t\t&lt;&lt;click &quot;' + $clothingAnkles[_i] + '&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;run Game.setClothing(' + $csi + ', ' + _i + ', ' + '&quot;Ankles&quot;' + ')&gt;&gt;\n\t\t\t\t&lt;&lt;replace &quot;#clothing-ankles&quot;&gt;&gt;\n\t\t\t\t' + $clothingAnkles[_i] + '\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t'&gt;&gt; | \n\t\t&lt;&lt;/for&gt;&gt;\n\n\t\t&lt;br&gt;&lt;br&gt;\n\t\tShe is wearing on her feet: &lt;span id=&quot;clothing-shoes&quot; style=&quot;strong&quot;&gt;&lt;&lt;if $slaves[$csi].clothingShoes === -1&gt;&gt;Nothing&lt;&lt;else&gt;&gt;&lt;&lt;=$clothingShoes[$slaves[$csi].clothingShoes]&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;/span&gt;\n\t\t&lt;br&gt;Make her wear: \n\t\t&lt;&lt;click &quot;Nothing&quot;&gt;&gt;&lt;&lt;run Game.setClothing($csi, -1, &quot;Shoes&quot;)&gt;&gt;&lt;&lt;replace &quot;#clothing-shoes&quot;&gt;&gt;Nothing&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt; | \n\t\t&lt;&lt;for _i = 0; _i &lt; $pc.clothingShoesOwned.length; _i++&gt;&gt;\n\t\t&lt;&lt;='\n\t\t\t&lt;&lt;click &quot;' + $clothingShoes[_i] + '&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;run Game.setClothing(' + $csi + ', ' + _i + ', ' + '&quot;Shoes&quot;' + ')&gt;&gt;\n\t\t\t\t&lt;&lt;replace &quot;#clothing-shoes&quot;&gt;&gt;\n\t\t\t\t' + $clothingShoes[_i] + '\n\t\t\t\t&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;/click&gt;&gt;\n\t\t'&gt;&gt; | \n\t\t&lt;&lt;/for&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;return&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Position Ass Up" tags="nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t&lt;&lt;set _willingness = $slaves[$csi].obedience + $slaves[$csi].lust + $slaves[$csi].fear + $slaves[$csi].pain&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].position == 3&gt;&gt;\n\tShe's already has her ass up with her holes ready for use.\n\t&lt;&lt;elseif (_willingness &gt; 20)&gt;&gt;\n\tShe gets on her knees and presses her face and tits to the floor, then arches her back so her cunt and asshole are available for use.\n\t&lt;&lt;set $slaves[$csi].position = 3&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].obedience &lt; 12&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].obedience += 1&gt;&gt;Having to assume such a vulnerable position has made her &lt;span class=&quot;obedience_good&quot;&gt;sligtly more obedient&lt;/span&gt;.\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\tShe refuses.  You can see her struggle against the control of the collar but in the end she wins.\n\t&lt;&lt;set $slaves[$csi].obedience -= 2&gt;&gt;\n\t&lt;&lt;set $slaves[$csi].refused = 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;return&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Position Kneel" tags="nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].position == 1&gt;&gt;\n\tShe's already on her knees.\n\t&lt;&lt;else&gt;&gt;\n\tShe kneels on the floor and spreads her knees to expose her slave pussy.\n\t&lt;&lt;set $slaves[$csi].position = 1&gt;&gt;\n\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\n\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;return&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Position Stand" tags="nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].position == 0&gt;&gt;\n\n\n\tShe's already standing.\n\t&lt;&lt;else&gt;&gt;\n\tYou order her to stand with her legs spread.\n\t&lt;&lt;set $slaves[$csi].position = 0&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;return&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Position All Fours" tags="nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t&lt;&lt;set _willingness = $slaves[$csi].obedience + $slaves[$csi].lust / 20&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].position == 2&gt;&gt;\n\tShe's already on all fours, waiting for what you plan next.\n\t&lt;&lt;elseif _willingness &gt; 5&gt;&gt;\n\tShe takes the lewd position, spreading her knees wide at your order.\n\t&lt;&lt;set $slaves[$csi].position = 2&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].obedience &lt; 8&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].obedience += 1&gt;&gt;Having to assume such an exposed position has made her &lt;span class=&quot;obedience_good&quot;&gt;sligtly more obedient&lt;/span&gt;.\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\tShe refuses.  You can see her struggle against the control of the collar but in the end she wins.\n\t&lt;&lt;set $slaves[$csi].obedience -= 2&gt;&gt;\n\t&lt;&lt;set $slaves[$csi].refused = 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;return&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Position Over Knee" tags="nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t&lt;&lt;set _willingness = $slaves[$csi].obedience + $slaves[$csi].lust / 20&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].position == 4&gt;&gt;\n\tShe's already over your knee, waiting for you to spank her.\n\t&lt;&lt;elseif $slaves[$csi].obedience &lt; 15&gt;&gt;\n\tShe struggles with the control of the collar, but loses the fight and bends over your knee.  She knows she's about to suffer.\n\t&lt;&lt;set $slaves[$csi].position = 4&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\tShe bends over your lap.\n\t&lt;&lt;set $slaves[$csi].position = 4&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;return&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Position Inspection" tags="nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t&lt;&lt;set _willingness = $slaves[$csi].obedience + $slaves[$csi].lust / 20&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].position == 5&gt;&gt;\n\tShe's already standing with her legs wide apart and her hands behind her head, tits thrust out.\n\t&lt;&lt;elseif $slaves[$csi].obedience &lt; 15&gt;&gt;\n\tShe strugles against the collar but loses.  She places her feet wide apart at your orders and puts her hand behind her head.  At a final order she thrusts her tits out.\n\t&lt;&lt;set $slaves[$csi].position = 5&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\tShe strugles against the collar but loses.  She places her feet wide apart at your orders and puts her hand behind her head.  At a final order she thrusts her tits out.\n\t&lt;&lt;set $slaves[$csi].position = 5&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;return&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Position Bent Over" tags="nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t&lt;&lt;set _willingness = $slaves[$csi].obedience + $slaves[$csi].lust / 20&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].position == 6&gt;&gt;\n\tShe's already has her hands on the floor and her legs spread, leaving her ass up  with her holes ready for use.\n\t&lt;&lt;elseif (_willingness &gt; 20)&gt;&gt;\n\tShe spreads her legs wide and bends over, placing her hands flat on the floor almost directly between her feet.  This position exposes her cunt and ass.\n\t&lt;&lt;set $slaves[$csi].position = 6&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].obedience &lt; 12&gt;&gt;\n\t\t&lt;&lt;set _.obedience += 1&gt;&gt;Having to assume such a vulnerable position has made her &lt;span class=&quot;obedience_good&quot;&gt;sligtly more obedient&lt;/span&gt;.\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\tShe refuses.  You can see her struggle against the control of the collar but in the end she wins.\n\t&lt;&lt;set $slaves[$csi].obedience -= 2&gt;&gt;\n\t&lt;&lt;set $slaves[$csi].refused = 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t&lt;br&gt;&lt;br&gt;\n\t&lt;&lt;return&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Set Rules for Her" tags="nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\nYou can set rules for her.  In some cases she may be able to break them, and some may cause her to resent you over time.\n&lt;br&gt;&lt;br&gt;\n\nCurrently, she is &lt;span id=&quot;masturbate&quot; style=&quot;font-weight:bold&quot;&gt;&lt;&lt;=$rulesNoMasturbateText[$slaves[$csi].rulesNoMasturbate]&gt;&gt;&lt;/span&gt;\n&lt;br&gt;\nChange it: \n&lt;&lt;click &quot;Allowed to masturbate&quot;&gt;&gt;&lt;&lt;set $slaves[$csi].rulesNoMasturbate = 0&gt;&gt;&lt;&lt;replace &quot;#masturbate&quot;&gt;&gt;allowed to masturbate.&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;\n | \n&lt;&lt;click &quot;No masturbation&quot;&gt;&gt;&lt;&lt;set $slaves[$csi].rulesNoMasturbate = 1&gt;&gt;&lt;&lt;replace &quot;#masturbate&quot;&gt;&gt;not allowed to masturbate.&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;\n&lt;br&gt;&lt;br&gt;\n\n\nCurrently, she is &lt;span id=&quot;orgasm&quot; style=&quot;font-weight:bold&quot;&gt;&lt;&lt;=$rulesNoOrgasmText[$slaves[$csi].rulesNoOrgasm]&gt;&gt;&lt;/span&gt;\n&lt;br&gt;\nChange it: \n&lt;&lt;click &quot;Allowed to orgasm&quot;&gt;&gt;&lt;&lt;set $slaves[$csi].rulesNoOrgasm = 0&gt;&gt;&lt;&lt;replace &quot;#orgasm&quot;&gt;&gt;&lt;&lt;=$rulesNoOrgasmText[$slaves[$csi].rulesNoOrgasm]&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;\n |\n&lt;&lt;click &quot;No orgasms&quot;&gt;&gt;&lt;&lt;set $slaves[$csi].rulesNoOrgasm = 1&gt;&gt;&lt;&lt;replace &quot;#orgasm&quot;&gt;&gt;&lt;&lt;=$rulesNoOrgasmText[$slaves[$csi].rulesNoOrgasm]&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;\n | \n&lt;&lt;click &quot;Only with permission&quot;&gt;&gt;&lt;&lt;set $slaves[$csi].rulesNoOrgasm = 2&gt;&gt;&lt;&lt;replace &quot;#orgasm&quot;&gt;&gt;&lt;&lt;=$rulesNoOrgasmText[$slaves[$csi].rulesNoOrgasm]&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;\n&lt;br&gt;&lt;br&gt;\n\nCurrently, she must swallow your cum &lt;span id=&quot;cum&quot; style=&quot;font-weight:bold&quot;&gt;&lt;&lt;=$rulesSwallowCumText[$slaves[$csi].rulesSwallowCum]&gt;&gt;&lt;/span&gt;\n&lt;br&gt;\nChange it:\n&lt;&lt;click $rulesSwallowCumText[0]&gt;&gt;&lt;&lt;set $slaves[$csi].rulesSwallowCum = 0&gt;&gt;&lt;&lt;replace &quot;#cum&quot;&gt;&gt;&lt;&lt;=$rulesSwallowCumText[0]&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;\n | \n &lt;&lt;click $rulesSwallowCumText[1]&gt;&gt;&lt;&lt;set $slaves[$csi].rulesSwallowCum = 1&gt;&gt;&lt;&lt;replace &quot;#cum&quot;&gt;&gt;&lt;&lt;=$rulesSwallowCumText[1]&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/click&gt;&gt;\n&lt;br&gt;&lt;br&gt;\n&lt;&lt;/replace&gt;&gt;\n&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n&lt;&lt;return&gt;&gt;\n&lt;&lt;/replace&gt;&gt;</div><div tiddler="Fuck Her Pussy" tags="nobr TimeNone">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t\t\t\t/* Setup - define the act */\n\t\t&lt;&lt;set _kinks = [&quot;submission&quot;]&gt;&gt;\n\t\t&lt;&lt;set _holes = [&quot;pussy&quot;]&gt;&gt;\n\n\t\t\t/*  Check if she'll do it */\n\t\t&lt;&lt;set _result = Game.resolveSexAct($csi, _kinks, _holes)&gt;&gt;\n\t\t&lt;&lt;if true&gt;&gt;  /* success block */\n\t\t\tYou prepare to fuck her pussy\n\t\t\t&lt;&lt;if $slaves[$csi].pussySize === 0&gt;&gt;\n\t\t\t\tfor the first time.\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Fuck her missionary&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].position = 0&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Missionary&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Make her ride you&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].position = 0&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Ride&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Take her from behind&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].position = 2&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Doggy&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Missionary" tags="nobr TimeNone">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t\tYou push her down on her back on the pool table.  At a convenient height for your cock to enter her, you push her legs back and \n\t\t&lt;&lt;if $slaves[$csi].lust &gt; 10&gt;&gt;\n\t\t\tslide into her wet pussy. \n\t\t\t&lt;&lt;set $slaves[$csi].lust += random(5)&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tpainfully shove into her cunt.\n\t\t\t&lt;&lt;set $slaves[$csi].pain += random(5)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;penetrate &quot;pussy&quot;&gt;&gt;\n\t\tYou set up a steady rhythm, fucking her until both of you are breathing hard.\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Be rough with her&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Missionary Rough Sex&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Kiss her and fuck her well&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Good Fucking&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Use her like a toy&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Missionary Use Her&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Missionary Rough Sex" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\tYou push her legs back into her shoulders and trap her under your weight, then start pounding her hard, thrusting into her &lt;&lt;if $slaves[$csi].lust &gt; 20&gt;&gt;wet&lt;&lt;/if&gt;&gt; cunt.  You grab her throat and push down as you fuck her, then slap her tits, punctuating each slap with an extra hard thrust.  You tug at her nipples and slap, every few minutes choking her a little.\n\t\t&lt;&lt;if $slaves[$csi].masochism + $slaves[$csi].submission &gt; 1&gt;&gt;\n\t\t\tShe loves the rough treatment and pain, @@.lust-good;getting off@@ on it and @@.relationship-good;appreciating@@ your dominent way with her.\n\t\t\t&lt;&lt;set $slaves[$csi].lust += random($slaves[$csi].masochism + $slaves[$csi].submission * 5) + 5&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random($slaves[$csi].masochism + $slaves[$csi].submission * 4) + 3&gt;&gt;\n\t\t&lt;&lt;elseif $slaves[$csi].masochism + $slaves[$csi].submission &lt; 0&gt;&gt;\n\t\t\tShe @@.relationship-bad;hates@@ being treated roughly and hurt and is @@.fear-low;afraid@@ you're going to keep hurting her.\n\t\t\t&lt;&lt;set $slaves[$csi].fear += random(4) + 1&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(4) * ($slaves[$csi].masochism + $slaves[$csi].submission * 4) - 3&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;if $slaves[$csi].lust &gt; 30&gt;&gt;\n\t\t\t&lt;&lt;link &quot;Fuck her until she's ready to come&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Vag Slave Orgasm&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;link &quot;Come in her cunt&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Inside&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Pull out and come in her mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Mouth&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Good Fucking" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\tYou bend in close and kiss her, slowly working your cock in and out of her pussy.  You fuck her slowly at first, kissing her neck and playing with her nipples, gradually increasing pace until your cock is sliding in and out of her quickly. \n\t\t&lt;&lt;set $slaves[$csi].lust += random(6 + $pc.cockLength)&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].lust &gt; 30&gt;&gt;\n\t\t\tWhen she starts moaning, you play harder with her nipples then rub her clit, fucking her harder as she responds.  She pushes into your thrusts as her orgasm approaches, @@.relationship-good;glad@@ that you took time for her pleasure.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Fuck her until she's ready to come&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Slave Orgasm&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Missionary Use Her" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\tYou methodically fuck her, using her &lt;&lt;if $slaves[$csi].lust &gt; 20&gt;&gt;wet&lt;&lt;/if&gt;&gt; cunt to pleasure yourself with no concern for her pain or pleasure.  \n\t\t&lt;&lt;if $slaves[$csi].humiliation + $slaves[$csi].submission &gt; 1&gt;&gt;\n\t\t\tBeing used as a fucktoy makes her feel @@.obedience-good;submissive@@ and @@.relationship-good;happy.@@\n\t\t\t&lt;&lt;set $slaves[$csi].lust += random($slaves[$csi].humiliation + $slaves[$csi].submission * 5) + 5&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random($slaves[$csi].humiliation + $slaves[$csi].submission * 4) + 3&gt;&gt;\n\t\t&lt;&lt;elseif $slaves[$csi].humiliation + $slaves[$csi].submission &lt; 0&gt;&gt;\n\t\t\tShe @@.relationship-bad;hates@@ being used as a hole for fucking.\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(4) * ($slaves[$csi].humiliation + $slaves[$csi].submission * 4) - 3&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;exercisekink &quot;humiliation&quot;&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;if $slaves[$csi].lust &gt; 30&gt;&gt;\n\t\t\t&lt;&lt;link &quot;Fuck her until she's ready to come&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Vag Slave Orgasm&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;link &quot;Come in her cunt&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Inside&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Pull out and come in her mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Mouth&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Slave Orgasm" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\tYou've fucked her hard and she's at the very edge of an orgasm.\n\t\t&lt;&lt;switch $slaves[$csi].rulesNoOrgasm&gt;&gt;\n\t\t\t&lt;&lt;case 0&gt;&gt;\n\t\t\t\tShe start shrieking as your cock impales her.  You can feel her cunt clench around your member, and pound her hard as she comes.  You can feel her pussy soak as her orgasm rips through her, and you don't let up even as she gets sensitive until her sounds start to quiet down.\n\t\t\t\t&lt;&lt;orgasm &quot;cunt&quot;&gt;&gt;\n\t\t\t&lt;&lt;case 1&gt;&gt;\n\t\t\t\tShe isn't allowed to come, so it's @@.fear-low;torture@@ to be fucked like this and have to resist.\n\t\t\t\t&lt;&lt;if $slaves[$csi].obedience + ($slaves[$csi].fear + $slaves[$csi].relationsip) / 2 &lt; random($slaves[$csi].lust)&gt;&gt;\n\t\t\t\t\tShe can't help it and comes, breaking your rule.  This makes her @@.obedience-bad;defiant@@ and @@.relationship-bad;angry@@ she isn't allowed to come.\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience -= Math.floor($slaves[$csi].lust / 2)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship -= Math.floor($slaves[$csi].lust / 2)&gt;&gt;\n\t\t\t\t\t&lt;&lt;orgasm &quot;pussy&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tShe resists, making her @@.obedience-good;more obedient.@@\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += Math.floor($slaves[$csi].lust / 4)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;case 2&gt;&gt;\n\t\t\t\tShe desperately calls out, &quot;Please, &lt;&lt;if $slaves[$csi].obedience &gt; 10&gt;&gt;Master &lt;&lt;/if&gt;&gt;may I come?&quot;\n\t\t&lt;&lt;/switch&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;if $slaves[$csi].ruleNoOrgasm === 2&gt;&gt;\n\t\t\t&lt;&lt;link &quot;Tease her but let her come&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Vag Tease&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t\t&lt;&lt;link &quot;Refuse&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Vag Orgasm Denial&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t\t&lt;&lt;link &quot;Let her come&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Vag Allowed Orgasm&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;link &quot;Come in her cunt&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Vag Come Inside&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t\t&lt;&lt;link &quot;Pull out and come in her mouth&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Vag Come Mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Tease" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\t&quot;No, don't come!&quot;&lt;br&gt;\n\t\tShe &lt;&lt;=either(&quot;whimpers&quot;, &quot;moans&quot;, &quot;glares&quot;, &quot;sobs&quot;)&gt;&gt; but does her best. &lt;br&gt;\n\t\t&quot;Please, &lt;&lt;if $slaves[$csi].obedience &gt; 10&gt;&gt;Master &lt;&lt;/if&gt;&gt; let me come!&quot;&lt;br&gt;\n\t\t&quot;No, you little slut.&quot; You pound her hard, and she's struggling.\n\t\t&quot;&lt;&lt;=either(&quot;Oh Fuck!&quot;, &quot;Oh my God!&quot;, &quot;Oh no! Oh!&quot;, &quot;Oh shit!&quot;)&gt;&gt; Please, please, please Master! I can't hold off!&quot;&lt;br&gt;\n\t\t&quot;Come for me, &lt;&lt;=$slaves[$csi].name&gt;&gt;! Come for your Master!&quot;&lt;br&gt;\n\t\tThat does it.  She comes hard, screaming and struggling but you hold her in place while you pound her through it.  She's become @@.obedience-good;more obedient.@@\n\t\t&lt;&lt;set $slaves[$csi].obedience += Math.floor($slaves[$csi].lust / 6)&gt;&gt;\n\t\t&lt;&lt;orgasm &quot;cunt&quot;&gt;&gt;\n\t\t&lt;&lt;exercisekink &quot;humiliation&quot;&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Come in her cunt&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Inside&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Pull out and come in her mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Mouth&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Come Inside" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\tYou roar and thrust deep inside her, pumping cum deep into her pussy.  \n\t\t&lt;&lt;if $pc.path === &quot;Virility&quot;&gt;&gt;\n\t\t\tYou feel the @@.virility;Mother's power@@ fuel your orgasm and her cunt fills to overflowing as you thrust a few more times, cum squirting out after each thrust.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tAfter filling her, you pump a couple times lubricated by cum.\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;cum &quot;pussy&quot;&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Finish&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Finish Vag&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Come Mouth" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\tYou feel your orgasm approaching and pull out, moving over to her head and ordering to open her mouth.  You aim your cock at her mouth and cum fills her mouth.\n\t\t&lt;&lt;if $pc.path === &quot;Virility&quot;&gt;&gt;\n\t\t\tYour @@.virility;patron@@ expands the volume of your cum, filling her mouth to overflowing.\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;cum &quot;mouth&quot;&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Finish&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Finish Vag&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Finish Vag" tags="nobr TimeNone">&lt;&lt;goto &quot;Train Slave&quot;&gt;&gt;</div><div tiddler="Vag Ride" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\tYou pull her on top of you, lowering her onto your dick\n\t\t&lt;&lt;if $slaves[$csi].lust &gt; 10&gt;&gt;\n\t\t\tand she slides on to, moaning.\n\t\t\t&lt;&lt;set $slaves[$csi].lust += random(5)&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tand she painfully lowers herself onto you.\n\t\t\t&lt;&lt;set $slaves[$csi].pain += random(5)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;penetrate &quot;pussy&quot;&gt;&gt;\n\t\tYou order her to ride you, bouncing up and down and impaling herself onto your $pc.cockLength inch cock.  She slowly gets into it, breathing hard and moaning.\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Let her work it&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Ride Nice&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Be Rough&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Ride Rough&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Ride Nice" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\tYou let her set the pace, and she starts slowly fitting herself on your cock.  Once she's settled, she rocks her hips grinding her clit against your pubic bone.  You play with her nipples and grab her ass, spreading her cheeks and giving her an occasional little slap.\n\t\t&lt;&lt;set $slaves[$csi].lust += random(6 + $pc.cockLength)&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].lust &gt; 30&gt;&gt;\n\t\t\tShe starts bucking faster and you pull her to you, kissing her mouth and neck as you use your hips to slam your cock into her for a few thrusts then letting her grind again until she's panting and saying &quot;Oh god!&quot; over and over, then start slamming her again.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Fuck her until she's ready to come&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Slave Orgasm&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Come in her cunt&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Inside&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Pull out and come in her mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Mouth&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Doggy" tags="nobr TimeNone">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\t\tYou put her on all fours.&lt;br&gt;\n\t\t&quot;I'm going to fuck you now.  Arch your back.&quot;&lt;br&gt;\n\t\t&lt;&lt;if $slaves[$csi].obedience + $slaves[$csi].relationship &gt; 10&gt;&gt;\n\t\t\t&quot;Yes, Master.&quot;&lt;br&gt;\n\t\t\tShe arches her back, giving easy access to her hole.\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&quot;No!  Please don't fuck me!&quot;&lt;br&gt;\n\t\t\tYou grab her hair and line your cock up with her hole.  You're going to take her one way or another.&lt;br&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].fear += random(6) + 1&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship -= random(8) + 3&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\tOne hand on her hip, you \n\t\t&lt;&lt;if $slaves[$csi].lust &gt; 10&gt;&gt;\n\t\t\tslide into her wet pussy. \n\t\t\t&lt;&lt;set $slaves[$csi].lust += random(5)&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tpainfully shove into her cunt.\n\t\t\t&lt;&lt;set $slaves[$csi].pain += random(5)&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;penetrate &quot;pussy&quot;&gt;&gt;\n\t\tYou fuck her from behind, using her hips and shoulders to hold her while you take her hard.\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Be rough with her&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Doggy Rough Sex&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Try to make her come&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Good Doggy&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Doggy Rough Sex" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\tYou grab her hair, shove deep into her pussy, and land a hard spank on her ass.  Using her hair to control her, you pull almost all the way out, pull her back onto your cock hard, and spank her again.  You keep it up while she gasps at each hard SMACK! on her ass until her cheek is a deep red.  You let go of her hair with your left hand and grab a nipple with your right, and resume yanking her to you with her nipple and spanking her other ass cheek.  Finally you shove her face and tits to the ground and hold her hip while you \n\t\t&lt;&lt;=either(\n\t\t\t&quot;take your thumb and slide it into her asshole, thumb fucking that hole while you pound her cunt.&quot;,\n\t\t\t&quot;roughly yank on her nipples, pulling until she sqeals in pain.&quot;,\n\t\t\t&quot;slap her tits and grab them hard enough to leave bruises.&quot;,\n\t\t\t&quot;reach under her and play hard with her clit, yanking on her clit and labia enough to hurt.&quot;\n\t\t)&gt;&gt;\n\n\t\t&lt;&lt;if $slaves[$csi].masochism + $slaves[$csi].submission &gt; 1&gt;&gt;\n\t\t\tShe loves the rough treatment and pain, @@.lust-good;getting off@@ on it and @@.relationship-good;appreciating@@ your dominent way with her.\n\t\t\t&lt;&lt;set $slaves[$csi].lust += random($slaves[$csi].masochism + $slaves[$csi].submission * 5) + 5&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random($slaves[$csi].masochism + $slaves[$csi].submission * 4) + 3&gt;&gt;\n\t\t&lt;&lt;elseif $slaves[$csi].masochism + $slaves[$csi].submission &lt; 0&gt;&gt;\n\t\t\tShe @@.relationship-bad;hates@@ being treated roughly and hurt and is @@.fear-low;afraid@@ you're going to keep hurting her.\n\t\t\t&lt;&lt;set $slaves[$csi].fear += random(4) + 1&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(4) * ($slaves[$csi].masochism + $slaves[$csi].submission * 4) - 3&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;exercisekink &quot;submission&quot;&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;if $slaves[$csi].lust &gt; 30&gt;&gt;\n\t\t\t&lt;&lt;link &quot;Fuck her until she's ready to come&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;display &quot;Vag Slave Orgasm&quot;&gt;&gt;\n\t\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;link &quot;Come in her cunt&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Inside&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Pull out and come in her mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Mouth&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Vag Good Doggy" tags="nobr TimeNone">&lt;&lt;append &quot;#training-text&quot;&gt;&gt;\n\t\t&lt;br&gt;\n\t\tYou slowly push your cock in her, filling her up, while you run your hands against her back.  When she starts to push back into you, you reach forward and play with her tits and nipples, occasionally lightly pulling her hair while you give her an extra hard thrust.\n\t\t&lt;&lt;set $slaves[$csi].lust += random(6 + $pc.cockLength)&gt;&gt;\n\t\t&lt;&lt;if $slaves[$csi].lust &gt; 30&gt;&gt;\n\t\t\tShe start to frantically shove back into you, trying to get your cock in her pussy as deep and hard as she can.  Soon she's moan and whimpering.\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/append&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Fuck her until she's ready to come&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Slave Orgasm&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Come in her cunt&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Inside&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;&lt;br&gt;\n\t\t&lt;&lt;link &quot;Pull out and come in her mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;display &quot;Vag Come Mouth&quot;&gt;&gt;\n\t\t&lt;&lt;/link&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Fuck Her Pussy old" tags="TimeNone nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n\n\t\t/* Setup - define the act */\n\t\t&lt;&lt;set _kinks = [&quot;submission&quot;]&gt;&gt;\n\t\t&lt;&lt;set _holes = [&quot;pussy&quot;]&gt;&gt;\n\n\t\t/*  Check if she'll do it */\n\t\t&lt;&lt;set _result = Game.resolveSexAct($csi, _kinks, _holes)&gt;&gt;\n\t\t&lt;&lt;if true&gt;&gt;  /* success block */\n\n\t\t/*  If so, describe what's done to her */\n\t\t\t/* base text */\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(10)&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].lust += random(10)&gt;&gt;\n\t\t\t&lt;&lt;if ($slaves[$csi].position==0 || $slaves[$csi].position == 5)&gt;&gt;\n\t\t\t\tYou step up behind her and grab her wrists, holding them behind her back.  You whisper, &quot;I'm going to fuck your &lt;&lt;display &quot;Describe Slave Pussy&quot;&gt;&gt; now,&quot; then bite lightly on her neck.  You rub your cock against her slit from behind, then place it at the opening of her hole.  \n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tHer &lt;&lt;display &quot;Describe Slave Pussy&quot;&gt;&gt; is nicely exposed from behind.  You get behind her, smack her tight ass, rub her asshole for luck, then put your head against her lips.  \n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\tYou ram it home, making sure she knows she's been taken, and grab her hip, then start pounding her pussy, keeping up \n\t\t\t\n\t\t\t&lt;&lt;if $slaves[$csi].lust &gt; 95 &amp;&amp; $slaves[$csi].rulesNoOrgasm == 0&gt;&gt;\n\t\t\t\tuntil she comes, screaming and you thrust into her.  She's &lt;&lt;REgood &quot;glad she's allowed to come, &quot;&gt;&gt;and feels like she could &lt;&lt;OBgood &quot;get used to this.&quot;&gt;&gt;&lt;&lt;orgasm &quot;pussy&quot;&gt;&gt;\n\t\t\t&lt;&lt;elseif $slaves[$csi].lust &gt; 95 &amp;&amp; $slaves[$csi].rulesNoOrgasm == 1&gt;&gt;\n\t\t\t\tuntil she starts to grunt and moan, then shriek, asking you to let her come.  You refuse, and she whimpers in frustration.  \n\t\t\t\t&lt;&lt;if $slaves[$csi].relationship &gt; 20&gt;&gt;\n\t\t\t\t\tBeing made to control herself improves &lt;&lt;OBgood &quot;her obedience.&quot;&gt;&gt;&lt;&lt;set $slaves[$csi].obedience += random(3,12)&gt;&gt;\n\t\t\t\t\t&lt;&lt;elseif random(1,4) == 1&gt;&gt;She comes anyway, rather out of an inability to control herself or an &lt;&lt;OBbad &quot;unwillingness,&quot;&gt;&gt; you don't know.  &lt;&lt;set $slaves[$csi].obedience -= 16&gt;&gt;&lt;&lt;set $slaves[$csi].brokeRule = 1&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tShe controls herself but is &lt;&lt;REbad &quot;frustrated and angry&quot;&gt;&gt; with you.&lt;&lt;set $slaves[$csi].relationship -= random(4, 14)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;elseif $slaves[$csi].lust &gt; 95 &amp;&amp; $slaves[$csi].rulesNoOrgasm == 2&gt;&gt;\n\t\t\t\tuntil she's bucking and screaming.  \n\t\t\t\t&lt;&lt;if $slaves[$csi].relationship &lt; 10&gt;&gt;\n\t\t\t\t\tShe fights it but eventually gives in and screams out, &quot;Please... Master... can I come?&quot; \n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tShe enthusiasticalls screams, &quot;Please, Master, may this little slut come on your cock?&quot;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;if random(1,4) == 1&gt;&gt;\n\t\t\t\t\tJust to fuck with her, you say &quot;No!  Don't come while I use you!&quot;  She's &lt;&lt;REbad &quot;hurt&quot;&gt;&gt; and &lt;&lt;OBbad &quot;frustrated&gt;&gt; with you.  \n\t\t\t\t\t\t&lt;&lt;if random(1,16) == 1&gt;&gt;\n\t\t\t\t\t\t\tThe degradation of asking for and being denied an orgasm has made her crave &lt;&lt;KIgood &quot;humiliation.&quot;&gt;&gt;&lt;&lt;set $slaves[$csi].humiliation += 1&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship -= random(3,10)&gt;&gt;&lt;&lt;set $slaves[$csi].obedience += random(1,8)&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tYou tell her to wait a few times, then give in and let her come.  She's &lt;&lt;OBgood &quot;grateful&quot;&gt;&gt; and &lt;&lt;REgood &quot;happy&quot;&gt;&gt; you let her orgasm. &lt;&lt;set $slaves[$csi].relationship += random(1,6)&gt;&gt;&lt;&lt;set $slaves[$csi].obedience += random(1,6)&gt;&gt;&lt;&lt;orgasm &quot;pussy&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t\t\t/* Losing virginity */\n\t\t\t\t&lt;&lt;if $slaves[$csi].pussySize == 0&gt;&gt;\n\t\t\t\t\tYou're now her &quot;first&quot; and have &lt;&lt;good &quot;taken her virginity.&quot;&gt;&gt;  She is &lt;span class=&quot;obedience_good&quot;&gt;more cooperative&lt;/span&gt; to you and fucking her has &lt;span class=&quot;good&quot;&gt;stretched her hole&lt;/span&gt; out for future use.&lt;&lt;set $slaves[$csi].pussySize = 1&gt;&gt;&lt;&lt;set $slaves[$csi].obedience += 2&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $pc.cockLength &gt; $slaves[$csi].pussySize * 3 + random(0,10)&gt;&gt;&lt;&lt;stretchcunt&gt;&gt;&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t/* effects of barely succeeding */\n\t\t\t\t\n\t\t\t\t/* effects of a big win */\n\t\t\t\n\t\t\t/* effects from kinks */\n\t\t\t/* effects from position */\n\t\t\t&lt;&lt;if $slaves[$csi].submission &gt; 0 &amp;&amp; ($slaves[$csi].posision == 0 || $slaves[$csi].position == 5)&gt;&gt;\n\t\t\t\tBeing submissive, she &lt;&lt;REgood &quot;enjoys being taken&quot;&gt;&gt; like a toy. \n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += 3 * $slaves[$csi].submission&gt;&gt;\n\t\t\t&lt;&lt;elseif $slaves[$csi].submission &gt; 0&gt;&gt;\n\t\t\t\tBeing taken like a dog or animal from behind really makes her &lt;&lt;OBgood &quot;feel submissive&quot;&gt;&gt; and &lt;&lt;REgood &quot;makes her happy.&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += 3* $slaves[$csi].submission&gt;&gt;&lt;&lt;set $slaves[$csi].obedience += $slaves[$csi].submission * 2&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t/* effects from bodywear */\n\t\t\t\n\t\t\t/* effects from furniture */\n\t\t\t\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += 5&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].obedience += 1&gt;&gt;\n\n\t\t/*  If not, describe penalties */\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t/* base text */\n\t\t\tShe won't let you enter her.  She must need to be trained more.\n\n\n\t\t/* Spend time */\n\t\t\n\n\t\t/* End of Conditions block */\n\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t/* success block */\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/replace&gt;&gt;\n\t&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n\t/* links out */\n\t&lt;br&gt;&lt;br&gt;\n\t[[Continue her training|Train Character]]\n\t&lt;&lt;/replace&gt;&gt;</div><div tiddler="Spank Her" tags="nobr">&lt;&lt;replace &quot;#training-text&quot;&gt;&gt;\n&lt;&lt;set $slaves[$csi].pain += random(10)+5&gt;&gt;\n&lt;&lt;set $slaves[$csi].lust += random(1,5)&gt;&gt;\n&lt;&lt;set $slaves[$csi].obedience += 2&gt;&gt;\n\n/* Is this a punishment for refusing? */\n&lt;&lt;if $slaves[$csi].refused || $slaves[$csi].brokeRule&gt;&gt;After the disobedient slut refuses you, you punish her to show her that she should obey you.  You tell &lt;&lt;=$slaves[$csi].name&gt;&gt; that she brought this on herself.  She &lt;span class=&quot;obedience_good&quot;&gt;realizes&lt;/span&gt; that it's the plain truth.&lt;&lt;set $slaves[$csi].obedience += 4&gt;&gt;&lt;&lt;set $slaves[$csi].refused = false&gt;&gt;&lt;&lt;set $slaves[$csi].brokeRule = false&gt;&gt;&lt;&lt;/if&gt;&gt;\n\n/* Effects of Position */\n&lt;&lt;if $slaves[$csi].position == 1 || $slaves[$csi].position == 2 || $slaves[$csi].position == 3 || $slaves[$csi].position == 4 || $slaves[$csi].position == 6&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].position == 0 || $slaves[$csi].position == 5&gt;&gt;She is standing so you step behind her while she nervously strains to avoid turning her head to follow you.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].position == 1&gt;&gt;Since her ass is not availble in her kneeling position you slap her tits and thighs.&lt;&lt;set $slaves[$csi].pain -=5&gt;&gt;&lt;&lt;set $slaves[$csi].lust -= 5&gt;&gt;&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].position == 2 || $slaves[$csi].position == 3 || $slaves[$csi].position == 6&gt;&gt;Being lewdly bent over exposes her &lt;&lt;if $slaves[$csi].lust &gt; 20&gt;&gt;dripping &lt;&lt;elseif $slaves[$csi].lust &gt; 12&gt;&gt;wet &lt;&lt;/if&gt;&gt;cunt to be exposed to some of the stinging slaps.  You use this to torture her sex as well as her ass.\n&lt;&lt;if $slaves[$csi].masochism&gt;&gt;She's a masochist and the additional pain to her cunt in this position &lt;span class=&quot;good&quot;&gt;turns her on&lt;/span&gt;&lt;&lt;if $slaves[$csi].relationship &lt; 20&gt;&gt; despite herself&lt;&lt;/if&gt;&gt; and makes her &lt;span class=&quot;obedience_good&quot;&gt;more obedient&lt;/span&gt;.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].submission&gt;&gt;Since she's submissive, the struggle of remaining in the humiliating position while enduring punishment &lt;span class=&quot;good&quot;&gt;arouse her&lt;/span&gt; and make her &lt;span class=&quot;obedience_good&quot;&gt;more obedient&lt;/span&gt;.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].humiliation&gt;&gt;She likes being humiliated and the exposed position makes her &lt;span class=&quot;good&quot;&gt;wet&lt;/span&gt; and &lt;span class=&quot;obedience_good&quot;&gt;feel degraded&lt;/span&gt;.&lt;&lt;/if&gt;&gt;\n&lt;&lt;set $slaves[$csi].pain += 6&gt;&gt;\n&lt;&lt;set $slaves[$csi].lust += (5 + ($slaves[$csi].masochism * 3) + ($slaves[$csi].submission * 3) + ($slaves[$csi].humiliation * 1))&gt;&gt;\n&lt;&lt;set $slaves[$csi].obedience += ($slaves[$csi].masochism) + ($slaves[$csi].submission) + ($slaves[$csi].humiliation)&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].position == 4&gt;&gt;\nShe's bent over your knees and already waiting for what she knows is coming.\n&lt;&lt;set $slaves[$csi].pain -= 5&gt;&gt; /* less painful position */\n&lt;&lt;if $slaves[$csi].submission&gt;&gt;The submissive position combines with her native submissiveness to &lt;span class=&quot;obedience_good&quot;&gt;make her more obedient&lt;/span&gt;.\n&lt;&lt;set $slaves[$csi].obedience += $slaves[$csi].submission * 3&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n&lt;br&gt;&lt;br&gt;\n&lt;&lt;/if&gt;&gt;/* End of Position Effects */\n\n\n\nYou deliver slap after slap against her quivering ass.  She starts to gasp, then whimper.  Her ass grows red as the beating continues, but you don't stop until dozens of blows have landed on her quivering ass.\n\n\n\n\n\n\n&lt;&lt;/replace&gt;&gt;\n&lt;&lt;replace &quot;#links-text&quot;&gt;&gt;\n&lt;br&gt;&lt;br&gt;\n&lt;&lt;return&gt;&gt;\n&lt;&lt;/replace&gt;&gt;</div><div tiddler="Train Character" tags="nobr">&lt;&lt;set $o = JSON.parse(JSON.stringify($slaves[$csi]))&gt;&gt;\n\t&lt;&lt;if !$slaves[$csi].hasBeenTrained&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].hasBeenTrained = 1&gt;&gt;\n\t\t&lt;&lt;set $slavetrain = $slaves[$csi].name + &quot; First Training&quot;&gt;&gt;\n\t\t&lt;&lt;goto $slavetrain&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;if $hour &lt; 21&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Too Early&quot;&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;goto &quot;Train Slave&quot;&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;</div><div tiddler="Too Early" tags="nobr TimeNone">It's only &lt;&lt;=$hour % 12&gt;&gt; o'clock!  The mall is still open! You can always have sex with &lt;&lt;=$slaves[$csi].name&gt;&gt; later... for now you just want to hang out. &lt;br&gt;\n\t&lt;br&gt;\n\t&lt;br&gt;\n\t[[Dungeon]]&lt;br&gt;\n\t&lt;&lt;if $debugging&gt;&gt;[[Cheat and train her anyway|Train Slave]]&lt;&lt;/if&gt;&gt;</div><div tiddler="First Training" tags="TimeNone">&lt;&lt;=$firstTraining[$slaves[$csi].name]&gt;&gt;\n\n\t&lt;&lt;return&gt;&gt;</div><div tiddler="Train Slave" tags="nobr">&lt;&lt;display &quot;Slave Stats&quot;&gt;&gt;\n\t&lt;br&gt;\n\t&lt;br&gt;\n\tObedience: $slaves[$csi].obedience &lt;&lt;statdiff &quot;obedience&quot;&gt;&gt;&lt;br&gt;\n\tRelationship: $slaves[$csi].relationship &lt;&lt;statdiff &quot;relationship&quot;&gt;&gt;&lt;br&gt;\n\tLust: $slaves[$csi].lust &lt;&lt;statdiff &quot;lust&quot;&gt;&gt;&lt;br&gt;\n\tFear: $slaves[$csi].fear &lt;&lt;statdiff &quot;fear&quot;&gt;&gt;&lt;br&gt;\n\tPain: $slaves[$csi].pain &lt;&lt;statdiff &quot;pain&quot;&gt;&gt;&lt;br&gt;\n\t&lt;br&gt;\n\t&lt;&lt;if $slaves[$csi].oral &gt; 0&gt;&gt;Oral Fetish: $slaves[$csi].oral &lt;&lt;statdiff &quot;oral&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].cum &gt; 0&gt;&gt;Cum Fetish: $slaves[$csi].cum &lt;&lt;statdiff &quot;cum&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].bondage &gt; 0&gt;&gt;Bondage Fetish: $slaves[$csi].bondage &lt;&lt;statdiff &quot;bondage&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].deepthroat &gt; 0&gt;&gt;Deepthroat Fetish: $slaves[$csi].deepthroat &lt;&lt;statdiff &quot;deepthroat&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].anal &gt; 0&gt;&gt;Anal Fetish: $slaves[$csi].anal &lt;&lt;statdiff &quot;anal&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].painal &gt; 0&gt;&gt;Painal Fetish: $slaves[$csi].painal &lt;&lt;statdiff &quot;painal&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].begging &gt; 0&gt;&gt;Begging Fetish: $slaves[$csi].begging &lt;&lt;statdiff &quot;begging&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].humiliation &gt; 0&gt;&gt;Humiliation Fetish: $slaves[$csi].humiliation &lt;&lt;statdiff &quot;humiliation&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].masochism &gt; 0&gt;&gt;Pain Fetish: $slaves[$csi].masochism &lt;&lt;statdiff &quot;masochism&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].housework &gt; 0&gt;&gt;Maid Fetish: $slaves[$csi].housework &lt;&lt;statdiff &quot;housework&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].submission &gt; 0&gt;&gt;Submissive Fetish: $slaves[$csi].submission &lt;&lt;statdiff &quot;submission&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;br&gt;\n\t&lt;&lt;if $slaves[$csi].brokeRule&gt;&gt;She has broken a rule.&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].refused&gt;&gt;She has refused you.&lt;br&gt;&lt;&lt;/if&gt;&gt;\n\t&lt;br&gt;\n\t&lt;&lt;if $slaves[$csi].rulesNoMasturbate&gt;&gt;She is not allowed to masturbate.&lt;&lt;/if&gt;&gt; \n\t&lt;&lt;if $slaves[$csi].rulesNoOrgasm === 1&gt;&gt;She is not allowed to come at all.&lt;&lt;elseif $slaves[$csi].rulesNoOrgasm === 2&gt;&gt;She is only allowed to come with permission.&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].rulesSwallowCum === 0&gt;&gt;She only has to swallow if you cum in her mouth.&lt;&lt;else&gt;&gt;She always has to swallow your cum.&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set $o = $slaves[$csi]&gt;&gt;\n\t&lt;br&gt;\n\t&lt;br&gt;\n\t&lt;&lt;if Story.has($slaves[$csi].name + &quot; Special Training&quot;) &amp;&amp; !$slaves[$csi].doneSpecialTraining&gt;&gt;\n\t\tDo her special training:&lt;br&gt;\n\t\t[[Special Training|Training][$act=$slaves[$csi].name + &quot; Special Training&quot;]]&lt;br&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\tPunish her:&lt;br&gt;\n\t[[Spank her|Training][$act=&quot;Spank Her&quot;]]\n\t&lt;br&gt;Use her holes:&lt;br&gt;\n\t[[Fuck her ass|Training][$act=&quot;Fuck Her Ass&quot;]] | \n\t[[Fuck her mouth|Training][$act=&quot;Blowjob Training&quot;]] | \n\t[[Fuck her pussy|Training][$act=&quot;Fuck Her Pussy&quot;]]\n\t&lt;br&gt;Train her:&lt;br&gt;\n\t[[Set rules for her|Training][$act=&quot;Set Rules for Her&quot;]] | [[Dress Her|Training][$act=&quot;Dress Her&quot;]]\n\t&lt;br&gt;Make her take a position:&lt;br&gt;\n\t[[Stand|Training][$act=&quot;Position Stand&quot;]] |\n\t[[Kneeling|Training][$act=&quot;Position Kneel&quot;]] | \n\t[[All Fours|Training][$act=&quot;Position All Fours&quot;]] |\n\t[[Face Down Ass Up|Training][$act=&quot;Position Ass Up&quot;]] | \n\t[[Over Knee|Training][$act=&quot;Position Over Knee&quot;]] | \n\t[[Inspection|Training][$act=&quot;Position Inspection&quot;]] |\n\t[[Bent Over|Training][$act=&quot;Position Bent Over&quot;]]&lt;br&gt;\n\t&lt;br&gt;&lt;br&gt;\n\t[[Dungeon]]</div><div tiddler="Training" tags="nobr">&lt;&lt;run Game.passTime(15)&gt;&gt;\n\t&lt;div id=&quot;training-text&quot;&gt;\n\t\t\n\t&lt;/div&gt;\n\t&lt;div id=&quot;links-text&quot;&gt;\n\n\t&lt;/div&gt;&lt;br&gt;</div><div tiddler="WidgetCum" tags="widget nobr">&lt;&lt;widget &quot;cum&quot;&gt;&gt;\n\t&lt;&lt;set _hole = $args[0] || &quot;pussy&quot;&gt;&gt;\n\t&lt;&lt;switch _hole&gt;&gt;\n\t\t&lt;&lt;case &quot;mouth&quot;&gt;&gt;\n\t\t\t&lt;&lt;swallow&gt;&gt;\n\t\t\t&lt;&lt;if $pc.path === &quot;Virility&quot;&gt;&gt;\n\t\t\t\tThe @@.virility;Mother of Virility approves of cum@@ in slave mouths. \n\t\t\t\t&lt;&lt;set $pc.power += random(2) + 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;case &quot;ass&quot; &quot;asshole&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $pc.path === &quot;Virility&quot;&gt;&gt;\n\t\t\t\tThe @@.virility;Mother of Virility approves of cum@@ in slave assholes. \n\t\t\t\t&lt;&lt;set $pc.power += random(2) + 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;case &quot;pussy&quot; &quot;cunt&quot;&gt;&gt;\n\t\t\t&lt;&lt;if !$slaves[$csi].isPregnant&gt;&gt;\n\t\t\t\t&lt;&lt;if $pc.path === &quot;Virility&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;if random(50) &lt; 4&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;impregnate&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t&lt;&lt;if random(50) &lt; 2&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;impregnate&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $pc.path === &quot;Virility&quot;&gt;&gt;\n\t\t\t\tThe @@.virility;Mother of Virility strongly approves of cum@@ in slave cunts. \n\t\t\t\t&lt;&lt;set $pc.power += random(4) + 2&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\n\t&lt;&lt;/switch&gt;&gt;\n\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetDescribeHole" tags="nobr widget">&lt;&lt;widget describehole&gt;&gt;\n\t&lt;&lt;set _orifaceSize = [&quot;tight, virginal&quot;, &quot;tight&quot;, &quot;slightly used&quot;, &quot;well-used&quot;, &quot;loose, gaping&quot;, &quot;stretched and permanently gaping&quot;]&gt;&gt;\n\t&lt;&lt;=_orifaceSize[$slaves[$csi][$args[0] + &quot;Size&quot;]]&gt;&gt; $args[0]\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetExercisekink" tags="widget nobr">&lt;&lt;widget &quot;exercisekink&quot;&gt;&gt;\n\t&lt;&lt;set _kink = $args[0]&gt;&gt;\n\t&lt;&lt;if $args.length &gt; 1&gt;&gt;\n\t\t&lt;&lt;set _strength = $args[1]&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set _strength = 1&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;if random(300) - (_strength * 10) &lt; ($slaves[$csi].obedience + $slaves[$csi].lust + $slaves[$csi].relationship)&gt;&gt;\n\t\t&lt;&lt;switch _kink&gt;&gt;\n\t\t\t&lt;&lt;case &quot;cum&quot;&gt;&gt;\n\t\t\t\t@@.good;&lt;&lt;=[&quot;She's started to get a taste for cum.&quot;,&quot;She loves cum even more now that she's had so much of yours fucked down her throat.&quot;,&quot;She's a total cum whore now that you've filled her belly with your seed.&quot;][$slaves[$csi].cum]&gt;&gt;@@\n\t\t\t\t&lt;&lt;if $slaves[$csi].cum &gt;= 0&gt;&gt;\n\t\t\t\t\tShe's becoming &lt;&lt;if $slaves[$csi].cum == 0 &gt;&gt;a cumslut.&lt;&lt;else&gt;&gt;more of a cumslut.&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].cum += 1&gt;&gt;\n\t\t\t\t\t&lt;&lt;if $slaves[$csi].cum &gt; 3&gt;&gt;\n\t\t\t\t\t\t&lt;&lt;set $slaves[$csi].cum = 3&gt;&gt;\n\t\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tShe's lost her hatred of cum.\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].cum = 0&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random(6) + 1&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(4)&gt;&gt;\n\t\t\t&lt;&lt;case &quot;anal&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;if $slaves[$csi].anal === 0&gt;&gt;\n\t\t\t\t\t@@.good;She begins to fetishize getting a cock up her ass.@@\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].anal += 1&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $slaves[$csi].anal &lt; 0&gt;&gt;\n\t\t\t\t\t@@.good;Having your cock up her ass has made her lose her hatred of anal sex.@@\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].anal = 0&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $slaves[$csi].anal &lt; 2&gt;&gt;\n\t\t\t\t\t@@.good;Being buttfucked increases her love of hard cocks in her asshole.@@\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].anal += 1&gt;&gt;\n\t\t\t\t&lt;&lt;elseif $slaves[$csi].anal === 2&gt;&gt;\n\t\t\t\t\t@@.good;She's become a total buttslut and prefers a cock in her ass to any other hole.@@\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].anal = 3&gt;&gt;\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\t@@.good;She loves being assfucked so much she becomes more obedient and loving to you.@@\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].anal = 3&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random(3,7)&gt;&gt;\n\t\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(2,10)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;case &quot;painal&quot;&gt;&gt;\n\t\t&lt;&lt;/switch&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetImpregnate" tags="nobr widget">&lt;&lt;widget &quot;impregnate&quot;&gt;&gt;\n\t\t&lt;&lt;if $pc.path === &quot;Virility&quot;&gt;&gt;\n\t\t\tYou seed shoots into her womb, powered by the grace of the @@.virility;Mother of Virility.@@ It finds her egg and with an electric shock through both you and &lt;&lt;=$slaves[$csi].name&gt;&gt; makes her @@.good;pregnant!@@  The power of the @@.virility;Mother@@ is such that both of you are immediately aware and you gain a @@.good;great deal@@ of power and she is &lt;&lt;if $slaves[$csi].relationship &gt; 0&gt;&gt;very&lt;&lt;else&gt;&gt;perversely&lt;&lt;/if&gt;&gt; happy!\n\t\t\t&lt;&lt;set $pc.power += random (16) + 8&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(16) + 8&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\tYou cum in her pussy.  Your magic reveals that your seed has found her egg.  You tell her, and while she's not sure she believes you,\n\t\t\t&lt;&lt;if $slaves[$csi].relationship &gt; 0&gt;&gt;\n\t\t\t\tshe's @@.relationship-good;happy@@ to be carrying your spawn.\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random (6, 16)&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t@@.fear-high;terrified@@ you have knocked her up.\n\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random(6,16)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].isPregnant = true&gt;&gt;\n\t&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetLoseVirginity" tags="nobr widget">&lt;&lt;widget &quot;losevirginity&quot;&gt;&gt;\n\t&lt;&lt;set _hole = $args[0] || &quot;cunt&quot;&gt;&gt;\n\t&lt;&lt;switch _hole&gt;&gt;\n\t\t&lt;&lt;case &quot;pussy&quot; &quot;cunt&quot;&gt;&gt;\n\t\t\t$slaves[$csi].name has been @@.good;fucked in the _hole for the first time.@@\n\t\t\t&lt;&lt;set $slaves[$csi].pussySize = 1&gt;&gt;\n\t\t\t&lt;&lt;if $slaves[$csi].relationship &gt; 20 || $slaves[$csi].lust - $o.lust &gt; 5&gt;&gt;\n\t\t\t\tShe's @@.relationship-good;happy@@ you've taken her virginity.\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(4) + 4&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tShe's @@.fear-low;afraid@@ of you using her cunt.\n\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random(4) + 4&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;case &quot;ass&quot; &quot;asshole&quot;&gt;&gt;\n\t\t\t$slaves[$csi].name has been @@.good;fucked in the _hole for the first time.@@\n\t\t\t&lt;&lt;set $slaves[$csi].assholeSize = 1&gt;&gt;\n\t\t\t&lt;&lt;if $slaves[$csi].relationship &gt; 20 || $slaves[$csi].lust - $o.lust &gt; 5&gt;&gt;\n\t\t\t\tShe's @@.relationship-good;happy@@ you've taken her anal virginity.\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(4) + 4&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tShe's @@.fear-low;afraid@@ of you using her ass.\n\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random(4) + 4&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/switch&gt;&gt;\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetOrgasm" tags="nobr widget">&lt;&lt;widget &quot;orgasm&quot;&gt;&gt;\n\t&lt;&lt;set _hole = $args[0] || &quot;cunt&quot;&gt;&gt;\n\t&lt;&lt;switch _hole&gt;&gt;\n\t\t&lt;&lt;case &quot;cunt&quot; &quot;pussy&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $slaves[$csi].lust &gt; 60&gt;&gt;\n\t\t\t\tThe powerful orgasm makes her @@.relationship-good;like you@@ more and makes her @@.obedience-good;more submissive.@@\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(4,16)&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random(1,4)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].lust = Math.floor($slaves[$csi]. lust * 2 / 3)&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(6)&gt;&gt;\n\n\t\t&lt;&lt;case &quot;mouth&quot;&gt;&gt;\n\t\t\tComing just from having her mouth fucked makes her @@.relationship-good;like you@@ more and makes her @@.obedience-good;obey you.@@\n\t\t\t&lt;&lt;if $slaves[$csi].lust &gt; 60&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(3,12)&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random(2,8)&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].lust = Math.floor($slaves[$csi]. lust * 2 / 3)&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(6)&gt;&gt;\n\t\t\t&lt;&lt;exercisekink &quot;oral&quot;&gt;&gt;\n\t\t&lt;&lt;case &quot;asshole&quot; &quot;ass&quot;&gt;&gt;\n\t\t\t&lt;&lt;exercisekink &quot;anal&quot;&gt;&gt;\n\t\t\t&lt;&lt;if $slaves[$csi].pain - $o.pain &gt; 8&gt;&gt;\n\t\t\t\t&lt;&lt;exercisekink &quot;painal&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;if $slaves[$csi].lust &gt; 60&gt;&gt;\n\t\t\t\tThe powerful anal orgasm makes her @@.relationship-good;like you@@ more and makes her @@.obedience-good;much more submissive.@@\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(2,8)&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random(3,12)&gt;&gt;\n\t\t\t\t&lt;&lt;exercisekink &quot;anal&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].lust = Math.floor($slaves[$csi]. lust * 2 / 3)&gt;&gt;\n\t\t\n\t\t\t\n\t&lt;&lt;/switch&gt;&gt;\n\t\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetPenetrate" tags="nobr widget">&lt;&lt;widget &quot;penetrate&quot;&gt;&gt;\n\t&lt;&lt;set _hole = $args[0]&gt;&gt;\n\t&lt;&lt;set _tool = $args[1] || &quot;cock&quot;&gt;&gt;\n\t&lt;&lt;if $args[2] == &quot;force&quot;&gt;&gt;\n\t\t&lt;&lt;set _force = true&gt;&gt;\n\t&lt;&lt;else&gt;&gt;\n\t\t&lt;&lt;set _force = false&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;set _size = 0&gt;&gt;\n\t&lt;&lt;switch _tool&gt;&gt;\n\t\t&lt;&lt;case &quot;cock&quot;&gt;&gt;\n\t\t\t&lt;&lt;set _size = $pc.cockLength&gt;&gt;\n\t\t&lt;&lt;case &quot;slave Eva&quot;&gt;&gt;\n\t\t\t&lt;&lt;set _size = 12&gt;&gt; /* for first training scene with Bree when Eva is present. */\n\t\t&lt;&lt;default&gt;&gt;\n\t\t\t&lt;&lt;set _size = 5&gt;&gt;\n\t&lt;&lt;/switch&gt;&gt;\n\n\t&lt;&lt;switch _hole&gt;&gt;\n\t\t&lt;&lt;case &quot;cunt&quot; &quot;pussy&quot;&gt;&gt;\n\t\t\t&lt;&lt;set _pain = (_size + random(6)) * 2 / 3&gt;&gt;\n\t\t\t&lt;&lt;set _pain -= 3 * $slaves[$csi].pussySize&gt;&gt;\n\t\t\t&lt;&lt;if _pain &lt; 0&gt;&gt;\n\t\t\t\tHer cunt easilly accomodates your _tool.\n\t\t\t&lt;&lt;elseif _pain &lt; 5&gt;&gt;\n\t\t\t\tYour _tool is large for such a tight hole, causing her @@.pain-low;some pain.@@\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYour _tool is very large for her hole, causing her @@.pain-moderate;quite a bit of pain.@@\n\t\t\t&lt;&lt;/if&gt;&gt;\t\t\t\t\n\n\t\t\t/* check for virginity and stretching */\n\t\t\t&lt;&lt;if $slaves[$csi].pussySize === 0 &amp;&amp; _size &gt; 5&gt;&gt;\n\t\t\t\t&lt;&lt;losevirginity &quot;pussy&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;stretchhole &quot;pussy&quot;&gt;&gt;\n\t\t\t&lt;&lt;elseif $slaves[$csi].pussySize != 0&gt;&gt;\n\t\t\t\t&lt;&lt;if random(30) &lt; _pain&gt;&gt;\n\t\t\t\t\t&lt;&lt;stretchhole &quot;pussy&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set _pain += random(6)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t/* add to counters */\n\t\t\t&lt;&lt;if _size &gt; 5&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].hasPussyFucked += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $slaves[$csi].penetration &gt; 0 &amp;&amp; _pain &gt; 0&gt;&gt;\n\t\t\t\tShe's a size queen, and the _tool in her cunt is large enough to hurt... just the way she likes it.  She's @@.lust-good;excited@@ and @@.relationship-good;happy@@ to have her cunt filled.\n\t\t\t\t&lt;&lt;set $slaves[$csi].lust += random(_size) + _size&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += _size&gt;&gt;\n\t\t\t&lt;&lt;elseif $slaves[$csi].penetration &lt; 0 &amp;&amp; _pain &gt; 0&gt;&gt;\n\t\t\t\tShe hates large penetration of her holes, and your _tool is big enough to hurt.  She screeches in pain and is @@.fear-low;afraid@@ you'll keep stuffing her holes full.\n\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random(_size) + _size&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;set _lust = _size + random(_size) + random(_pain)&gt;&gt;\n\t\t\t&lt;&lt;if _lust &gt; 12&gt;&gt;\n\t\t\t\tShe loves being fucked\n\t\t\t\t&lt;&lt;if _pain  &gt; 5 &amp;&amp; $slaves[$csi].masochism &gt; 0&gt;&gt;\n\t\t\t\t\tin part because of the pain.\n\t\t\t\t&lt;&lt;elseif _pain &gt; 5&gt;&gt;\n\t\t\t\t\tin spite of the pain.\n\t\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t\tin the pussy.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random(_lust) + 2&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].lust += _lust&gt;&gt;\n\n\t\t\n\t\t&lt;&lt;case &quot;asshole&quot;&gt;&gt;\n\t\t\t/* get the pain for large tools */\n\t\t\n\t\t\t&lt;&lt;set _pain = _size + random(6)&gt;&gt;\n\t\t\t&lt;&lt;set _pain -= 3 * $slaves[$csi].assholeSize&gt;&gt;\n\t\t\t&lt;&lt;if _pain &lt; 0&gt;&gt;\n\t\t\t\t&lt;&lt;set _pain = 0&gt;&gt;\n\t\t\t\tHer asshole easily accomodates your _tool.\n\t\t\t&lt;&lt;elseif _pain &lt; 5&gt;&gt;\n\t\t\t\tYour _tool is large for such a tight asshole, causing her @@.pain-low;some pain.@@\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tYour _tool is very large for her hole, causing her @@.pain-moderate;quite a bit of pain.@@\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t/* check for virginity and stretching */\n\t\t\t&lt;&lt;if $slaves[$csi].assholeSize === 0 &amp;&amp; _size &gt; 5&gt;&gt;\n\t\t\t\t&lt;&lt;losevirginity &quot;asshole&quot;&gt;&gt;\n\t\t\t\t&lt;&lt;stretchhole &quot;asshole&quot;&gt;&gt;\n\t\t\t&lt;&lt;elseif $slaves[$csi].assholeSize != 0&gt;&gt;\n\t\t\t\t&lt;&lt;if random(30) &lt; _pain&gt;&gt;\n\t\t\t\t\t&lt;&lt;stretchhole &quot;asshole&quot;&gt;&gt;\n\t\t\t\t\t&lt;&lt;set _pain += random(6)&gt;&gt;\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\n\t\t\t/* add to counters */\n\t\t\t&lt;&lt;if _size &gt; 5&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].hasAssFucked += 1&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\n\t\t\t&lt;&lt;if $slaves[$csi].penetration &gt; 0 &amp;&amp; _pain &gt; 0&gt;&gt;\n\t\t\t\tShe's a size queen, and the _tool in her ass is large enough to hurt... just the way she likes it.  She's @@.lust-good;excited@@ and @@.relationship-good;happy@@ to have her ass filled.\n\t\t\t\t&lt;&lt;set $slaves[$csi].lust += random(_size) + _size&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += _size&gt;&gt;\n\t\t\t&lt;&lt;elseif $slaves[$csi].penetration &lt; 0 &amp;&amp; _pain &gt; 0&gt;&gt;\n\t\t\t\tShe hates large penetration of her holes, and your _tool is big enough to hurt.  She screeches in pain and is @@.fear-low;afraid@@ you'll keep stuffing her holes full.\n\t\t\t\t&lt;&lt;set $slaves[$csi].fear += random(_size) + _size&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\t\t\t\n\t\t\t/* modify lust, pain */\n\t\t\t&lt;&lt;if random(8) &gt; _pain / ($slaves[$csi].anal + $slaves[$csi].painal * 2 + $slaves[$csi].masochism + 1)&gt;&gt;\n\t\t\t\tShe @@.lust-low;moans@@ as she takes &lt;&lt;=_tool === &quot;cock&quot; ? &quot;your cock&quot; : &quot;the &quot; + _tool&gt;&gt; up her ass.\n\t\t\t\t&lt;&lt;set $slaves[$csi].lust += random(Math.floor(_pain / 2)) + random(7)&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].pain += Math.floor(_pain / ($slaves[$csi].anal + $slaves[$csi].painal * 2 + $slaves[$csi].masochism + 1))&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\tShe @@.pain-moderate;screeches@@ as you painfully thrust &lt;&lt;=_tool === &quot;cock&quot; ? &quot;your cock&quot; : &quot;the &quot; + _tool&gt;&gt; deep into her asshole, stretching her and making her suffer.\n\t\t\t\t&lt;&lt;set $slaves[$csi].pain += Math.floor(_pain / ($slaves[$csi].anal + $slaves[$csi].painal * 2 + $slaves[$csi].masochism + 1)) + random(4)&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].lust += (random(12) - _pain)&gt;&gt;\n\t\t\t\t&lt;&lt;if $slaves[$csi].lust - $o.lust &gt; $slaves[$csi].pain - $o.pain&gt;&gt;\n\t\t\t\t\tEven through the pain she @@.lust-moderate;enjoys@@ her hole being violated.\n\t\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;if $slaves[$csi].anal &lt; 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random($slaves[$csi].anal * 5)&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random($slaves[$csi].anal * 6)&gt;&gt;\n\t\t\t\tShe @@.relationship-bad;hates being buttfucked@@ and hates you a bit more, too.\n\t\t\t&lt;&lt;elseif $slaves[$csi].anal &gt; 0&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].relationship += random($slaves[$csi].anal * 5)&gt;&gt;\n\t\t\t\t&lt;&lt;set $slaves[$csi].obedience += random($slaves[$csi].anal * 6)&gt;&gt;\n\t\t\t\tShe @@.relationship-good;loves your cock up her ass@@ and you a little more with it.\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t\t\n\t\t\t\n\t\t&lt;&lt;case &quot;mouth&quot;&gt;&gt;\n\t\t\n\t&lt;&lt;/switch&gt;&gt;\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetStretchhole" tags="nobr widget">&lt;&lt;widget &quot;stretchhole&quot;&gt;&gt;\n\t&lt;&lt;set _hole = $args[0] || &quot;cunt&quot;&gt;&gt;\n\t\n\t$slaves[$csi].name's _hole has been @@.good;stretched out.@@\n\t\n\t&lt;&lt;switch _hole&gt;&gt;\n\t\t&lt;&lt;case &quot;cunt&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].pussySize += 1&gt;&gt;\n\t\t&lt;&lt;case &quot;asshole&quot;&gt;&gt;\n\t\t\t&lt;&lt;set $slaves[$csi].assholeSize += 1&gt;&gt;\n\t&lt;&lt;/switch&gt;&gt;\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetSwallow" tags="widget nobr">&lt;&lt;widget &quot;swallow&quot;&gt;&gt;\n\t&lt;&lt;set $slaves[$csi].hasSwallowedCum += 1&gt;&gt;\n\t&lt;&lt;exercisekink &quot;cum&quot;&gt;&gt;\n\t&lt;&lt;if $slaves[$csi].cum &gt; 0&gt;&gt;\n\t\t&lt;&lt;= [&quot;She @@.relationship-good;loves swallowing your cum@@ and is a bit @@.obedience-good;more submissive@@ when she does&quot;,\n\t\t\t&quot;She @@.relationship-good;happily@@ gulps down your cum and @@.obedience-good;thanks you@@ for coming in her mouth.&quot;,\n\t\t\t&quot;She licks @@.relationship-good;every drop of cum@@ off her lips and looks at you in @@.obedience-good;complete submission.&quot;][$slaves[$csi].cum]&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].obedience += random($slaves[$csi].cum, $slaves[$csi].cum * 5)&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].relationship += random($slaves[$csi].cum, $slaves[$csi].cum * 6)&gt;&gt;\n\t\t&lt;&lt;set $slaves[$csi].lust += random($slaves[$csi].cum * 3)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetDiff" tags="nobr widget">&lt;&lt;widget &quot;diff&quot;&gt;&gt;\n\n&lt;&lt;if $args[0] - $args[1] &gt; 0&gt;&gt;\n@@.good;(+&lt;&lt;=$args[0] - $args[1]&gt;&gt;)@@\n&lt;&lt;elseif $args[0] - $args[1] &lt; 0&gt;&gt;\n@@.bad;(&lt;&lt;=$args[0] - $args[1]&gt;&gt;)@@\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget &quot;vaguediff&quot;&gt;&gt;\n\n&lt;&lt;if $args[0] - $args[1] &gt; 0&gt;&gt;\n@@.good;(+)@@\n&lt;&lt;elseif $args[0] - $args[1] &lt; 0&gt;&gt;\n@@.bad;(-)@@\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget &quot;statdiff&quot;&gt;&gt;\n\n\t&lt;&lt;set _stat = $args[0]&gt;&gt;\n\t&lt;&lt;set _newstat = $slaves[$csi][_stat]&gt;&gt;\n\t&lt;&lt;diff _newstat $o[_stat]&gt;&gt;\n\t\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget &quot;vaguestatdiff&quot;&gt;&gt;\n\n\t&lt;&lt;set _stat = $args[0]&gt;&gt;\n\t&lt;&lt;set _newstat = $slaves[$csi][_stat]&gt;&gt;\n\t&lt;&lt;vaguediff _newstat $o[_stat]&gt;&gt;\t\n\t\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetCSS" tags="widget nobr TimeNone">&lt;&lt;widget bad&gt;&gt;\n&lt;span class=&quot;bad&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget good&gt;&gt;\n&lt;span class=&quot;good&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget OBbad&gt;&gt;\n&lt;span class=&quot;obedience_bad&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget OBverybad&gt;&gt;\n&lt;span class=&quot;obedience_very_bad&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget OBgood&gt;&gt;\n&lt;span class=&quot;obedience_good&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget OBverygood&gt;&gt;\n&lt;span class=&quot;obedience_very_good&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget OBexcellent&gt;&gt;\n&lt;span class=&quot;obedience_excellent&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget OBperfect&gt;&gt;\n&lt;span class=&quot;obedience_perfect&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget PAverylow&gt;&gt;\n&lt;span class=&quot;pain_very_low&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget PAlow&gt;&gt;\n&lt;span class=&quot;pain_low&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget PAmod&gt;&gt;\n&lt;span class=&quot;pain_moderate&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget PAhigh&gt;&gt;\n&lt;span class=&quot;pain_high&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget PAveryhigh&gt;&gt;\n&lt;span class=&quot;pain_very_high&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget FEverylow&gt;&gt;\n&lt;span class=&quot;fear_very_low&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget FElow&gt;&gt;\n&lt;span class=&quot;fear_low&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget FEmod&gt;&gt;\n&lt;span class=&quot;fear_moderate&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget FEhigh&gt;&gt;\n&lt;span class=&quot;fear_high&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget FEveryhigh&gt;&gt;\n&lt;span class=&quot;fear_very_high&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget REgood&gt;&gt;\n&lt;span class=&quot;relationship_good&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget REmod&gt;&gt;\n&lt;span class=&quot;relationship_moderate&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget REbad&gt;&gt;\n&lt;span class=&quot;relationship_bad&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget REverybad&gt;&gt;\n&lt;span class=&quot;relationship_very_bad&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget REverygood&gt;&gt;\n&lt;span class=&quot;relationship_very_good&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget KIbad&gt;&gt;\n&lt;span class=&quot;kink_bad&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget KIgood&gt;&gt;\n&lt;span class=&quot;kink_good&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget POgood&gt;&gt;\n&lt;span class=&quot;good&quot;&gt;&lt;&lt;=$args[0]&gt;&gt;&lt;/span&gt;\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="Describe Character">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;=$currentCharacter.name&gt;&gt; is here.  \n\n/* relationship */\n&lt;&lt;He&gt;&gt; is \n&lt;&lt;if $currentCharacter.relationship &lt; 10&gt;&gt;\n\t&lt;span class=&quot;uninterested&quot;&gt;\n\t&lt;&lt;=either(&quot;apathethic to&quot;,&quot;uninterested in&quot;,&quot;unconcerned with&quot;)&gt;&gt;\n\t&lt;/span&gt;\n&lt;&lt;elseif $currentCharacter.relationship &lt;= 20&gt;&gt;\n\t&lt;span class=&quot;interested&quot;&gt;\n\t&lt;&lt;=either(&quot;interested in&quot;,&quot;friendly to&quot;,&quot;welcoming to&quot;)&gt;&gt;\n\t&lt;/span&gt;\n&lt;&lt;elseif $currentCharacter.relationship &lt;= 30&gt;&gt;\n\t&lt;span class=&quot;interested&quot;&gt;\n\t&lt;&lt;=either(&quot;excited to see&quot;,&quot;glad to see&quot;)&gt;&gt;&lt;/span&gt;\n&lt;&lt;elseif $currentCharacter.relationship &gt; 30&gt;&gt;\n\t&lt;span class=&quot;excited&quot;&gt;\n\t&lt;&lt;=either(&quot;blushing to see&quot;,&quot;wet when she sees&quot;,&quot;stammering to talk to&quot;)&gt;&gt;&lt;/span&gt;\n&lt;&lt;/if&gt;&gt;you.\n&lt;&lt;/nobr&gt;&gt;\n\n&lt;&lt;nobr&gt;&gt;\n/* Face */\n&lt;&lt;He&gt;&gt; has a &lt;&lt;=$currentCharacter.face&gt;&gt;, &lt;&lt;=$currentCharacter.skin&gt;&gt; face\n&lt;&lt;if $currentCharacter.facialPiercings&gt;&gt;with &lt;&lt;=$currentCharacter.facialPiercings&gt;&gt;.&lt;&lt;else&gt;&gt;. &lt;&lt;/if&gt;&gt;\n\n&lt;&lt;Her&gt;&gt; hair is &lt;&lt;=$currentCharacter.hairLength&gt;&gt;, &lt;&lt;=$currentCharacter.hairColor&gt;&gt;, and cut &lt;&lt;=$currentCharacter.hairCut&gt;&gt;.\n\n/* Body */\n&lt;&lt;He&gt;&gt; is \n\t&lt;&lt;if $currentCharacter.bodySize == 0&gt;&gt;emaciated\n\t&lt;&lt;elseif $currentCharacter.bodySize == 1&gt;&gt;rail thin\n\t&lt;&lt;elseif $currentCharacter.bodySize == 2&gt;&gt;thin\n\t&lt;&lt;elseif $currentCharacter.bodySize == 3&gt;&gt;pleasantly curved\n\t&lt;&lt;elseif $currentCharacter.bodySize == 4&gt;&gt;plush\n\t&lt;&lt;elseif $currentCharacter.bodySize == 5&gt;&gt;overweight\n\t&lt;&lt;elseif $currentCharacter.bodySize == 6&gt;&gt;fat\n\t&lt;&lt;elseif $currentCharacter.bodySize == 7&gt;&gt;very fat\n\t&lt;&lt;/if&gt;&gt;\n\t\n\twith\n\t&lt;&lt;if $currentCharacter.bodyTone == 0&gt;&gt;no body tone.\n\t&lt;&lt;elseif $currentCharacter.bodyTone == 1&gt;&gt;slight muscles.\n\t&lt;&lt;elseif $currentCharacter.bodyTone == 2&gt;&gt;firm muscles.\n\t&lt;&lt;elseif $currentCharacter.bodyTone == 3&gt;&gt;solid muscles.\n\t&lt;&lt;elseif $currentCharacter.bodyTone == 4&gt;&gt;a ripped body.\n\t&lt;&lt;/if&gt;&gt;\n\t\n/* Tits */\n&lt;&lt;He&gt;&gt; has \n&lt;&lt;if $currentCharacter.titsSize == 0&gt;&gt; a flat chest\n\t&lt;&lt;elseif $currentCharacter.titsSize == 1&gt;&gt; small, barely rounded tits\n\t&lt;&lt;elseif $currentCharacter.titsSize == 2&gt;&gt; small, &lt;&lt;=$currentCharacter.titsShape&gt;&gt; tits\n\t&lt;&lt;elseif $currentCharacter.titsSize == 3&gt;&gt; &lt;&lt;=$currentCharacter.titsShape&gt;&gt;, B cup tits\n\t&lt;&lt;elseif $currentCharacter.titsSize == 4&gt;&gt; &lt;&lt;=$currentCharacter.titsShape&gt;&gt;, C cup tits\n\t&lt;&lt;elseif $currentCharacter.titsSize == 5&gt;&gt; &lt;&lt;=$currentCharacter.titsShape&gt;&gt;, full C cup tits\t&lt;&lt;elseif $currentCharacter.titsSize == 6&gt;&gt; large &lt;&lt;=$currentCharacter.titsShape&gt;&gt; D cup tits\n\t&lt;&lt;elseif $currentCharacter.titsSize == 7&gt;&gt; large pendulous &lt;&lt;=$currentCharacter.titsshape&gt;&gt; DD cup tits\n&lt;&lt;/if&gt;&gt;\n\t\n&lt;&lt;if $currentCharacter.clothingRevealing&gt;&gt;\n\t with $currentCharacter.nippleSize, $currentCharacter.nippleColor nipples with $currentCharacter.nippleAreolae areolae. \n\t &lt;&lt;if $currentCharacter.nipplePeircings&gt;&gt; &lt;&lt;He&gt;&gt; has $currentCharacter.nipplePericings in &lt;&lt;her&gt;&gt; nipples. &lt;&lt;/if&gt;&gt;\n&lt;&lt;else&gt;&gt;. \n&lt;&lt;/if&gt;&gt;\n\n/* Stomach */\n&lt;&lt;He&gt;&gt; has a \n&lt;&lt;set _stomach = [&quot;narrow&quot;,&quot;flat&quot;,&quot;sligtly rounded&quot;,&quot;rounded&quot;,&quot;fat&quot;,&quot;very fat&quot;]&gt;&gt;\n&lt;&lt;=_stomach[$currentCharacter.bodySize]&gt;&gt; stomach with\n&lt;&lt;set _stomachMuscles = [&quot;no muscles&quot;, &quot;very little abs&quot;, &quot;noticable abs&quot;, &quot;firm abs&quot;, &quot;six pack abs&quot;]&gt;&gt;\n&lt;&lt;=_stomachMuscles[$currentCharacter.bodyTone]&gt;&gt;.\n\n/* Navel */\n&lt;&lt;if $currentCharacter.clothingRevealing&gt;&gt;\n&lt;&lt;if $currentCharacter.navelPiercings&gt;&gt;&lt;&lt;He&gt;&gt; has a $currentCharacter.navelPiercings in &lt;&lt;his&gt;&gt; navel.&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n/* Pussy */\n&lt;&lt;if $currentCharacter.clothingRevealing&gt;&gt;\n  &lt;&lt;if $currentCharacter.gender == &quot;female&quot;&gt;&gt;\n\t&lt;&lt;He&gt;&gt; has a \n\t&lt;&lt;set _orifaceSize = [&quot;tight, virginal&quot;, &quot;tight&quot;, &quot;slightly used&quot;, &quot;well-used&quot;, &quot;loose, gaping&quot;, &quot;stretched and permanently gaping&quot;]&gt;&gt;\n\t&lt;&lt;=_orifaceSize[$currentCharacter.pussySize]&gt;&gt; pussy\n\n\t&lt;&lt;if $currentCharacter.pussyHairStyle neq 0&gt;&gt;\n\t\twith a \n\t\t&lt;&lt;set _pubicHairStyle = [&quot;shaved&quot;, &quot;landing strip&quot;, &quot;neatly trimmed patch&quot;, &quot;full bush&quot;]&gt;&gt;\n\t&lt;&lt;=_pubicHairStyle[$currentCharacter.pussyHairStyle]&gt;&gt;\n\tof $currentCharacter.pussyHairColor pubic hair.\n\t&lt;&lt;else&gt;&gt;.  &lt;&lt;He&gt;&gt; is shaved.\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;He&gt;&gt; has \n\t&lt;&lt;set _labiaSize = [&quot;small&quot;, &quot;protruding&quot;, &quot;long&quot;, &quot;large protruding&quot;]&gt;&gt;&lt;&lt;=_labiaSize[$currentCharacter.pussyLips]&gt;&gt; pussy lips and a \n\t&lt;&lt;set _clitSize = [&quot;tiny&quot;, &quot;small&quot;, &quot;large&quot;, &quot;engorged&quot;, &quot;engorged, protruding&quot;]&gt;&gt;&lt;&lt;=_clitSize[$currentCharacter.pussyClit]&gt;&gt; clit.\n\t\n\t&lt;&lt;if $currentCharacter.pussyClitPeircing&gt;&gt;\n\t\t&lt;&lt;He&gt;&gt; has a \n\t\t&lt;&lt;set _clitPeircing = [&quot;&quot;, &quot;small stud&quot;, &quot;small ring&quot;, &quot;small bar&quot;, &quot;large, thick ring&quot;, &quot;heavy bar&quot;, &quot;magical heavy bar&quot;]&gt;&gt;\n\t\t&lt;&lt;=_clitPeircing[$currentCharacter.pussyClitPeircing]&gt;&gt; peircing &lt;&lt;his&gt;&gt; &lt;&lt;=_clitSize[$currentCharacter.pussyClit]&gt;&gt; clit.  \n\t\t&lt;&lt;if $currentCharacter.pussyClitPeircing &gt; 3&gt;&gt;The heavy peircing tugs at &lt;&lt;his&gt;&gt; clit, &lt;span class=&quot;good&quot;&gt;making &lt;&lt;him&gt;&gt; incredibly horny.&lt;/span&gt;  &lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;if $currentCharacter.pussyClitPeircing == 6&gt;&gt;The magical bar delivers &lt;span class=&quot;excellent&quot;&gt;shocking pain or thrumming pleasure&lt;/span&gt; to &lt;&lt;him&gt;&gt; at your whim, allowing you to &lt;span class=&quot;excellent&quot;&gt;train&lt;/span&gt; &lt;&lt;him&gt;&gt; through her helpless slave cunt.  &lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;if $currentCharacter.pussyLabiaStudsNumber&gt;&gt;\n\t&lt;&lt;He&gt;&gt; has &lt;&lt;=$numeralsWithA[$currentCharacter.pussyLabiaStudsNumber]&gt;&gt; studs in &lt;&lt;his&gt;&gt; labia.\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;if $currentCharacter.pussyLabiaRingsNumber&gt;&gt;\n\t&lt;&lt;He&gt;&gt; has &lt;&lt;=$numeralsWithA[$currentCharacter.pussyLabiaRingsNumber]&gt;&gt; small metal rings in &lt;&lt;his&gt;&gt; labia.\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t&lt;&lt;if $currentCharacter.pussyLabiaHeavyRingsNumber&gt;&gt;\n\t&lt;&lt;He&gt;&gt; has &lt;&lt;=$numeralsWithA[$currentCharacter.pussyLabiaHeavyRingsNumber]&gt;&gt; heavy metal rings in &lt;&lt;his&gt;&gt; labia.\n\t&lt;&lt;if  $currentCharacter.pussyLabiaHeavyRingsNumber &gt; 2&gt;&gt;The heavy rings drag at her labia, and &lt;span class=&quot;good&quot;&gt;make her horny&lt;/span&gt;.&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\n\t&lt;&lt;if $currentCharacter.pussyLabiaZipperNumber&gt;&gt;\n\t&lt;&lt;He&gt;&gt; has &lt;&lt;his&gt;&gt; labia peircing fastened together with a chain and attached to her clit, preventing her from accessing her slave cunt and &lt;span class=&quot;good&quot;&gt;enforcing her awareness of your control&lt;/span&gt; over her body.\n\t&lt;&lt;/if&gt;&gt;\n\t\n  &lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n/* Asshole */\n&lt;&lt;if $currentCharacter.clothingRevealing&gt;&gt;\n\t&lt;&lt;He&gt;&gt; has a \n\t&lt;&lt;set _assholeSize = [&quot;tight, virginal&quot;, &quot;tight&quot;, &quot;slightly puckered&quot;, &quot;used&quot;, &quot;well-used and gaping&quot;, &quot;heavilly used, gaping fuck hole of a&quot;]&gt;&gt;\n\t&lt;&lt;=_assholeSize[$currentCharacter.assholeSize]&gt;&gt; asshole.  \n\t\n\t&lt;&lt;if $currentCharacter.assholeStyle == 1&gt;&gt;It is bleached and prepared for use.&lt;&lt;/if&gt;&gt;\n\t\n\tIt is \n\t&lt;&lt;set _assholeColor = [&quot;pink&quot;, &quot;brown&quot;, &quot;bleached&quot;]&gt;&gt;&lt;&lt;=_assholeColor[$currentCharacter.assholeColor]&gt;&gt;.\n\t\n&lt;&lt;/if&gt;&gt;\n\t\n&lt;&lt;/nobr&gt;&gt;\n\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;display &quot;Describe Clothing&quot;&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;\n\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;=$currentCharacter.description&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;\n\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $currentCharacter.enslaved&gt;&gt;\n&lt;&lt;display &quot;Slave Stats&quot;&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n&lt;&lt;/nobr&gt;&gt;\n&lt;&lt;return&gt;&gt;</div><div tiddler="Describe Clothing" tags="TimeNone nobr">&lt;&lt;set _wearingSomething == 0&gt;&gt;\n\n&lt;&lt;He&gt;&gt; \n\nis wearing \n&lt;&lt;if $currentCharacter.clothingTop != -1&gt;&gt;\n\t&lt;&lt;set _wearingSomething += 1&gt;&gt;\n\ta &lt;&lt;=$clothingTop[$currentCharacter.clothingTop]&gt;&gt;\n&lt;&lt;else&gt;&gt;\n\tnothing above the waist \n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $currentCharacter.clothingBottom != -1&gt;&gt;\n\t&lt;&lt;if _wearingSomething&gt;&gt; and &lt;&lt;/if&gt;&gt;\n\t&lt;&lt;set _wearingSomething += 1&gt;&gt;\n\ta &lt;&lt;=$clothingBottom[$currentCharacter.clothingBottom]&gt;&gt;\n&lt;&lt;else&gt;&gt;\n\tand nothing below the waist \n&lt;&lt;/if&gt;&gt;.\n\n\n\n&lt;&lt;if $currentCharacter.clothingWrists != -1&gt;&gt;\n&lt;&lt;He&gt;&gt; has &lt;&lt;=$clothingWrists[$currentCharacter.clothingWrists]&gt;&gt; on &lt;&lt;her&gt;&gt; wrists.\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $currentCharacter.clothingAnkles != -1&gt;&gt;\n&lt;&lt;He&gt;&gt; has &lt;&lt;=$clothingAnkles[$currentCharacter.clothingAnkles]&gt;&gt; on &lt;&lt;her&gt;&gt; ankles.\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $currentCharacter.clothingCollar != -1&gt;&gt;\n&lt;&lt;He&gt;&gt; has a &lt;&lt;=$clothingCollar[$currentCharacter.clothingCollar]&gt;&gt; on around &lt;&lt;her&gt;&gt; neck. \n&lt;&lt;if $currentCharacter.clothingCollar == 0&gt;&gt;\nThe magical collar makes &lt;&lt;her&gt;&gt; compliant and &lt;span class=&quot;good&quot;&gt;makes it possible to train &lt;&lt;her&gt;&gt;&lt;/span&gt;.\n&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $currentCharacter.clothingShoes == -1&gt;&gt;\n\tShe is barefoot. \n&lt;&lt;else&gt;&gt;\n\tShe is wearing &lt;&lt;=$clothingShoes[$currentCharacter.clothingShoes]&gt;&gt;.\n&lt;&lt;/if&gt;&gt;</div><div tiddler="Describe Slave Pussy" tags="TimeNone nobr">&lt;&lt;set _orifaceSize = [&quot;tight, virginal&quot;, &quot;tight&quot;, &quot;slightly used&quot;, &quot;well-used&quot;, &quot;loose, gaping&quot;, &quot;stretched and permanently gaping&quot;]&gt;&gt;\n\t&lt;&lt;=_orifaceSize[$slaves[$csi].pussySize]&gt;&gt; pussy</div><div tiddler="Describe Slave Asshole" tags="TimeNone nobr">&lt;&lt;set _orifaceSize = [&quot;tight, virginal&quot;, &quot;tight&quot;, &quot;slightly used&quot;, &quot;well-used&quot;, &quot;loose, gaping&quot;, &quot;stretched and permanently gaping&quot;]&gt;&gt;\n\t&lt;&lt;=_orifaceSize[$slaves[$csi].pussySize]&gt;&gt; asshole</div><div tiddler="WidgetEnslave" tags="widget nobr">&lt;&lt;widget enslave&gt;&gt;\n \t&lt;&lt;set _name = $args[0]&gt;&gt;\n\t&lt;&lt;set _charIndex = Game.getCharIndex(_name)&gt;&gt;\n\t&lt;&lt;set _slave = $characters.splice(_charIndex, 1)&gt;&gt;\n\t&lt;&lt;set $slaves.push(_slave[0])&gt;&gt;\n\t&lt;&lt;set _slaveIndex = Game.getSlaveIndex(_name)&gt;&gt;\n \t&lt;&lt;set $slaves[_slaveIndex].enslaved = 1&gt;&gt;\n\t&lt;&lt;set $slaves[_slaveIndex].clothingCollar = 0&gt;&gt;\n\t&lt;&lt;set $slaves[_slaveIndex].relationship = -50&gt;&gt;\n\t\n\t&lt;&lt;run $pc.clothingTopOwned.push(_slave.clothingTop)&gt;&gt;\n\t&lt;&lt;run $pc.clothingBottomOwned.push(_slave.clothingBottom)&gt;&gt;\n\t&lt;&lt;run $pc.clothingWristsOwned.push(_slave.clothingWrists)&gt;&gt;\n\t&lt;&lt;run $pc.clothingAnklesOwned.push(_slave.clothingAnkles)&gt;&gt;\n\t&lt;&lt;run $pc.clothingShoesOwned.push(_slave.clothingShoes)&gt;&gt;\n\t\n\t&lt;&lt;if $args.length &gt; 1&gt;&gt;\n\t\t&lt;&lt;set $slaves[_slaveIndex].obedience += $args[1]&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n\t\n\t\n\t&lt;&lt;if $debugging&gt;&gt;\n\t\t&lt;br&gt;&lt;br&gt;\n\t\t&lt;&lt;run UI.alert(&quot;Name: &quot; + _name + &quot;, CharIndex: &quot; + _charIndex + &quot;, Slave index: &quot; + _slaveIndex)&gt;&gt;\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="Inventory" tags="TimeNone">You currently possess:\n&lt;&lt;nobr&gt;&gt;\n&lt;ul&gt;\n&lt;&lt;set _inv = Game.inventoryAll()&gt;&gt;\n&lt;&lt;if _inv.length == 0&gt;&gt;Nothing&lt;&lt;/if&gt;&gt;\n&lt;&lt;for _i = 0; _i &lt; _inv.length; _i++&gt;&gt;\n\t&lt;li&gt;&lt;&lt;if _inv[_i].quantity &gt; 1&gt;&gt;&lt;&lt;=_inv[_i].quantity&gt;&gt; &lt;&lt;/if&gt;&gt;&lt;&lt;=_inv[_i].name&gt;&gt;&lt;/li&gt;\n&lt;&lt;/for&gt;&gt;\n\n&lt;/ul&gt;\n&lt;&lt;/nobr&gt;&gt;\n\nYou have $&lt;&lt;=$money&gt;&gt;.\n\n&lt;&lt;return&gt;&gt;</div><div tiddler="PassageDone" tags="nobr TimeNone">&lt;&lt;if tags().contains(&quot;TimeFast&quot;) &gt; 0&gt;&gt;\n\t&lt;&lt;run Game.passTime(3)&gt;&gt;\n&lt;&lt;elseif tags().contains(&quot;TimeSlow&quot;) &gt; 0&gt;&gt;\n\t&lt;&lt;run Game.passTime(20)&gt;&gt;\n&lt;&lt;elseif tags().contains(&quot;TimeNone&quot;) &gt; 0&gt;&gt;\n\t/* do nothing, free action */\n&lt;&lt;else&gt;&gt;\n\t/* default is TimeFast */\n\t&lt;&lt;run Game.passTime(3)&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n/* Bed Time */\n&lt;&lt;if ($hour &gt;= 24)&gt;&gt;\n\t&lt;&lt;replace &quot;#passages&quot;&gt;&gt;Wow, it's late.  Where does the time go?&lt;br&gt;&lt;br&gt;[[Go to sleep|Dream]]&lt;&lt;/replace&gt;&gt;\n&lt;&lt;elseif passage() === &quot;Training&quot;&gt;&gt;\n\t&lt;&lt;display $act&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n/* Mall Closing */\n&lt;&lt;if tags().contains(&quot;mall&quot;) &amp;&amp; ($hour &gt; 20)&gt;&gt;\n\t&lt;&lt;replace &quot;#passages&quot;&gt;&gt;The mall is closed.  Guess it's time to go home. &lt;br&gt;&lt;br&gt;[[Head Home|Mall Entrance]]&lt;&lt;/replace&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n\n/* First Baba Yaga Event */\n&lt;&lt;if tags().contains(&quot;foodcourt&quot;) &amp;&amp; $day &gt;= 4 &amp;&amp; !$flags.defeatedMajor&gt;&gt;\n&lt;&lt;goto &quot;Meet Baba Yaga&quot;&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n/* Kicked out of the mall */\n&lt;&lt;if tags().contains(&quot;mall&quot;) &amp;&amp; $pc.isKickedOut&gt;&gt;\n\t&lt;&lt;goto &quot;Arrested at the Mall&quot;&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n/* corrupted food court vendors */\n&lt;&lt;if tags().contains(&quot;vendor&quot;) &amp;&amp; $pc.magicLevel &gt;= 2&gt;&gt;\n\t&lt;&lt;if $corruptedPc.indexOf(passage()) != -1&gt;&gt;\n\t\t&lt;&lt;set _pass = &quot;PC &quot; + $pc.path + &quot; Corrupted &quot; + passage()&gt;&gt;\n\t\t&lt;&lt;set $originalPassage = passage()&gt;&gt;\n\t\t&lt;&lt;goto _pass&gt;&gt;\n\t&lt;&lt;elseif $corruptedBabaYaga.indexOf(passage()) != -1&gt;&gt;\n\t\t&lt;&lt;set _pass = &quot;Baba Yaga Corrupted &quot; + passage()&gt;&gt;\n\t\t&lt;&lt;set $originalPassage = passage()&gt;&gt;\n\t\t&lt;&lt;goto _pass&gt;&gt;\t\n\t&lt;&lt;/if&gt;&gt;\n&lt;&lt;else&gt;&gt;\n\t&lt;&lt;set $originalPassage = passage()&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if tags().contains(&quot;vendor&quot;) &amp;&amp; $pc.magicLevel &gt; 2 &amp;&amp; !Game.isCorrupted($originalPassage) &amp;&amp; $pc.power &gt; 25&gt;&gt;\s\n\t&lt;&lt;prepend &quot;.passage&quot;&gt;&gt;\s\n\t\t&lt;span id=&quot;corrupt-vendor&quot;&gt;\s\n\t\t\t@@.virility;You could corrupt this vendor for power and money.@@ \s\n\t\t\t&lt;&lt;link &quot;Corrupt Vendor&quot;&gt;&gt;\s\n\t\t\t\t&lt;&lt;run $corruptedPc.push(passage())&gt;&gt;\s\n\t\t\t\t&lt;&lt;set $pc.power -= 25&gt;&gt;\s\n\t\t\t\t&lt;&lt;remove &quot;#corrupt-vendor&quot;&gt;&gt;\s\n\t\t\t&lt;&lt;/link&gt;&gt;\s\n\t\t\t&lt;br&gt;&lt;br&gt;\s\n\t\t&lt;/span&gt;\s\n\t&lt;&lt;/prepend&gt;&gt;\s\n&lt;&lt;/if&gt;&gt;</div><div tiddler="PassageHeader" tags="nobr TimeNone"></div><div tiddler="WidgetShop" tags="widget nobr">&lt;&lt;widget buyButton&gt;&gt;\s\n\t\t&lt;&lt;set _string = &quot;&lt;&lt;click 'Buy It!'&gt;&gt;&quot;&gt;&gt;\n\t\t&lt;&lt;set _string += &quot;&lt;&lt;buy '&quot;&gt;&gt;\n\t\t&lt;&lt;set _string += $args[0]&gt;&gt;\n\t\t&lt;&lt;set _string += &quot;' &quot;&gt;&gt;\n\t\t&lt;&lt;set _string += $args[1]&gt;&gt;\n\t\t&lt;&lt;set _string += &quot;&gt;&gt;&quot; &gt;&gt;\n\t\t&lt;&lt;set _string += &quot;&lt;&lt;/click&gt;&gt;&quot;&gt;&gt;\n\t\t&lt;&lt;=_string&gt;&gt;\n\t&lt;&lt;/widget&gt;&gt;\n\n\t&lt;&lt;widget buy&gt;&gt;\n\t\t&lt;&lt;set _item = $args[0]&gt;&gt;\n\t\t&lt;&lt;set _price = $args[1]&gt;&gt;\n\t\t&lt;&lt;if _price &gt; $money&gt;&gt;\n\t\t\t&lt;&lt;replace &quot;#shopkeeper&quot;&gt;&gt;You don't have enough money.&lt;&lt;/replace&gt;&gt;\n\t\t&lt;&lt;else&gt;&gt;\n\t\t\t&lt;&lt;replace &quot;#shopkeeper&quot;&gt;&gt;Bought one _item.&lt;&lt;/replace&gt;&gt;\n\t\t\t&lt;&lt;run Game.inventoryAdd(_item)&gt;&gt;\n\t\t\t&lt;&lt;set $money -= _price&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/widget&gt;&gt;</div><div tiddler="Slave Position" tags="TimeNone">&lt;&lt;nobr&gt;&gt;\n\n&lt;br&gt;&lt;br&gt;\n&lt;&lt;if $slaves[$csi].position == 0&gt;&gt;She is standing.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].position == 1&gt;&gt;She is kneeling, with her knees spread wide and tits thrust out.  &lt;&lt;if $slaves[$csi].clothingRevealing&gt;&gt;Her &lt;&lt;if $slaves[$csi].lust&gt;15&gt;&gt;wet &lt;&lt;/if&gt;&gt;cunt is exposed.&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].position == 2&gt;&gt;She is on all fours, her knees spread wide and her &lt;&lt;if $slaves[$csi].lust &gt;20&gt;&gt;dripping &lt;&lt;/if&gt;&gt;cunt and her asshole visible from behind.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].position == 3&gt;&gt;She is face down and ass up, with her face and tits pressed to the floor and her knees spread wide.  Her slave holes are open and ready for use.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].position == 4&gt;&gt;She is bent over your knees, her ass on your lap ready for spanking and her holes ready for use.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].position == 5&gt;&gt;She is standing with her legs spread wide and her hands behind her kneck.  She is thrusing out her tits.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].position == 6&gt;&gt;She is bent over with her hands flat on the floor and her feet far apart.  Her cunt and asshole are available and at a convenient height.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;/nobr&gt;&gt;</div><div tiddler="Slave Stats" tags="TimeNone nobr">/* Obedience */\n&lt;&lt;if $slaves[$csi].obedience &lt; 10&gt;&gt;She is &lt;span class=&quot;obedience_very_bad&quot;&gt;disobedient&lt;/span&gt; and will not do anything the collar doesn't force her to. \n&lt;&lt;elseif $slaves[$csi].obedience &lt; 20&gt;&gt;She is &lt;span class=&quot;obedience_bad&quot;&gt;very resistant&lt;/span&gt; to your orders.\n&lt;&lt;elseif $slaves[$csi].obedience &lt; 30&gt;&gt;She is &lt;span class=&quot;obedience_good&quot;&gt;resistant&lt;/span&gt; to your orders, but is willing to do some things for you if only to avoid punishment.\n&lt;&lt;elseif $slaves[$csi].obedience &lt; 40&gt;&gt;She is &lt;span class=&quot;obedience_good&quot;&gt;somewhat obedient&lt;/span&gt; and will cooperate with some things you want her to do.\n&lt;&lt;elseif $slaves[$csi].obedience &lt; 50&gt;&gt;She is &lt;span class=&quot;obedience_good&quot;&gt;fairly obedient&lt;/span&gt; and is willing to go out of her comfort zone a little to please you.\n&lt;&lt;elseif $slaves[$csi].obedience &lt; 60&gt;&gt;She is &lt;span class=&quot;obedience_very_good&quot;&gt;obedient&lt;/span&gt; to you and tries to please as long as it's not too frightening for her.\n&lt;&lt;elseif $slaves[$csi].obedience &lt; 70&gt;&gt;She is &lt;span class=&quot;obedience_very_good&quot;&gt;quite obedient&lt;/span&gt; and is beginning to accept you as an owner.\n&lt;&lt;elseif $slaves[$csi].obedience &lt; 80&gt;&gt;She is &lt;span class=&quot;excellent&quot;&gt;very obedient&lt;/span&gt; and is willing to do almost anything for you.\n&lt;&lt;elseif $slaves[$csi].obedience &lt; 100&gt;&gt;She is &lt;span class=&quot;obedience_excellent&quot;&gt;extremely obedient&lt;/span&gt; and happily serves your pleasure and even cooperates in painful or humiliating situations.\n&lt;&lt;else&gt;&gt;She is &lt;span class=&quot;obedience_perfect&quot;&gt;completely obedient&lt;/span&gt; and obeys you without question.  You can use her in any way you like and she enthusiastically cooperates.  It's now &lt;span class=&quot;good&quot;&gt;safe for you to remove the collar&lt;/span&gt; and she will continue to serve you.\n&lt;&lt;/if&gt;&gt;\n\n/* Hatred (relationship) */\n&lt;&lt;if $slaves[$csi].relationship &lt; -40&gt;&gt;She is filled with &lt;span class=&quot;very_bad&quot;&gt;hatred&lt;/span&gt; for you.\n&lt;&lt;elseif $slaves[$csi].relationship &lt; -40&gt;&gt;She &lt;span class=&quot;very_bad&quot;&gt;hates&lt;/span&gt; you.\n&lt;&lt;elseif $slaves[$csi].relationship &lt; -22&gt;&gt;She &lt;span class=&quot;bad&quot;&gt;resents&lt;/span&gt; you.\n&lt;&lt;elseif $slaves[$csi].relationship &lt; -5&gt;&gt;She &lt;span class=&quot;bad&quot;&gt;dislikes&lt;/span&gt; you.\n&lt;&lt;elseif $slaves[$csi].relationship &lt; 15&gt;&gt;She is ambivalent to you.\n&lt;&lt;elseif $slaves[$csi].relationship &lt; 40&gt;&gt;She &lt;span class=&quot;good&quot;&gt;likes&lt;/span&gt; you.\n&lt;&lt;elseif $slaves[$csi].relationship &lt; 75&gt;&gt;She &lt;span class=&quot;very_good&quot;&gt;adores&lt;/span&gt; you.\n&lt;&lt;else&gt;&gt;She &lt;span class=&quot;very_good&quot;&gt;holds you in awe.&lt;/span&gt;\n&lt;&lt;/if&gt;&gt;\n\n/* Fear */\n&lt;&lt;if $slaves[$csi].fear &lt; 10&gt;&gt;She is &lt;span class=&quot;fear_very_low&quot;&gt;completely unafraid&lt;/span&gt; of you.\n&lt;&lt;elseif $slaves[$csi].fear &lt; 20&gt;&gt;She is &lt;span class=&quot;fear_low&quot;&gt;unafraid&lt;/span&gt; of you.\n&lt;&lt;elseif $slaves[$csi].fear &lt; 40&gt;&gt;She is &lt;span class=&quot;fear_low&quot;&gt;mostly unafraid&lt;/span&gt; of you and will only rarely obey out of fear.\n&lt;&lt;elseif $slaves[$csi].fear &lt; 60&gt;&gt;She is &lt;span class=&quot;fear_moderate&gt;somewhat afraid&lt;/span&gt; of you and will obey some commands to avoid punishment.\n&lt;&lt;elseif $slaves[$csi].fear &lt; 70&gt;&gt;She is &lt;span class=&quot;fear_high&quot;&gt;fearful&lt;/span&gt; of you and obeys to avoid more suffering.\n&lt;&lt;elseif $slaves[$csi].fear &lt; 80&gt;&gt;She is &lt;span class=&quot;fear_high&quot;&gt;frightened&lt;/span&gt; of you and doesn't know what you'll do to her next.\n&lt;&lt;elseif $slaves[$csi].fear &lt; 90&gt;&gt;She is &lt;span class=&quot;fear_very_high&quot;&gt;very frightened&lt;/span&gt; of you and shakes when you're near.  She'll do almost anything to stop you from hurting her more.\n&lt;&lt;else&gt;&gt;She is &lt;span class=&quot;fear_very_high&quot;&gt;terrified&lt;/span&gt; of you and obeys to avoid the next torture you inflict on her.\n&lt;&lt;/if&gt;&gt;\n\n/* Sex Drive */\n&lt;&lt;if $slaves[$csi].sexDrive &lt; 3&gt;&gt;She has &lt;span class=&quot;bad&quot;&gt;no sex drive&lt;/span&gt; to speak of.\n&lt;&lt;elseif $slaves[$csi].sexDrive &lt; 8&gt;&gt;She has a &lt;span class=&quot;good&quot;&gt;low sex drive&lt;/span&gt; and gets aroused when being trained.\n&lt;&lt;elseif $slaves[$csi].sexDrive &lt; 14&gt;&gt;She has a &lt;span class=&quot;good&quot;&gt;healthy sex drive&lt;/span&gt; and finds herself getting horny despite herself.\n&lt;&lt;elseif $slaves[$csi].sexDrive &lt; 20&gt;&gt;She has a &lt;span class=&quot;very_good&quot;&gt;high sex drive&lt;/span&gt; and gets wet when you play with her.\n&lt;&lt;else&gt;&gt;She has a &lt;span class=&quot;very_good&quot;&gt;low sex drive&lt;/span&gt; and constantly wants to cum.\n&lt;&lt;/if&gt;&gt;\n\n\n/* Lust */\n&lt;&lt;if $slaves[$csi].lust &lt; 10&gt;&gt;She is unaroused.\n&lt;&lt;elseif $slaves[$csi].lust &lt; 25&gt;&gt;She is &lt;span class=&quot;good&quot;&gt;aroused&lt;/span&gt; by your training&lt;&lt;if $slaves[$csi].relationship &lt; 20&gt;&gt; despite herself.&lt;&lt;else&gt;&gt;.&lt;&lt;/if&gt;&gt;\n&lt;&lt;elseif $slaves[$csi].lust &lt; 60&gt;&gt;She is &lt;span class=&quot;good&quot;&gt;very aroused&lt;/span&gt; by your perverted acts&lt;&lt;if $slaves[$csi].relationship &lt; 20&gt;&gt; despite herself.&lt;&lt;else&gt;&gt;.&lt;&lt;/if&gt;&gt;\n&lt;&lt;elseif $slaves[$csi].lust &lt; 85&gt;&gt;She is &lt;span class=&quot;very_good&quot;&gt;wet and horny&lt;/span&gt; and wants you to make her cum&lt;&lt;if $slaves[$csi].relationship &lt; 20&gt;&gt; despite herself.&lt;&lt;else&gt;&gt;.&lt;&lt;/if&gt;&gt;\n&lt;&lt;else&gt;&gt;She is on the &lt;span class=&quot;excellent&quot;&gt;verge of orgasm&lt;/span&gt; and dripping wet.  She would do almost anything for you to make her cum&lt;&lt;if $slaves[$csi].relationship &lt; 20&gt;&gt; despite herself.&lt;&lt;else&gt;&gt;.&lt;&lt;/if&gt;&gt;\n&lt;&lt;/if&gt;&gt;\n\n/* Pain */\n&lt;&lt;if $slaves[$csi].pain &lt; 20&gt;&gt;\n&lt;&lt;elseif $slaves[$csi].pain &lt; 40&gt;&gt;She is in &lt;span class=&quot;pain_low&quot;&gt;some pain&lt;/span&gt; from your treatment of her.\n&lt;&lt;elseif $slaves[$csi].pain &lt; 70&gt;&gt;She is in &lt;span class=&quot;pain_moderate&quot;&gt;pain&lt;/span&gt; from her bruises.\n&lt;&lt;elseif $slaves[$csi].pain &lt; 85&gt;&gt;She is in &lt;span class=&quot;pain_high&quot;&gt;severe pain&lt;/span&gt; from being mercilessly tortured and her bruises are purple and hot.\n&lt;&lt;else&gt;&gt;She's in &lt;span class=&quot;pain_very_high&quot;&gt;severe suffering&lt;/span&gt; from your attentions.  She's covered in welts and dark bruises and is crying helplessly.\n&lt;&lt;/if&gt;&gt;\n\n/* counters */\nShe has been fucked &lt;&lt;=$slaves[$csi].hasPussyFucked&gt;&gt; times, sucked cock &lt;&lt;=$slaves[$csi].hasSucked&gt;&gt; times, been assfucked &lt;&lt;=$slaves[$csi].hasAssFucked&gt;&gt; times, and swallowed &lt;&lt;=$slaves[$csi].hasSwallowedCum&gt;&gt; loads of cum. \n\n\n&lt;&lt;if $slaves[$csi].oral &lt; 0&gt;&gt;She &lt;&lt;KIbad &quot;hates sucking&quot;&gt;&gt; cock. \n&lt;&lt;elseif $slaves[$csi].oral == 1&gt;&gt;She loves to &lt;span class=&quot;pervert_good&quot;&gt;suck cock&lt;/span&gt; and feels driven into submission when she does it.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].oral == 2&gt;&gt;She is a &lt;span class=&quot;pervert_very_good&quot;&gt;enthusiastic cocksucker&lt;/span&gt; and just having a cock in her mouth gets her wet.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].oral == 3&gt;&gt;She's a &lt;span class=&quot;pervert_excellent&quot;&gt;mouth slut&lt;/span&gt; and just the thought of sucking cock has her mouth watering and her slave cunt dripping.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].cum &lt; 0&gt;&gt;She &lt;&lt;KIbad &quot;hates swallowing&quot;&gt;&gt; cum.\n&lt;&lt;elseif $slaves[$csi].cum == 1&gt;&gt;She has learned to &lt;span class=&quot;pervert_good&quot;&gt;love cum&lt;/span&gt; and swallows enthusiastically.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].cum == 2&gt;&gt;She is a happy &lt;span class=&quot;pervert_very_good&quot;&gt;cum guzzler&lt;/span&gt; and opens her mouth, tongue out, whenever she thinks you're about to cum.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].cum == 3&gt;&gt;She's a &lt;span class=&quot;pervert_excellent&quot;&gt;cumslut&lt;/span&gt; who lives for cum.  She wants you to cum as often as possible so she can lick it wherever it lands.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].deepthroat &lt; 0&gt;&gt;She &lt;&lt;KIbad &quot;hates gagging&quot;&gt;&gt; on cock when it's jammed down her throat..\n&lt;&lt;elseif $slaves[$csi].deepthroat == 1&gt;&gt;She is now happy to have &lt;span class=&quot;pervert_good&quot;&gt;cock shoved down her throat&lt;/span&gt; and has lost her gag reflex.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].deepthroat == 2&gt;&gt;She loves to be &lt;span class=&quot;pervert_very_good&quot;&gt;deepthroated&lt;/span&gt; and deliberately shoves cock down her throat to try to make herself gag.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].deepthroat == 3&gt;&gt;She's a &lt;span class=&quot;pervert_excellent&quot;&gt;gagfuck queen&lt;/span&gt; and loves it when you fuck her whore throat like a cunt.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].anal &lt; 0&gt;&gt;She &lt;&lt;KIbad &quot;hates being buttfucked.&quot;&gt;&gt;\n&lt;&lt;elseif $slaves[$csi].anal == 1&gt;&gt;She loves &lt;span class=&quot;pervert_good&quot;&gt;anal sex&lt;/span&gt; and loves cock in her ass, whether you're gentle or not.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].anal == 2&gt;&gt;She is an &lt;span class=&quot;pervert_very_good&quot;&gt;anal fanatic&lt;/span&gt; and cums like crazy when she's buttfucked.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].anal == 3&gt;&gt;She's an &lt;span class=&quot;pervert_excellent&quot;&gt;anal whore&lt;/span&gt; and prefers being assfucked to having cock in her cunt.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].painal &lt; 0&gt;&gt;She &lt;&lt;KIbad &quot;hates anal pain&quot;&gt;&gt; and begs you to be careful when assfucking her.\n&lt;&lt;elseif $slaves[$csi].painal == 1&gt;&gt;She has learned to enjoy &lt;span class=&quot;pervert_good&quot;&gt;anal pain&lt;/span&gt; and when you fuck her ass she always wants it harder.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].painal == 2&gt;&gt;She loves &lt;span class=&quot;pervert_very_good&quot;&gt;brutal assfucking&lt;/span&gt; and loves large cocks or toys rammed into her slave asshole.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].painal == 3&gt;&gt;She's a &lt;span class=&quot;pervert_excellent&quot;&gt;painal queen&lt;/span&gt;, loving any kind of suffering resulting from her asshole.  You actually have to hold back from her desires to keep her from permanent injury.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].bondage &lt; 0&gt;&gt;She &lt;&lt;KIbad &quot;hates being helpless&quot;&gt;&gt; and avoids being bound.\n&lt;&lt;elseif $slaves[$csi].bondage == 1&gt;&gt;She is aroused by &lt;span class=&quot;pervert_good&quot;&gt;bondage&lt;/span&gt; and when she feels helpless, she gets wet.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].bondage == 2&gt;&gt;She gets wet when &lt;span class=&quot;pervert_very_good&quot;&gt;tightly bound&lt;/span&gt; and any time she can't resist you she cums when any of her holes are brutally fucked.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].bondage == 3&gt;&gt;She's a &lt;span class=&quot;pervert_excellent&quot;&gt;bondage slut&lt;/span&gt; that whimpers when the rope touches her skin.  Once bound she gladly accepts any torture.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].humiliation &lt; 0&gt;&gt;She &lt;&lt;KIbad &quot;doesn't like degrating&quot;&gt;&gt; or humiliating scenarios.\n&lt;&lt;elseif $slaves[$csi].humiliation == 1&gt;&gt;She finds herself arroused by being  &lt;span class=&quot;pervert_good&quot;&gt;humiliated&lt;/span&gt; and gets wet whenever you call her names or tell her to spread.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].humiliation == 2&gt;&gt;She gets off on &lt;span class=&quot;pervert_very_good&quot;&gt;degredation&lt;/span&gt; whenever you put her on all fours and make her spread her ass or call herself a dirty cunt.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].humiliation == 3&gt;&gt;She's a &lt;span class=&quot;pervert_excellent&quot;&gt;humiliation whore&lt;/span&gt; whose fantasies all involve being tattooed, spat upon, and used as fuckmeat.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].housekeeping &lt; 0&gt;&gt;She's messy by nature and &lt;&lt;KIbad &quot;hates cleaning&quot;&gt;&gt;, especially in the outfits you make her wear.\n&lt;&lt;elseif $slaves[$csi].housekeeping == 1&gt;&gt;She feels happy when &lt;span class=&quot;pervert_good&quot;&gt;cleaning or serving&lt;/span&gt; you, and strangly gets wet when you watch her.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].housekeeping == 2&gt;&gt;&lt;span class=&quot;pervert_very_good&quot;&gt;Cleaning&lt;/span&gt; makes her deeply aroused and she makes an effort to bend over and please you while doing so.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].housekeeping == 3&gt;&gt;She's a &lt;span class=&quot;pervert_excellent&quot;&gt;maid fetishist&lt;/span&gt; who always wears skimpy cleaning outfits and makes sure her holes are always available when mopping, dusting, or cleaning the toilet.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].begging &lt; 0&gt;&gt;She is proud and very &lt;&lt;KIbad &quot;resistant to begging.&quot;&gt;&gt;\n&lt;&lt;elseif $slaves[$csi].begging == 1&gt;&gt;She loves &lt;span class=&quot;pervert_good&quot;&gt;begging&lt;/span&gt;: her obedience rised and her cunt moistens when you make her ask you for her training.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].begging == 2&gt;&gt;She &lt;span class=&quot;pervert_very_good&quot;&gt;begs you&lt;/span&gt; even for things she doesn't want, and it makes her more obedient.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].begging == 3&gt;&gt;She gets wet when she &lt;span class=&quot;pervert_excellent&quot;&gt;begs for suffering&lt;/span&gt;, and as long as you make her beg for it she'll do almost anything.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].masochism &lt; 0&gt;&gt;Suffering &lt;&lt;KIbad &quot;makes her angry.&quot;&gt;&gt;\n&lt;&lt;elseif $slaves[$csi].masochism == 1&gt;&gt;She is a &lt;span class=&quot;pervert_good&quot;&gt;masochist&lt;/span&gt; and gets aroused by spanking and other light pain.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].masochism == 2&gt;&gt;She is a &lt;span class=&quot;pervert_very_good&quot;&gt;serious masochist&lt;/span&gt; and can't help being turned on when hurt.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].masochism == 3&gt;&gt;She's a &lt;span class=&quot;pervert_excellent&quot;&gt;complete painslut&lt;/span&gt; and cums when being severely beaten.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].submission &lt; 0&gt;&gt;She is proud and &lt;&lt;KIbad &quot;loathes acting submissively.&quot;&gt;&gt;\n&lt;&lt;elseif $slaves[$csi].submission == 1&gt;&gt;She is a &lt;span class=&quot;pervert_good&quot;&gt;submissive&lt;/span&gt; and becomes more obedient and aroused when dominated whether she likes it or not.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].submission == 2&gt;&gt;She is a &lt;span class=&quot;pervert_very_good&quot;&gt;submissive slut&lt;/span&gt; and falls into subspace with rough treatment, making her more obedient and wet.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].submission == 3&gt;&gt;She's a &lt;span class=&quot;pervert_excellent&quot;&gt;submissive slut&lt;/span&gt; who can have her mind fucked along with any of her holes or by being tortured.&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;if $slaves[$csi].penetration &lt; 0&gt;&gt;She &lt;&lt;KIbad &quot;hates having large objects&quot;&gt;&gt; in her holes.\n&lt;&lt;elseif $slaves[$csi].penetration == 1&gt;&gt;You've now &lt;span class=&quot;pervert_good&quot;&gt;stretched her slave cunt&lt;/span&gt; enough that she's learned to enjoy it.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].penetration == 2&gt;&gt;She &lt;span class=&quot;pervert_excellent&quot;&gt;loves having her holes pounded&lt;/span&gt; and any time she can get a fist in her cunt she shakes and thanks you.&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].penetration == 3&gt;&gt;She loves having her &lt;span class=&quot;pervert_very_good&quot;&gt;holes fucked hard with large objects&lt;/span&gt; in the most extreme and painful ways.&lt;&lt;/if&gt;&gt;\n\n/* virginity */\n&lt;&lt;if $slaves[$csi].pussySize === 0&gt;&gt;She is a &lt;&lt;good &quot;virgin.&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\n&lt;&lt;if $slaves[$csi].assholeSize === 0&gt;&gt;She is an &lt;&lt;good &quot;anal virgin&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\n\n&lt;&lt;display &quot;Slave Position&quot;&gt;&gt;</div><div tiddler="WidgetSlaveName" tags="widget nobr TimeNone">&lt;&lt;widget slavename&gt;&gt;\n&lt;&lt;=$slaves[$csi].name&gt;&gt;\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="Store" tags="nobr">The clerk waits at the register.&lt;br&gt;\n\t&quot;&lt;span id=&quot;shopkeeper&quot;&gt;Hello, Sir. Would you like to purchase something?&lt;/span&gt;&quot;&lt;br&gt;\n\t&lt;ul&gt;\n\t&lt;&lt;for _i = 0; _i &lt; $itemsForSale.length; _i++&gt;&gt;\n\t \t\t&lt;li&gt;\n\t\t&lt;&lt;print $itemsForSale[_i] + &quot; costs &quot; + $itemsForSaleCosts[_i]&gt;&gt;. \n\t\t\n\t\t\n\t \t&lt;&lt;buyButton $itemsForSale[_i] $itemsForSaleCosts[_i]&gt;&gt;\n\t\t&lt;/li&gt;\n\t&lt;&lt;/for&gt;&gt;\n\n\t&lt;/ul&gt;</div><div tiddler="Widget Train" tags="widget TimeNone nobr">&lt;&lt;widget train1&gt;&gt;\n\t&lt;&lt;for _i = 0; _i &lt; $slaves.length; _i++&gt;&gt;\n\t\t&lt;&lt;if $slaves[_i].name == _char&gt;&gt;\n\t\t\t&lt;&lt;set $currentCharacter = $slaves[_i]&gt;&gt;\n\t\t\t&lt;&lt;set $csi = _i&gt;&gt;\n\t\t\t&lt;&lt;if $args.length == 2&gt;&gt;\n\t\t\t\t&lt;&lt;print &quot;[[&quot; + $args[1] + &quot;|Train Character]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;print &quot;[[Train &quot; + _char + &quot;|Train Character]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/for&gt;&gt;\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetDescribe" tags="widget nobr">&lt;&lt;widget describe&gt;&gt;\n\t&lt;&lt;set _char = $args[0]&gt;&gt;\n\t&lt;&lt;for _i = 0; _i &lt; $characters.length; _i++&gt;&gt;\n\t\t&lt;&lt;if $characters[_i].name == _char&gt;&gt;\n\t\t\t&lt;&lt;set $currentCharacter = $characters[_i]&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;if $args.length == 2&gt;&gt;\n\t\t\t\t&lt;&lt;print &quot;[[&quot; + $args[1] + &quot;|Describe Character]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;print &quot;[[Describe &quot; + _char + &quot;|Describe Character]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/for&gt;&gt;\n\n\t/* if not found in characters, search slaves */\n\t&lt;&lt;for _i = 0; _i &lt; $slaves.length; _i++&gt;&gt;\n\t\t&lt;&lt;if $slaves[_i].name == _char&gt;&gt;\n\t\t\t&lt;&lt;set $currentCharacter = $slaves[_i]&gt;&gt;\n\t\t\t\n\t\t\t&lt;&lt;if $args.length == 2&gt;&gt;\n\t\t\t\t&lt;&lt;print &quot;[[&quot; + $args[1] + &quot;|Describe Character]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;else&gt;&gt;\n\t\t\t\t&lt;&lt;print &quot;[[Describe &quot; + _char + &quot;|Describe Character]]&quot;&gt;&gt;\n\t\t\t&lt;&lt;/if&gt;&gt;\n\t\t&lt;&lt;/if&gt;&gt;\n\t&lt;&lt;/for&gt;&gt;\n\n&lt;&lt;/widget&gt;&gt;</div><div tiddler="WidgetHe" tags="widget nobr">&lt;&lt;widget he&gt;&gt;\n\t&lt;&lt;if $currentCharacter.gender eq &quot;male&quot;&gt;&gt;&lt;&lt;=&quot;he&quot;&gt;&gt;\n\t&lt;&lt;elseif $currentCharacter.gender eq &quot;female&quot;&gt;&gt;&lt;&lt;=&quot;she&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget her&gt;&gt;\n\t&lt;&lt;if $currentCharacter.gender eq &quot;male&quot;&gt;&gt;&lt;&lt;=&quot;he&quot;&gt;&gt;\n\t&lt;&lt;elseif $currentCharacter.gender eq &quot;female&quot;&gt;&gt;&lt;&lt;=&quot;she&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget He&gt;&gt;\n\t&lt;&lt;if $currentCharacter.gender eq &quot;male&quot;&gt;&gt;&lt;&lt;=&quot;He&quot;&gt;&gt;\n\t&lt;&lt;elseif $currentCharacter.gender eq &quot;female&quot;&gt;&gt;&lt;&lt;=&quot;She&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget Her&gt;&gt;\n\t&lt;&lt;if $currentCharacter.gender eq &quot;male&quot;&gt;&gt;&lt;&lt;=&quot;He&quot;&gt;&gt;\n\t&lt;&lt;elseif $currentCharacter.gender eq &quot;female&quot;&gt;&gt;&lt;&lt;=&quot;Her&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget his&gt;&gt;\n\t&lt;&lt;if $currentCharacter.gender eq &quot;male&quot;&gt;&gt;&lt;&lt;=&quot;his&quot;&gt;&gt;\n\t&lt;&lt;elseif $currentCharacter.gender eq &quot;female&quot;&gt;&gt;&lt;&lt;=&quot;her&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget her&gt;&gt;\n\t&lt;&lt;if $currentCharacter.gender eq &quot;male&quot;&gt;&gt;&lt;&lt;=&quot;his&quot;&gt;&gt;\n\t&lt;&lt;elseif $currentCharacter.gender eq &quot;female&quot;&gt;&gt;&lt;&lt;=&quot;her&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;\n\n\n&lt;&lt;widget His&gt;&gt;\n\t&lt;&lt;if $currentCharacter.gender eq &quot;male&quot;&gt;&gt;&lt;&lt;=&quot;His&quot;&gt;&gt;\n\t&lt;&lt;elseif $currentCharacter.gender eq &quot;female&quot;&gt;&gt;&lt;&lt;=&quot;Her&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;\n\n&lt;&lt;widget him&gt;&gt;\n\t&lt;&lt;if $currentCharacter.gender eq &quot;male&quot;&gt;&gt;&lt;&lt;=&quot;him&quot;&gt;&gt;\n\t&lt;&lt;elseif $currentCharacter.gender eq &quot;female&quot;&gt;&gt;&lt;&lt;=&quot;her&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\n&lt;&lt;/widget&gt;&gt;</div></div>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS

	SugarCube includes code from TiddlyWiki 1.2.39, which has the following license:
	--------------------------------------------------------------------------------
	TiddlyWiki 1.2.39 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

	Published under a BSD open source license

	Copyright (c) Osmosoft Limited 2005

	Redistribution and use in source and binary forms, with or without modification,
	are permitted provided that the following conditions are met:

	Redistributions of source code must retain the above copyright notice, this list
	of conditions and the following disclaimer.

	Redistributions in binary form must reproduce the above copyright notice, this
	list of conditions and the following disclaimer in the documentation and/or
	other materials provided with the distribution.

	Neither the name of the Osmosoft Limited nor the names of its contributors may
	be used to endorse or promote products derived from this software without
	specific prior written permission.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
	ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
	WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
	DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
	ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
	(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
	LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
	ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	--------------------------------------------------------------------------------
	*/
	if(document.documentElement.classList.contains("init-loading")){!function(window,document,jQuery,undefined){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function safeActiveElement(){try{return document.activeElement||null}catch(e){return null}}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=undefined;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Alert=function(){function e(e,t,r,n){var a="fatal"===e,i="Apologies! "+(a?"A fatal":"An")+" error has occurred.";i+=a?" Aborting.":" You may be able to continue, but some parts may not work properly.",null==t&&null==r||(i+="\n\nError",null!=t&&(i+=" ["+t+"]"),i+=null!=r?": "+r.replace(/^(?:(?:uncaught\s+(?:exception:\s+)?)?error:\s+)+/i,"")+".":": unknown error."),n&&n.stack&&(i+="\n\nStack Trace:\n"+n.stack),window.alert(i)}function t(t,r,n){e(null,t,r,n)}function r(t,r,n){e("fatal",t,r,n)}return function(e){window.onerror=function(n,a,i,o,s){"complete"===document.readyState?t(null,n,s):(r(null,n,s),window.onerror=e,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))}}(window.onerror),Object.freeze(Object.defineProperties({},{error:{value:t},fatal:{value:r}}))}();!function(){function e(e,t){var a=String(e);switch(t){case"start":return a&&r.test(a)?a.replace(r,""):a;case"end":return a&&n.test(a)?a.replace(n,""):a;default:throw new Error('_trimFrom called with incorrect where parameter value: "'+t+'"')}}function t(e,t){var r=Number.parseInt(e,10)||0;if(r<1)return"";var n="undefined"==typeof t?"":String(t);for(""===n&&(n=" ");n.length<r;){var a=n.length,i=r-a;n+=a>i?n.slice(0,i):n}return n.length>r&&(n=n.slice(0,r)),n}var r=/^[\s\u00A0\uFEFF][\s\u00A0\uFEFF]*/,n=/[\s\u00A0\uFEFF][\s\u00A0\uFEFF]*$/;Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var e=this.length>>>0;if(0===e)return!1;var t=arguments[0],r=Number(arguments[1])||0;for(r<0&&(r=Math.max(0,e+r));r<e;++r){var n=this[r];if(t===n||t!==t&&n!==n)return!0}return!1}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(e,r){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var n=String(this),a=n.length,i=Number.parseInt(e,10);return i<=a?n:t(i-a,r)+n}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(e,r){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var n=String(this),a=n.length,i=Number.parseInt(e,10);return i<=a?n:n+t(i-a,r)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return e(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return e(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return e(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return e(this,"end")}})}(),function(){function _random(){if(0===arguments.length)throw new Error("_random called with insufficient parameters");var e=void 0,t=void 0;if(1===arguments.length?(e=0,t=arguments[0]):(e=arguments[0],t=arguments[1]),e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(_nativeMathRandom()*(t-e+1))+e}function _getCodePointStartAndEnd(e,t){var r=e.charCodeAt(t);if(Number.isNaN(r))return{char:"",start:-1,end:-1};if(r<55296||r>57343)return{char:e.charAt(t),start:t,end:t};if(r>=55296&&r<=56319){var n=t+1;if(n>=e.length)throw new Error("high surrogate without trailing low surrogate");var a=e.charCodeAt(n);if(a<56320||a>57343)throw new Error("high surrogate without trailing low surrogate");return{char:e.charAt(t)+e.charAt(n),start:t,end:n}}if(0===t)throw new Error("low surrogate without leading high surrogate");var i=t-1,o=e.charCodeAt(i);if(o<55296||o>56319)throw new Error("low surrogate without leading high surrogate");return{char:e.charAt(i)+e.charAt(t),start:i,end:t}}var _nativeMathRandom=Math.random;Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(e,t,r){var n=t,a=r;return 2===arguments.length&&(a=n,n=0),Array.isArray(e)?e.random(n,a):e.hasOwnProperty("length")?[].concat(_toConsumableArray(e)).random(n,a):void 0}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var e=Array.prototype.indexOf,t=arguments[0],r=Number(arguments[1])||0,n=0;(r=e.call(this,t,r))!==-1;)++n,++r;return n}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.indexOf,r=Array.prototype.push,n=Array.prototype.splice,a=Array.prototype.concat.apply([],arguments),i=[],o=0,s=a.length;o<s;++o)for(var u=a[o],l=0;(l=t.call(this,u,l))!==-1;)r.apply(i,n.call(this,l,1));return i}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.splice,r=[].concat(_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map(function(t){return t<0?Math.max(0,e+t):t})).values())),n=[].concat(_toConsumableArray(r)).sort(function(e,t){return t-e}),a=[],i=0,o=r.length;i<o;++i)a[i]=this[r[i]];for(var s=0,u=n.length;s<u;++s)t.call(this,n[s],1);return a}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.reduce.call(this,function(e,t){return e.concat(Array.isArray(t)?t.flatten():t)},[])}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(!Array.prototype.some.call(this,function(e){return e===this.val||e!==e&&this.val!==this.val},{val:arguments[e]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(Array.prototype.some.call(this,function(e){return e===this.val||e!==e&&this.val!==this.val},{val:arguments[e]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var r=this.length>>>0;if(0!==r){var n=e,a=t;return 1===arguments.length&&(a=n,n=0),null==n?n=0:n<0?(n=r+n,n<0&&(n=0)):n>=r&&(n=r-1),null==a?a=r-1:a<0?(a=r+a,a<0&&(a=r-1)):a>=r&&(a=r-1),Array.prototype.splice.call(this,_random(n,a),1)[0]}}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var r=this.length>>>0;if(0!==r){var n=e,a=t;return 1===arguments.length&&(a=n,n=0),null==n?n=0:n<0?(n=r+n,n<0&&(n=0)):n>=r&&(n=r-1),null==a?a=r-1:a<0?(a=r+a,a<0&&(a=r-1)):a>=r&&(a=r-1),this[_random(n,a)]}}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var e=this.length>>>0;if(0!==e){for(var t=e-1;t>0;--t){var r=Math.floor(_nativeMathRandom()*(t+1)),n=this[t];this[t]=this[r],this[r]=n}return this}}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var e=Array.prototype.slice,t=this,r=e.call(arguments,0);return function(){for(var n=[],a=0,i=0;i<r.length;++i)n.push(r[i]===undefined?arguments[a++]:r[i]);return t.apply(this,n.concat(e.call(arguments,a)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function e(t,r,n){var e=Number(t);return Number.isNaN(e)?NaN:e.clamp(r,n)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(e){return 1-(Math.cos(Number(e)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var e=Number(arguments[0]),t=Number(arguments[1]);if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.min(Math.max(this,e),t)}}),RegExp.escape||!function(){var e=/[\\^$*+?.()|[\]{}]/g,t=new RegExp(e.source);Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(r){var n=String(r);return n&&t.test(n)?n.replace(e,"\\$&"):n}})}(),function(){var e=/{(\d+)(?:,([+-]?\d+))?}/g,t=new RegExp(e.source);Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(r){function n(e,t,r){if(!t)return e;var n=Math.abs(t)-e.length;if(n<1)return e;var a=String(r).repeat(n);return t<0?e+a:a+e}if(arguments.length<2)return 0===arguments.length?"":r;var a=2===arguments.length&&Array.isArray(arguments[1])?[].concat(_toConsumableArray(arguments[1])):Array.prototype.slice.call(arguments,1);return 0===a.length?r:t.test(r)?(e.lastIndex=0,r.replace(e,function(e,t,r){var i=a[t];if(null==i)return"";for(;"function"==typeof i;)i=i();switch("undefined"==typeof i?"undefined":_typeof(i)){case"string":break;case"object":i=JSON.stringify(i);break;default:i=String(i)}return n(i,r?Number.parseInt(r,10):0," ")})):r}})}(),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return String.prototype.indexOf.apply(this,arguments)!==-1}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var e=String(arguments[0]||"");if(""===e)return 0;for(var t=String.prototype.indexOf,r=e.length,n=Number(arguments[1])||0,a=0;(n=t.call(this,e,n))!==-1;)++a,n+=r;return a}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(e,t,r){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var n=this.length>>>0;if(0===n)return"";var a=Number(e);Number.isSafeInteger(a)?a<0&&(a+=n,a<0&&(a=0)):a=0,a>n&&(a=n);var i=Number(t);(!Number.isSafeInteger(i)||i<0)&&(i=0);var o=this.slice(0,a);return"undefined"!=typeof r&&(o+=r),a+i<n&&(o+=this.slice(a+i)),o}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var e=String(this),t=_getCodePointStartAndEnd(e,0),r=t.char,n=t.end;return n===-1?"":r.toLocaleUpperCase()+e.slice(n+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var e=String(this),t=_getCodePointStartAndEnd(e,0),r=t.char,n=t.end;return n===-1?"":r.toUpperCase()+e.slice(n+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","("+this.toString()+")"]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(e,t){if("string"!=typeof e)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[e,t]]}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(e){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(e){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(e){}return value})}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var e=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),t=[],r=void 0;null!==(r=e.exec(this));)r[1]?t.push(r[1]):r[2]&&t.push(r[2]);return t}})}(),function(){function e(e){13!==e.which&&32!==e.which||(e.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function t(e){return function(){var t=jQuery(this);t.is("[aria-pressed]")&&t.attr("aria-pressed","true"===t.attr("aria-pressed")?"false":"true"),e.apply(this,arguments)}}function r(e){return t(function(){jQuery(this).off(".aria-clickable").removeAttr("tabindex aria-controls aria-pressed").not("a,button").removeAttr("role").end().filter("button").prop("disabled",!0),e.apply(this,arguments)})}jQuery.fn.extend({ariaClick:function(n,a){if(0===this.length||0===arguments.length)return this;var i=n,o=a;return null==o&&(o=i,i=undefined),i=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,controls:undefined,pressed:undefined,label:undefined},i),"string"!=typeof i.namespace?i.namespace="":"."!==i.namespace[0]&&(i.namespace="."+i.namespace),"boolean"==typeof i.pressed&&(i.pressed=i.pressed?"true":"false"),this.filter("button").prop("type","button"),this.not("a,button").attr("role","button"),this.attr("tabindex",0),null!=i.controls&&this.attr("aria-controls",i.controls),null!=i.pressed&&this.attr("aria-pressed",i.pressed),null!=i.label&&this.attr({"aria-label":i.label,title:i.label}),this.not("button").on("keypress.aria-clickable"+i.namespace,i.selector,e),this.on("click.aria-clickable"+i.namespace,i.selector,i.data,i.one?r(o):t(o)),this}})}(),function(){jQuery.fn.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0===this.length||0===r.length)return this;var a=document.createDocumentFragment();return r.forEach(function(t){return new Wikifier(a,t,e)}),this.append(a),this},wiki:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.wikiWithOptions.apply(this,[undefined].concat(t))}})}();var Browser=function(){var e={userAgent:navigator.userAgent.toLowerCase()};return e.isGecko=navigator&&"Gecko"===navigator.product&&!/webkit|trident/.test(e.userAgent),e.isIE=/msie|trident/.test(e.userAgent)&&!e.userAgent.includes("opera"),e.ieVersion=function(){var t=/(?:msie\s+|rv:)(\d{1,2}\.\d)/.exec(e.userAgent);return t?Number([1]):0}(),e.isOpera=e.userAgent.includes("opera")||e.userAgent.includes(" opr/"),e.operaVersion=function(){var t=new RegExp((/applewebkit|chrome/.test(e.userAgent)?"opr":"version")+"\\/(\\d{1,2}\\.\\d+)"),r=t.exec(e.userAgent);return r?Number(r[1]):0}(),e.isMobile=Object.freeze({Android:/android/.test(e.userAgent),BlackBerry:/blackberry/.test(e.userAgent),iOS:/ip(?:hone|ad|od)/.test(e.userAgent),Windows:/iemobile/.test(e.userAgent),any:function(){var t=e.isMobile;return t.Android||t.BlackBerry||t.iOS||t.Windows}}),Object.freeze(e)}(),Has=function(){function e(e){try{if(null!=e&&e.length>=0){var t="SugarCube.WebStorage.test",r="1701 Guilty Scott";if(e.setItem(t,r),e.getItem(t)===r)return e.removeItem(t),!0}}catch(e){}return!1}return Object.freeze({audio:"function"==typeof document.createElement("audio").canPlayType,fileAPI:"File"in window&&"FileList"in window&&"FileReader"in window&&!Browser.isMobile.any()&&(!Browser.isOpera||Browser.operaVersion>=15),geolocation:"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition,localStorage:"localStorage"in window&&e(window.localStorage),sessionStorage:"sessionStorage"in window&&e(window.sessionStorage)})}(),_ref3=function(){function e(e){var t=document.getElementById("style-story");null===t&&(t=document.createElement("style"),t.id="style-story",t.type="text/css",document.head.appendChild(t)),t=new StyleWrapper(t),t.add(e)}function t(e){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))||null==e)return e;if("function"==typeof e.clone)return e.clone(!0);if(e.nodeType&&"function"==typeof e.cloneNode)return e.cloneNode(!0);var r=void 0;return Array.isArray(e)?r=[]:e instanceof Date?r=new Date(e.getTime()):e instanceof Map?(r=new Map,e.forEach(function(e,n){r.set(n,t(e))})):e instanceof RegExp?r=new RegExp(e):e instanceof Set?(r=new Set,e.forEach(function(e){r.add(t(e))})):r=Object.create(Object.getPrototypeOf(e)),Object.keys(e).forEach(function(n){return r[n]=t(e[n])}),r}function r(e){for(var t=document.createDocumentFragment(),r=document.createElement("p"),n=void 0;null!==(n=e.firstChild);){if(n.nodeType===Node.ELEMENT_NODE){var a=n.nodeName.toUpperCase();switch(a){case"BR":if(null!==n.nextSibling&&n.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===n.nextSibling.nodeName.toUpperCase()){e.removeChild(n.nextSibling),e.removeChild(n),t.appendChild(r),r=document.createElement("p");continue}if(!r.hasChildNodes()){e.removeChild(n);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":r.hasChildNodes()&&(t.appendChild(r),r=document.createElement("p")),t.appendChild(n);continue}}r.appendChild(n)}r.hasChildNodes()&&t.appendChild(r),e.appendChild(t)}function n(e,t,r){var n="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:document.getElementById(e);if(null==n)return null;var a=Array.isArray(t)?t:[t];jQuery(n).empty();for(var i=0,o=a.length;i<o;++i)if(Story.has(a[i]))return new Wikifier(n,Story.get(a[i]).processText().trim()),n;if(null!=r){var s=String(r).trim();""!==s&&new Wikifier(n,s)}return n}function a(e,t,r){return jQuery(document.createElement("span")).addClass("error").attr("title",r).text(L10n.get("errorTitle")+": "+(t||"unknown error")).appendTo(e),!1}function i(e,t){switch("undefined"==typeof e?"undefined":_typeof(e)){case"number":if(Number.isNaN(e))return t;break;case"object":if(null===e)return t;if(Array.isArray(e)||e instanceof Set)return[].concat(_toConsumableArray(e)).map(function(e){return i(e,t)}).join(", ");if(e instanceof Map){var r=function(){var r=i,n=[].concat(_toConsumableArray(e)).map(function(e){return r(e[0],t)+" ⇒ "+r(e[1],t)}).join("; ");return{v:"( "+n+" )"}}();if("object"===("undefined"==typeof r?"undefined":_typeof(r)))return r.v}else{if(e instanceof Date)return e.toLocaleString();if("function"==typeof e.toString)return e.toString()}return Object.prototype.toString.call(e);case"function":case"undefined":return t}return String(e)}return Object.freeze(Object.defineProperties({},{addStyle:{value:e},clone:{value:t},convertBreaks:{value:r},setPageElement:{value:n},throwError:{value:a},toStringOrDefault:{value:i}}))}(),addStyle=_ref3.addStyle,clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,toStringOrDefault=_ref3.toStringOrDefault,Util=function(){function e(e){var t=void 0;switch("undefined"==typeof e?"undefined":_typeof(e)){case"number":t=e;break;case"string":t=Number(e);break;default:return!1}return!Number.isNaN(t)&&Number.isFinite(t)}function t(e){return"boolean"==typeof e||"string"==typeof e&&("true"===e||"false"===e)}function r(e){return String(e).trim().replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase()}function n(e){if(null==e)return"";var t=String(e);return t&&p.test(t)?t.replace(d,function(e){return f[e]}):t}function a(e){if(null==e)return"";var t=String(e);return t&&g.test(t)?t.replace(h,function(e){return m[e]}):t}function i(e){var t=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/,r=t.exec(String(e));if(null===r)throw new SyntaxError('invalid time value syntax: "'+e+'"');var n=Number(r[1]);if(/^[Ss]$/.test(r[2])&&(n*=1e3),Number.isNaN(n)||!Number.isFinite(n))throw new RangeError('invalid time value: "'+e+'"');return n}function o(e){if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e)){var t=void 0;switch("undefined"==typeof e?"undefined":_typeof(e)){case"string":t='"'+e+'"';break;case"number":t=String(e);break;default:t=Object.prototype.toString.call(e)}throw new Error("invalid milliseconds: "+t)}return e+"ms"}function s(e){if(!e.includes("-"))switch(e){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return e}var t="-ms-"===e.slice(0,4)?e.slice(1):e;return t.split("-").map(function(e,t){return 0===t?e:e.toUpperFirst()}).join("")}function u(e){var t=document.createElement("a"),r=Object.create(null);t.href=e,t.search&&t.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach(function(e){var t=e.split("="),n=_slicedToArray(t,2),a=n[0],i=n[1];r[a]=i});var n=t.host&&"/"!==t.pathname[0]?"/"+t.pathname:t.pathname;return{href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,path:""+n+t.search,pathname:n,query:t.search,search:t.search,queries:r,searches:r,hash:t.hash}}function l(e,t){for(var r=Object.prototype.toString,n=Array.isArray(e),a=[].concat(Object.keys(e),Object.keys(t)).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}),i={},o=void 0,s=function(e){return e===o},u=0,l=a.length;u<l;++u){var c=a[u],d=e[c],p=t[c];if(e.hasOwnProperty(c))if(t.hasOwnProperty(c)){if(d===p)continue;if(("undefined"==typeof d?"undefined":_typeof(d))===("undefined"==typeof p?"undefined":_typeof(p)))if("function"==typeof d)d.toString()!==p.toString()&&(i[c]=[v.Copy,p]);else if("object"!==("undefined"==typeof d?"undefined":_typeof(d))||null===d)i[c]=[v.Copy,p];else{var f=r.call(d),h=r.call(p);if(f===h)if("[object Date]"===f){var g=Number(p);Number(d)!==g&&(i[c]=[v.CopyDate,g])}else if("[object RegExp]"===f)d.toString()!==p.toString()&&(i[c]=[v.Copy,clone(p)]);else{var m=Util.diff(d,p);null!==m&&(i[c]=m)}else i[c]=[v.Copy,clone(p)]}else i[c]=[v.Copy,"object"!==("undefined"==typeof p?"undefined":_typeof(p))||null===p?p:clone(p)]}else if(n&&Util.isNumeric(c)){var y=Number(c);if(!o){o="";do o+="~";while(a.some(s));i[o]=[v.SpliceArray,y,y]}y<i[o][1]&&(i[o][1]=y),y>i[o][2]&&(i[o][2]=y)}else i[c]=v.Delete;else i[c]=[v.Copy,"object"!==("undefined"==typeof p?"undefined":_typeof(p))||null===p?p:clone(p)]}return Object.keys(i).length>0?i:null}function c(e,t){for(var r=Object.keys(t||{}),n=clone(e),a=0,i=r.length;a<i;++a){var o=r[a],s=t[o];if(s===v.Delete)delete n[o];else if(Array.isArray(s))switch(s[0]){case v.SpliceArray:n.splice(s[1],1+(s[2]-s[1]));break;case v.Copy:n[o]=clone(s[1]);break;case v.CopyDate:n[o]=new Date(s[1])}else n[o]=Util.patch(n[o],s)}return n}var d=/[&<>"'`]/g,p=new RegExp(d.source),f=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),h=/&(?:amp|lt|gt|quot|apos|#39|#x27|#96|#x60);/g,g=new RegExp(h.source),m=Object.freeze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"}),v=Object.freeze({Delete:0,SpliceArray:1,Copy:2,CopyDate:3});return Object.freeze(Object.defineProperties({},{isNumeric:{value:e},isBoolean:{value:t},slugify:{value:r},escape:{value:n},unescape:{value:a},fromCssTime:{value:i},toCssTime:{value:o},fromCssProperty:{value:s},parseUrl:{value:u},DiffOp:{value:v},diff:{value:l},patch:{value:c},random:{value:Math.random},entityEncode:{value:n},entityDecode:{value:a},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleAudio=function(){function e(){return g}function t(e){g=!!e,l("mute",g)}function r(){return f}function n(e){f=Math.clamp(e,.2,5),l("rate",f)}function a(){return h}function i(e){h=Math.clamp(e,0,1),l("volume",h)}function o(){l("stop")}function s(e,t){if("function"!=typeof t)throw new Error("callback parameter must be a function");p.set(e,t)}function u(e){p.delete(e)}function l(e,t){p.forEach(function(r){return r(e,t)})}function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(m,[null].concat(t)))}function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(v,[null].concat(t)))}var p=new Map,f=1,h=1,g=!1,m=function(){function e(t){if(_classCallCheck(this,e),Array.isArray(t))this._create(t);else{if(!(t instanceof e))throw new Error("sources parameter must be an array of either URLs or source objects");this._copy(t)}}return _createClass(e,[{key:"_create",value:function(t){if(!Array.isArray(t)||0===t.length)throw new Error("sources parameter must be an array of either URLs or source objects");var r=/^data:\s*audio\/([^;,]+)\s*[;,]/i,n=/\.([^.\/\\]+)$/,a=e.getType,i=[],o=document.createElement("audio");if(t.forEach(function(e){var t=null;switch("undefined"==typeof e?"undefined":_typeof(e)){case"string":var s=void 0;if("data:"===e.slice(0,5)){if(s=r.exec(e),null===s)throw new Error("source data URI missing media type")}else if(s=n.exec(Util.parseUrl(e).pathname),null===s)throw new Error("source URL missing file extension");var u=a(s[1]);null!==u&&(t={src:e,type:u});break;case"object":if(null===e)throw new Error("source object cannot be null");if(!e.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!e.hasOwnProperty("format"))throw new Error('source object missing required "format" property');var l=a(e.format);null!==l&&(t={src:e.src,type:l});break;default:throw new Error("invalid source value (type: "+("undefined"==typeof e?"undefined":_typeof(e))+")")}if(null!==t){var c=document.createElement("source");c.src=t.src,c.type=t.type,o.appendChild(c),i.push(t)}}),!o.hasChildNodes())if(Browser.isIE)o.src=undefined;else{var s=document.createElement("source");s.src=undefined,s.type=undefined,o.appendChild(s)}this._finalize(o,i,clone(t))}},{key:"_copy",value:function(t){if(!(t instanceof e))throw new Error("original parameter must be an instance of AudioWrapper");this._finalize(t.audio.cloneNode(!0),clone(t.sources),clone(t.originalSources))}},{key:"_finalize",value:function(e,t,r){var n=this;Object.defineProperties(this,{audio:{configurable:!0,value:e},sources:{configurable:!0,value:Object.freeze(t)},originalSources:{configurable:!0,value:Object.freeze(r)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart",function(){return n._error=!1}).on("error",function(){return n._error=!0}).find("source:last-of-type").on("error",function(){return n._trigger("error")}),SimpleAudio.subscribe(this,function(e){if(!n.audio)return void SimpleAudio.unsubscribe(n);switch(e){case"mute":n._updateAudioMute();break;case"rate":n._updateAudioRate();break;case"stop":n.stop();break;case"volume":n._updateAudioVolume()}}),this.load()}},{key:"_trigger",value:function(e){jQuery(this.audio).triggerHandler(e)}},{key:"clone",value:function(){return new e(this)}},{key:"destroy",value:function(){SimpleAudio.unsubscribe(this),this.fadeStop(),this.stop();var e=this.audio;for(jQuery(e).off();e.hasChildNodes();)e.removeChild(e.firstChild);e.load(),this._error=!0,delete this.audio,delete this.sources,delete this.originalSources}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||SimpleAudio.mute}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=this._rate*SimpleAudio.rate}},{key:"_updateAudioVolume",value:function(){this.audio.volume=this._volume*SimpleAudio.volume}},{key:"hasSource",
value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isPlaying",value:function(){return!(this.audio.ended||this.audio.paused||!this.hasSomeData())}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isMuted",value:function(){return this._mute}},{key:"isLooped",value:function(){return this.audio.loop}},{key:"load",value:function(){"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"play",value:function(){this.audio.play()}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time=0,this._trigger("aw:stop")}},{key:"fadeWithDuration",value:function(e,t,r){var n=this;this.fadeStop();var a=Math.clamp(null==r?this.volume:r,0,1),i=Math.clamp(t,0,1);a!==i&&(this.volume=a,jQuery(this.audio).off("timeupdate.AudioWrapper:fadeWithDuration").one("timeupdate.AudioWrapper:fadeWithDuration",function(){var t=void 0,r=void 0;a<i?(t=a,r=i):(t=i,r=a);var o=Number(e);o<1&&(o=1);var s=25,u=(i-a)/(o/(s/1e3));n._faderId=setInterval(function(){return n.isPlaying()?(n.volume=Math.clamp(n.volume+u,t,r),0===n.volume&&n.pause(),void(n.volume===i&&(n.fadeStop(),n._trigger("aw:fade")))):void n.fadeStop()},s)}),this.play())}},{key:"fade",value:function(e,t){this.fadeWithDuration(5,e,t)}},{key:"fadeIn",value:function(){this.fade(1)}},{key:"fadeOut",value:function(){this.fade(0)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"on",value:function(t,r){if("function"!=typeof r)throw new Error("listener parameter must be a function");var n=e._events,a=t.trim().splitOrEmpty(/\s+/).map(function(e){var t=e.split(".",1)[0];if(!n.hasOwnProperty(t))throw new Error('unknown event "'+t+'"; valid: '+Object.keys(n).join(", "));return e.replace(t,n[t])+".AudioWrapperEvent"}).join(" ");if(""===a)throw new Error('invalid eventNames parameter "'+t+'"');return jQuery(this.audio).on(a,r),this}},{key:"one",value:function(t,r){if("function"!=typeof r)throw new Error("listener parameter must be a function");var n=e._events,a=t.trim().splitOrEmpty(/\s+/).map(function(e){var t=e.split(".",1)[0];if(!n.hasOwnProperty(t))throw new Error('unknown event "'+t+'"; valid: '+Object.keys(n).join(", "));return e.replace(t,n[t])+".AudioWrapperEvent"}).join(" ");if(""===a)throw new Error('invalid eventNames parameter "'+t+'"');return jQuery(this.audio).one(a,r),this}},{key:"off",value:function(t,r){if(r&&"function"!=typeof r)throw new Error("listener parameter must be a function");if(!t)return jQuery(this.audio).off(".AudioWrapperEvent",r);var n=e._events,a=t.trim().splitOrEmpty(/\s+/).map(function(e){var t=e.split(".",1)[0];if(t){if(!n.hasOwnProperty(t))throw new Error('unknown event "'+t+'"; valid: '+Object.keys(n).join(", "));return e.replace(t,n[t])+".AudioWrapperEvent"}return e+".AudioWrapperEvent"}).join(" ");if(""===a)throw new Error('invalid eventNames parameter "'+t+'"');return jQuery(this.audio).off(a,r),this}},{key:"duration",get:function(){return this.audio.duration}},{key:"ended",get:function(){return this.audio.ended}},{key:"loop",get:function(){return this.audio.loop},set:function(e){this.audio.loop=!!e}},{key:"mute",get:function(){return this._mute},set:function(e){this._mute=!!e,this._updateAudioMute()}},{key:"paused",get:function(){return this.audio.paused}},{key:"rate",get:function(){return this._rate},set:function(e){this._rate=Math.clamp(e,.2,5),this._updateAudioRate()}},{key:"remaining",get:function(){return this.audio.duration-this.audio.currentTime}},{key:"time",get:function(){return this.audio.currentTime},set:function(e){var t=this;try{this.audio.currentTime=e}catch(r){jQuery(this.audio).off("loadedmetadata.AudioWrapper:time").one("loadedmetadata.AudioWrapper:time",function(){return t.audio.currentTime=e})}}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=Math.clamp(e,0,1),this._updateAudioVolume()}}],[{key:"_verifyType",value:function(t){if(!t||!Has.audio)return null;var r=e._types;if(!r.hasOwnProperty(t)){var n=document.createElement("audio");r[t]=""!==n.canPlayType(t).replace(/^no$/i,"")}return r[t]?t:null}},{key:"getType",value:function(t){if(!t||!Has.audio)return null;var r=e.formats,n=t.toLowerCase(),a=r.hasOwnProperty(n)?r[n]:"audio/"+n;return e._verifyType(a)}},{key:"canPlayFormat",value:function(t){return null!==e.getType(t)}},{key:"canPlayType",value:function(t){return null!==e._verifyType(t)}}]),e}();Object.defineProperties(m,{formats:{value:{aac:"audio/aac",caf:"audio/x-caf","x-caf":"audio/x-caf",mp3:'audio/mpeg; codecs="mp3"',mpeg:'audio/mpeg; codecs="mp3"',m4a:"audio/mp4",mp4:"audio/mp4","x-m4a":"audio/mp4","x-mp4":"audio/mp4",oga:"audio/ogg",ogg:"audio/ogg",opus:'audio/ogg; codecs="opus"',wav:"audio/wav",wave:"audio/wav",weba:"audio/webm",webm:"audio/webm"}},_types:{value:{}},_events:{value:Object.freeze({canplay:"canplaythrough",end:"ended",error:"error",fade:"aw:fade",pause:"pause",play:"playing",rate:"ratechange",seek:"seeked",stop:"aw:stop",volume:"volumechange"})}});var v=function(){function e(t){var r=this;_classCallCheck(this,e),Object.defineProperties(this,{tracks:{configurable:!0,value:[]},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}}),Array.isArray(t)?t.forEach(function(e){return r.add(e)}):t instanceof e&&t.tracks.forEach(function(e){return r.add(e)})}return _createClass(e,[{key:"add",value:function(e){var t=this;if(null==e||"object"!==("undefined"==typeof e?"undefined":_typeof(e)))throw new Error("track parameter must be an object");var r=void 0,n=void 0,a=void 0,i=void 0;if(e instanceof m)r=!0,n=e.clone(),a=e.volume,i=e.rate;else{if(!e.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(e.track instanceof m))throw new Error('track object\'s "track" property must be an AudioWrapper object');r=e.hasOwnProperty("copy")&&e.copy,n=r?e.track.clone():e.track,a=e.hasOwnProperty("volume")?e.volume:e.track.volume,i=e.hasOwnProperty("rate")?e.rate:e.track.rate}n.stop(),n.loop=!1,n.mute=!1,n.volume=a,n.rate=i,n.on("end.AudioListEvent",function(){return t._onEnd()}),this.tracks.push({copy:r,track:n,volume:a,rate:i})}},{key:"destroy",value:function(){this.stop(),this.tracks.filter(function(e){return e.copy}).forEach(function(e){return e.track.destroy()}),delete this.tracks,delete this.queue}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isMuted",value:function(){return this._mute}},{key:"isLooped",value:function(){return this._loop}},{key:"isShuffled",value:function(){return this._shuffle}},{key:"play",value:function(){(null!==this.current&&!this.current.track.isEnded()||(0===this.queue.length&&this._buildList(),this._next()))&&this.current.track.play()}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this.queue.splice(0)}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fadeWithDuration",value:function(e,t,r){if(0===this.queue.length&&this._buildList(),null!==this.current&&!this.current.track.isEnded()||this._next()){var n=Math.clamp(t,0,1)*this.current.volume,a=void 0;null!=r&&(a=Math.clamp(r,0,1)*this.current.volume),this.current.track.fadeWithDuration(e,n,a),this._volume=t}}},{key:"fade",value:function(e,t){this.fadeWithDuration(5,e,t)}},{key:"fadeIn",value:function(){this.fade(1)}},{key:"fadeOut",value:function(){this.fade(0)}},{key:"_next",value:function(){return null!==this.current&&this.current.track.stop(),0===this.queue.length?(this.current=null,!1):(this.current=this.queue.shift(),!this.current.track.hasSource()||this.current.track.isFailed()?this._next():(this.current.track.mute=this._mute,this.current.track.rate=this.rate*this.current.rate,this.current.track.volume=this.volume*this.current.volume,!0))}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._buildList()}this._next()&&this.current.track.play()}},{key:"_buildList",value:function(){var e;this.queue.splice(0),(e=this.queue).push.apply(e,_toConsumableArray(this.tracks)),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}},{key:"duration",get:function(){return this.tracks.map(function(e){return e.track.duration}).reduce(function(e,t){return e+t},0)}},{key:"loop",get:function(){return this._loop},set:function(e){this._loop=!!e}},{key:"mute",get:function(){return this._mute},set:function(e){this._mute=!!e,null!==this.current&&(this.current.track.mute=this._mute)}},{key:"rate",get:function(){return this._rate},set:function(e){this._rate=Math.clamp(e,.2,5),null!==this.current&&(this.current.track.rate=this.rate*this.current.rate)}},{key:"remaining",get:function(){var e=this.queue.map(function(e){return e.track.duration}).reduce(function(e,t){return e+t},0);return null!==this.current&&(e+=this.current.track.remaining),e}},{key:"shuffle",get:function(){return this._shuffle},set:function(e){this._shuffle=!!e}},{key:"time",get:function(){return this.duration-this.remaining}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=Math.clamp(e,0,1),null!==this.current&&(this.current.track.volume=this.volume*this.current.volume)}}]),e}();return Object.freeze(Object.defineProperties({},{mute:{get:e,set:t},rate:{get:r,set:n},volume:{get:a,set:i},stop:{value:o},subscribe:{value:s},unsubscribe:{value:u},publish:{value:l},create:{value:c},createList:{value:d}}))}(),SimpleStore=function(){function e(e,n){if(r)return r.create(e,n);for(var a=0;a<t.length;++a)if(t[a].init(e,n))return r=t[a],r.create(e,n);throw new Error("no valid adapters found")}var t=[],r=null;return Object.freeze(Object.defineProperties({},{adapters:{value:t},create:{value:e}}))}();SimpleStore.adapters.push(function(){function e(){return r=Has.localStorage&&Has.sessionStorage}function t(e,t){if(!r)throw new Error("adapter not initialized");return new n(e,t)}var r=!1,n=function(){function e(t,r){_classCallCheck(this,e);var n=t+".",a=null,i=null;r?(a=window.localStorage,i="localStorage"):(a=window.sessionStorage,i="sessionStorage"),Object.defineProperties(this,{_engine:{value:a},_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:i},id:{value:t},persistent:{value:!!r}})}return _createClass(e,[{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function e(){for(var e=[],t=0;t<this._engine.length;++t){var r=this._engine.key(t);this._prefixRe.test(r)&&e.push(r.replace(this._prefixRe,""))}return e}},{key:"has",value:function(e){return!("string"!=typeof e||!e)&&this._engine.hasOwnProperty(this._prefix+e)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=this._engine.getItem(this._prefix+t);return null==r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{this._engine.setItem(this._prefix+t,e._serialize(r))}catch(e){throw/quota_?(?:exceeded|reached)/i.test(e.name)&&(e.message=this.name+" quota exceeded"),e}return!0}},{key:"delete",value:function(e){return!("string"!=typeof e||!e)&&(this._engine.removeItem(this._prefix+e),!0)}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}},{key:"length",get:function(){return this.keys().length}}],[{key:"_serialize",value:function(e){return LZString.compressToUTF16(JSON.stringify(e))}},{key:"_deserialize",value:function(e){return JSON.parse(LZString.decompressFromUTF16(e))}}]),e}();return Object.freeze(Object.defineProperties({},{init:{value:e},create:{value:t}}))}()),SimpleStore.adapters.push(function(){function e(e){return n="cookie"in document,n&&r(e),n}function t(e,t){if(!n)throw new Error("adapter not initialized");return new a(e,t)}function r(e){if(""!==document.cookie)for(var t=e+".",r=new RegExp("^"+RegExp.escape(t)),n=e+"!.",i=e+"*.",o=/\.(?:state|rcWarn)$/,s=document.cookie.split(/;\s*/),u=0;u<s.length;++u){var l=s[u].split("="),c=decodeURIComponent(l[0]);if(r.test(c)){var d=decodeURIComponent(l[1]);""!==d&&!function(){var e=!o.test(c);a._setCookie(c,undefined,"Thu, 01 Jan 1970 00:00:00 GMT"),a._setCookie(c.replace(r,function(){return e?n:i}),d,e?"Tue, 19 Jan 2038 03:14:07 GMT":undefined)}()}}}var n=!1,a=function(){function e(t,r){_classCallCheck(this,e);var n=""+t+(r?"!":"*")+".";Object.defineProperties(this,{_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:"cookie"},id:{value:t},persistent:{value:!!r}})}return _createClass(e,[{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function e(){if(""===document.cookie)return[];for(var t=document.cookie.split(/;\s*/),e=[],r=0;r<t.length;++r){var n=t[r].split("="),a=decodeURIComponent(n[0]);if(this._prefixRe.test(a)){var i=decodeURIComponent(n[1]);""!==i&&e.push(a.replace(this._prefixRe,""))}}return e}},{key:"has",value:function(t){return!("string"!=typeof t||!t)&&null!==e._getCookie(this._prefix+t)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=e._getCookie(this._prefix+t);return null===r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{if(e._setCookie(this._prefix+t,e._serialize(r),this.persistent?"Tue, 19 Jan 2038 03:14:07 GMT":undefined),!this.has(t))throw new Error("unknown validation error during set")}catch(e){throw e.message="cookie error: "+e.message,e}return!0}},{key:"delete",value:function(t){if("string"!=typeof t||!t||!this.has(t))return!1;try{if(e._setCookie(this._prefix+t,undefined,"Thu, 01 Jan 1970 00:00:00 GMT"),this.has(t))throw new Error("unknown validation error during delete")}catch(e){throw e.message="cookie error: "+e.message,e}return!0}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}},{key:"length",get:function(){return this.keys().length}}],[{key:"_getCookie",value:function(e){if(!e||""===document.cookie)return null;for(var t=document.cookie.split(/;\s*/),r=0;r<t.length;++r){var n=t[r].split("="),a=decodeURIComponent(n[0]);if(e===a){var i=decodeURIComponent(n[1]);return i||null}}return null}},{key:"_setCookie",value:function(e,t,r){if(e){var n=encodeURIComponent(e)+"=";null!=t&&(n+=encodeURIComponent(t)),null!=r&&(n+="; "+r),n+="; path=/",document.cookie=n}}},{key:"_serialize",value:function(e){return LZString.compressToBase64(JSON.stringify(e))}},{key:"_deserialize",value:function(e){return JSON.parse(LZString.decompressFromBase64(e))}}]),e}();return Object.freeze(Object.defineProperties({},{init:{value:e},create:{value:t}}))}());var DebugView=function(){var e=function(){function e(t,r,n,a){_classCallCheck(this,e),Object.defineProperties(this,{parent:{value:t},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:a,"aria-label":a,"data-type":null!=r?r:"","data-name":null!=n?n:""}).addClass("debug"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(e,[{key:"append",value:function(e){return jQuery(this.view).append(e),this}},{key:"modes",value:function(e){var t=this;if(null==e){var r=function(){var e={};return t.view.className.splitOrEmpty(/\s+/).forEach(function(t){"debug"!==t&&(e[t]=!0)}),{v:e}}();if("object"===("undefined"==typeof r?"undefined":_typeof(r)))return r.v}else if("object"===("undefined"==typeof e?"undefined":_typeof(e)))return Object.keys(e).forEach(function(t){this[e[t]?"addClass":"removeClass"](t)},jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var e=jQuery(this.view);this.view.hasChildNodes()&&e.contents().appendTo(this.parent),e.remove(),jQuery(this.break).remove()}},{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(e){this.view.setAttribute("data-type",null!=e?e:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(e){this.view.setAttribute("data-name",null!=e?e:"")}},{key:"title",get:function(){return this.view.title},set:function(e){this.view.title=e}}],[{key:"init",value:function(){jQuery('<button id="debug-view-toggle">'+L10n.get("debugViewTitle")+"</button>").ariaClick({label:L10n.get("debugViewToggle")},function(){return e.toggle()}).prependTo("#ui-bar-body"),e.enable()}},{key:"enable",value:function(){jQuery(document.documentElement).addClass("debug-view"),jQuery.event.trigger("tw:debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeClass("debug-view"),jQuery.event.trigger("tw:debugviewupdate")}},{key:"toggle",value:function(){jQuery(document.documentElement).toggleClass("debug-view"),jQuery.event.trigger("tw:debugviewupdate")}}]),e}();return e}(),PRNGWrapper=function(){var e=function(){function e(t,r){_classCallCheck(this,e),Object.defineProperties(this,new Math.seedrandom(t,r,function(e,t){return{_prng:{value:e},seed:{writable:!0,value:t},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}}))}return _createClass(e,null,[{key:"marshal",value:function(e){if(!e||!e.hasOwnProperty("seed")||!e.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:e.seed,pull:e.pull}}},{key:"unmarshal",value:function(t){if(!t||!t.hasOwnProperty("seed")||!t.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var r=new e(t.seed,!1),n=t.pull;n>0;--n)r.random();return r}}]),e}();return e}(),StyleWrapper=function(){var e=/\[[<>]?[Ii][Mm][Gg]\[(?:\s|\S)*?\]\]+/g,t=new RegExp(e.source),r=function(){function r(e){if(_classCallCheck(this,r),null==e)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:e}})}return _createClass(r,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(e){this.clear(),this.add(e)}},{key:"add",value:function(r){var n=r;t.test(n)&&(e.lastIndex=0,n=n.replace(e,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(t.hasOwnProperty("error")||t.pos<e.length)return e;var r=t.source;if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text)}return'url("'+r.replace(/"/g,"%22")+'")'})),this.style.styleSheet?this.style.styleSheet.cssText+=n:this.style.appendChild(document.createTextNode(n))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),r}();return r}(),L10n=function(){function e(){r()}function t(e,t){if(!e)return"";var r=function(e){var t=void 0;return e.some(function(e){return!!l10nStrings.hasOwnProperty(e)&&(t=e,!0)}),t}(Array.isArray(e)?e:[e]);if(!r)return"";for(var i=50,o=l10nStrings[r],s=0;a.test(o);){if(++s>i)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");n.lastIndex=0,o=o.replace(n,function(e){var r=e.slice(1,-1);return t&&t.hasOwnProperty(r)?t[r]:l10nStrings.hasOwnProperty(r)?l10nStrings[r]:void 0})}return o}function r(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach(function(e){try{var t=void 0;switch(e){case"identity":t=strings.identity;break;case"aborting":t=strings.aborting;break;case"cancel":t=strings.cancel;break;case"close":t=strings.close;break;case"ok":t=strings.ok;break;case"errorTitle":t=strings.errors.title;break;case"errorNonexistentPassage":t=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":t=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":t=strings.errors.saveIdMismatch;break;case"warningDegraded":t=strings.warnings.degraded;break;case"debugViewTitle":t=strings.debugView.title;break;case"debugViewToggle":t=strings.debugView.toggle;break;case"uiBarToggle":t=strings.uiBar.toggle;break;case"uiBarBackward":t=strings.uiBar.backward;break;case"uiBarForward":t=strings.uiBar.forward;break;case"uiBarJumpto":t=strings.uiBar.jumpto;break;case"jumptoTitle":t=strings.jumpto.title;break;case"jumptoTurn":t=strings.jumpto.turn;break;case"jumptoUnavailable":t=strings.jumpto.unavailable;break;case"savesTitle":t=strings.saves.title;break;case"savesDisallowed":t=strings.saves.disallowed;break;case"savesEmptySlot":t=strings.saves.emptySlot;break;case"savesIncapable":t=strings.saves.incapable;break;case"savesLabelAuto":t=strings.saves.labelAuto;break;case"savesLabelDelete":t=strings.saves.labelDelete;break;case"savesLabelExport":t=strings.saves.labelExport;break;case"savesLabelImport":t=strings.saves.labelImport;break;case"savesLabelLoad":t=strings.saves.labelLoad;break;case"savesLabelClear":t=strings.saves.labelClear;break;case"savesLabelSave":t=strings.saves.labelSave;break;case"savesLabelSlot":t=strings.saves.labelSlot;break;case"savesSavedOn":t=strings.saves.savedOn;break;case"savesUnavailable":t=strings.saves.unavailable;break;case"savesUnknownDate":t=strings.saves.unknownDate;break;case"settingsTitle":t=strings.settings.title;break;case"settingsOff":t=strings.settings.off;break;case"settingsOn":t=strings.settings.on;break;case"settingsReset":t=strings.settings.reset;break;case"restartTitle":t=strings.restart.title;break;case"restartPrompt":t=strings.restart.prompt;break;case"shareTitle":t=strings.share.title;break;case"autoloadTitle":t=strings.autoload.title;break;case"autoloadCancel":t=strings.autoload.cancel;break;case"autoloadOk":t=strings.autoload.ok;break;case"autoloadPrompt":t=strings.autoload.prompt;break;case"macroBackText":t=strings.macros.back.text;break;case"macroReturnText":t=strings.macros.return.text}t&&(l10nStrings[e]=t.replace(/%\w+%/g,function(e){return"{"+e.slice(1,-1)+"}"}))}catch(e){}})}var n=/\{\w+\}/g,a=new RegExp(n.source);return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:t}}))}(),strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugViewTitle:"Debug View",debugViewToggle:"Toggle the debug view",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesEmptySlot:"— slot empty —",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesSavedOn:"Saved on",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=function(){function e(){throw new Error("Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code")}function t(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}var r=Object.seal({debug:!1,addVisitedLinkClass:!1,cleanupWikifierOutput:!1,loadDelay:0,history:Object.seal({controls:!0,maxStates:100,get mode(){e()},set mode(t){e()},get tracking(){t()},set tracking(e){t()}}),macros:Object.seal({ifAssignmentError:!0,maxLoopIterations:1e3}),navigation:Object.seal({override:undefined}),passages:Object.seal({descriptions:undefined,displayTitles:!1,start:undefined,transitionOut:undefined}),saves:Object.seal({autoload:undefined,autosave:undefined,id:"untitled-story",isAllowed:undefined,onLoad:undefined,onSave:undefined,slots:8,version:undefined}),ui:Object.seal({stowBarInitially:800,updateStoryElements:!0}),transitionEndEventName:function(){for(var e=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),t=[].concat(_toConsumableArray(e.keys())),r=document.createElement("div"),n=0;n<t.length;++n)if(r.style[t[n]]!==undefined)return e.get(t[n]);return""}()});return r}(),Patterns=function(){var e=/[\u0150\u0170]/g.test("Ő"),t="[\\s\\u00A0\\u2028\\u2029]",r="[0-9A-Z_a-z\\-\\u00C0-\\u00D6\\u00D8-\\u00DE\\u00DF-\\u00F6\\u00F8-\\u00FF"+(e?"\\u0150\\u0170\\u0151\\u0171":"")+"]",n=r.replace("\\-",""),a="[$A-Z_a-z]",i=a+"[$0-9A-Z_a-z]*",o="[$_]",s=o+i,u="[A-Za-z][\\w-]*|[=-]",l="("+r+"+)\\(([^\\)\\|\\n]+)\\):",c="("+r+"+):([^;\\|\\n]+);",d="((?:\\."+r+"+)+);",p="((?:#"+r+"+)+);",f=l+"|"+c+"|"+d+"|"+p,h="(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+";return Object.freeze({space:t,anyLetter:r,anyLetterStrict:n,identifierFirstChar:a,identifier:i,variableSigil:o,variable:s,macroName:u,inlineCss:f,url:h})}(),Scripting=function(){function addAccessibleClickHandler(e,t,r,n,a){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var i=void 0,o=void 0;if("function"==typeof t?(i=t,o={namespace:n,one:!!r}):(i=r,o={namespace:a,one:!!n,selector:t}),"function"!=typeof i)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(e).ariaClick(o,i)}function insertElement(e,t,r,n,a,i){var o=jQuery(document.createElement(t));return r&&o.attr("id",r),n&&o.addClass(n),i&&o.attr("title",i),a&&o.text(a),e&&o.appendTo(e),o[0]}function insertText(e,t){jQuery(e).append(document.createTextNode(t))}function removeChildren(e){jQuery(e).empty()}function removeElement(e){jQuery(e).remove()}function fade(e,t){function r(){i+=.05*a,n(o,Math.easeInOut(i)),(1===a&&i>=1||a===-1&&i<=0)&&(e.style.visibility="in"===t.fade?"visible":"hidden",o.parentNode.replaceChild(e,o),o=null,window.clearInterval(s),t.onComplete&&t.onComplete())}function n(e,t){e.style.zoom=1,e.style.filter="alpha(opacity="+Math.floor(100*t)+")",e.style.opacity=t}var a="in"===t.fade?1:-1,i=void 0,o=e.cloneNode(!0),s=void 0;e.parentNode.replaceChild(o,e),"in"===t.fade?(i=0,o.style.visibility="visible"):i=1,n(o,i),s=window.setInterval(r,25)}function scrollWindowTo(e,t){function r(){c+=i,window.scroll(0,o+l*(u*Math.easeInOut(c))),c>=1&&window.clearInterval(d)}function n(e){for(var t=0;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;return t}function a(e){var t=n(e),r=t+e.offsetHeight,a=window.scrollY?window.scrollY:document.body.scrollTop,i=window.innerHeight?window.innerHeight:document.body.clientHeight,o=a+i;return t>=a&&r>o&&e.offsetHeight<i?t-(i-e.offsetHeight)+20:t}var i=null!=t?Number(t):.1;Number.isNaN(i)||!Number.isFinite(i)||i<0?i=.1:i>1&&(i=1);var o=window.scrollY?window.scrollY:document.body.scrollTop,s=a(e),u=Math.abs(o-s),l=o>s?-1:1,c=0,d=void 0;d=window.setInterval(r,25)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=0,n=e.length;r<n;++r)if(!t.includes(e[r]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=t.length-1,n=State.turns,a=0,i=e.length;a<i&&n>-1;++a){var o=t.lastIndexOf(e[a]);n=Math.min(n,o===-1?-1:r-o)}return n}function passage(){return State.passage}function previous(){var e=State.passages;if(arguments.length>0){var t=Number(arguments[0]);if(!Number.isSafeInteger(t)||t<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return e.length>t?e[e.length-1-t]:""}for(var r=e.length-2;r>=0;--r)if(e[r]!==State.passage)return e[r];return""}function random(){if(0===arguments.length)throw new Error("random called with insufficient parameters");var e=void 0,t=void 0;if(1===arguments.length?(e=0,t=arguments[0]):(e=arguments[0],t=arguments[1]),e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(State.random()*(t-e+1))+e}function randomFloat(){if(0===arguments.length)throw new Error("randomFloat called with insufficient parameters");var e=void 0,t=void 0;if(1===arguments.length?(e=0,t=arguments[0]):(e=arguments[0],t=arguments[1]),e>t){var r=[t,e];e=r[0],t=r[1]}return State.random()*(t-e)+e}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var e=Array.prototype.concat.apply([],arguments),t=[],r=0,n=e.length;r<n;++r)t=t.concat(Story.get(e[r]).tags);return t}function time(){return null===Engine.lastPlay?0:Date.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),t=State.passages,r=State.turns,n=0,a=e.length;n<a&&r>0;++n)r=Math.min(r,t.count(e[n]));return r}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],arguments),t=e.length,r=State.passages,n=new Map,a=0,i=0,o=r.length;i<o;++i){var s=r[i];if(n.has(s))n.get(s)&&++a;else{var u=Story.get(s).tags;if(u.length>0){for(var l=0,c=0;c<t;++c)u.includes(e[c])&&++l;l===t?(++a,n.set(s,!0)):n.set(s,!1)}}}return a}function evalJavaScript(code,output){return function(code,output){return eval(code)}.call(output?{
output:output}:null,String(code),output)}function evalTwineScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output)}var parse=function(){function e(e){if(0!==r.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var a=e,i=void 0;null!==(i=r.exec(a));)if(i[5]){var o=i[5];if("$"===o||"_"===o)continue;if(n.test(o))o=o[0];else if("is"===o){var s=r.lastIndex,u=a.slice(s);/^\s+not\b/.test(u)&&(a=a.splice(s,u.search(/\S/)),o="isnot")}t.hasOwnProperty(o)&&(a=a.splice(i.index,o.length,t[o]),r.lastIndex+=t[o].length-o.length)}return a}var t=Object.freeze({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),r=new RegExp(["(\"\"|'')",'("(?:\\\\.|[^"\\\\])+")',"('(?:\\\\.|[^'\\\\])+')","([=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),n=new RegExp("^"+Patterns.variable);return e}();return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),Wikifier=function(){var e=void 0,t=0,r=function(){function r(n,a,i){_classCallCheck(this,r),"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&r.compileFormatters(),Object.defineProperties(this,{source:{value:String(a)},options:{writable:!0,value:Object.assign({profile:"all"},i)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==n?this.output=document.createDocumentFragment():n.jquery?this.output=n[0]:this.output=n;try{++t,this.subWikify(this.output),1===t&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--t}}return _createClass(r,[{key:"subWikify",value:function(e,t,r){var n=this.output,a=void 0;this.output=e,null!=r&&"object"===("undefined"==typeof r?"undefined":_typeof(r))&&(a=this.options,this.options=Object.assign({},this.options,r));var i=t?new RegExp("(?:"+t+")",this.options.ignoreTerminatorCase?"gim":"gm"):null,o=void 0,s=void 0;do{if(this.formatter.formatterRegExp.lastIndex=this.nextMatch,i&&(i.lastIndex=this.nextMatch),s=this.formatter.formatterRegExp.exec(this.source),o=i?i.exec(this.source):null,o&&(!s||o.index<=s.index))return o.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,o.index),this.matchStart=o.index,this.matchLength=o[0].length,this.matchText=o[0],this.nextMatch=i.lastIndex,this.output=n,void(a&&(this.options=a));if(s){s.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,s.index),this.matchStart=s.index,this.matchLength=s[0].length,this.matchText=s[0],this.nextMatch=this.formatter.formatterRegExp.lastIndex;for(var u=void 0,l=1,c=s.length;l<c;++l)if(s[l]){u=l-1;break}if(this.formatter.formatters[u].handler(this),null!=TempState.break)break}}while(o||s);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=n,a&&(this.options=a)}},{key:"outputText",value:function(e,t,r){jQuery(e).append(document.createTextNode(this.source.substring(t,r)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this.rawArgs())}},{key:"formatter",get:function(){if(!e.hasOwnProperty(this.options.profile))throw new Error('nonexistent formatter profile "'+this.options.profile+'"');return e[this.options.profile]}}],[{key:"compileFormatters",value:function(){var t=r.formatters,n=t.filter(function(e){return!Array.isArray(e.profiles)||e.profiles.includes("core")});return e={all:{formatters:t,formatterRegExp:new RegExp(t.map(function(e){return"("+e.match+")"}).join("|"),"gm")},core:{formatters:n,formatterRegExp:new RegExp(n.map(function(e){return"("+e.match+")"}).join("|"),"gm")}}}},{key:"getValue",value:function(e){var t=r.parseStoryVariable(e),n=void 0;if(null!==t){n=t.store;for(var a=t.names,i=0,o=a.length;i<o;++i){if("undefined"==typeof n[a[i]]){n=undefined;break}n=n[a[i]]}}return n}},{key:"setValue",value:function(e,t){var n=r.parseStoryVariable(e);if(null!==n){for(var a=n.names,i=a.pop(),o=n.store,s=0,u=a.length;s<u;++s){if("undefined"==typeof o[a[s]]){o=undefined;break}o=o[a[s]]}if(o!==undefined)return o[i]=t,!0}return!1}},{key:"parseStoryVariable",value:function(e){for(var t={store:"$"===e[0]?State.variables:State.temporary,names:[]},n=e,a=void 0;null!==(a=r._parseVarRegExp.exec(n));)n=n.slice(a[0].length),a[1]?t.names.push(a[1]):a[2]?t.names.push(a[2]):a[3]?t.names.push(a[3]):a[4]?t.names.push(a[4]):a[5]?t.names.push(r.getValue(a[5])):a[6]&&t.names.push(Number(a[6]));return""===n?t:null}},{key:"wikifyEval",value:function(e){var t=document.createDocumentFragment();new r(t,e);var n=t.querySelector(".error");if(null!==n)throw new Error(n.textContent.replace(/^(?:(?:Uncaught\s+)?Error:\s+)+/,""));return t}},{key:"createInternalLink",value:function(e,t,r,n){var a=jQuery(document.createElement("a"));return null!=t&&(a.attr("data-passage",t),Story.has(t)?(a.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(t)&&a.addClass("link-visited")):a.addClass("link-broken"),a.ariaClick({one:!0},function(){"function"==typeof n&&n(),Engine.play(t)})),r&&a.append(document.createTextNode(r)),e&&a.appendTo(e),a[0]}},{key:"createExternalLink",value:function(e,t,r){var n=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(r).appendTo(e);return null!=t&&n.attr({href:t,tabindex:0}),n[0]}},{key:"isExternalLink",value:function(e){if(Story.has(e))return!1;var t=new RegExp("^"+Patterns.url,"gim");return t.test(e)||/[\/.?#]/.test(e)}}]),r}();return Object.defineProperties(r,{_parseVarRegExp:{value:new RegExp(["^(?:",Patterns.variableSigil,"(",Patterns.identifier,")|\\.(",Patterns.identifier,")|\\[(?:(?:\"((?:\\\\.|[^\"\\\\])+)\")|(?:'((?:\\\\.|[^'\\\\])+)')|(",Patterns.variableSigil,Patterns.identifierFirstChar,".*)|(\\d+))\\])"].join(""))},helpers:{value:{}},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(r.helpers,{_inlineCssLookahead:{value:new RegExp(Patterns.inlineCss,"gm")},inlineCss:{value:function(e){var t={classes:[],id:"",styles:{}},r=this._inlineCssLookahead,n=void 0;do{r.lastIndex=e.nextMatch;var a=r.exec(e.source);n=a&&a.index===e.nextMatch,n&&(a[1]?t.styles[Util.fromCssProperty(a[1])]=a[2].trim():a[3]?t.styles[Util.fromCssProperty(a[3])]=a[4].trim():a[5]?t.classes=t.classes.concat(a[5].slice(1).split(/\./)):a[6]&&(t.id=a[6].slice(1).split(/#/).pop()),e.nextMatch=r.lastIndex)}while(n);return t}},evalText:{value:function(e){var t=void 0;try{t=Scripting.evalTwineScript(e),null==t||"function"==typeof t?t=e:(t=String(t),/\[(?:object(?:\s+[^\]]+)?|native\s+code)\]/.test(t)&&(t=e))}catch(r){t=e}return t}},evalPassageId:{value:function(e){return null==e||Story.has(e)?e:r.helpers.evalText(e)}},hasBlockContext:{value:function(e){for(var t="function"==typeof window.getComputedStyle,r=e.length-1;r>=0;--r){var n=e[r];switch(n.nodeType){case Node.ELEMENT_NODE:var a=n.nodeName.toUpperCase();if("BR"===a)return!0;var i=t?window.getComputedStyle(n,null):n.currentStyle;if(i&&i.display){if("none"===i.display)continue;return"block"===i.display}switch(a){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},parseSquareBracketedMarkup:{value:function(e){function t(){return d>=e.source.length?u:e.source[d++]}function r(){return d>=e.source.length?u:e.source[d]}function n(t){return t<1||d+t>=e.source.length?u:e.source[d+t]}function a(){return{error:String.format.apply(String,arguments),pos:d}}function i(){c=d}function o(t){var r=e.source.slice(c,d).trim();if(""===r)throw new Error("malformed wiki "+(h?"link":"image")+", empty "+t+" component");"link"===t&&"~"===r[0]?(l.forceInternal=!0,l.link=r.slice(1)):l[t]=r,c=d}function s(e){++d;e:for(;;){switch(r()){case"\\":++d;var t=r();if(t!==u&&"\n"!==t)break;case u:case"\n":return u;case e:break e}++d}return d}var u=-1,l={},c=e.matchStart,d=c+1,p=void 0,f=void 0,h=void 0,g=void 0;if(g=r(),"["===g)h=l.isLink=!0;else{switch(h=!1,g){case"<":l.align="left",++d;break;case">":l.align="right",++d}if(!/^[Ii][Mm][Gg]$/.test(e.source.slice(d,d+3)))return a("malformed square-bracketed wiki markup");d+=3,l.isImage=!0}if("["!==t())return a("malformed wiki {0}",h?"link":"image");p=1,f=0,i();try{e:for(;;){switch(g=r()){case u:case"\n":return a("unterminated wiki {0}",h?"link":"image");case'"':if(s(g)===u)return a("unterminated double quoted string in wiki {0}",h?"link":"image");break;case"'":if((4===f||3===f&&h)&&s(g)===u)return a("unterminated single quoted string in wiki {0}",h?"link":"image");break;case"|":0===f&&(o(h?"text":"title"),++c,f=1);break;case"-":0===f&&">"===n(1)&&(o(h?"text":"title"),++d,c+=2,f=1);break;case"<":0===f&&"-"===n(1)&&(o(h?"link":"source"),++d,c+=2,f=2);break;case"[":if(f===-1)return a("unexpected left square bracket '['");++p,1===p&&(i(),++c);break;case"]":if(--p,0===p){switch(f){case 0:case 1:o(h?"link":"source"),f=3;break;case 2:o(h?"text":"title"),f=3;break;case 3:h?(o("setter"),f=-1):(o("link"),f=4);break;case 4:o("setter"),f=-1}if(++d,"]"===r()){++d;break e}--d}}++d}}catch(e){return a(e.message)}return l.pos=d,l}}}),Object.defineProperty(r,"formatters",{value:[{name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(\\/?"+Patterns.macroName+")(?:\\s*)((?:(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>","gm"),argsPattern:["(``)","`((?:\\\\.|[^`\\\\])+)`","(\"\"|'')",'("(?:\\\\.|[^"\\\\])+")',"('(?:\\\\.|[^'\\\\])+')","(\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)","([^`\"'\\s]+)","(`|\"|')"].join("|"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(e){var t=this.lookahead.lastIndex=e.matchStart;if(this.parseTag(e)){var r=e.nextMatch,n=this.working.source,a=this.working.name,i=this.working.arguments,o=void 0;try{if(o=Macro.get(a),!o){if(Macro.tags.has(a)){var s=Macro.tags.get(a);return throwError(e.output,"child tag <<"+a+">> was found outside of a call to its parent macro"+(1===s.length?"":"s")+" <<"+s.join(">>, <<")+">>",e.source.slice(t,e.nextMatch))}return throwError(e.output,"macro <<"+a+">> does not exist",e.source.slice(t,e.nextMatch))}var u=null;if(o.hasOwnProperty("tags")&&(u=this.parseBody(e,o),!u))return e.nextMatch=r,throwError(e.output,"cannot find a closing tag for macro <<"+a+">>",e.source.slice(t,e.nextMatch)+"…");if("function"!=typeof o.handler)return throwError(e.output,"macro <<"+a+">> handler function "+(o.hasOwnProperty("handler")?"is not a function":"does not exist"),e.source.slice(t,e.nextMatch));var l=u?u[0].args:this.createArgs(i,o.hasOwnProperty("skipArgs")&&!!o.skipArgs||o.hasOwnProperty("skipArg0")&&!!o.skipArg0);if(o.hasOwnProperty("_MACRO_API")){this.context=new MacroContext({parent:this.context,macro:o,name:a,args:l,payload:u,parser:e,source:n});try{o.handler.call(this.context)}finally{this.context=this.context.parent}}else{var c=e._rawArgs;e._rawArgs=i,o.handler(e.output,a,l,e,u),e._rawArgs=c}}catch(r){return throwError(e.output,"cannot execute "+(o&&o.isWidget?"widget":"macro")+" <<"+a+">>: "+r.message,e.source.slice(t,e.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else e.outputText(e.output,e.matchStart,e.nextMatch)},parseTag:function(e){var t=this.lookahead.exec(e.source);return!(!t||t.index!==e.matchStart||!t[1])&&(e.nextMatch=this.lookahead.lastIndex,this.working.source=e.source.slice(t.index,this.lookahead.lastIndex),this.working.name=t[1],this.working.arguments=t[2],this.working.index=t.index,!0)},parseBody:function(e,t){for(var r=this.working.name,n="/"+r,a="end"+r,i=!!Array.isArray(t.tags)&&t.tags,o=[],s=t.hasOwnProperty("skipArgs")&&t.skipArgs,u=t.hasOwnProperty("skipArg0")&&t.skipArg0,l=-1,c=1,d=this.working.source,p=this.working.name,f=this.working.arguments,h=e.nextMatch;(e.matchStart=e.source.indexOf(this.match,e.nextMatch))!==-1;)if(this.parseTag(e)){var g=this.working.source,m=this.working.name,v=this.working.arguments,y=this.working.index,b=e.nextMatch;switch(m){case r:++c;break;case a:case n:--c;break;default:if(1===c&&i)for(var w=0,k=i.length;w<k;++w)m===i[w]&&(o.push({source:d,name:p,arguments:f,args:this.createArgs(f,s||0===o.length&&u),contents:e.source.slice(h,y)}),d=g,p=m,f=v,h=b)}if(0===c){o.push({source:d,name:p,arguments:f,args:this.createArgs(f,s||0===o.length&&u),contents:e.source.slice(h,y)}),l=b;break}}else this.lookahead.lastIndex=e.nextMatch=e.matchStart+this.match.length;return l!==-1?(e.nextMatch=l,o):null},createArgs:function(e,t){var r=t?[]:this.parseArgs(e);return Object.defineProperties(r,{raw:{value:e},full:{value:Scripting.parse(e)}}),r},parseArgs:function(e){for(var t=new RegExp(this.argsPattern,"gm"),n=[],a=new RegExp("^"+Patterns.variable),i=void 0;null!==(i=t.exec(e));){var o=void 0;if(i[1])o=undefined;else if(i[2]){o=i[2];try{o=Scripting.evalTwineScript(o)}catch(e){throw new Error('unable to parse macro argument "'+o+'": '+e.message)}}else if(i[3])o="";else if(i[4]){o=i[4];try{o=Scripting.evalJavaScript(o)}catch(e){throw new Error("unable to parse macro argument '"+o+"': "+e.message)}}else if(i[5]){o=i[5];try{o=Scripting.evalJavaScript(o)}catch(e){throw new Error('unable to parse macro argument "'+o+'": '+e.message)}}else if(i[6]){o=i[6];var s=r.helpers.parseSquareBracketedMarkup({source:o,matchStart:0});if(s.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'+o+'": '+s.error);if(s.pos<o.length)throw new Error('unable to parse macro argument "'+o+'": unexpected character(s) "'+o.slice(s.pos)+'" (pos: '+s.pos+")");s.isLink?(o={isLink:!0},o.count=s.hasOwnProperty("text")?2:1,o.link=r.helpers.evalPassageId(s.link),o.text=s.hasOwnProperty("text")?r.helpers.evalText(s.text):o.link,o.external=!s.forceInternal&&r.isExternalLink(o.link),o.setFn=s.hasOwnProperty("setter")?function(e){return function(){return Scripting.evalJavaScript(e)}}(Scripting.parse(s.setter)):null):s.isImage&&(o=function(e){var t={source:e,isImage:!0};if("data:"!==e.slice(0,5)&&Story.has(e)){var r=Story.get(e);r.tags.includes("Twine.image")&&(t.source=r.text,t.passage=r.title)}return t}(r.helpers.evalPassageId(s.source)),s.hasOwnProperty("align")&&(o.align=s.align),s.hasOwnProperty("title")&&(o.title=r.helpers.evalText(s.title)),s.hasOwnProperty("link")&&(o.link=r.helpers.evalPassageId(s.link),o.external=!s.forceInternal&&r.isExternalLink(o.link)),o.setFn=s.hasOwnProperty("setter")?function(e){return function(){return Scripting.evalJavaScript(e)}}(Scripting.parse(s.setter)):null)}else if(i[7])if(o=i[7],a.test(o))o=r.getValue(o);else if(/^(?:settings|setup)[.[]/.test(o))try{o=Scripting.evalTwineScript(o)}catch(e){throw new Error('unable to parse macro argument "'+o+'": '+e.message)}else if("null"===o)o=null;else if("undefined"===o)o=undefined;else if("true"===o)o=!0;else if("false"===o)o=!1;else{var u=Number(o);Number.isNaN(u)||(o=u)}else if(i[8]){var l=void 0;switch(i[8]){case"`":l="backtick expression";break;case'"':l="double quoted string";break;case"'":l="single quoted string"}throw new Error("unterminated "+l+" in macro argument string")}n.push(o)}return n}},{name:"prettyLink",profiles:["core"],match:"\\[\\[[^[]",handler:function(e){var t=r.helpers.parseSquareBracketedMarkup(e);if(t.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=t.pos;var n=r.helpers.evalPassageId(t.link),a=t.hasOwnProperty("text")?r.helpers.evalText(t.text):n,i=t.hasOwnProperty("setter")?function(e){return function(){return Scripting.evalJavaScript(e)}}(Scripting.parse(t.setter)):null,o=(Config.debug?new DebugView(e.output,"wiki-link","[[link]]",e.source.slice(e.matchStart,e.nextMatch)):e).output;t.forceInternal||!r.isExternalLink(n)?r.createInternalLink(o,n,a,i):r.createExternalLink(o,n,a)}},{name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(e){e.outputText(r.createExternalLink(e.output,e.matchText),e.matchStart,e.nextMatch)}},{name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(e){var t=r.helpers.parseSquareBracketedMarkup(e);if(t.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=t.pos;var n=void 0;Config.debug&&(n=new DebugView(e.output,"wiki-image",t.hasOwnProperty("link")?"[img[][link]]":"[img[]]",e.source.slice(e.matchStart,e.nextMatch)),n.modes({block:!0}));var a=t.hasOwnProperty("setter")?function(e){return function(){return Scripting.evalJavaScript(e)}}(Scripting.parse(t.setter)):null,i=(Config.debug?n:e).output,o=void 0;if(t.hasOwnProperty("link")){var s=r.helpers.evalPassageId(t.link);i=t.forceInternal||!r.isExternalLink(s)?r.createInternalLink(i,s,null,a):r.createExternalLink(i,s),i.classList.add("link-image")}if(i=jQuery(document.createElement("img")).appendTo(i).get(0),o=r.helpers.evalPassageId(t.source),"data:"!==o.slice(0,5)&&Story.has(o)){var u=Story.get(o);u.tags.includes("Twine.image")&&(i.setAttribute("data-passage",u.title),o=u.text)}i.src=o,t.hasOwnProperty("title")&&(i.title=r.helpers.evalText(t.title)),t.hasOwnProperty("align")&&(i.align=t.align)}},{name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(jQuery(document.createElement("pre")).text(t[1]).appendTo(e.output),e.nextMatch=this.lookahead.lastIndex)}},{name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(e){switch(e.matchText){case"''":e.subWikify(jQuery(document.createElement("strong")).appendTo(e.output).get(0),"''");break;case"//":e.subWikify(jQuery(document.createElement("em")).appendTo(e.output).get(0),"//");break;case"__":e.subWikify(jQuery(document.createElement("u")).appendTo(e.output).get(0),"__");break;case"^^":e.subWikify(jQuery(document.createElement("sup")).appendTo(e.output).get(0),"\\^\\^");break;case"~~":e.subWikify(jQuery(document.createElement("sub")).appendTo(e.output).get(0),"~~");break;case"==":e.subWikify(jQuery(document.createElement("s")).appendTo(e.output).get(0),"==");break;case"{{{":var t=/\{\{\{((?:.|\n)*?)\}\}\}/gm;t.lastIndex=e.matchStart;var r=t.exec(e.source);r&&r.index===e.matchStart&&(jQuery(document.createElement("code")).text(r[1]).appendTo(e.output),e.nextMatch=t.lastIndex)}}},{name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRegExp:/\s*\n/gm,handler:function(e){var t=r.helpers.inlineCss(e);this.blockRegExp.lastIndex=e.nextMatch;var n=this.blockRegExp.exec(e.source),a=n&&n.index===e.nextMatch,i=jQuery(document.createElement(a?"div":"span")).appendTo(e.output);0===t.classes.length&&""===t.id&&0===Object.keys(t.styles).length?i.addClass("marked"):(t.classes.forEach(function(e){return i.addClass(e)}),""!==t.id&&i.attr("id",t.id),i.css(t.styles)),a?(e.nextMatch+=n[0].length,e.subWikify(i[0],"\\n?"+this.terminator)):e.subWikify(i[0],this.terminator)}},{name:"verbatimText",profiles:["core"],match:'"{3}|<nowiki>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<nowiki>((?:.|\n)*?)<\/nowiki>)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(jQuery(document.createElement("span")).addClass("verbatim").text(t[1]||t[2]).appendTo(e.output),e.nextMatch=this.lookahead.lastIndex)}},{name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<hr\\s*/?>\\n?",handler:function(e){jQuery(document.createElement("hr")).appendTo(e.output)}},{name:"emdash",profiles:["core"],match:"--",handler:function(e){jQuery(document.createTextNode("—")).appendTo(e.output)}},{name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(e){jQuery(document.createTextNode("$")).appendTo(e.output)}},{name:"nakedVariable",profiles:["core"],match:Patterns.variable+"(?:(?:\\."+Patterns.identifier+")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\["+Patterns.variable+"\\]))*",handler:function(e){var t=toStringOrDefault(r.getValue(e.matchText),null);null===t?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new r((Config.debug?new DebugView(e.output,"variable",e.matchText,e.matchText):e).output,t)}},{name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(e){return r.helpers.hasBlockContext(e.output.childNodes)?void e.subWikify(jQuery(document.createElement("h"+e.matchLength)).appendTo(e.output).get(0),this.terminator):void jQuery(e.output).append(document.createTextNode(e.matchText))}},{name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(e){if(!r.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));var t=jQuery(document.createElement("table")).appendTo(e.output).get(0),n=[],a=null,i=null,o=0,s=void 0;e.nextMatch=e.matchStart;do{this.lookahead.lastIndex=e.nextMatch;var u=this.lookahead.exec(e.source);if(s=u&&u.index===e.nextMatch){var l=u[2];"k"===l?(t.className=u[1],e.nextMatch+=u[0].length+1):(l!==a&&(a=l,i=jQuery(document.createElement(this.rowTypes[l])).appendTo(t)),"c"===a?(i.css("caption-side",0===o?"top":"bottom"),e.nextMatch+=1,e.subWikify(i[0],this.rowTerminator)):this.rowHandler(e,jQuery(document.createElement("tr")).appendTo(i).get(0),n),++o)}}while(s)},rowHandler:function(e,t,n){var a=this,i=new RegExp(this.cellPattern,"gm"),o=0,s=1,u=void 0;do{i.lastIndex=e.nextMatch;var l=i.exec(e.source);if(u=l&&l.index===e.nextMatch){if("~"===l[1]){var c=n[o];c&&(++c.rowCount,c.$element.attr("rowspan",c.rowCount).css("vertical-align","middle")),e.nextMatch=l.index+l[0].length-1}else if(">"===l[1])++s,e.nextMatch=l.index+l[0].length-1;else{if(l[2]){e.nextMatch=l.index+l[0].length;break}!function(){++e.nextMatch;for(var i=r.helpers.inlineCss(e),u=!1,l=!1,c=void 0;" "===e.source.substr(e.nextMatch,1);)u=!0,++e.nextMatch;"!"===e.source.substr(e.nextMatch,1)?(c=jQuery(document.createElement("th")).appendTo(t),++e.nextMatch):c=jQuery(document.createElement("td")).appendTo(t),n[o]={rowCount:1,$element:c},s>1&&(c.attr("colspan",s),s=1),e.subWikify(c[0],a.cellTerminator)," "===e.matchText.substr(e.matchText.length-2,1)&&(l=!0),i.classes.forEach(function(e){return c.addClass(e)}),""!==i.id&&c.attr("id",i.id),u&&l?i.styles["text-align"]="center":u?i.styles["text-align"]="right":l&&(i.styles["text-align"]="left"),c.css(i.styles),e.nextMatch=e.nextMatch-1}()}++o}}while(u)}},{name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(e){if(!r.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.nextMatch=e.matchStart;var t=[e.output],n=null,a=0,i=void 0,o=void 0;do{this.lookahead.lastIndex=e.nextMatch;var s=this.lookahead.exec(e.source);if(i=s&&s.index===e.nextMatch){var u=s[2]?"ol":"ul",l=s[0].length;if(e.nextMatch+=s[0].length,l>a)for(o=a;o<l;++o)t.push(jQuery(document.createElement(u)).appendTo(t[t.length-1]).get(0));else if(l<a)for(o=a;o>l;--o)t.pop();else l===a&&u!==n&&(t.pop(),t.push(jQuery(document.createElement(u)).appendTo(t[t.length-1]).get(0)));a=l,n=u,e.subWikify(jQuery(document.createElement("li")).appendTo(t[t.length-1]).get(0),this.terminator)}}while(i)}},{name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(e){return r.helpers.hasBlockContext(e.output.childNodes)?void e.subWikify(jQuery(document.createElement("blockquote")).appendTo(e.output).get(0),this.terminator):void jQuery(e.output).append(document.createTextNode(e.matchText))}},{name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(e){if(!r.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));var t=[e.output],n=0,a=e.matchLength,i=void 0,o=void 0;do{if(a>n)for(o=n;o<a;++o)t.push(jQuery(document.createElement("blockquote")).appendTo(t[t.length-1]).get(0));else if(a<n)for(o=n;o>a;--o)t.pop();n=a,e.subWikify(t[t.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(t[t.length-1]),this.lookahead.lastIndex=e.nextMatch;var s=this.lookahead.exec(e.source);i=s&&s.index===e.nextMatch,i&&(a=s[0].length,e.nextMatch+=s[0].length)}while(i)}},{name:"html",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(t[1]).appendTo(e.output))}},{name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:<!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex)}},{name:"lineContinuation",profiles:["core"],match:"\\\\"+Patterns.space+"*?(?:\\n|$)|(?:^|\\n)"+Patterns.space+"*?\\\\",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}},{name:"lineBreak",profiles:["core"],match:"\\n|<br\\s*/?>",handler:function(e){e.options.nobr||jQuery(document.createElement("br")).appendTo(e.output)}},{name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(e){jQuery(document.createDocumentFragment()).append(e.matchText).appendTo(e.output)}},{name:"htmlTag",profiles:["core"],match:"<\\w+(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>",tagPattern:"<(\\w+)",voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],nobrElements:["colgroup","datalist","dl","figure","ol","optgroup","select","table","tbody","tfoot","thead","tr","ul"],handler:function(e){var t=new RegExp(this.tagPattern).exec(e.matchText),r=t&&t[1],n=r&&r.toLowerCase();if(n){var a=this.voidElements.includes(n),i=this.nobrElements.includes(n),o=void 0,s=void 0;if(!a){o="<\\/"+n+"\\s*>";var u=new RegExp(o,"gim");u.lastIndex=e.matchStart,s=u.exec(e.source)}if(a||s){var l=e.output,c=document.createElement(e.output.tagName),d=void 0;for(c.innerHTML=e.matchText;c.firstChild;)c=c.firstChild;c.hasAttribute("data-passage")&&(this.processDataAttributes(c),Config.debug&&(d=new DebugView(e.output,"html-"+n,n,e.matchText),d.modes({block:"img"===n,nonvoid:s}),l=d.output)),s&&(e.subWikify(c,o,{ignoreTerminatorCase:!0,nobr:i}),d&&jQuery(c).find(".debug.block").length>0&&d.modes({block:!0})),l.appendChild(c)}else throwError(e.output,'HTML tag "'+r+'" is not closed',e.matchText+"…")}},processDataAttributes:function(e){var t=e.getAttribute("data-passage");if(null!=t){var n=r.helpers.evalPassageId(t);n!==t&&(t=n,e.setAttribute("data-passage",n)),""!==t&&("IMG"===e.tagName.toUpperCase()?"data:"!==t.slice(0,5)&&Story.has(t)&&(t=Story.get(t),t.tags.includes("Twine.image")&&(e.src=t.text.trim())):!function(){var r=e.getAttribute("data-setter"),n=void 0;null!=r&&(r=String(r).trim(),""!==r&&(n=function(e){return function(){return Scripting.evalJavaScript(e)}}(Scripting.parse(r)))),Story.has(t)?(e.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(t)&&e.classList.add("link-visited")):e.classList.add("link-broken"),jQuery(e).ariaClick({one:!0},function(){"function"==typeof n&&n.call(this),Engine.play(t)})}())}}}]}),r}(),Macro=function(){function e(t,r,a){if(Array.isArray(t))return void t.forEach(function(t){return e(t,r,a)});if(!p.test(t))throw new Error('invalid macro name "'+t+'"');if(n(t))throw new Error("cannot clobber existing macro <<"+t+">>");if(u(t))throw new Error("cannot clobber child tag <<"+t+">> of parent macro"+(1===d[t].length?"":"s")+" <<"+d[t].join(">>, <<")+">>");try{if("object"===("undefined"==typeof r?"undefined":_typeof(r)))c[t]=a?clone(r):r;else{if(!n(r))throw new Error("cannot create alias of nonexistent macro <<"+r+">>");c[t]=a?clone(c[r]):c[r]}Object.defineProperty(c,t,{writable:!1}),c[t]._MACRO_API=!0}catch(e){throw"TypeError"===e.name?new Error("cannot clobber protected macro <<"+t+">>"):new Error("unknown error when attempting to add macro <<"+t+">>: ["+e.name+"] "+e.message)}if(c[t].hasOwnProperty("tags"))if(null==c[t].tags)o(t);else{if(!Array.isArray(c[t].tags))throw new Error('bad value for "tags" property of macro <<'+t+">>");o(t,c[t].tags)}}function t(e){if(Array.isArray(e))return void e.forEach(function(e){return t(e)});if(n(e)){c[e].hasOwnProperty("tags")&&s(e);try{Object.defineProperty(c,e,{writable:!0}),delete c[e]}catch(t){throw new Error("unknown error removing macro <<"+e+">>: "+t.message)}}else if(u(e))throw new Error("cannot remove child tag <<"+e+">> of parent macro <<"+d[e]+">>")}function r(){return 0===Object.keys(c).length}function n(e){return c.hasOwnProperty(e)}function a(e){var t=null;return n(e)&&"function"==typeof c[e].handler?t=c[e]:macros.hasOwnProperty(e)&&"function"==typeof macros[e].handler&&(t=macros[e]),t}function i(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(c).forEach(function(t){"function"==typeof c[t][e]&&c[t][e](t)}),Object.keys(macros).forEach(function(t){"function"==typeof macros[t][e]&&macros[t][e](t)})}function o(e,t){if(!e)throw new Error("no parent specified");for(var r=["/"+e,"end"+e],a=[].concat(r,Array.isArray(t)?t:[]),i=0;i<a.length;++i){var o=a[i];if(n(o))throw new Error("cannot register tag for an existing macro");u(o)?d[o].includes(e)||(d[o].push(e),d[o].sort()):d[o]=[e]}}function s(e){if(!e)throw new Error("no parent specified");Object.keys(d).forEach(function(t){var r=d[t].indexOf(e);r!==-1&&(1===d[t].length?delete d[t]:d[t].splice(r,1))})}function u(e){return d.hasOwnProperty(e)}function l(e){return u(e)?d[e]:null}var c={},d={},p=new RegExp("^(?:"+Patterns.macroName+")$");return Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},isEmpty:{value:r},has:{value:n},get:{value:a},init:{value:i},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:o},unregister:{value:s},has:{value:u},get:{value:l}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var e=function(){function e(t){_classCallCheck(this,e);var r=Object.assign({parent:null,macro:null,name:"",args:null,payload:null,parser:null,source:""},t);if(null===r.macro||""===r.name||null===r.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{parent:{value:r.parent},self:{value:r.macro},name:{value:r.name},args:{value:r.args},payload:{value:r.payload},source:{value:r.source},parser:{value:r.parser
},_output:{value:r.parser.output},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(e,[{key:"contextHas",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return!0;return!1}},{key:"contextSelect",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return t;return null}},{key:"contextSelectAll",value:function(e){for(var t=[],r=this;null!==(r=r.parent);)e(r)&&t.push(r);return t}},{key:"createDebugView",value:function(e,t){return this._debugView=new DebugView(this._output,"macro",e?e:this.name,t?t:this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(e,t){return throwError(this._output,"<<"+this.name+">>: "+e,t?t:this.source)}},{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}}]),e}();return e}();!function(){function e(e,t,r,n){return function(){if(t||"function"==typeof r){var a=void 0;try{"undefined"!=typeof e&&(State.variables.hasOwnProperty("args")&&(a=State.variables.args),State.variables.args=e),t&&Wikifier.wikifyEval(t),"function"==typeof r&&r.call(this)}finally{"undefined"!=typeof e&&("undefined"!=typeof a?State.variables.args=a:delete State.variables.args)}}null!=n&&Engine.play(n)}}Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var e=new RegExp("State\\.(variables|temporary)\\.("+Patterns.identifier+")","g"),t=void 0;null!==(t=e.exec(this.args.full));){var r=State[t[1]],n=t[2];r.hasOwnProperty(n)&&delete r[n]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}for(var e=storage.get("remember")||{},t=new RegExp("State\\.variables\\.("+Patterns.identifier+")","g"),r=void 0;null!==(r=t.exec(this.args.full));){var n=r[1];e[n]=State.variables[n]}return storage.set("remember",e)?void(Config.debug&&this.debugView.modes({hidden:!0})):this.error("unknown error, cannot remember: "+this.args.raw)},init:function(){var e=storage.get("remember");e&&Object.keys(e).forEach(function(t){return State.variables[t]=e[t]})}}),Macro.add("forget",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var e=storage.get("remember"),t=new RegExp("State\\.variables\\.("+Patterns.identifier+")","g"),r=void 0,n=!1;null!==(r=t.exec(this.args.full));){var a=r[1];State.variables.hasOwnProperty(a)&&delete State.variables[a],e&&e.hasOwnProperty(a)&&(n=!0,delete e[a])}return n&&!storage.set("remember",e)?this.error("unknown error, cannot update remember store"):void(Config.debug&&this.debugView.modes({hidden:!0}))}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,e),Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>")}catch(e){return this.error("bad evaluation: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e),this.source+this.payload[0].contents+"<</"+this.name+">>")}e.hasChildNodes()&&this.output.appendChild(e)}}),Macro.add("display",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;if(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],!Story.has(e))return this.error('passage "'+e+'" does not exist');Config.debug&&this.debugView.modes({block:!0}),e=Story.get(e);var t=void 0;t=this.args[1]?jQuery(document.createElement(this.args[1])).addClass(e.domId+" macro-"+this.name).attr("data-passage",e.title).appendTo(this.output):jQuery(this.output),t.wiki(e.processText())}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var e=toStringOrDefault(Scripting.evalJavaScript(this.args.full),null);null!==e&&new Wikifier(this.output,"-"===this.name?Util.escape(e):e)}catch(e){return this.error("bad evaluation: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();if(new Wikifier(e,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({hidden:!0}),this.output.appendChild(e);else{var t=[].concat(_toConsumableArray(e.querySelectorAll(".error"))).map(function(e){return e.textContent});if(t.length>0)return this.error("error"+(1===t.length?"":"s")+" within contents ("+t.join("; ")+")",this.source+this.payload[0].contents+"<</"+this.name+">>")}}}),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],handler:function(){var e=0;try{for(var t=Scripting.evalJavaScript,r=this.payload.length,n=!1;e<r;++e){switch(this.payload[e].name){case"else":if(e+1!==r)return this.error("<<else>> must be the final clause");if(this.payload[e].args.raw.length>0)return/^\s*if\b/i.test(this.payload[e].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'+(e>0?" (#"+e+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: "+this.payload[e].args.raw);break;default:if(0===this.payload[e].args.full.length)return this.error("no conditional expression specified for <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":""));if(Config.macros.ifAssignmentError&&/[^!=&^|<>*\/%+-]=[^=]/.test(this.payload[e].args.full))return this.error("assignment operator found within <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":"")+" (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: "+this.payload[e].args.raw)}if(Config.debug&&this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1}),"else"===this.payload[e].name||t(this.payload[e].args.full)){n=!0,new Wikifier(this.output,this.payload[e].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++e;e<r;++e)this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!n,invalid:!n})}}catch(t){return this.error("bad conditional expression in <<"+(0===e?"if":"elseif")+">> clause"+(e>0?" (#"+e+")":"")+": "+("object"===("undefined"==typeof t?"undefined":_typeof(t))?t.message:t))}}}),Macro.add("switch",{skipArg0:!0,tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var e=this.payload.length,t=void 0;if(1===e)return this.error("no cases specified");try{t=Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}var r=this.debugView,n=1,a=!1;for(Config.debug&&r.modes({nonvoid:!1,hidden:!0});n<e;++n){switch(this.payload[n].name){case"default":if(n+1!==e)return this.error("<<default>> must be the final case");if(this.payload[n].args.length>0)return this.error("<<default>> does not accept values, invalid: "+this.payload[n].args.raw);break;default:if(0===this.payload[n].args.length)return this.error("no value(s) specified for <<"+this.payload[n].name+">> (#"+n+")")}if(Config.debug&&this.createDebugView(this.payload[n].name,this.payload[n].source).modes({nonvoid:!1}),"default"===this.payload[n].name||this.payload[n].args.some(function(e){return e===t})){a=!0,new Wikifier(this.output,this.payload[n].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++n;n<e;++n)this.createDebugView(this.payload[n].name,this.payload[n].source).modes({nonvoid:!1,hidden:!0,invalid:!0});r.modes({nonvoid:!1,hidden:!0,invalid:!a}),this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0,invalid:!a})}}}),Macro.add("for",{skipArgs:!0,tags:null,handler:function(){var e=Scripting.evalJavaScript,t=this.payload[0].contents.replace(/\n$/,""),r=void 0,n=this.args.full.trim(),a=void 0,i=!0,o=Config.macros.maxLoopIterations;if(0===n.length)n=!0;else if(n.indexOf(";")!==-1){var s=n.match(/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/);if(null===s)return this.error("invalid 3-part syntax, format: init ; condition ; post");r=s[1],n=s[2],a=s[3]}if("string"==typeof n){if(/^\S+\s+in\s+\S+/i.test(n))return this.error("invalid syntax, for…in is not supported");if(/^\S+\s+of\s+\S+/i.test(n))return this.error("invalid syntax, for…of is not supported")}Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,r)try{e(r)}catch(e){return this.error("bad init expression: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}for(;e(n);){if(--o<0)return this.error("exceeded configured maximum loop iterations ("+Config.macros.maxLoopIterations+")");if(new Wikifier(this.output,i?t.replace(/^\n/,""):t),i&&(i=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(a)try{e(a)}catch(e){return this.error("bad post expression: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}}}catch(e){return this.error("bad conditional expression: "+("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e))}finally{TempState.break=null}}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){return this.contextHas(function(e){return"for"===e.name})?(TempState.break="continue"===this.name?1:2,void(Config.debug&&this.debugView.modes({hidden:!0}))):this.error("must only be used in conjunction with its parent macro <<for>>")}}),Macro.add(["button","link"],{tags:null,handler:function(){var t=this;if(0===this.args.length)return this.error("no "+("button"===this.name?"button":"link")+" text specified");Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>");var r=jQuery(document.createElement("button"===this.name?"button":"a")),n=function(){var e=void 0;return State.variables.hasOwnProperty("args")&&t.contextHas(function(e){return e.self.isWidget})&&(e=State.variables.args),e}(),a=void 0;if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var i=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo(r);this.args[0].hasOwnProperty("passage")&&i.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&i.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&i.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(a=this.args[0].link),a=this.args[0].link}else r.append(document.createTextNode(this.args[0].text)),a=this.args[0].link;else r.wikiWithOptions({profile:"core"},this.args[0]),a=this.args.length>1?this.args[1]:undefined;null!=a?(r.attr("data-passage",a),Story.has(a)?(r.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(a)&&r.addClass("link-visited")):r.addClass("link-broken")):r.addClass("link-internal"),r.addClass("macro-"+this.name).ariaClick({namespace:".macros",one:null!=a},e(n,this.payload[0].contents.trim(),null,a)).appendTo(this.output)}}),Macro.add("checkbox",{handler:function(){if(this.args.length<3){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("unchecked value"),this.args.length<3&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.args[1],a=this.args[2],i=document.createElement("input");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"checkbox",tabindex:0}).addClass("macro-"+this.name).on("change",function(){Wikifier.setValue(t,this.checked?a:n)}).appendTo(this.output),this.args.length>3&&"checked"===this.args[3]?(i.checked=!0,Wikifier.setValue(t,a)):Wikifier.setValue(t,n)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{tags:null,handler:function(){var t=this;if(0===this.args.length)return this.error("no link text specified");Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>");var r=jQuery(document.createElement("a")),n=jQuery(document.createElement("span")),a=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),i=function(){var e=void 0;return State.variables.hasOwnProperty("args")&&t.contextHas(function(e){return e.self.isWidget})&&(e=State.variables.args),e}();r.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-"+this.name).ariaClick({namespace:".macros",one:!0},e(i,null,function(){if("linkreplace"===t.name?r.remove():r.wrap('<span class="macro-'+t.name+'"></span>').replaceWith(function(){return r.html()}),""!==t.payload[0].contents){var e=document.createDocumentFragment();new Wikifier(e,t.payload[0].contents),n.append(e)}a&&setTimeout(function(){return n.removeClass("macro-"+t.name+"-in")},Engine.minDomActionDelay)})).appendTo(this.output),n.addClass("macro-"+this.name+"-insert"),a&&n.addClass("macro-"+this.name+"-in"),"linkprepend"===this.name?n.insertBefore(r):n.insertAfter(r)}}),Macro.add("radiobutton",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.args[1],a=document.createElement("input");TempState.hasOwnProperty(this.name)||(TempState[this.name]={},TempState[this.name][r]=0),jQuery(a).attr({id:this.name+"-"+r+"-"+TempState[this.name][r]++,name:this.name+"-"+r,type:"radio",tabindex:0}).addClass("macro-"+this.name).on("change",function(){this.checked&&Wikifier.setValue(t,n)}).appendTo(this.output),this.args.length>2&&"checked"===this.args[2]&&(a.checked=!0,Wikifier.setValue(t,n))}}),Macro.add("textarea",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');Config.debug&&this.debugView.modes({block:!0});var r=Util.slugify(t),n=this.args[1],a="autofocus"===this.args[2],i=document.createElement("textarea");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,rows:4,tabindex:0}).addClass("macro-"+this.name).on("change",function(){Wikifier.setValue(t,this.value)}).appendTo(this.output),Wikifier.setValue(t,n),i.textContent=n,a&&(i.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+i.id]=function(e){setTimeout(function(){return i.focus()},Engine.minDomActionDelay),delete postdisplay[e]})}}),Macro.add("textbox",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');Config.debug&&this.debugView.modes({block:!0});var r=Util.slugify(t),n=this.args[1],a=document.createElement("input"),i=!1,o=void 0;this.args.length>3?(o=this.args[2],i="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?i=!0:o=this.args[2]),jQuery(a).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"text",tabindex:0}).addClass("macro-"+this.name).on("change",function(){Wikifier.setValue(t,this.value)}).on("keypress",function(e){13===e.which&&(e.preventDefault(),Wikifier.setValue(t,this.value),null!=o&&Engine.play(o))}).appendTo(this.output),Wikifier.setValue(t,n),a.value=n,i&&(a.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+a.id]=function(e){setTimeout(function(){return a.focus()},Engine.minDomActionDelay),delete postdisplay[e]})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){var e=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output);State.variables["#actions"]||(State.variables["#actions"]={});for(var t=0;t<this.args.length;++t){var r=void 0,n=void 0,a=void 0,i=void 0;"object"===_typeof(this.args[t])?this.args[t].isImage?(a=jQuery(document.createElement("img")).attr("src",this.args[t].source),this.args[t].hasOwnProperty("passage")&&a.attr("data-passage",this.args[t].passage),this.args[t].hasOwnProperty("title")&&a.attr("title",this.args[t].title),this.args[t].hasOwnProperty("align")&&a.attr("align",this.args[t].align),r=this.args[t].link,i=this.args[t].setFn):(n=this.args[t].text,r=this.args[t].link,i=this.args[t].setFn):n=r=this.args[t],State.variables["#actions"].hasOwnProperty(r)&&State.variables["#actions"][r]||jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo(e),r,null,function(e,t){return function(){State.variables["#actions"][e]=!0,"function"==typeof t&&t()}}(r,i))).addClass("macro-"+this.name).append(a||document.createTextNode(n))}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var e=-1,t=void 0,r=void 0,n=void 0;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(t=this.args[0].link)):1===this.args[0].count?t=this.args[0].link:(r=this.args[0].text,t=this.args[0].link):1===this.args.length&&(r=this.args[0])),null==t){for(var a=State.length-2;a>=0;--a)if(State.history[a].title!==State.passage){e=a,t=State.history[a].title;break}if(null==t&&"return"===this.name)for(var i=State.expired.length-1;i>=0;--i)if(State.expired[i]!==State.passage){t=State.expired[i];break}}else{if(!Story.has(t))return this.error('passage "'+t+'" does not exist');if("back"===this.name){for(var o=State.length-2;o>=0;--o)if(State.history[o].title===t){e=o;break}if(e===-1)return this.error('cannot find passage "'+t+'" in the current story history')}}if(null==t)return this.error("cannot find passage");var s=void 0;s="back"!==this.name||e!==-1?jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(t)}:function(){return Engine.goTo(e)}):jQuery(document.createElement("span")).addClass("link-disabled"),s.addClass("macro-"+this.name).append(n||document.createTextNode(r||L10n.get("macro"+this.name.toUpperFirst()+"Text"))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=State.passage,t=void 0,r=void 0,n=void 0,a=void 0;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),t=this.args[0].link,a=this.args[0].setFn):(r=this.args[0].text,t=this.args[0].link,a=this.args[0].setFn):r=t=this.args[0]:(t=this.args[0],r=this.args[1]),State.variables.hasOwnProperty("#choice")){if(State.variables["#choice"].hasOwnProperty(e)&&State.variables["#choice"][e])return void jQuery(document.createElement("span")).addClass("link-disabled macro-"+this.name).attr("tabindex",-1).append(n||document.createTextNode(r)).appendTo(this.output)}else State.variables["#choice"]={};jQuery(Wikifier.createInternalLink(this.output,t,null,function(){State.variables["#choice"][e]=!0,"function"==typeof a&&a()})).addClass("macro-"+this.name).append(n||document.createTextNode(r))}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("selector"),this.args.length<2&&e.push("class names"),this.error("no "+e.join(" or ")+" specified")}var t=jQuery(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'+this.args[0]+'"');switch(this.name){case"addclass":t.addClass(this.args[1].trim());break;case"toggleclass":t.toggleClass(this.args[1].trim())}}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void(this.args.length>1?e.removeClass(this.args[1].trim()):e.removeClass())}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void jQuery(this.output).append(e.html())}}),Macro.add(["append","prepend","replace"],{tags:null,handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');if(""!==this.payload[0].contents){var t=document.createDocumentFragment();switch(new Wikifier(t,this.payload[0].contents),this.name){case"replace":e.empty();case"append":e.append(t);break;case"prepend":e.prepend(t)}}else"replace"===this.name&&e.empty()}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void e.remove()}}),Has.audio?(Macro.add("audio",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("track ID"),this.args.length<2&&e.push("actions"),this.error("no "+e.join(" or ")+" specified")}var t=Macro.get("cacheaudio").tracks,r=[":all",":looped",":muted",":paused",":playing"],n=String(this.args[0]).trim();if(!r.includes(n)&&!t.hasOwnProperty(n))return this.error('track "'+n+'" does not exist');for(var a=this.args.slice(1),i=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=5,p=void 0,f=void 0;a.length>0;){var h=a.shift();switch(h){case"play":case"pause":case"stop":i=h;break;case"fadein":i="fade",c=1;break;case"fadeout":i="fade",c=0;break;case"fadeto":if(0===a.length)return this.error("fadeto missing required level value");if(i="fade",f=a.shift(),c=Number.parseFloat(f),Number.isNaN(c)||!Number.isFinite(c))return this.error("cannot parse fadeto: "+f);break;case"fadeoverto":if(a.length<2){var g=[];return a.length<1&&g.push("seconds"),a.length<2&&g.push("level"),this.error("fadeoverto missing required "+g.join(" and ")+" value"+(g.length>1?"s":""))}if(i="fade",f=a.shift(),d=Number.parseFloat(f),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse fadeoverto: "+f);if(f=a.shift(),c=Number.parseFloat(f),Number.isNaN(c)||!Number.isFinite(c))return this.error("cannot parse fadeoverto: "+f);break;case"volume":if(0===a.length)return this.error("volume missing required level value");if(f=a.shift(),o=Number.parseFloat(f),Number.isNaN(o)||!Number.isFinite(o))return this.error("cannot parse volume: "+f);break;case"mute":case"unmute":s="mute"===h;break;case"time":if(0===a.length)return this.error("time missing required seconds value");if(f=a.shift(),u=Number.parseFloat(f),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse time: "+f);break;case"loop":case"unloop":l="loop"===h;break;case"goto":if(0===a.length)return this.error("goto missing required passage title");if(f=a.shift(),p="object"===("undefined"==typeof f?"undefined":_typeof(f))?f.link:f,!Story.has(p))return this.error('passage "'+p+'" does not exist');break;default:return this.error("unknown action: "+h)}}var m=void 0;switch(n){case":all":m=Object.keys(t);break;case":looped":m=Object.keys(t).filter(function(e){return t[e].isLooped()});break;case":muted":m=Object.keys(t).filter(function(e){return t[e].isMuted()});break;case":paused":m=Object.keys(t).filter(function(e){return t[e].isPaused()});break;case":playing":m=Object.keys(t).filter(function(e){return t[e].isPlaying()});break;default:m=[n]}try{m.forEach(function(e){var r=t[e];switch(null!=o&&(r.volume=o),null!=u&&(r.time=u),null!=s&&(r.mute=s),null!=l&&(r.loop=l),null!=p&&r.one("end",function(){return Engine.play(p)}),i){case"play":r.play();break;case"pause":r.pause();break;case"stop":r.stop();break;case"fade":r.fadeWithDuration(d,c)}}),Config.debug&&this.createDebugView()}catch(e){return this.error("error executing audio action: "+e.message)}}}),Macro.add("cacheaudio",{tracks:{},handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("track ID"),this.args.length<2&&e.push("sources"),this.error("no "+e.join(" or ")+" specified")}var t=String(this.args[0]).trim(),r=/^:|\s/;if(r.test(t))return this.error('invalid track ID "'+t+'": track IDs may not start with a colon or contain whitespace');var n=/^format:\s*([\w-]+)\s*;\s*(\S.*)$/i,a=void 0;try{a=SimpleAudio.create(this.args.slice(1).map(function(e){var t=n.exec(e);return null===t?e:{format:t[1],src:t[2]}}))}catch(e){return this.error('error during track initialization for "'+t+'": '+e.message)}if(Config.debug&&!a.hasSource())return this.error('no supported audio sources found for "'+t+'"');var i=this.self.tracks;i.hasOwnProperty(t)&&i[t].destroy(),i[t]=a,Config.debug&&this.createDebugView()}}),Macro.add("createplaylist",{tags:["track"],lists:{},handler:function(){if(0===this.args.length)return this.error("no list ID specified");var e=Macro.get("playlist");if(null!==e.from&&"createplaylist"!==e.from)return this.error("a playlist has already been defined with <<setplaylist>>");var t=Macro.get("cacheaudio").tracks,r=String(this.args[0]).trim(),n=/^:|\s/;if(n.test(r))return this.error('invalid list ID "'+r+'": list IDs may not start with a colon or contain whitespace');if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var a=SimpleAudio.createList(),i=1,o=this.payload.length;i<o;++i){if(this.payload[i].args.length<2){var s=[];return this.payload[i].args.length<1&&s.push("track ID"),this.payload[i].args.length<2&&s.push("actions"),this.error("no "+s.join(" or ")+" specified")}var u=String(this.payload[i].args[0]).trim();if(!t.hasOwnProperty(u))return this.error('track "'+u+'" does not exist');for(var l=this.payload[i].args.slice(1),c=!1,d=void 0;l.length>0;){var p=l.shift(),f=void 0;switch(p){case"copy":c=!0;break;case"rate":l.length>0&&l.shift();break;case"volume":if(0===l.length)return this.error("volume missing required level value");if(f=l.shift(),d=Number.parseFloat(f),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse volume: "+f);break;default:return this.error("unknown action: "+p)}}var h=t[u];a.add({copy:c,track:h,volume:null!=d?d:h.volume}),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}var g=this.self.lists;g.hasOwnProperty(r)&&g[r].destroy(),g[r]=a,null===e.from&&(e.from="createplaylist"),this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var e=this.args.slice(0),t=!1,r=void 0,n=void 0;e.length>0;){var a=e.shift(),i=void 0;switch(a){case"stop":t=!0;break;case"mute":case"unmute":r="mute"===a;break;case"volume":if(0===e.length)return this.error("volume missing required level value");if(i=e.shift(),n=Number.parseFloat(i),Number.isNaN(n)||!Number.isFinite(n))return this.error("cannot parse volume: "+i);break;default:return this.error("unknown action: "+a)}}try{null!=r&&(SimpleAudio.mute=r),null!=n&&(SimpleAudio.volume=n),t&&SimpleAudio.stop(),Config.debug&&this.createDebugView()}catch(e){return this.error("error executing master audio action: "+e.message)}}}),Macro.add("playlist",{from:null,handler:function(){var e=this.self.from;if(null===e)return this.error("no playlists have been created");var t=void 0,r=void 0;if("createplaylist"===e){if(this.args.length<2){var n=[];return this.args.length<1&&n.push("list ID"),this.args.length<2&&n.push("actions"),this.error("no "+n.join(" or ")+" specified")}var a=Macro.get("createplaylist").lists,i=String(this.args[0]).trim();if(!a.hasOwnProperty(i))return this.error('playlist "'+i+'" does not exist');t=a[i],r=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");t=Macro.get("setplaylist").list,r=this.args.slice(0)}for(var o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0,p=5,f=void 0;r.length>0;){var h=r.shift();switch(h){case"play":case"pause":case"stop":case"skip":o=h;break;case"fadein":o="fade",d=1;break;case"fadeout":o="fade",d=0;break;case"fadeto":if(0===r.length)return this.error("fadeto missing required level value");if(o="fade",f=r.shift(),d=Number.parseFloat(f),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse fadeto: "+f);break;case"fadeoverto":if(r.length<2){var g=[];return r.length<1&&g.push("seconds"),r.length<2&&g.push("level"),this.error("fadeoverto missing required "+g.join(" and ")+" value"+(g.length>1?"s":""))}if(o="fade",f=r.shift(),p=Number.parseFloat(f),Number.isNaN(p)||!Number.isFinite(p))return this.error("cannot parse fadeoverto: "+f);if(f=r.shift(),d=Number.parseFloat(f),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse fadeoverto: "+f);break;case"volume":if(0===r.length)return this.error("volume missing required level value");if(f=r.shift(),s=Number.parseFloat(f),Number.isNaN(s)||!Number.isFinite(s))return this.error("cannot parse volume: "+f);break;case"mute":case"unmute":u="mute"===h;break;case"loop":case"unloop":l="loop"===h;break;case"shuffle":case"unshuffle":c="shuffle"===h;break;default:return this.error("unknown action: "+h)}}try{switch(null!=s&&(t.volume=s),null!=u&&(t.mute=u),null!=l&&(t.loop=l),null!=c&&(t.shuffle=c),o){case"play":t.play();break;case"pause":t.pause();break;case"stop":t.stop();break;case"skip":t.skip();break;case"fade":t.fadeWithDuration(p,d)}Config.debug&&this.createDebugView()}catch(e){return this.error("error playing audio: "+e.message)}}}),Macro.add("removeplaylist",{
handler:function(){if(0===this.args.length)return this.error("no list ID specified");var e=Macro.get("createplaylist").lists,t=String(this.args[0]).trim();return e.hasOwnProperty(t)?(e[t].destroy(),delete e[t],void(Config.debug&&this.createDebugView())):this.error('playlist "'+t+'" does not exist')}}),Macro.add("waitforaudio",{skipArgs:!0,queue:[],handler:function(){function e(){if(0===t.length)return LoadScreen.unlock();var r=t.shift();return r.hasData()?e():void r.one("canplay.waitforaudio error.waitforaudio",function(){jQuery(this).off(".waitforaudio"),e()}).load()}var t=this.self.queue;t.length>0||(this.self.fillQueue(t),t.length>0&&(LoadScreen.lock(),e()))},fillQueue:function(e){var t=Macro.get("cacheaudio").tracks;Object.keys(t).forEach(function(r){return e.push(t[r])});var r=Macro.get("createplaylist").lists;if(Object.keys(r).map(function(e){return r[e].tracks}).flatten().filter(function(e){return e.copy}).forEach(function(t){return e.push(t.track)}),Macro.has("setplaylist")){var n=Macro.get("setplaylist").list;null!==n&&n.tracks.forEach(function(t){return e.push(t.track)})}}}),Macro.add("setplaylist",{list:null,handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var e=Macro.get("playlist");if(null!==e.from&&"setplaylist"!==e.from)return this.error("playlists have already been defined with <<createplaylist>>");var t=this.self,r=Macro.get("cacheaudio").tracks;null!==t.list&&t.list.destroy(),t.list=SimpleAudio.createList();for(var n=0;n<this.args.length;++n){var a=this.args[n];if(!r.hasOwnProperty(a))return this.error('track "'+a+'" does not exist');t.list.add(r[a])}null===e.from&&(e.from="setplaylist"),Config.debug&&this.createDebugView()}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){var e=Macro.get("cacheaudio").tracks;Object.keys(e).forEach(function(t){return e[t].stop()}),Config.debug&&this.createDebugView()}})):Macro.add(["audio","cacheaudio","createplaylist","masteraudio","playlist","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){}}),Macro.add("goto",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;return e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(e)?void setTimeout(function(){return Engine.play(e)},Engine.minDomActionDelay):this.error('passage "'+e+'" does not exist')}}),Macro.add("timed",{tags:["next"],timers:new Set,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var e=[];try{e.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(e){return this.error(e.message+" in <<timed>>")}if(this.payload.length>1){var t=void 0;try{var r=void 0;for(t=1,r=this.payload.length;t<r;++t)e.push({name:this.payload[t].name,source:this.payload[t].source,delay:0===this.payload[t].args.length?e[e.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[t].args[0])),content:this.payload[t].contents})}catch(e){return this.error(e.message+" in <<next>> (#"+t+")")}}Config.debug&&this.debugView.modes({block:!0}),this.self.registerTimeout(jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output),e,this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]))},registerTimeout:function(e,t,r){var n=State.turns,a=this.timers,i=null,o=t.shift(),s=function s(){if(a.delete(i),n===State.turns){var u=o;null!=(o=t.shift())&&(i=setTimeout(s,o.delay),a.add(i));var l=document.createDocumentFragment();new Wikifier(l,u.content);var c=e;Config.debug&&"next"===u.name&&(c=jQuery(new DebugView(c[0],"macro",u.name,u.source).output)),r&&(c=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo(c)),c.append(l),r&&setTimeout(function(){return c.removeClass("macro-timed-in")},Engine.minDomActionDelay)}};i=setTimeout(s,o.delay),a.add(i),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(e){delete prehistory[e],a.forEach(function(e){return clearTimeout(e)}),a.clear()})}}),Macro.add("repeat",{tags:null,timers:new Set,handler:function(){if(0===this.args.length)return this.error("no time value specified");var e=void 0;try{e=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0}),this.self.registerInterval(jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output),this.payload[0].contents,e,this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]))},registerInterval:function(e,t,r,n){var a=State.turns,i=this.timers,o=null;o=setInterval(function(){if(a!==State.turns)return clearInterval(o),void i.delete(o);var r=void 0;try{!function(){TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(r=TempState.repeatTimerId),TempState.repeatTimerId=o;var a=document.createDocumentFragment();new Wikifier(a,t);var i=e;n&&(i=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo(i)),i.append(a),n&&setTimeout(function(){return i.removeClass("macro-repeat-in")},Engine.minDomActionDelay)}()}finally{"undefined"!=typeof r?TempState.repeatTimerId=r:delete TempState.repeatTimerId,TempState.break=null}},r),i.add(o),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(e){delete prehistory[e],i.forEach(function(e){return clearInterval(e)}),i.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var e=Macro.get("repeat").timers,t=TempState.repeatTimerId;clearInterval(t),e.delete(t),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var e=this.args[0];if(Macro.has(e)){if(!Macro.get(e).isWidget)return this.error('cannot clobber existing macro "'+e+'"');Macro.delete(e)}try{Macro.add(e,{isWidget:!0,handler:function(e){return function(){var t=this,r=void 0;try{var n=function(){State.variables.hasOwnProperty("args")&&(r=State.variables.args),State.variables.args=[];for(var n=0,a=t.args.length;n<a;++n)State.variables.args[n]=t.args[n];State.variables.args.raw=t.args.raw,State.variables.args.full=t.args.full;var i=document.createDocumentFragment(),o=[];return new Wikifier(i,e),Array.from(i.querySelectorAll(".error")).forEach(function(e){o.push(e.textContent)}),0!==o.length?{v:t.error("error"+(o.length>1?"s":"")+" within widget contents ("+o.join("; ")+")")}:void t.output.appendChild(i)}();if("object"===("undefined"==typeof n?"undefined":_typeof(n)))return n.v}catch(e){return this.error("cannot execute widget: "+e.message)}finally{"undefined"!=typeof r?State.variables.args=r:delete State.variables.args}}}(this.payload[0].contents)}),Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>")}catch(t){return this.error('cannot create widget macro "'+e+'": '+t.message)}}})}();var Dialog=function(){function e(){m=function(){var e=void 0;try{var t=document.createElement("p"),r=document.createElement("div");t.style.width="100%",t.style.height="200px",r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width="100px",r.style.height="100px",r.style.visibility="hidden",r.style.overflow="hidden",r.appendChild(t),document.body.appendChild(r);var n=t.offsetWidth;r.style.overflow="auto";var a=t.offsetWidth;n===a&&(a=r.clientWidth),document.body.removeChild(r),e=n-a}catch(e){}return e||17}();var e=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+('<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'+L10n.get("close")+'"></button>')+'</div><div id="ui-dialog-body"></div></div>');d=jQuery(e.find("#ui-overlay").get(0)),p=jQuery(e.find("#ui-dialog").get(0)),f=jQuery(e.find("#ui-dialog-title").get(0)),h=jQuery(e.find("#ui-dialog-body").get(0)),e.insertBefore("#store-area")}function t(e){return p.hasClass("open")&&(!e||e.splitOrEmpty(/\s+/).every(function(e){return h.hasClass(e)}))}function r(e,t){return h.empty().removeClass(),null!=t&&h.addClass(t),f.empty().append((null!=e?String(e):"")||" "),h.get(0)}function n(){return h.get(0)}function a(){var e;return(e=h).append.apply(e,arguments),Dialog}function i(){var e;return(e=h).wiki.apply(e,arguments),Dialog}function o(e,t,r,n,a){return jQuery(e).ariaClick(function(e){e.preventDefault(),"function"==typeof r&&r(e),s(t,a),"function"==typeof n&&n(e)})}function s(e,r){var n=jQuery.extend({top:50},e),a=n.top;t()||(g=safeActiveElement()),jQuery(document.documentElement).addClass("ui-dialog-open"),d.addClass("open"),null!==h[0].querySelector("img")&&h.imagesLoaded().always(function(){return l({data:{top:a}})}),jQuery("body>:not(script,#store-area,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0);var i=c(a);return p.css(i).addClass("open").focus(),jQuery(window).on("resize.ui-resize",null,{top:a},jQuery.throttle(40,l)),jQuery(document).on("click.ui-close",".ui-close",{closeFn:r},u).on("keypress.ui-close",".ui-close",function(e){13!==e.which&&32!==e.which||jQuery(this).trigger("click")}),setTimeout(function(){return jQuery.event.trigger("tw:dialogopened")},Engine.minDomActionDelay),Dialog}function u(e){return jQuery(document).off(".ui-close"),jQuery(window).off("resize.ui-resize"),p.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),f.empty(),h.empty().removeClass(),d.removeClass("open"),jQuery(document.documentElement).removeClass("ui-dialog-open"),null!==g&&(jQuery(g).focus(),g=null),e&&e.data&&"function"==typeof e.data.closeFn&&e.data.closeFn(e),setTimeout(function(){return jQuery.event.trigger("tw:dialogclosed")},Engine.minDomActionDelay),Dialog}function l(e){var t=e&&e.data&&"undefined"!=typeof e.data.top?e.data.top:50;"block"===p.css("display")&&(p.css({display:"none"}),p.css(jQuery.extend({display:""},c(t))))}function c(e){var t=null!=e?e:50,r=jQuery(window),n={left:"",right:"",top:"",bottom:""};p.css(n);var a=r.width()-p.outerWidth(!0)-1,i=r.height()-p.outerHeight(!0)-1;return a<=32+m&&(i-=m),i<=32+m&&(a-=m),a<=32?n.left=n.right=16:n.left=n.right=~~(a/2),i<=32?n.top=n.bottom=16:i/2>t?n.top=t:n.top=n.bottom=~~(i/2),Object.keys(n).forEach(function(e){""!==n[e]&&(n[e]+="px")}),n}var d=null,p=null,f=null,h=null,g=null,m=0;return Object.freeze(Object.defineProperties({},{init:{value:e},isOpen:{value:t},setup:{value:r},body:{value:n},append:{value:a},wiki:{value:i},addClickHandler:{value:o},open:{value:s},close:{value:u},resize:{value:function(){return l()}}}))}(),Engine=function(){function e(){if(Story.has("StoryInit"))try{var e=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var t=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");t.modes({hidden:!0}),t.append(e),h=t.output}}catch(e){Alert.error("StoryInit",e.message)}if(Config.history.maxStates=Math.max(0,Config.history.maxStates),Number.isSafeInteger(Config.history.maxStates)||(Config.history.maxStates=100),1===Config.history.maxStates&&(Config.history.controls=!1),Config.debug&&DebugView.init(),null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'+Config.passages.start+'") not found');if(State.restore())u();else{var r=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!1,UI.buildDialogAutoload(),UI.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(r=!Save.autosave.load())}r&&l(Config.passages.start)}}function t(){LoadScreen.show(),window.scroll(0,0),State.reset(),window.location.reload()}function r(){return p}function n(){return f}function a(e){var t=State.goTo(e);return t&&u(),t}function i(e){var t=State.go(e);return t&&u(),t}function o(){return i(-1)}function s(){return i(1)}function u(){return l(State.passage,!0)}function l(e,t){var r=e;p="playing",TempState={},State.clearTemporary();var n=void 0,a=void 0;if("function"==typeof Config.navigation.override)try{var i=Config.navigation.override(r);i&&(r=i)}catch(e){}var o=Story.get(r);if(Object.keys(prehistory).forEach(function(e){"function"==typeof prehistory[e]&&prehistory[e].call(this,e)},o),t||State.create(o.title),document.body.className&&(document.body.className=""),Object.keys(predisplay).forEach(function(e){"function"==typeof predisplay[e]&&predisplay[e].call(this,e)},o),Story.has("PassageReady"))try{n=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(e){Alert.error("PassageReady",e.message)}p="rendering";var s=jQuery(o.render()),u=document.getElementById("passages");if(u.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&""!==Config.transitionEndEventName?[].concat(_toConsumableArray(u.childNodes)).forEach(function(e){var t=jQuery(e);if(e.nodeType===Node.ELEMENT_NODE&&t.hasClass("passage")){if(t.hasClass("passage-out"))return;t.attr("id","out-"+t.attr("id")).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?t.on(Config.transitionEndEventName,function(e){e.originalEvent.propertyName===Config.passages.transitionOut&&t.remove()}):setTimeout(function(){return t.remove()},Math.max(d,Config.passages.transitionOut))}else t.remove()}):jQuery(u).empty()),s.addClass("passage-in").appendTo(u),setTimeout(function(){return s.removeClass("passage-in")},d),document.title=Config.passages.displayTitles&&o.title!==Config.passages.start?o.title+" | "+Story.title:Story.title,window.scroll(0,0),p="playing",Story.has("PassageDone"))try{a=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(e){Alert.error("PassageDone",e.message)}if(Object.keys(postdisplay).forEach(function(e){"function"==typeof postdisplay[e]&&postdisplay[e].call(this,e)},o),Config.ui.updateStoryElements&&UI.setStoryElements(),Config.debug){var l=void 0;null!=n&&(l=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady"),l.modes({hidden:!0}),l.append(n),s.prepend(l.output)),null!=a&&(l=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone"),l.modes({hidden:!0}),l.append(a),s.append(l.output)),1===State.turns&&null!=h&&s.prepend(h)}switch(f=Date.now(),UI.hideOutlines(),jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"string":o.tags.includes(Config.saves.autosave)&&Save.autosave.save();break;case"object":Array.isArray(Config.saves.autosave)&&o.tags.some(function(e){return Config.saves.autosave.includes(e)})&&Save.autosave.save()}return p="idle",s[0]}function c(e,t,r){var n=!1;switch(r){case undefined:break;case"replace":case"back":n=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'+r+'"; please notify the developer')}l(e,n)}var d=40,p="idle",f=null,h=null;return Object.freeze(Object.defineProperties({},{minDomActionDelay:{value:d},start:{value:e},restart:{value:t},state:{get:r},lastPlay:{get:n},goTo:{value:a},go:{value:i},backward:{value:o},forward:{value:s},show:{value:u},play:{value:l},display:{value:c}}))}(),Passage=function(){var e=void 0,t=void 0;e=/^(?:debug|nobr|passage|script|stylesheet|widget|twine\..*)$/i,!function(){var e=/(?:\\n|\\t|\\s|\\|\r)/g,r=new RegExp(e.source),n=Object.freeze({"\\n":"\n","\\t":"\t","\\s":"\\","\\":"\\","\r":""});t=function(t){if(null==t)return"";var a=String(t);return a&&r.test(a)?a.replace(e,function(e){return n[e]}):a}}();var r=function(){function r(t,n){var a=this;_classCallCheck(this,r),Object.defineProperties(this,{title:{value:Util.unescape(t)},element:{value:n||null},tags:{value:Object.freeze(n&&n.hasAttribute("tags")?n.getAttribute("tags").trim().splitOrEmpty(/\s+/).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-"+Util.slugify(this.title)},classes:{value:Object.freeze(0===this.tags.length?[]:function(){return a.tags.filter(function(t){return!e.test(t)}).map(function(e){return Util.slugify(e)})}())}})}return _createClass(r,[{key:"description",value:function(){var e=Config.passages.descriptions;if(null!=e)switch("undefined"==typeof e?"undefined":_typeof(e)){case"boolean":if(e)return this.title;break;case"object":if(e instanceof Map&&e.has(this.title))return e.get(this.title);if(e.hasOwnProperty(this.title))return e[this.title];break;case"function":var t=e.call(this);if(t)return t;break;default:throw new TypeError("Config.passages.descriptions must be a boolean, object, or function")}return null===this._excerpt&&(this._excerpt=r.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){var e=this.text;return this.tags.includes("nobr")&&(e=e.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),this.tags.includes("Twine.image")&&(e="[img["+e+"]]"),e}},{key:"render",value:function(){var e=this,t=document.createElement("div");return jQuery(t).attr({id:this.domId,"data-passage":this.title,"data-tags":this.tags.join(" ")}).addClass("passage "+this.className),jQuery(document.body).addClass(this.className),Object.keys(prerender).forEach(function(r){"function"==typeof prerender[r]&&prerender[r].call(e,t,r)}),Story.has("PassageHeader")&&new Wikifier(t,Story.get("PassageHeader").processText()),new Wikifier(t,this.processText()),Story.has("PassageFooter")&&new Wikifier(t,Story.get("PassageFooter").processText()),Object.keys(postrender).forEach(function(r){"function"==typeof postrender[r]&&postrender[r].call(e,t,r)}),this._excerpt=r.getExcerptFromNode(t),t}},{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var e=Util.escape(this.title);return'<span class="error" title="'+e+'">'+L10n.get("errorTitle")+": "+L10n.get("errorNonexistentPassage",{passage:e})+"</span>"}return t(this.element.textContent)}}],[{key:"getExcerptFromNode",value:function(e,t){if(!e.hasChildNodes())return"";var r=e.textContent.trim();if(""!==r){var n=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})");r=r.replace(/\s+/g," ").match(n)}return r?r[1]+"…":"…"}},{key:"getExcerptFromText",value:function(e,t){if(""===e)return"";var r=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})"),n=e.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*)(?:|[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(r);return n?n[1]+"…":"…"}}]),r}();return r}(),Save=function(){function e(){if("cookie"===storage.name)return n(),Config.saves.autosave=undefined,Config.saves.slots=0,!1;Config.saves.slots=Math.max(0,Config.saves.slots),Number.isSafeInteger(Config.saves.slots)||(Config.saves.slots=8);var e=r(),t=!1;Array.isArray(e)&&(e={autosave:null,slots:e},t=!0),Config.saves.slots!==e.slots.length&&(Config.saves.slots<e.slots.length?(e.slots.reverse(),e.slots=e.slots.filter(function(e){return!(null===e&&this.count>0)||(--this.count,!1)},{count:e.slots.length-Config.saves.slots}),e.slots.reverse()):Config.saves.slots>e.slots.length&&S(e.slots,Config.saves.slots-e.slots.length),t=!0),j(e.autosave)&&(t=!0);for(var a=0;a<e.slots.length;++a)j(e.slots[a])&&(t=!0);return x(e)&&(storage.delete("saves"),t=!1),t&&E(e),T=e.slots.length-1,!0}function t(){return{autosave:null,slots:S([],Config.saves.slots)}}function r(){var e=storage.get("saves");return null===e?t():e}function n(){return storage.delete("saves"),!0}function a(){return i()||d()}function i(){return"cookie"!==storage.name&&"undefined"!=typeof Config.saves.autosave}function o(){var e=r();return null!==e.autosave}function s(){var e=r();return e.autosave}function u(){var e=r();return null!==e.autosave&&O(e.autosave)}function l(e,t){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var n=r(),a={title:e||Story.get(State.passage).description(),date:Date.now()};return null!=t&&(a.metadata=t),n.autosave=C(a),E(n)}function c(){var e=r();return e.autosave=null,E(e)}function d(){return"cookie"!==storage.name&&T!==-1}function p(){return T+1}function f(){if(!d())return 0;for(var e=r(),t=0,n=0,a=e.slots.length;n<a;++n)null!==e.slots[n]&&++t;return t}function h(){return 0===f()}function g(e){if(e<0||e>T)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])}function m(e){if(e<0||e>T)return null;var t=r();return e>=t.slots.length?null:t.slots[e]}function v(e){if(e<0||e>T)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])&&O(t.slots[e])}function y(e,t,n){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return UI.alert(L10n.get("savesDisallowed")),!1;if(e<0||e>T)return!1;var a=r();if(e>=a.slots.length)return!1;var i={title:t||Story.get(State.passage).description(),date:Date.now()};return null!=n&&(i.metadata=n),a.slots[e]=C(i),E(a)}function b(e){if(e<0||e>T)return!1;var t=r();return!(e>=t.slots.length)&&(t.slots[e]=null,E(t))}function w(e,t){function r(){var e=new Date,t=e.getMonth()+1,r=e.getDate(),n=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),""+e.getFullYear()+t+r+"-"+n+a+i}if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return void UI.alert(L10n.get("savesDisallowed"));var n=null==e?Story.domId:Util.slugify(e),a=n+"-"+r()+".save",i=null==t?{}:{metadata:t},o=LZString.compressToBase64(JSON.stringify(C(i)));saveAs(new Blob([o],{type:"text/plain;charset=UTF-8"}),a)}function k(e){var t=e.target.files[0],r=new FileReader;jQuery(r).on("load",function(e){var r=e.currentTarget;if(r.result){var n=void 0;try{n=JSON.parse(/\.json$/i.test(t.name)||/^\{/.test(r.result)?r.result:LZString.decompressFromBase64(r.result))}catch(e){}O(n)}}),r.readAsText(t)}function S(e,t){for(var r=0;r<t;++r)e.push(null);return e}function x(e){for(var t=e.slots,r=!0,n=0,a=t.length;n<a;++n)if(null!==t[n]){r=!1;break}return null===e.autosave&&r}function E(e){return x(e)?(storage.delete("saves"),!0):storage.set("saves",e)}function j(e){if(null===e)return!1;var t=!1;return e.hasOwnProperty("state")&&e.state.hasOwnProperty("delta")&&e.state.hasOwnProperty("index")||(e.hasOwnProperty("data")?(delete e.mode,e.state={delta:State.deltaEncode(e.data)},delete e.data):e.state.hasOwnProperty("delta")?e.state.hasOwnProperty("index")||delete e.state.mode:(delete e.state.mode,e.state.delta=State.deltaEncode(e.state.history),delete e.state.history),e.state.index=e.state.delta.length-1,t=!0),e.state.hasOwnProperty("rseed")&&(e.state.seed=e.state.rseed,delete e.state.rseed,e.state.delta.forEach(function(e,t,r){r[t].hasOwnProperty("rcount")&&(r[t].pull=r[t].rcount,delete r[t].rcount)}),t=!0),(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired||e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired&&delete e.state.expired,(e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.expired=[],e.state.hasOwnProperty("unique")&&(e.state.expired.push(e.state.unique),delete e.state.unique),e.state.hasOwnProperty("last")&&(e.state.expired.push(e.state.last),delete e.state.last)),t=!0),t}function C(e){if(null!=e&&"object"!==("undefined"==typeof e?"undefined":_typeof(e)))throw new Error("supplemental parameter must be an object");var t=Object.assign({},e,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(t.version=Config.saves.version),"function"==typeof Config.saves.onSave&&Config.saves.onSave(t),t.state.delta=State.deltaEncode(t.state.history),delete t.state.history,t}function O(e){try{if(j(e),!e||!e.hasOwnProperty("id")||!e.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(e.state.history=State.deltaDecode(e.state.delta),delete e.state.delta,"function"==typeof Config.saves.onLoad&&Config.saves.onLoad(e),e.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(e.state),Engine.show()}catch(e){return UI.alert(e.message.toUpperFirst()+".</p><p>"+L10n.get("aborting")+"."),!1}return!0}var T=-1;return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:r},clear:{value:n},ok:{value:a},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:i},has:{value:o},get:{value:s},load:{value:u},save:{value:l},delete:{value:c}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:d},length:{get:p},isEmpty:{value:h},count:{value:f},has:{value:g},get:{value:m},load:{value:v},save:{value:y},delete:{value:b}}))},export:{value:w},import:{value:k}}))}(),Setting=function(){function e(){if(storage.has("options")){var e=storage.get("options");null!==e&&(window.SugarCube.settings=settings=Object.assign(t(),e)),r(),storage.delete("options")}n(),g.forEach(function(e){if(e.hasOwnProperty("onInit")){var t={name:e.name,value:settings[e.name],default:e.default};e.hasOwnProperty("list")&&(t.list=e.list),e.onInit.call(t)}})}function t(){return Object.create(null)}function r(){var e=t();return Object.keys(settings).length>0&&g.filter(function(e){return e.type!==m.Header&&settings[e.name]!==e.default}).forEach(function(t){return e[t.name]=settings[t.name]}),0===Object.keys(e).length?(storage.delete("settings"),!0):storage.set("settings",e)}function n(){var e=t(),r=storage.get("settings")||t();g.filter(function(e){return e.type!==m.Header}).forEach(function(t){return e[t.name]=t.default}),window.SugarCube.settings=settings=Object.assign(e,r)}function a(){return window.SugarCube.settings=settings=t(),storage.delete("settings"),!0}function i(e){if(0===arguments.length)a(),n();else{if(null==e||!p(e))throw new Error('nonexistent setting "'+e+'"');var t=f(e);t.type!==m.Header&&(settings[e]=t.default)}return r()}function o(e,t){g.forEach(e,t)}function s(e,t,r){if(arguments.length<3){var n=[];throw arguments.length<1&&n.push("type"),arguments.length<2&&n.push("name"),arguments.length<3&&n.push("definition"),new Error("missing parameters, no "+n.join(" or ")+" specified")}if("object"!==("undefined"==typeof r?"undefined":_typeof(r)))throw new TypeError("definition parameter must be an object");if(p(t))throw new Error('cannot clobber existing setting "'+t+'"');var a={type:e,name:t,label:null==r.label?"":String(r.label).trim()};switch(e){case m.Header:break;case m.Toggle:a.default=!!r.default;break;case m.List:if(!r.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(r.list))throw new TypeError("list must be an array");if(0===r.list.length)throw new Error("list must not be empty");if(a.list=Object.freeze(r.list),null==r.default)a.default=r.list[0];else{var i=r.list.indexOf(r.default);if(i===-1)throw new Error("list does not contain default");a.default=r.list[i]}break;default:throw new Error("unknown Setting type: "+e)}"function"==typeof r.onInit&&(a.onInit=Object.freeze(r.onInit)),"function"==typeof r.onChange&&(a.onChange=Object.freeze(r.onChange)),g.push(Object.freeze(a))}function u(e,t){s(m.Header,e,{label:t})}function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[m.Toggle].concat(t))}function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[m.List].concat(t))}function d(){return 0===g.length}function p(e){return g.some(function(t){return t.name===e})}function f(e){return g.find(function(t){return t.name===e})}function h(e){p(e)&&delete settings[e];for(var t=0;t<g.length;++t)if(g[t].name===e){g.splice(t,1),h(e);break}}var g=[],m=Object.freeze({Header:0,Toggle:1,List:2});return Object.freeze(Object.defineProperties({},{Types:{value:m},init:{value:e},create:{value:t},save:{value:r},load:{value:n},clear:{value:a},reset:{value:i},forEach:{value:o},add:{value:s},addHeader:{value:u},addToggle:{value:l},addList:{value:c},isEmpty:{value:d},has:{value:p},get:{value:f},delete:{value:h}}))}(),State=function(){function e(){session.delete("state"),L=[],Q=c(),I=-1,R=[],F=null===F?null:new PRNGWrapper(F.seed,!1)}function t(){if(session.has("state")){var e=session.get("state");return null!=e&&(n(e),!0)}return!1}function r(e){var t={index:I};return e?t.history=clone(L):t.delta=A(L),R.length>0&&(t.expired=[].concat(_toConsumableArray(R))),null!==F&&(t.seed=F.seed),t}function n(e,t){if(null==e)throw new Error("state object is null or undefined");if(!e.hasOwnProperty(t?"history":"delta")||0===e[t?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!e.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==F&&!e.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===F&&e.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");L=t?clone(e.history):_(e.delta),I=e.index,R=e.hasOwnProperty("expired")?[].concat(_toConsumableArray(e.expired)):[],e.hasOwnProperty("seed")&&(F.seed=e.seed),g(I)}function a(){return r(!0)}function i(e){return n(e,!0)}function o(){return R}function s(){return R.length+v()}function u(){return R.concat(L.slice(0,v()).map(function(e){return e.title}))}function l(e){return null!=e&&""!==e&&(!!R.includes(e)||!!L.slice(0,v()).some(function(t){return t.title===e}))}function c(e,t){return{title:null==e?"":String(e),variables:null==t?{}:clone(t)}}function d(){return Q}function p(){return I}function f(){return Q.title}function h(){return Q.variables}function g(e){if(null==e)throw new Error("moment activation attempted with null or undefined");switch("undefined"==typeof e?"undefined":_typeof(e)){case"object":Q=clone(e);break;case"number":if(b())throw new Error("moment activation attempted with index on empty history");if(e<0||e>=y())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, "+(y()-1)+"], got "+e);Q=clone(L[e]);break;default:throw new TypeError('moment activation attempted with a "'+("undefined"==typeof e?"undefined":_typeof(e))+'"; must be an object or valid history stack index')}return null!==F&&(F=PRNGWrapper.unmarshal({seed:F.seed,pull:Q.pull})),session.set("state",r()),jQuery.event.trigger("tw:historyupdate"),Q}function m(){return L}function v(){return I+1}function y(){return L.length}function b(){return 0===L.length}function w(){return L.length>0?L[I]:null}function k(){return L.length>0?L[L.length-1]:null}function S(){return L.length>0?L[0]:null}function x(e){return b()||e<0||e>I?null:L[e]}function E(e){if(b())return null;var t=1+(e?Math.abs(e):0);return t>v()?null:L[v()-t]}function j(e){if(b()||null==e||""===e)return!1;for(var t=I;t>=0;--t)if(L[t].title===e)return!0;return!1}function C(e){if(v()<y()&&L.splice(v(),y()-v()),L.push(c(e,Q.variables)),F&&(k().pull=F.pull),Config.history.maxStates>0)for(;y()>Config.history.maxStates;)R.push(L.shift().title);return I=y()-1,g(I),v()}function O(e){return!(null==e||e<0||e>=y()||e===I)&&(I=e,g(I),!0)}function T(e){return null!=e&&0!==e&&O(I+e);
}function A(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Util.diff(e[r-1],e[r]));return t}function _(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Util.patch(t[r-1],e[r]));return t}function P(e,t){if(!b()){var r=void 0;throw r="a script-tagged passage",new Error("State.initPRNG must be called during initialization, within either "+r+" or the StoryInit special passage")}F=new PRNGWrapper(e,t),Q.pull=F.pull}function D(){return F?F.random():Math.random()}function M(){V={},TempVariables=V}function N(){return V}var L=[],Q=c(),I=-1,R=[],F=null,V={};return Object.freeze(Object.defineProperties({},{reset:{value:e},restore:{value:t},marshalForSave:{value:a},unmarshalForSave:{value:i},expired:{get:o},turns:{get:s},passages:{get:u},hasPlayed:{value:l},active:{get:d},activeIndex:{get:p},passage:{get:f},variables:{get:h},history:{get:m},length:{get:v},size:{get:y},isEmpty:{value:b},current:{get:w},top:{get:k},bottom:{get:S},index:{value:x},peek:{value:E},has:{value:j},create:{value:C},goTo:{value:O},go:{value:T},deltaEncode:{value:A},deltaDecode:{value:_},initPRNG:{value:P},random:{value:D},clearTemporary:{value:M},temporary:{get:N},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Story=function(){function e(){if(Config.passages.start=function(){var e="";return""!==e?(Config.debug=!0,e):"Start"}(),jQuery("#store-area").children(':not([tags~="Twine.private"],[tags~="annotation"])').each(function(){var e=jQuery(this),t=new Passage(e.attr("tiddler"),this);t.tags.includes("stylesheet")?d.push(t):t.tags.includes("script")?p.push(t):t.tags.includes("widget")?f.push(t):c[t.title]=t}),!c.hasOwnProperty("StoryTitle"))throw new Error('cannot find the "StoryTitle" special passage');var e=document.createDocumentFragment();new Wikifier(e,c.StoryTitle.processText().trim()),r(e.textContent.trim()),Config.saves.id=Story.domId}function t(){for(var e=0;e<d.length;++e)addStyle(d[e].text);for(var t=0;t<p.length;++t)try{Scripting.evalJavaScript(p[t].text)}catch(e){Alert.error(p[t].title,"object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e)}for(var r=0;r<f.length;++r)try{Wikifier.wikifyEval(f[r].processText())}catch(e){Alert.error(f[r].title,"object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e)}}function r(e){if(null==e||""===e)throw new Error("story title cannot be null or empty");document.title=h=Util.unescape(e),m=Util.slugify(h)}function n(){return h}function a(){return m}function i(){return g}function o(e){var t="undefined"==typeof e?"undefined":_typeof(e);switch(t){case"number":case"string":var r=String(e);return c.hasOwnProperty(r);case"boolean":case"function":t="a "+t;break;case"undefined":break;default:t=null===e?"null":"an "+t}throw new TypeError("Story.has title parameter cannot be "+t)}function s(e){var t="undefined"==typeof e?"undefined":_typeof(e);switch(t){case"number":case"string":var r=String(e);return c.hasOwnProperty(r)?c[r]:new Passage(r||"(unknown)");case"boolean":case"function":t="a "+t;break;case"undefined":break;default:t=null===e?"null":"an "+t}throw new TypeError("Story.get title parameter cannot be "+t)}function u(e,t){for(var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",n=Object.keys(c),a=[],i=0;i<n.length;++i){var o=c[n[i]];if(o.hasOwnProperty(e))switch(_typeof(o[e])){case"undefined":break;case"object":for(var s=0,u=o[e].length;s<u;++s)if(o[e][s]==t){a.push(o);break}break;default:o[e]==t&&a.push(o)}}return a.sort(function(e,t){return e[r]==t[r]?0:e[r]<t[r]?-1:1}),a}function l(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof e)throw new Error("Story.lookupWith filter parameter must be a function");for(var r=Object.keys(c),n=[],a=0;a<r.length;++a){var i=c[r[a]];e(i)&&n.push(i)}return n.sort(function(e,r){return e[t]==r[t]?0:e[t]<r[t]?-1:1}),n}var c={},d=[],p=[],f=[],h="",g="",m="";return Object.freeze(Object.defineProperties({},{passages:{value:c},styles:{value:d},scripts:{value:p},widgets:{value:f},load:{value:e},init:{value:t},title:{get:n},domId:{get:a},ifId:{get:i},has:{value:o},get:{value:s},lookup:{value:u},lookupWith:{value:l}}))}(),UI=function(){function e(){jQuery("#init-no-js,#init-lacking").remove(),w=new StyleWrapper(function(){return jQuery(document.createElement("style")).attr({id:"style-outline-patch",type:"text/css"}).appendTo(document.head).get(0)}()),function(){var e=jQuery(document.createDocumentFragment()),t=L10n.get("uiBarToggle"),r=L10n.get("uiBarBackward"),n=L10n.get("uiBarJumpto"),a=L10n.get("uiBarForward");e.append('<div id="ui-bar"><div id="ui-bar-tray">'+('<button id="ui-bar-toggle" tabindex="0" title="'+t+'" aria-label="'+t+'"></button>')+'<div id="ui-bar-history">'+('<button id="history-backward" tabindex="0" title="'+r+'" aria-label="'+r+'"></button>')+('<button id="history-jumpto" tabindex="0" title="'+n+'" aria-label="'+n+'"></button>')+('<button id="history-forward" tabindex="0" title="'+a+'" aria-label="'+a+'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+('<li id="menu-item-saves"><a tabindex="0">'+L10n.get("savesTitle")+"</a></li>")+('<li id="menu-item-settings"><a tabindex="0">'+L10n.get("settingsTitle")+"</a></li>")+('<li id="menu-item-restart"><a tabindex="0">'+L10n.get("restartTitle")+"</a></li>")+('<li id="menu-item-share"><a tabindex="0">'+L10n.get("shareTitle")+"</a></li>")+'</ul></nav></div></div><div id="story" role="main"><div id="passages"></div></div>').insertBefore("#store-area")}(),jQuery(document).on("tw:historyupdate",function(e,t){return function(){e.prop("disabled",State.length<2),t.prop("disabled",State.length===State.size)}}(jQuery("#history-backward"),jQuery("#history-forward"))).on("mousedown.outline-handler keydown.outline-handler",function(e){switch(e.type){case"mousedown":i();break;case"keydown":o()}})}function t(){var e=jQuery("#ui-bar");("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&!function(){var t=jQuery(e).add("#story");t.addClass("no-transition"),e.addClass("stowed"),setTimeout(function(){return t.removeClass("no-transition")},Engine.minDomActionDelay)}(),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},function(){return e.toggleClass("stowed")}),Config.history.controls?(jQuery("#history-backward").prop("disabled",State.length<2).ariaClick({label:L10n.get("uiBarBackward")},function(){return Engine.backward()}),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},function(){return UI.jumpto()}):jQuery("#history-jumpto").remove(),jQuery("#history-forward").prop("disabled",State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},function(){return Engine.forward()})):jQuery("#ui-bar-history").remove(),setPageElement("story-title","StoryTitle",Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||a(),Dialog.addClickHandler("#menu-item-saves a",null,v).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():Dialog.addClickHandler("#menu-item-settings a",null,y).text(L10n.get("settingsTitle")),Dialog.addClickHandler("#menu-item-restart a",null,m).text(L10n.get("restartTitle")),Story.has("StoryShare")?Dialog.addClickHandler("#menu-item-share a",null,b).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove(),jQuery(document.documentElement).focus()}function r(){jQuery("#ui-bar").addClass("stow")}function n(){jQuery("#ui-bar").removeClass("stow")}function a(){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var e=document.getElementById("menu-story");null!==e&&(jQuery(e).empty(),Story.has("StoryMenu")&&s("StoryMenu",e))}function i(){w.set("*:focus{outline:none}")}function o(){w.clear()}function s(e,t){var r=t,n=Config.debug;Config.debug=!1;try{null==r&&(r=document.createElement("ul"));var a=document.createDocumentFragment();if(new Wikifier(a,Story.get(e).processText().trim()),a.hasChildNodes())for(var i=null;a.hasChildNodes();){var o=a.firstChild;o.nodeType!==Node.ELEMENT_NODE||"A"!==o.nodeName.toUpperCase()?(a.removeChild(o),null!==i&&(i=null)):(null===i&&(i=document.createElement("li"),r.appendChild(i)),i.appendChild(o))}}finally{Config.debug=n}return r}function u(e){jQuery(Dialog.setup("Alert","alert")).append("<p>"+e+'</p><ul class="buttons">'+('<li><button id="alert-ok" class="ui-close">'+L10n.get(["alertOk","ok"])+"</button></li>")+"</ul>");for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Dialog.open.apply(Dialog,r)}function l(){g(),Dialog.open.apply(Dialog,arguments)}function c(){m(),Dialog.open.apply(Dialog,arguments)}function d(){v(),Dialog.open.apply(Dialog,arguments)}function p(){y(),Dialog.open.apply(Dialog,arguments)}function f(){b(),Dialog.open.apply(Dialog,arguments)}function h(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>"+L10n.get("autoloadPrompt")+'</p><ul class="buttons">'+('<li><button id="autoload-ok" class="ui-close">'+L10n.get(["autoloadOk","ok"])+"</button></li>")+('<li><button id="autoload-cancel" class="ui-close">'+L10n.get(["autoloadCancel","cancel"])+"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",function(e){var t="autoload-ok"===e.target.id;jQuery(document).one("tw:dialogclosed",function(){t&&Save.autosave.load()||Engine.play(Config.passages.start)})}),!0}function g(){var e=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(e);for(var t=State.expired.length,r=State.size-1;r>=0;--r)if(r!==State.activeIndex){var n=Story.get(State.history[r].title);n&&n.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(e){return function(){return jQuery(document).one("tw:dialogclosed",function(){return Engine.goTo(e)})}}(r)).addClass("ui-close").text(L10n.get("jumptoTurn")+" "+(t+r+1)+": "+n.description())).appendTo(e)}e.hasChildNodes()||jQuery(e).append("<li><a><em>"+L10n.get("jumptoUnavailable")+"</em></a></li>")}function m(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>"+L10n.get("restartPrompt")+'</p><ul class="buttons">'+('<li><button id="restart-ok">'+L10n.get(["restartOk","ok"])+"</button></li>")+('<li><button id="restart-cancel" class="ui-close">'+L10n.get(["restartCancel","cancel"])+"</button></li>")+"</ul>").find("#restart-ok").ariaClick({one:!0},function(){jQuery(document).one("tw:dialogclosed",function(){return Engine.restart()}),Dialog.close()}),!0}function v(){function e(e,t,r,n){var a=jQuery(document.createElement("button")).attr("id","saves-"+e).html(r);return t&&a.addClass(t),n?a.ariaClick(n):a.prop("disabled",!0),jQuery(document.createElement("li")).append(a)}function t(){function e(e,t,r,n,a){var i=jQuery(document.createElement("button")).attr("id","saves-"+e+"-"+n).addClass(e).html(r);return t&&i.addClass(t),a?"auto"===n?i.ariaClick({label:r+" "+L10n.get("savesLabelAuto")},function(){return a()}):i.ariaClick({label:r+" "+L10n.get("savesLabelSlot")+" "+(n+1)},function(){return a(n)}):i.prop("disabled",!0),i}var t=Save.get(),r=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var n=jQuery(document.createElement("td")),a=jQuery(document.createElement("td")),i=jQuery(document.createElement("td")),o=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo(n),t.autosave?(a.append(e("load","ui-close",L10n.get("savesLabelLoad"),"auto",function(){jQuery(document).one("tw:dialogclosed",function(){return Save.autosave.load()})})),jQuery(document.createElement("div")).text(t.autosave.title).appendTo(i),jQuery(document.createElement("div")).addClass("datestamp").html(t.autosave.date?L10n.get("savesSavedOn")+" "+new Date(t.autosave.date).toLocaleString():L10n.get("savesSavedOn")+" <em>"+L10n.get("savesUnknownDate")+"</em>").appendTo(i),o.append(e("delete",null,L10n.get("savesLabelDelete"),"auto",function(){Save.autosave.delete(),v(),Dialog.resize()}))):(a.append(e("load",null,L10n.get("savesLabelLoad"),"auto")),jQuery(document.createElement("em")).text(L10n.get("savesEmptySlot")).appendTo(i),i.addClass("empty"),o.append(e("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append(n).append(a).append(i).append(o).appendTo(r)}for(var s=0,u=t.slots.length;s<u;++s){var l=jQuery(document.createElement("td")),c=jQuery(document.createElement("td")),d=jQuery(document.createElement("td")),p=jQuery(document.createElement("td"));l.append(document.createTextNode(s+1)),t.slots[s]?(c.append(e("load","ui-close",L10n.get("savesLabelLoad"),s,function(e){jQuery(document).one("tw:dialogclosed",function(){return Save.slots.load(e)})})),jQuery(document.createElement("div")).text(t.slots[s].title).appendTo(d),jQuery(document.createElement("div")).addClass("datestamp").html(t.slots[s].date?L10n.get("savesSavedOn")+" "+new Date(t.slots[s].date).toLocaleString():L10n.get("savesSavedOn")+" <em>"+L10n.get("savesUnknownDate")+"</em>").appendTo(d),p.append(e("delete",null,L10n.get("savesLabelDelete"),s,function(e){Save.slots.delete(e),v(),Dialog.resize()}))):(c.append(e("save","ui-close",L10n.get("savesLabelSave"),s,Save.slots.save)),jQuery(document.createElement("em")).text(L10n.get("savesEmptySlot")).appendTo(d),d.addClass("empty"),p.append(e("delete",null,L10n.get("savesLabelDelete"),s))),jQuery(document.createElement("tr")).append(l).append(c).append(d).append(p).appendTo(r)}return jQuery(document.createElement("table")).attr("id","saves-list").append(r)}var r=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),n=Save.ok();if(n&&r.append(t()),n||Has.fileAPI){var a=jQuery(document.createElement("ul")).addClass("buttons").appendTo(r);return Has.fileAPI&&(a.append(e("export","ui-close",L10n.get("savesLabelExport"),function(){return Save.export()})),a.append(e("import",null,L10n.get("savesLabelImport"),function(){return r.find("#saves-import-file").trigger("click")})),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",function(e){jQuery(document).one("tw:dialogclosed",function(){return Save.import(e)}),Dialog.close()}).appendTo(r)),n&&a.append(e("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),v(),Dialog.resize()}:null)),!0}return u(L10n.get("savesIncapable")),!1}function y(){var e=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach(function(t){if(t.type===Setting.Types.Header){var r=t.name,n=Util.slugify(r),a=jQuery(document.createElement("div")),i=jQuery(document.createElement("h2")),o=jQuery(document.createElement("p"));return a.attr("id","header-body-"+n).append(i).append(o).appendTo(e),i.attr("id","header-heading-"+n).wiki(r),void o.attr("id","header-label-"+n).wiki(t.label)}var s=t.name,u=Util.slugify(s),l=jQuery(document.createElement("div")),c=jQuery(document.createElement("label")),d=jQuery(document.createElement("div")),p=void 0;switch(l.attr("id","setting-body-"+u).append(c).append(d).appendTo(e),c.attr({id:"setting-label-"+u,for:"setting-control-"+u}).wiki(t.label),null==settings[s]&&(settings[s]=t.default),t.type){case Setting.Types.Toggle:p=jQuery(document.createElement("button")),settings[s]?p.addClass("enabled").text(L10n.get("settingsOn")):p.text(L10n.get("settingsOff")),p.ariaClick(function(){settings[s]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[s]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[s]=!0),Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:s,value:settings[s],default:t.default})});break;case Setting.Types.List:p=jQuery(document.createElement("select"));for(var f=0,h=t.list.length;f<h;++f)jQuery(document.createElement("option")).val(f).text(t.list[f]).appendTo(p);p.val(t.list.indexOf(settings[s])).attr("tabindex",0).on("change",function(){settings[s]=t.list[Number(this.value)],Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:s,value:settings[s],default:t.default,list:t.list})})}p.attr("id","setting-control-"+u).appendTo(d)}),e.append('<ul class="buttons">'+('<li><button id="settings-ok" class="ui-close">'+L10n.get(["settingsOk","ok"])+"</button></li>")+('<li><button id="settings-reset">'+L10n.get("settingsReset")+"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},function(){jQuery(document).one("tw:dialogclosed",function(){Setting.reset(),window.location.reload()}),Dialog.close()}),!0}function b(){return jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(s("StoryShare")),!0}var w=null;return Object.freeze(Object.defineProperties({},{init:{value:e},start:{value:t},stow:{value:r},unstow:{value:n},setStoryElements:{value:a},hideOutlines:{value:i},showOutlines:{value:o},assembleLinkList:{value:s},alert:{value:u},jumpto:{value:l},restart:{value:c},saves:{value:d},settings:{value:p},share:{value:f},buildAutoload:{value:h},buildJumpto:{value:g},buildRestart:{value:m},buildSaves:{value:v},buildSettings:{value:y},buildShare:{value:b},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:h},buildDialogJumpto:{value:g},buildDialogRestart:{value:m},buildDialogSaves:{value:v},buildDialogSettings:{value:y},buildDialogShare:{value:b},buildLinkListFromPassage:{value:s}}))}(),LoadScreen=function(){function e(){jQuery(document.documentElement).removeClass("init-loading")}function t(){jQuery(document.documentElement).addClass("init-loading")}function r(){a=!0,t()}function n(){a=!1,jQuery(document).trigger("readystatechange")}var a=!1;return jQuery(document).on("readystatechange.SugarCube",function(){if(!a){var e=jQuery(document.documentElement);"complete"===document.readyState?e.hasClass("init-loading")&&(Config.loadDelay>0?setTimeout(function(){return e.removeClass("init-loading")},Math.max(Engine.minDomActionDelay,Config.loadDelay)):e.removeClass("init-loading")):e.addClass("init-loading")}}),Object.freeze(Object.defineProperties({},{hide:{value:e},show:{value:t},lock:{value:r},unlock:{value:n}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:13,patch:0,prerelease:null,build:7722,date:new Date("2017-02-15T21:20:23.141Z"),extensions:{},toString:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.major+"."+this.minor+"."+this.patch+e+"+"+this.build},short:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.title+" (v"+this.major+"."+this.minor+"."+this.patch+e+")"},long:function(){return this.title+" v"+this.toString()+" ("+this.date.toUTCString()+")"}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery(function(){try{document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UI.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),UI.start(),window.SugarCube={Browser:Browser,Config:Config,Dialog:Dialog,DebugView:DebugView,Engine:Engine,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,Util:Util,Wikifier:Wikifier,macros:macros,session:session,settings:settings,setup:setup,storage:storage,version:version}}catch(e){return jQuery(document).off("readystatechange.SugarCube"),Alert.fatal(null,e.message,e)}})}(window,window.document,jQuery);}
	</script>
</body>
</html>
